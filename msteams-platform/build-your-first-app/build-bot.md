---
title: Начало работы — сборка бота
author: heath-hamilton
description: Быстро создайте бот Microsoft Teams с помощью microsoft Teams набор средств.
ms.author: lajanuar
localization_priority: Normal
ms.date: 11/04/2020
ms.topic: tutorial
ms.openlocfilehash: 5dfbfa05d2f1e36bbc14bd929cb2592303081522
ms.sourcegitcommit: 825abed2f8784d2bab7407ba7a4455ae17bbd28f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2021
ms.locfileid: "52020002"
---
# <a name="build-a-bot-for-microsoft-teams"></a>Создание бота для Microsoft Teams

В этом учебнике будет *построено* базовое бот-приложение. Бот выступает в качестве посредника между пользователями Teams и веб-службой. Люди могут общаться с ботом, чтобы быстро получить информацию или инициировать рабочий процесс и задачи, выполняемые вашей службой.

## <a name="your-assignment"></a>Назначение

На рабочем месте создано приложение Teams, которое использует [вкладки для](../build-your-first-app/build-personal-tab.md) получения важных контактных данных. Например, у коллег есть быстрый доступ к номеру телефона службы поддержки. Но вместо вызова, что делать, если люди могли связаться с помощью службы поддержки с помощью чат-бота? Ваш босс просит вас посмотреть, как быстро вы можете получить базовый разговорный бот и запуск в Teams.

## <a name="what-youll-learn"></a>Что вы узнаете

> [!div class="checklist"]
>
> * Создание проекта приложения и бота с помощью microsoft Teams набор средств для Visual Studio кода
> * Определение некоторых конфигураций приложений и строительных лесов, соответствующих ботам
> * Локальное хост-приложение
> * Настройка бота для Teams
> * Боковая загрузка и тестирование бота в Teams

## <a name="before-you-begin"></a>Прежде чем начать

Если еще нет, убедитесь, что вы понимаете и установите необходимые условия [для разработки Teams.](build-first-app-overview.md#get-prerequisites)

## <a name="1-create-your-app-project"></a>1. Создание проекта приложения

Программа Microsoft Teams набор средств позволяет настроить следующие компоненты для приложения:

* **Конфигурации приложений и леса, соответствующие** ботам
* **Бот,** автоматически зарегистрированный в службе Microsoft Azure Bot

> [!TIP]
> Если вы еще не создали проект приложения Teams, может [](../build-your-first-app/build-and-run.md) оказаться полезным выполнять эти инструкции, которые подробно объясняют проекты.

1. В Visual Studio коде выберите **Microsoft Teams** в левой панели действий и создайте новое приложение :::image type="icon" source="../assets/icons/vsc-toolkit.png"::: **Teams.**
1. При запросе впишитесь в учетную запись разработки Microsoft 365.
1. На экране **Добавить возможности** выберите **Bot** then **Next**.
1. Введите имя приложения Teams. (Это имя по умолчанию для вашего приложения, а также имя каталога проектов приложений на локальной машине.)
1. Перейдите **к Настройке бота** и **выберите Создать новый бот,** а затем создать **регистрацию бота.** В случае успешной работы новый бот будет иметь **зарегистрированный** статус.
1. Выберите **Готово** в нижней части экрана и выберите расположение для создания проекта.

## <a name="2-identify-relevant-app-project-components"></a>2. Определение соответствующих компонентов проекта приложения

Большая часть конфигураций приложений и строительных лесов создается автоматически при создании проекта с командной набор средств. Рассмотрим основные компоненты для создания бота.

### <a name="app-configurations"></a>Конфигурации приложений

Чтобы просмотреть или обновить конфигурации бота, выберите **App Studio** в наборе инструментов и перейдите к **ботам.**

### <a name="app-scaffolding"></a>Строительные леса приложений

Строительные леса приложений предоставляют файл, расположенный в корневом каталоге проекта, для обработки действий бота в Teams (например, как бот реагирует на определенные сообщения, такие как `botActivityHandler.js` "Hello").

## <a name="3-set-up-a-secure-tunnel-to-your-app"></a>3. Настройка безопасного туннеля в приложении

Для тестирования давайте разберем ваше приложение на локальном веб-сервере (порт 3978).

1. Если вы еще не сделали этого, установите [ngrok](https://ngrok.com/download).
1. В терминале запустите `ngrok http -host-header=rewrite 3978` .
1. Скопируйте URL-адрес HTTPS в выходе (например, ), так как `https://468b9ab725e9.ngrok.io` Teams требует подключений HTTPS.

С помощью этого URL-адреса Teams (для которой требуются подключения HTTPS) смогут пройдите туннель туда, где размещено ваше приложение (в `localhost` порту 3978).

## <a name="4-configure-your-bot"></a>4. Настройка бота

Чтобы использовать бот в Teams, необходимо зарегистрировать его в службе Azure Bot. К счастью для вас, это делается автоматически при настройках приложения с помощью набор средств.

Для получения и обработки сообщений пользователей (например, запросов), отправленных боту, необходимо указать адрес конечной точки. Как правило, URL-адрес выглядит `https://HOST_URL/api/messages` как . Это можно быстро настроить в наборе инструментов.

1. В Visual Studio коде выберите **Microsoft Teams** в левой панели действий и выберите Open Microsoft Teams :::image type="icon" source="../assets/icons/vsc-toolkit.png"::: **набор средств**.
1. Перейдите **к ботам > существующие регистрации** ботов и выберите бот, созданный во время установки.
1. В поле **адресов конечной точки** бота введите URL-адрес ngrok (например, ), где вы размещены бот и `https://468b9ab725e9.ngrok.io` приложение к `/api/messages` ней.<br/>
    :::image type="content" source="../assets/images/build-your-first-app/bot-config-endpoint-url.png" alt-text="На рисунке показывая, где можно настроить URL-адрес конечной точки бота в командной набор средств.":::

Ваш бот сможет отвечать на сообщения в Teams.

## <a name="5-build-and-run-your-app"></a>5. Сборка и запуск приложения

Вы настроили URL-адрес для хост-бота и настроили его для обработки сообщений. Пришло время, чтобы ваше приложение было запущено.

1. В терминале перейдите в корневой каталог проекта приложения и запустите `npm install` .
1. Запуск `npm start` .

В случае успеха вы увидите следующее сообщение, указывающее на то, что ваш бот прослушивает действия в `localhost` вашем :

`Bot/ME service listening at http://localhost:3978`

## <a name="6-sideload-your-bot-in-teams"></a>6. Боковой загрузки бота в Teams

При запуске бота его можно установить в Teams.

> [!TIP]
> Если вы еще не перегружали приложение Teams до и не могли решить проблемы, следуйте [этим инструкциям.](../build-your-first-app/build-and-run.md#4-sideload-your-app-in-teams)

1. В Visual Studio коде нажмите **клавишу F5,** чтобы запустить веб-клиент Teams.
1. В диалоговом окте установке приложения выберите **Добавить для меня**. (Можно добавить бот в канал или чат, но другим менее навязчиво тестировать бота в чате один на один.)

## <a name="7-test-your-bot"></a>7. Проверка бота

Теперь для интересной части: Давайте скажем "Hello" для вашего бота.

1. В окне составить отправьте `Hello` сообщение.

Бот отвечает следующим сообщением.

:::image type="content" source="../assets/images/build-your-first-app/contoso-chatbot.png" alt-text="Снимок экрана, на котором пользователь скажет &quot;Привет&quot; боту Teams и будет получать ответ.":::

## <a name="well-done"></a>Прекрасно

Поздравляем! У вас есть базовый бот Teams, который может общаться с пользователями один на один или в групповых настройках (каналы и чаты).

## <a name="troubleshooting"></a>Устранение неполадок

Следующие сведения могут помочь, если у вас были проблемы с завершением этого руководства.

### <a name="bot-isnt-connected-to-teams"></a>Бот не подключен к Teams

Если вы установили приложение, но бот не работает, убедитесь, что бот подключен к каналу [Teams службы ](https://docs.microsoft.com/azure/bot-service/channel-connect-teams?view=azure-bot-service-4.0&preserve-view=true)Azure Bot.

Важно понимать, что это не то же самое, что канал в Teams. В этом случае канал — это способ подключения службы Azure Bot к Teams или другому поддерживаемом приложению майкрософт или сторонних [коммуникаций.](https://docs.microsoft.com/azure/bot-service/bot-service-channels-reference?view=azure-bot-service-4.0&preserve-view=true)

## <a name="learn-more"></a>Подробнее

* [Узнайте, что еще могут сделать боты Teams с одним из наших образцов](https://github.com/microsoft/BotBuilder-Samples#teams-samples)
* [Основы беседы для ботов](../bots/how-to/conversations/conversation-basics.md)
* Следуйте [нашим рекомендациям по проектированию](../bots/design/bots.md) и создайте с помощью готовых к производству шаблонов [пользовательского](../concepts/design/design-teams-app-ui-templates.md) интерфейса для создания бесшовного интерфейса.
* [Проверка подлинности ботов в Teams](../bots/how-to/authentication/auth-flow-bot.md)
* [Microsoft Bot Framework](https://dev.botframework.com/)
* [Создание бота без инструментария](../resources/bot-v3/bots-create.md)
