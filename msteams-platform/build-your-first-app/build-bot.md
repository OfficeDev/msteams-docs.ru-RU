---
title: Начать работу - Построить бота
author: girliemac
description: Быстро создайте Microsoft Teams бота, используя Microsoft Teams набор средств.
ms.author: timura
ms.date: 04/14/2020
ms.topic: tutorial
ms.openlocfilehash: 2cbd90b293e8ac8343febc7b3d23278d5bb5bf82
ms.sourcegitcommit: 51e4a1464ea58c254ad6bd0317aca03ebf6bf1f6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2021
ms.locfileid: "52565888"
---
# <a name="create-your-first-bot-for-teams"></a>Создайте свой первый бот для Teams

Этот учебник научит вас строить базовое приложение бота. Бот выступает в качестве посредника между Teams пользователями и вашим веб-приложением или службой с разговорным интерфейсом. Люди могут общаться с ботом, чтобы быстро получить информацию или инициировать рабочие процессы и задачи, выполняемые вашим сервисом.

## <a name="what-youll-learn"></a>Чему вы научитесь

* Создайте проект приложения и бота, используя Microsoft Teams набор средств для Visual Studio Code.
* Поймите Teams приложений, отливных для ботов.
* Хост и запустить приложение локально с помощью локального решения туннелирования.
* Sideload и проверить бота в Teams.

## <a name="prerequisites"></a>Предварительные требования

Убедитесь, что вы понимаете, как настроить и построить простой Teams приложение. Для получения дополнительной [информации, см Microsoft Teams.](../build-your-first-app/build-and-run.md) 

## <a name="1-create-your-app-project"></a>1. Создание проекта приложения

Приложение Microsoft Teams набор средств вам настроить следующие компоненты для приложения: 

* **Конфигурации приложений и леса, имеющие** отношение к ботам.
* **Бот,** автоматически зарегистрированный в службе Microsoft Azure Bot.

**Создание проекта приложения**

1. В Visual Studio Code выберите **Microsoft Teams левой** :::image type="icon" source="../assets/icons/vsc-toolkit.png"::: стороне активности и **выберите Создать новое Teams приложение.**

    :::image type="content" source="../assets/images/build-your-first-app/vscode-teams-toolkit-bots-01.png" alt-text="Скриншот, показывающий, как создать приложение в Teams набор средств.":::

1. По запросу вопишитесь на свой аккаунт Microsoft 365 разработки. 
1. На экране проекта Select выберите ботов Conversation: 

    :::image type="content" source="../assets/images/build-your-first-app/vscode-teams-toolkit-bots-02.png" alt-text="Скриншот, показывающий, как создать нового бота в Teams набор средств.":::

1. На **экране проекта Configure** введите имя для бота. Это имя по умолчанию для вашего приложения, а также название каталога проекта приложения на локальной машине.
1. Выберите **Создать новый Бот**  >  **Создать Бот Регистрация,** как показано на следующем изображении:

    :::image type="content" source="../assets/images/build-your-first-app/vscode-teams-toolkit-bots-03.png" alt-text="Скриншот, показывающий именования нового бота в Teams набор средств.":::

    В случае успеха, ваш новый бот будет иметь статус **Зарегистрированный.** Теперь ваш бот автоматически регистрируется в Microsoft Azure Bot. 

    :::image type="content" source="../assets/images/build-your-first-app/vscode-teams-toolkit-bots-04.png" alt-text="Скриншот с регистрацией нового бота в Teams набор средств.":::

1. **Выберите** отделку в нижней части экрана и сохраните проект на вашей машине.  

## <a name="2-understand-your-app-project-components"></a>2. Понимание компонентов проекта приложения

Большая часть конфигураций приложений и строительных лесов настроены автоматически при создании проекта с помощью Teams набор средств. Рассмотрим основные компоненты для создания бота:

:::image type="content" source="../assets/images/build-your-first-app/vscode-teams-toolkit-bots-05.png" alt-text="Скриншот, показывающий эшафот проекта в Teams набор средств.":::

Если вы создали вкладку в другом учебнике, приложение леса для бота отличается. В отличие от вкладок, разработка ботов не требует создания каких-либо фронт-конечных веб-компонентов или использования Teams JavaScript SDK.  Вместо этого, леса использует [Microsoft Bot Framework](https://dev.botframework.com/), который является открытым исходным кодом SDK для создания интеллектуальных, корпоративного класса ботов, которые могут работать в Интернете, мобильный, и, конечно, Teams! 

Файл, `botActivityHandler.js` расположенный в корневом каталоге проекта, является Teams обработчиком, который обрабатывает действия ботов, например, как бот реагирует на определенные сообщения. Леса приложения предоставляют `botActivityHandler.js` файл, расположенный в корневом каталоге вашего проекта, является Teams обработчиком, который обрабатывает действия бота, такие как, как бот реагирует на определенные сообщения.

## <a name="3-securely-expose-your-localhost-to-the-internet"></a>3. Безопасно разоблачить ваш localhost в Интернете

Взгляните на `index.js` файл, который создает сервер HTTP и обрабатывает маршрутизацию, чтобы прослушивать входящие запросы на вашего бота. `/api/messages`URL-адрес конечной точки приложения для ответа на запросы клиентов: 

```JavaScript
server.post('/api/messages', (req, res) => { 
  adapter.processActivity(req, res, async (context) => { 
    await botActivityHandler.run(context); 
  }); 
}); 
```

Чтобы переставить запросы в логику бота, необходимо настроить общедоступный URL-адрес, `https://example.com/api/messages` например, вместо `https://localhost` . Поскольку ваше приложение работает от вашего локального хостинга в настоящее время, вы *должны туннель* сети.

Туннелирование является протоколом, который позволяет транспортировать данные по сети. И localhost туннелирования дает вам связь между вашей местной машины и удаленного соединения. Чтобы безопасно выставить ваш localhost в Интернете, мы рекомендуем вам использовать инструмент третьей стороны называется, **ngrok**. Это даст вам безопасный URL. 

1. Перейти к [ngrok.com и](https://ngrok.com/download) следовать инструкциям по установке и настройке ngrok в вашей среде. 
    
    Добавьте полный путь к ngrok.exe, установленному в системе ПЕРЕМЕННАЯ среда PATH. Точные шаги специфичны для оболочки, которую вы используете.

1.  После того как вы закончили настройку, откройте терминал и запустите `ngrok http -host-header=rewrite 3978` . 

    Теперь ngrok предоставляет вам общедоступный, безопасный URL, который направляется вашему локальному хостингу в порту 3978, так что скопируйте URL HTTPS, например, как `https://287a4f4223bc.ngrok.io` показано на скриншоте ниже, так как Teams требует подключения HTTPS: 

    :::image type="content" source="../assets/images/build-your-first-app/vscode-teams-toolkit-bots-ngrok-06.png" alt-text="Скриншот, показывающий туннелинг localhost с ngrok.":::

1. Зарегистрируйте URL-адрес в манифесте приложения. 

## <a name="4-register-your-bot-endpoint"></a>4. Зарегистрируйте конечную точку бота

Чтобы использовать бота в Teams, необходимо зарегистрировать его в службе Azure Bot. Это делается автоматически при настройке приложения с помощью Teams набор средств.

Вы все равно должны указать адрес конечной точки для получения и обработки сообщений пользователей или запросов, отправленных боту. Как правило, URL выглядит `https://HOST_URL/api/messages` как . Вы можете настроить это в наборе инструментов.

1. В Visual Studio Code, **открытые Microsoft Teams набор средств**.
1. Выберите **Bots**  >  **Существующие регистрации ботов** и выберите бота, созданного во время настройки. 
1. Например, **в поле адреса** бота введите URL ngrok, где вы раз размещения `https://287a4f4223bc.ngrok.io` бота и придаток `/api/messages` к нему:

    :::image type="content" source="../assets/images/build-your-first-app/vscode-teams-toolkit-bots-07.png" alt-text="Скриншот, показывающий, как туннель localhost с ngrok.":::

    Ваш бот сможет отвечать на сообщения в Teams, после правильной настройки конечной точки. 

## <a name="5-build-and-run-your-app"></a>5. Создание и запуск приложения

Вы настроили URL-адрес для размещения бота и настроили его для обработки сообщений. Пришло время, чтобы получить ваше приложение и работает.

1. В терминале перейдите в корневой каталог проекта приложения и `npm install` запустите.
1. Запуск `npm start` .

   В случае успеха, вы видите следующее сообщение, указывающее, что ваш бот слушает для деятельности на `localhost` вашем:

   `Bot/ME service listening at http://localhost:3978`

## <a name="6-sideload-your-bot-in-teams"></a>6. Sideload ваш бот в Teams

С вашим бот работает, вы можете установить его в Teams.

> [!TIP]
> Если вы еще не перегрузили приложение Teams и не затеяли проблемы, следуйте этим [инструкциям.](../build-your-first-app/build-and-run.md#4-sideload-your-app-in-teams)

1. В Visual Studio Code, выберите **F5** ключ для запуска Teams веб-клиента.
1. В диалоге установки приложения, **выберите Добавить для меня**. 

   > [!Note]
   > По умолчанию приложение добавляется к вашему сообщению 1:1 прямого чата, однако вы можете установить его в команду или чат, нажав на маленькую стрелку **рядом Добавить для меня**. В этом учебнике, давайте просто нажмите Добавить.

   :::image type="content" source="../assets/images/build-your-first-app/vscode-teams-toolkit-install-08.png" alt-text="Скриншот, показывающий туннелинг localhost с ngrok.":::

## <a name="7-test-your-bot"></a>7. Проверьте своего бота

Скажем " Привет" вашему боту.

* В поле для составления, отправить `Hello` сообщение.
    Ваш бот отвечает чем-то вроде следующего сообщения:

    :::image type="content" source="../assets/images/build-your-first-app/teams-client-bot.png" alt-text="Скриншот, показывающий, как пользователь говорит &quot;Привет&quot; Teams бота и получает ответ.":::

    Теперь вы создали базовый Teams, который может общаться с пользователями один на один или в групповых настройках (каналы и чаты) 🎉.

## <a name="troubleshoot-your-bot"></a>Устранение неполадок вашего бота

Следующая информация может помочь, если у вас были проблемы с завершением этого учебника.

### <a name="bot-isnt-connected-to-teams"></a>Бот не подключен к Teams


Если вы установили приложение, но бот не работает, убедитесь, что [бот подключен к каналу службы Azure Bot Teams *канал.*](/azure/bot-service/channel-connect-teams?view=azure-bot-service-4.0&preserve-view=true)

Важно понимать, что это не то же самое, что канал в Teams. В этом случае канал — это способ подключения службы Azure Bot к Teams или другому [поддерживаемому приложению microsoft или сторонних коммуникаций.](/azure/bot-service/bot-service-channels-reference?view=azure-bot-service-4.0&preserve-view=true)

## <a name="see-also"></a>См. также

* [Бот основы](../bots/bot-basics.md)
* [Создайте личную вкладку для Microsoft Teams](../build-your-first-app/build-personal-tab.md)
* [Посмотрите, Teams боты могут сделать с одним из наших образцов](https://github.com/microsoft/BotBuilder-Samples#teams-samples)
* [Основы беседы для ботов](../bots/how-to/conversations/conversation-basics.md)
* [Рекомендации по дизайну](../bots/design/bots.md) 
* [Готовые к производству шаблоны пользовательского интерфейса](../concepts/design/design-teams-app-ui-templates.md)
* [Бот аутентификации в Teams](../bots/how-to/authentication/auth-flow-bot.md)
* [Microsoft Bot Framework](https://dev.botframework.com/)
* [Создайте бота без инструментария](../resources/bot-v3/bots-create.md)

## <a name="next-step"></a>Следующий шаг

> [!div class="nextstepaction"]
> [Создание расширения для сообщений](../build-your-first-app/build-messaging-extension.md)
