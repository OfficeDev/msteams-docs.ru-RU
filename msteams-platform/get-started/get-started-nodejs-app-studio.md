---
title: Учебник . Создайте свое первое приложение с Node.js
description: Узнайте, как начать создание Microsoft Teams с помощью Node.js.
keywords: начало работы node.js nodejs App Studio
ms.topic: tutorial
ms.localizationpriority: medium
ms.custom: scenarios:getting-started; languages:JavaScript,Node.js
ms.openlocfilehash: 67cbc37e156b19f9e059f434a7dbfab4b9932256
ms.sourcegitcommit: fc9f906ea1316028d85b41959980b81f2c23ef2f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2021
ms.locfileid: "59157304"
---
# <a name="build-your-first-microsoft-teams-app-using-nodejs"></a>Создайте первое Microsoft Teams с помощью Node.js

В этом руководстве вы узнаете, как создать свое первое приложение Microsoft Teams с помощью Node.js. Кроме того, вы проходите по шагам: 

1. [Подготовка среды](#prepare-environment)
1. [Получить необходимые условия](#GetPrerequisites)
1. [Скачайте пример](#DownloadSample)
1. [Сборка и запуск примера](#BuildRun)
1. [Хост пример приложения](#HostSample)
1. [Обновление учетных данных для вашего хозяйского приложения](#updatecredentials)
1. [Настройка вкладки приложения](#ConfigureTheAppTab)

<a name="prepare-environment"></a>

[!include [prepare your environment](~/includes/prepare-environment.md)]

<a name="GetPrerequisites"></a>

### <a name="download-and-host-your-app"></a>Загрузка и хост-сайт приложения

Выполните следующие действия, чтобы скачать и провести простое приложение "Hello World" в Teams.

<a name="GetPrerequisites"></a>

## <a name="get-prerequisites"></a>Получить необходимые условия

Для завершения этого руководства необходимы следующие средства. Если их еще нет, их можно установить по этим ссылкам.

- [Git](https://git-scm.com/downloads)
- [Node.js и NPM](https://nodejs.org/)
- Получите любой текстовый редактор или IDE. Вы можете установить и [использовать Visual Studio Code](https://code.visualstudio.com/download) бесплатно.

Если вы видите варианты добавления , и path во время `git` `node` `npm` `code` установки, выберите параметры. 

Убедитесь, что эти средства доступны, запуская следующие средства в окне терминала:

> [!NOTE]
> Используйте окно терминала, которое наиболее удобно для вашей платформы. В этих примерах используется Bash (который входит в Git), но эти скрипты будут работать на большинстве платформ.

```bash
$ git --version
git version 2.19.0.windows.1

$ node -v
v8.9.3

$ npm -v
5.5.1

$ gulp -v
CLI version 2.3.0
Local version 4.0.2
```

У вас может быть другая версия этих приложений. Это не должно быть проблемой, за исключением глотка. Для глотка необходимо использовать версию 4.0.0 или более поздней версии.

Если у вас не установлена глоток (или установлена неправильная версия), делайте это сейчас, запуская `npm install gulp` в окне терминала.

Если установлена Visual Studio Code, вы можете проверить установку при запуске:

```bash
code --version
1.28.2
929bacba01ef658b873545e26034d1a8067445e9
```

Вы можете продолжать использовать это окно терминала для запуска команд, которые следуют в этом руководстве.

<a name="DownloadSample"></a>

## <a name="download-the-sample"></a>Скачайте пример

Мы предоставили простой [привет, мир!](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/app-hello-world/nodejs) пример, чтобы вы начали. В окне терминала запустите следующую команду, чтобы клонировать репозиторий образца на локальной машине:

```bash
git clone https://github.com/OfficeDev/Microsoft-Teams-Samples.git
```

> [!TIP]
> Вы можете [вилка](https://help.github.com/articles/fork-a-repo/) этого [репо,](https://github.com/OfficeDev/Microsoft-Teams-Samples) если вы хотите изменить и проверить изменения в вашем GitHub для будущей ссылки.

<a name="BuildRun"></a>

## <a name="build-and-run-the-sample"></a>Сборка и запуск примера

После клонирования репозитория запустите команду каталога изменений в терминале, чтобы изменить каталог на пример:

```bash
cd Microsoft-Teams-Samples/samples/app-hello-world/nodejs/
```

Чтобы создать образец, необходимо установить все его зависимости. Для этого запустите следующую команду:

```bash
npm install
```

Необходимо увидеть, как устанавливается куча зависимостей. После установки вы можете запустить приложение со следующей командой:

```bash
npm start
```

Когда приложение hello-world запускается, оно отображается `App started listening on port 3333` в окне терминала.

> [!NOTE]
> Если в вышеуказанном сообщении отображается другой номер порта, это потому, что у вас есть переменная среды ПОРТ. Вы можете продолжать использовать этот порт или изменить переменную среды на 3333.

На этом этапе можно открыть окно браузера и перейти к следующим URL-адресам, чтобы убедиться, что все URL-адреса приложений загружаются:

- `http://localhost:3333`
- `http://localhost:3333/hello`
- `http://localhost:3333/first`
- `http://localhost:3333/second`

<a name="HostSample"></a>

## <a name="deploy-your-sample-app"></a>Развертывание примера приложения

Помните, что приложения в Microsoft Teams являются веб-приложениями, которые обнажают одну или несколько возможностей. Чтобы платформа Teams загрузить приложение, ваше приложение должно быть доступно из Интернета. Чтобы сделать ваше приложение доступно из Интернета, необходимо *провести* ваше приложение.

Для локального тестирования можно запустить приложение на локальной машине и создать туннель к ней с помощью веб-конечной точки. [ngrok](https://ngrok.com) — это бесплатный инструмент, который позволяет делать именно это. С *помощью ngrok* вы можете получить такой веб-адрес, как `https://d0ac14a5.ngrok.io` (этот URL-адрес — только пример). Вы можете [скачать и установить](https://ngrok.com/download) *ngrok для* вашей среды. Убедитесь, что вы добавляете его в расположение в вашем `PATH` .

После установки можно открыть новое окно терминала и запустить следующую команду для создания туннеля. В примере используется порт 3333, поэтому не забудьте указать его здесь:

```bash
ngrok http 3333 -host-header=localhost:3333
```

*Ngrok* будет прослушивать запросы из Интернета и перенанастрает их в приложение, которое работает в порту 3333. Вы можете проверить, открыв браузер и загрузив страницу `https://d0ac14a5.ngrok.io/hello` привета приложения. Не забудьте использовать адрес переададки, *отображающийся ngrok* в сеансе консоли, а не этот URL-адрес.

> [!NOTE]
> Если вы использовали другой порт [](#build-and-run-the-sample) в сборке и на шаге выше, убедитесь, что для установки туннеля *ngrok* используется один и тот же номер порта.
> [!TIP]
> Неплохо запустить *ngrok* в другом окне терминала, чтобы не мешать приложению узла, которое впоследствии может быть необходимо остановить, перестроить и повторно запустить. Сеанс *ngrok* возвращает полезную информацию об отладке в этом окне.

Существует платная версия *ngrok,* которая позволяет настойчивые имена. Если вы используете бесплатную версию, приложение будет доступно только во время текущего сеанса на компьютере разработки. Если машина отключена или переходит в спящий режим, служба больше не будет доступна. Помните об этом при совместном использовании приложения для тестирования другими пользователями. Если вам придется перезапустить службу, она возвращает новый адрес, и вам придется обновить каждое место, которое использует этот адрес.

Обратите внимание на URL-адрес вашего приложения. Это потребуется позже, когда вы зарегистрируете приложение Teams с помощью студии приложения или портала разработчиков.

<a name="DeployToTeams"></a>

## <a name="deploy-your-app-to-microsoft-teams"></a>Развертывание приложения для Microsoft Teams

На данный момент у вас есть приложение, которое находится в Интернете, но вы еще не можете сказать Teams, где его искать, или даже то, что ваше приложение называется. Для этого необходимо создать пакет приложений. Это не более чем текстовый файл, содержащий манифест приложения и некоторые значки, которые Teams клиент будет использовать для правильного отображения и брендинга приложения. Вы можете вручную создать этот пакет приложений или использовать App Studio или Портал разработчиков, инструменты, которые работают в Teams, что упростит процесс регистрации приложения. App Studio и Портал разработчиков — это рекомендуемые способы создания и обновления пакета приложений.

Для любого метода потребуется следующее:

- URL-адрес, на котором ваше приложение можно найти в Интернете.
- Значки, Teams будут использовать для брендинга приложения. Пример поставляется с значками-местообнаружителями, расположенными в "src\static\images". App Studio также будет предоставлять значки по умолчанию, если это необходимо.

**Обновление пакета приложений**

# <a name="app-studio"></a>[App Studio](#tab/AS)

[!include [Use App Studio to configure the app package](~/includes/get-started/get-started-use-app-studio.md)]

# <a name="developer-portal"></a>[Портал разработчика](#tab/DP)

**Установка портала разработчиков (предварительный просмотр) в Teams**

1. Выберите **значок Apps** в нижней части левой панели и поиск **портала разработчиков.**

    <img width="430px" alt="Screenshot of TDP" src="~/assets/images/Screen1.png"/>

1. Выберите **портал разработчика** и выберите **Open**.

    <img width="430px" alt="Screenshot of TDP Open" src="~/assets/images/screen2.png"/>

1. Выберите вкладку Apps и **выберите Импорт существующего приложения.**

    <img width="430px" alt="Screenshot of import app in tdp" src="~/assets/images/screen3.png"/>

1. Выберите **Hello World** и выберите **Импорт**. Приложение **Hello World** импортируется на портале разработчиков. 

    Вы можете настроить приложение с помощью портала Teams разработчика. Манифест находится в статье Распределить. Манифест можно использовать для настройки возможностей, необходимых ресурсов и других важных атрибутов для приложения. Дополнительные сведения о настройке приложения с помощью портала разработчиков см. в Teams [портале разработчиков.](../concepts/build-and-test/teams-developer-portal.md)

    <img width="430px" alt="Screenshot of configure tdp" src="~/assets/images/Screen4.png"/>

---
<a name="updatecredentials"></a>

## <a name="update-the-credentials-for-your-hosted-app"></a>Обновление учетных данных для вашего хозяйского приложения

Пример приложения требует, чтобы следующие переменные среды были задаты значениям, которые вы сделали ранее:

```
MICROSOFT_APP_ID=<YOUR BOT'S APP ID>
MICROSOFT_APP_PASSWORD=<YOUR BOT'S PASSWORD>
WEBSITE_NODE_DEFAULT_VERSION=8.9.4
```

То, как это сделать, зависит от того, как вы хозяйили приложение. Важное значение в использовании переменных среды в том, что эти значения являются частью вашей среды : к ним можно получить доступ с помощью кода для вашего приложения, но они не подвергаются воздействию третьих лиц, которые могут изучить файлы, составляющие ваш сайт.

Если вы используете приложение с помощью ngrok, вам потребуется настроить некоторые локальные переменные среды. Существует множество способов, но проще всего, если вы используете Visual Studio Code, добавить конфигурацию [запуска:](https://code.visualstudio.com/Docs/editor/debugging#_launch-configurations)

``` 
{
    "type": "node",
    "request": "launch",
    "name": "Launch - Teams Debug",
    "program": "${workspaceRoot}/src/app.js",
    "cwd": "${workspaceFolder}/src",
    "env": {
        "BASE_URI": "https://yourNgrokURL.ngrok.io",
        "MICROSOFT_APP_ID": "00000000-0000-0000-0000-000000000000",
        "MICROSOFT_APP_PASSWORD": "yourBotAppPassword",
        "NODE_DEBUG": "botbuilder",
        "SUPPRESS_NO_CONFIG_WARNING": "y",
        "NODE_CONFIG_DIR": "../config"
    }
}
```

Где:

MICROSOFT_APP_ID и MICROSOFT_APP_PASSWORD является ID и пароль, соответственно, для вашего бота.
NODE_DEBUG покажите, что происходит в боте в консоли Visual Studio Code отлаживке.
NODE_CONFIG_DIR указывает на каталог в корне репозитория (по умолчанию при локальном запуске приложения он ищет его в папке SRC).

> [!Note]
> Если вы не остановили npm из более ранней в учебнике, вам потребуется выполнить, чтобы Visual Studio Code правильно подобрать переменные конфигурации `npm stop` запуска.

<a name="ConfigureTheAppTab"></a>

## <a name="configure-the-app-tab"></a>Настройка вкладки приложения

После установки приложения в команду необходимо настроить его для демонстрации контента. Перейдите к каналу в команде и нажмите кнопку **"+",** чтобы добавить новую вкладку. Затем можно выбрать `Hello World` из списка **Добавить вкладку.** Затем вам будет представлен диалоговое окно конфигурации. Этот диалоговое окно позволит выбрать вкладку, которая будет отображаться в этом канале. После выбора вкладки и нажмите **кнопку Сохранить,** вы увидите вкладку, загруженную `Hello World` выбранной вкладками:

<img width="430px" alt="Screenshot of configure" src="~/assets/images/samples-hello-world-tab-configure.png"/>

### <a name="test-your-bot-in-teams"></a>Проверьте бот в Teams

Теперь вы можете взаимодействовать с ботом в Teams. Выберите канал в команде, в которой вы зарегистрировали приложение, и введите, а затем `@your-bot-name` ваше сообщение. Это называется **\@ упоминанием**. Любое сообщение, отправленное боту, будет отправлено вам в качестве ответа:

<img width="450px" alt="Bot responses" src="~/assets/images/samples-hello-world-bot.png"/>

<a name="ComposeRichMessages"></a>

### <a name="test-your-messaging-extension"></a>Тестирование расширения обмена сообщениями

**Тестирование расширения обмена сообщениями**
1. Выберите три точки ниже входного окна в представлении беседы. Отображается меню с приложением **"Hello World".**
1. Выберите меню. Отображается набор случайных текстов. Вы можете выбрать один из случайных текстов, который вставляется в беседу.

    <img width="430px" alt="Messaging extension menu" src="~/assets/images/samples-hello-world-messaging-extensions-menu1.png" />

    <img width="430px" alt="Messaging extension result" src="~/assets/images/samples-hello-world-messaging-extensions-result1.png" />

1. Выберите один из случайных текстов, и в нижней части вы увидите карту, отформатированную и готовую к отправке с собственным сообщением:

    <img width="430px" alt="Messaging extension send" src="~/assets/images/samples-hello-world-messaging-extensions-send.png" />

 ## <a name="see-also"></a>См. также

* [Обзор учебников](code-samples.md)
* [Создание бота беседы](first-app-bot.md)
* [Создание расширения для обмена сообщениями](first-message-extension.md)
* [Примеры кода](https://github.com/OfficeDev/Microsoft-Teams-Samples)