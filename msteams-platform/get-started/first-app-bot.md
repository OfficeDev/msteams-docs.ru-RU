---
title: Начало работы — Создание первого чат-бота
author: adrianhall
description: Создание чат-бота для Microsoft Teams с помощью набора средств Teams.
ms.author: adhal
ms.date: 05/27/2021
ms.topic: quickstart
ms.openlocfilehash: a2f1ccfa6cc708d655f3b9a54062ee39e8be14bd
ms.sourcegitcommit: 33a43c61f27ae750776616b2cf90159455d8ba6c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/02/2021
ms.locfileid: "52721852"
---
# <a name="build-your-first-conversational-bot-for-microsoft-teams"></a>Создание первого чат-бота для Microsoft Teams

Чат-бот выступает в качестве посредника между пользователем Teams и веб-службой.  Пользователи могут общаться с ботом, чтобы быстро получить информацию, инициировать рабочие процессы или выполнить другие действия, предлагаемые веб-службой.  Это руководство содержит сведения о том, как создать, запустить и развернуть чат-бота для Teams.

## <a name="before-you-begin"></a>Подготовка к работе

Настройте среду разработки, установив [необходимые компоненты](prerequisites.md).

> [!div class="nextstepaction"]
> [Установка необходимых компонентов](prerequisites.md)

## <a name="create-your-project"></a>Создание проекта

Используйте набор средств Teams для создания своего первого проекта.

# <a name="visual-studio-code"></a>[Visual Studio Code](#tab/vscode)

1. Откройте Visual Studio Code.
1. Откройте набор средств Teams, выбрав значок Teams на боковой панели:

    :::image type="content" source="../assets/images/teams-toolkit-v2/sidebar-icon.png" alt-text="Значок Teams на боковой панели Visual Studio Code":::.

1. Выберите **Создать проект**.

   :::image type="content" source="../assets/images/teams-toolkit-v2/create-project.png" alt-text="Расположение ссылки &quot;Создать проект&quot; на боковой панели набора средств Teams":::.

1. Выберите **Создать приложение Teams**.

   :::image type="content" source="../assets/images/teams-toolkit-v2/create-new-project-intro.png" alt-text="Запуск мастера для создания нового проекта":::

1. На этапе **Выбор возможностей** выберите **Бот** и снимите флажок рядом с пунктом **Вкладка**. Нажмите кнопку **ОК**.

   :::image type="content" source="../assets/images/teams-toolkit-v2/create-project-capabilities-bot.png" alt-text="Снимок экрана: добавление возможностей в новое приложение.":::

1. На этапе **Регистрация бота** выберите **Создать новую регистрацию бота**.

   :::image type="content" source="../assets/images/teams-toolkit-v2/create-bot-registration.png" alt-text="Выбор создания новой регистрации бота":::

1. На этапе **Язык программирования** выберите **JavaScript**.

    :::image type="content" source="../assets/images/teams-toolkit-v2/create-project-programming-languages.png" alt-text="Снимок экрана: выбор языка.":::

1. Выберите папку рабочей области.  В папке рабочей области будет создана папка для создаваемого проекта.

1. Введите подходящее имя для приложения, например `helloworld`.  Имя приложения должно состоять только из букв и цифр.  Чтобы продолжить, нажмите клавишу **ВВОД**.

Создание приложения Teams займет несколько секунд.

# <a name="command-line"></a>[Командная строка](#tab/cli)

Используйте для создания первого проекта интерфейс командной строки `teamsfx`.  Начните с папки, в которой будет создана папка проекта.

``` bash
teamsfx new
```

Интерфейс командной строки выдаст несколько вопросов, ответы на которые используются для создания проекта.  Каждый вопрос сопровождается подсказкой о том, как на него отвечать (например, использовать клавиши со стрелками для выбора варианта).  Ответив на вопрос, подтвердите свой выбор, нажав клавишу **ВВОД**.

1. Выберите **Создать приложение Teams**.
1. Выберите возможность **Бот** и снимите флажок рядом с возможностью **Вкладка**.
1. Выберите **Создать новую регистрацию бота**.
1. Выберите **JavaScript** в качестве языка.
1. Нажмите клавишу **ВВОД**, чтобы выбрать папку рабочей области по умолчанию.
1. Введите подходящее имя для приложения, например `helloworld`.  Имя приложения должно состоять только из букв и цифр.

После того, как вы ответите на все вопросы, будет создан проект.

---

## <a name="take-a-tour-of-the-source-code"></a>Знакомство с исходным кодом

Если вы хотите пропустить этот раздел, вы можете [запустить приложение локально](#run-your-app-locally).

Расширение для сообщений использует [Bot Framework](https://docs.botframework.com), чтобы дать пользователю возможность взаимодействовать со службой посредством общения.  После генерации кода проект будет выглядеть следующим образом:

:::image type="content" source="../assets/images/teams-toolkit-v2/bot-file-layout.png" alt-text="Макет файла проекта бота.":::

Код бота хранится в каталоге `bot`.  `bots/teamsBot.js` — основная точка входа для бота. Диалоги хранятся в каталоге `dialogs`.

> [!Tip]
> Перед интеграцией своего первого бота в Teams ознакомьтесь с чат-ботами за пределами Teams.  Дополнительные сведения о ботах см. в руководстве [Служба Azure Bot](/azure/bot-service/bot-builder-basics?view=azure-bot-service-4.0&preserve-view=true).

## <a name="run-your-app-locally"></a>Локальный запуск приложения

Набор средств Teams позволяет размещать приложение локально.  Для этого:

- Приложение Azure Active Directory регистрируется в клиенте M365.
- Манифест приложения отправляется в Центр разработчиков для Teams.
- API запускается локально с помощью Azure Functions Core Tools для поддержки приложения.
- [ngrok](https://ngrok.io) устанавливается и используется для обеспечения туннеля между Teams и кодом бота.

Чтобы создать и запустить приложение локально, выполните следующие действия.

1. В Visual Studio Code нажмите клавишу **F5**, чтобы запустить приложение в режиме отладки.

   > При первом запуске приложения произойдет загрузка всех зависимостей и сборка приложения.  По завершении сборки автоматически откроется окно браузера.  Для завершения может потребоваться от 3 до 5 минут.

1. Веб-браузер начинает запускать приложение. Если вам будет предложено открыть Teams рабочий стол, выберите **Отмена,** чтобы оставаться в браузере. Вам также может быть предложено перейти на рабочий Teams в другое время; выберите Teams веб-приложение, когда это произойдет.

   :::image type="content" source="../assets/images/teams-toolkit-v2/launch-web-browser-and-pick-webapp.png" alt-text="Снимок экрана: выбор веб-версии Teams при запуске":::

1. Вам может быть предложено выполнить вход.  В этом случае войдите с учетной записью M365.
1. При появлении запроса на установку приложения в Teams нажмите кнопку **Добавить**.

После загрузки приложения запустится сеанс общения с ботом.  Вы можете ввести `intro`, чтобы просмотреть ознакомительную карточку, и `show`, чтобы просмотреть свои данные в Microsoft Graph.  (Для этого потребуется утверждение дополнительных разрешений).

Отладка работает надлежащим образом — попробуйте сами! Откройте файл `bot/dialogs/rootDialog.js` и найдите метод `triggerCommand(...)`.  Задайте точку останова для варианта по умолчанию.  Затем введите какой-нибудь текст.

<!-- markdownlint-disable MD033 -->
<details>
<summary>Узнайте, что происходит при локальном запуске приложения в отладчике.</summary>

При нажатии клавиши F5 набор средств Teams:

1. Зарегистрировал приложение в Azure Active Directory.
1. Зарегистрировал приложение для установки неопубликованных приложений в Microsoft Teams.
1. Запустил серверную часть приложения локально с помощью [Azure Functions Core Tools](/azure/azure-functions/functions-run-local?#start).
1. Запустил туннель ngrok, чтобы обеспечить взаимодействие Teams с вашим приложением.
1. Запустил Microsoft Teams с помощью команды, обеспечивающей установку неопубликованного приложения в Teams.

</details>

<!-- markdownlint-disable MD033 -->
<details>
<summary>Узнайте, как устранить распространенные проблемы при локальном запуске приложения.</summary>

Чтобы запустить приложение в Teams, у вас должна быть учетная запись разработчика Microsoft 365, позволяющая устанавливать неопубликованные приложения. Дополнительные сведения о создании учетной записи см. в разделе [Необходимые компоненты](prerequisites.md#enable-sideloading).

> [!TIP]
> Перед установкой неопубликованного приложения проверьте наличие проблем с помощью [средства проверки приложений](https://dev.teams.microsoft.com/appvalidation.html), которое входит в набор средств. Исправьте ошибки, чтобы успешно установить неопубликованное приложение.
</details>

[!INCLUDE [Provision and Deploy your app on Azure](~/includes/get-started/azure-provisioning-instructions.md)]

<!-- markdownlint-disable MD033 -->

<details>
<summary>Узнайте, что происходит после развертывания приложения в Azure</summary>

До развертывания приложение работает локально:

1. Серверная часть работает с использованием _Azure Functions Core Tools_.
1. Конечная точка HTTP приложения, в которую Microsoft Teams загружает приложение, работает локально.

Развертывание включает подготовку ресурсов для активной подписки Azure и развертывание (загрузку) внутреннего и внешнего кода приложения в Azure. Серверная часть использует различные службы Azure, включая службу приложений Azure и службу Azure Bot.

</details>

## <a name="next-steps"></a>Дальнейшие действия

Узнайте о других методах создания приложений Teams:

- [Создание приложения Teams с помощью React](first-app-react.md)
- [Создание приложения Teams с помощью Blazor](first-app-blazor.md)
- [Создание приложения Teams в качестве веб-части SharePoint](first-app-spfx.md) (Azure не требуется)
- [Создание расширения для обмена сообщениями](first-message-extension.md)
