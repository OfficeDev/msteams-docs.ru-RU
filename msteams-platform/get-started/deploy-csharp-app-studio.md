---
title: Развертывание первого приложения с C# в App Studio
description: Узнайте, как развертывать Microsoft Teams приложения с C# или .NET. в App Studio
keywords: начало работы .net c# csharp app studio
ms.custom: scenarios:getting-started; languages:ASP.NET,C#
ms.localizationpriority: medium
ms.topic: tutorial
ms.date: 11/09/2018
ms.openlocfilehash: 08afc6a5d83d49f1fa6c2543f8a0ee4e001a3dc4
ms.sourcegitcommit: 22c9e44437720d30c992a4a3626a2a9f745983c1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2021
ms.locfileid: "60721840"
---
# <a name="update-c-app-package-in-app-studio"></a>Обновление C# пакета приложений в App Studio

> [!TIP]
> **Попробуйте портал разработчика**: App Studio эволюционировала. Настройка, распространение и управление Teams приложениями с помощью нового [портала разработчиков.](https://dev.teams.microsoft.com/)

App Studio — это Teams приложение, которое можно установить из Teams магазина. Это упрощает создание и регистрацию приложения.

Выполните следующие действия по обновлению пакета приложений:

1. Чтобы установить App Studio в Teams, выберите значок **Apps** в нижней части левой панели и выберите **App Studio:**

    <img  width="450px" alt="Finding App Studio in the Store View" src="~/assets/images/get-started/searchforAppStudio.png"/>

1. Выберите **плитку App Studio** и **установите**. Установлена App Studio:

    <img  width="450px" alt="Installing App Studio" src="~/assets/images/get-started/InstallingAppStudio.png"/>

1. Чтобы создать пакет приложений для Teams, выберите вкладку **Редактор Манифеста** в **App Studio:**

    <img  width="450px" alt="App Studio" src="~/assets/images/get-started/AppStudio.png"/>


    Пример поставляется с собственным манифестом и предназначен для создания пакета приложений при построении проекта. Файл manifest.json можно найти в Visual Studio в Манифесте ```Microsoft.Teams.Samples.HelloWorld.Web``` под .

     В Visual Studio файл manifest.json находится в соответствии с **Манифестом** `Microsoft.Teams.Samples.HelloWorld.Web` в . Этот шаг описывается следующим образом:  
    
    <img  width="450px" alt="Build the app package on .NET with Visual Studio" src="~/assets/images/get-started/app-package-on-.NET-with-Visual-Studio.png"/>

1. Чтобы изменить этот пакет приложений, выберите **импорт существующего** приложения в **редакторе Manifest:**

    <img  width="450px" alt="Importing an existing app" src="~/assets/images/get-started/Importinganapp.png"/>

1. Выберите **плитку Hello World** для вашего недавно импортируемого приложения:

    <img  width="450px" alt="Newly imported app view" src="~/assets/images/get-started/HelloWorldappdetails.png"/>

    На следующем изображении показан импортируемый пакет приложений в App Studio:

    <img  width="450px" alt="Importing the app package" src="~/assets/images/get-started/Importinganapp2.png"/>

    На левой стороне редактора Манифеста находится список действий. В правой части имеется список свойств, которые необходимо заполнить для каждого шага. По мере начала работы с примерным приложением большая часть сведений уже завершена. Следующие действия позволяют обновить свойства приложения Hello World.

#### <a name="app-details"></a>Сведения о приложении

Выберите **сведения о приложении** в **статье Details**. Выберите **кнопку Создать,** чтобы создать новый ID приложения.

Ваш новый ID приложения похож на `2322041b-72bf-459d-b107-f4f335bc35bd` .

Сведения о приложении в правой области, включая сведения **разработчика** и **сведения о брендинге.** Эти сведения важны, если вы пишете новое приложение для распространения.

#### <a name="tabs"></a>Вкладки

Просто добавить вкладки в приложение Teams. Пример приложения уже поддерживает несколько вкладок, и вы можете включить их.

##### <a name="team-tab"></a>Вкладка Team

В приложении может быть только одна вкладка Team:

<img  width="450px" alt="Adding a Teams tab" src="~/assets/images/get-started/TeamTab.png"/>

В этом примере вкладка Team отображает страницу конфигурации. Выберите **символ url-адреса** конфигурации **Tab** и выберите **Изменить** из выпадаемого меню. Измените URL-адрес на то, где необходимо заменить URL-адрес, используемый при `https://yourteamsapp.ngrok.io/configure` `yourteamsapp.ngrok.io` размещении приложения.

##### <a name="personal-tabs"></a>Личные вкладки

В вашем приложении может быть до 16 вкладок, включая вкладку Team.

Личные вкладки отличаются от вкладки **Team. Вкладка Hello уже** указана в списке личных вкладок со значением места. `com.contoso.helloworld.hellotab` Выберите **символ url-адреса** конфигурации **Tab** и выберите **Изменить** из выпадаемого меню. Появится следующее диалоговое окно:

<img  width="450px" alt="Adding a personal tab dialog" src="~/assets/images/get-started/PersonalTab.png"/>

Обновление следующих полей с URL-адресом приложения:

- Измените **поле URL-адреса контента** на `https://yourteamsapp.ngrok.io/hello`
- Изменение **URL-адреса веб-сайта** на `https://yourteamsapp.ngrok.io/hello`

Замените `yourteamsapp.ngrok.io` URL-адрес, используемый при размещении приложения.

#### <a name="bots"></a>Боты

Легко добавить функции ботов в приложение. В **примере Приложения Hello World** уже есть бот в качестве части примера, но его необходимо зарегистрировать в Корпорации Майкрософт:

<img  width="450px" alt="Adding a bot" src="~/assets/images/get-started/Bots.png"/>

У бота, импортируемого из примера, нет связанного СД приложения. Необходимо создать новый бот, чтобы App Studio создал новый ID приложения и зарегистрировал его в Корпорации Майкрософт.

> [!NOTE]
> ID приложения, созданный App Studio для бота, отличается от ID приложения, созданного для приложения. Каждому боту в приложении требуется свой собственный ID приложения.

Выполните следующие действия по настройке бота:

1. Выберите **Удаление** рядом с импортируемым ботом в списке ботов. Теперь для показа не осталось ботов. 
1. Выберите **Установку,** чтобы **отобразить диалоговое** окно "Настройка бота".

    <img  width="450px" alt="Adding a bot dialog" src="~/assets/images/get-started/Setupbot.png"/>

1. Добавьте бот с именем **бота Contoso** и выберите все три флажка в **области.**
1. Выберите **Сохранить,** чтобы выйти из диалогового окна. App Studio регистрирует бот в Microsoft и отображает новый бот в списке ботов. 
1. Теперь откройте текстовый файл в блокноте и скопируйте и вклейте в него новый бот-ИД.
1. Нажмите **кнопку Создание нового пароля** и обратите внимание на пароль в том же текстовом файле, который вы отметили в коде бота App.
1. **Обновите адрес конечной точки Bot** и замените URL-адресом, используемым при `https://yourteamsapp.ngrok.io/api/messages` `yourteamsapp.ngrok.io` размещении приложения.
1. Теперь сохраните текстовый файл, так как вы должны добавить сведения из файла в ваше хост-приложение, чтобы обеспечить безопасное общение с ботом.

#### <a name="messaging-extensions"></a>Расширения для система обмена сообщениями

Расширения обмена сообщениями позволяет пользователям запросить сведения из вашей службы и опубликовать эти сведения. Сведения вывешиты в виде карточек в диалог канала. Расширения обмена сообщениями отображаются в нижней части окна составить.

Выполните следующие действия по настройке расширения обмена сообщениями:

1. Выберите **расширения обмена сообщениями** в соответствии с **возможностями** в левом окантовке App Studio для настройки расширения обмена сообщениями:

    <img  width="450px" alt="Adding a messaging extension" src="~/assets/images/get-started/Messagingextensions.png"/>

    Расширение примера обмена сообщениями перечислены в **области** расширения обмена сообщениями.

1. Выберите **Удаление,** чтобы удалить расширение обмена сообщениями, выберите **Настройка** и выполните те же действия, что и [для ботов.](#bots) Отображается **диалоговое окно расширения** обмена сообщениями.
1. Выберите **вкладку Использование существующих ботов** **и выберите один из существующих ботов.**
1. Выберите бот, созданный из выпадаемого меню. Добавьте имя **Бота** и **выберите Сохранить,** чтобы закрыть диалоговое окно.
1. В разделе **Команда** выберите **Добавить**. Чтобы добавить команду на основе поиска, выберите разрешить пользователям запрашивать у службы сведения и вставить их **в вариант сообщения.**
1. В **диалоговом окне** Новая команда введите следующие значения:

    В **новой команде:**

    - **Командный ID:** Введите случайный текст
    - **Название:** Введите случайное название
    - **Описание.** Введите случайное описание

    В **параметре**:

    - **Имя.** Введите имя параметра
    - **Название:** Введите название карты
    - **Описание.** Введите описание карты

1. После ввода сведений выберите **Сохранить,** чтобы закрыть диалоговое окно.

#### <a name="register-your-app-in-teams"></a>Регистрация приложения в Teams

После ввода сведений о приложении выполните следующие действия, чтобы зарегистрировать приложение в Teams:

1. Используйте **Test и распространение** App Studio для установки приложения в Teams.
1. Обновите свое хозяйное приложение с помощью ID приложения и пароля для бота. Для примера приложения используйте один и тот же код приложения и пароль для расширения бота и обмена сообщениями. 
1. Выберите **Тест и раздать** **под Finish** в левой области App Studio:

    <img  width="450px" alt="Testing your app" src="~/assets/images/get-started/Testanddistribute.png"/>

1. Чтобы загрузить приложение в Teams, выберите кнопку **Установите** в **статье Test and Distribute:**

    <img  width="450px" alt="Adding a messaging extension dialog" src="~/assets/images/get-started/InstallingHelloWorld.png"/>
    
    > [!NOTE]
    > Если вы не можете загрузить приложение в сторону, убедитесь, что вы включили [настраиваемую загрузку приложения.](../get-started/get-started-dotnet-app-studio.md#enable-sideloading-option)

1. Выберите поле **Поиск** в разделе **Добавить в раздел команды** и выберите команду, чтобы добавить пример приложения. Вы можете настроить специальную команду для тестирования.
1. Выберите **кнопку Установите** в нижней части диалогового окна.

    Ваше приложение теперь доступно в Teams. Однако бот и расширение обмена сообщениями не будут работать до тех пор, пока вы не обновите среду хозяйных приложений с помощью кодов и паролей приложения.

    <img  width="450px" alt="The finished app" src="~/assets/images/get-started/Finishedhelloworld.png"/>

## <a name="register-your-app-in-teams"></a>Регистрация приложения в Teams

После ввода сведений о приложении выполните следующие действия, чтобы зарегистрировать приложение в Teams:

1. Используйте **предварительный** просмотр портала разработчиков для установки приложения в Teams.

    :::image type="content" source="../assets/images/teams-toolkit-v2/preview-in-teams.png" alt-text="Изображение, на котором показана кнопка Preview" border="false":::

1. Обновите свое хозяйное приложение с помощью ID приложения и пароля для бота. Для примера приложения используйте один и тот же код приложения и пароль для расширения бота и обмена сообщениями.

1. Выберите **Публикацию для хранения**  в статье **Публикация** в левой области портала разработчика:

    :::image type="content" source="../assets/images/teams-toolkit-v2/devp-publish-left-pane.png" alt-text="Изображение, показывающая параметр Publish в левой области" border="false":::

    > [!NOTE]
    > Если вы не можете загрузить приложение в сторону, убедитесь, что вы включили [настраиваемую загрузку приложения.](../get-started/get-started-dotnet-app-studio.md#enable-sideloading-option)

1. Выберите **Добавить,** чтобы установить приложение на Teams.

    Ваше приложение теперь доступно в Teams. Однако бот и расширение обмена сообщениями не будут работать до тех пор, пока вы не обновите среду хозяйных приложений с помощью кодов и паролей приложения.

## <a name="update-the-credentials-for-your-hosted-app"></a>Обновление учетных данных для вашего хозяйского приложения

Пример приложения требует, чтобы переменные среды были задатки значениям, сохраненным в текстовом файле.

1. Откройте обозреватель решений.

    :::image type="content" source="../assets/images/get-started/csharp-repo-cloned.png" alt-text="Пример репо для приложения c# Teams" border="false":::

1. Откройте файл `appsettings.json`.

    :::image type="content" source="../assets/images/teams-toolkit-v2/csharp-appsetting-json.png" alt-text="Изображение, показывающая файл appsettings.json" border="false":::

1. Обновите **значение MicrosoftAppId** с помощью бот-ИД, сохраненного в текстовом файле.
1. Обнови **microsoftAppPassword с** помощью сохраненного пароля бота.

    :::image type="content" source="../assets/images/get-started/get-started-net-azure-add-keys.png" alt-text="Изображение с добавлением клавиш Azure" border="false":::

    После внесения этих изменений перестроим приложение. Если вы используете ngrok, вы можете запустить приложение локально, а если оно было у вас в Azure, передискуй приложение.

## <a name="test-the-app-capabilities-in-teams"></a>Проверьте возможности приложения в Teams

### <a name="test-your-tab"></a>Проверка вкладки

После установки приложения в Teams настройте его, чтобы отобразить вкладку, которую необходимо загрузить.

**Настройка вкладки приложения**

1. Перейдите к каналу в команде, где установлено пример приложения, и выберите кнопку **"+",** чтобы добавить новую вкладку.
1. Выберите **Hello World** из списка Добавить **вкладку.** Отображается диалоговое окно конфигурации, которое позволяет выбрать вкладку для отображения в этом канале.
1. Нажмите **Сохранить**. Вкладка `Hello World` загружается вкладками.

    <img width="530px" alt="Screenshot of configure" src="~/assets/images/samples-hello-world-tab-configure.png" />

### <a name="test-your-bot-in-teams"></a>Проверьте бот в Teams

Теперь вы можете протестировать бот в Teams.

**Тестирование бота**

- Выберите канал в команде, в которой вы зарегистрировали приложение и `@your-bot-name` введите. Этот тип сообщения называется **\@ упоминанием**. Бот отвечает на любое сообщение, которое вы отправляете.

    <img width="450px" alt="Bot responses" src="~/assets/images/samples-hello-world-bot.png" />

### <a name="test-your-messaging-extension"></a>Тестирование расширения обмена сообщениями

**Тестирование расширения обмена сообщениями**

1. Выберите **...** ниже входного окна в представлении беседы. Отображается меню с приложением **"Hello World".**
1. Выберите меню, будет отображаться набор случайных текстов. Вы можете выбрать один из случайных текстов, который вставляется в беседу.

    <img width="530px" alt="Messaging extension menu" src="~/assets/images/samples-hello-world-messaging-extensions-menu1.png" />

    <img width="530px" alt="Messaging extension result" src="~/assets/images/samples-hello-world-messaging-extensions-result1.png" />

1. Выберите один из случайных текстов. Показана карта, отформатированная и готовая к отправке с помощью собственного сообщения.

    <img width="530px" alt="Messaging extension send" src="~/assets/images/samples-hello-world-messaging-extensions-send.png" />

| &nbsp; | &nbsp; |
|:--- | ---:|
|[Back](get-started-overview.md) | &nbsp; |
|