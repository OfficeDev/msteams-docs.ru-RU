---
title: Развертывание первого приложения с C# в App Studio
description: Узнайте, как развертывать приложения Microsoft Teams с C# или .NET. в App Studio
keywords: приступая к работе .net c# csharp app studio
ms.custom: scenarios:getting-started; languages:ASP.NET,C#
ms.localizationpriority: medium
ms.topic: tutorial
ms.date: 11/09/2018
ms.openlocfilehash: 6fa0b290b0d0918c02427959b96eb897931aa4de
ms.sourcegitcommit: c398dfdae9ed96f12e1401ac7c8d0228ff9c0a2b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/30/2022
ms.locfileid: "66558459"
---
# <a name="update-c-app-package-in-app-studio"></a>Обновление C# приложения в App Studio

> [!TIP]
> **Попробуйте портал разработчика**: App Studio развивается. Настройте, распространите приложения Teams и управляйте ими с помощью нового [портала разработчика](https://dev.teams.microsoft.com/).

App Studio — это приложение Teams, которое можно установить из магазина Teams. Это упрощает создание и регистрацию приложения.

Чтобы обновить пакет приложения, выполните следующие действия.

1. Чтобы установить App Studio в Teams, щелкните  значок "Приложения" в нижней части левой панели и найдите **App Studio**:

    <img  width="450px" alt="Finding App Studio in the Store View" src="~/assets/images/get-started/searchforAppStudio.png"/>

1. Выберите **плитку App Studio** и нажмите кнопку **"Установить"**. Установлена Среда App Studio:

    <img  width="450px" alt="Installing App Studio" src="~/assets/images/get-started/InstallingAppStudio.png"/>

1. Чтобы создать пакет приложения Teams, перейдите на вкладку **редактора** манифеста в **App Studio**:

    <img  width="450px" alt="App Studio" src="~/assets/images/get-started/AppStudio.png"/>

    Пример поставляется с собственным манифестом и предназначен для создания пакета приложения при сборке проекта. Файл manifest.json можно найти в Visual Studio в разделе "Манифест" ```Microsoft.Teams.Samples.HelloWorld.Web```.

     В Visual Studio файл manifest.json находится в разделе **Manifest** in `Microsoft.Teams.Samples.HelloWorld.Web`. Этот шаг описан на следующем рисунке:  

    <img  width="450px" alt="Build the app package on .NET with Visual Studio" src="~/assets/images/get-started/app-package-on-.NET-with-Visual-Studio.png"/>

1. Теперь, чтобы изменить этот пакет приложения, выберите " **Импорт существующего** приложения" в **редакторе манифеста**:

    <img  width="450px" alt="Importing an existing app" src="~/assets/images/get-started/Importinganapp.png"/>

1. Выберите **плитку Hello World** для импортированного приложения:

    <img  width="450px" alt="Newly imported app view" src="~/assets/images/get-started/HelloWorldappdetails.png"/>

    На следующем рисунке показан импортированный пакет приложения в App Studio:

    <img  width="450px" alt="Importing the app package" src="~/assets/images/get-started/Importinganapp2.png"/>

    В левой части редактора манифеста есть список шагов. Справа есть список свойств, которые необходимо заполнить для каждого шага. По мере начала работы с примером приложения большая часть информации уже завершена. Следующие действия позволяют обновить свойства Hello World приложения.

## <a name="app-details"></a>Сведения о приложении

Выберите **сведения о приложении в** разделе **"Сведения"**. Нажмите **кнопку "** Создать", чтобы создать новый идентификатор приложения.

Новый идентификатор приложения похож на `2322041b-72bf-459d-b107-f4f335bc35bd`.

Перейдите к сведениям о приложении в области справа, включая сведения о разработчике **и** **сведения о фирменной символике** . Эти сведения важны при создании нового приложения для распространения.

## <a name="tabs"></a>Вкладки

Вкладки легко добавлять в приложение Teams. Пример приложения уже поддерживает несколько вкладок, и их можно включить.

### <a name="team-tab"></a>Вкладка "Команда"

В приложении может быть только одна вкладка "Команда":

<img  width="450px" alt="Adding a Teams tab" src="~/assets/images/get-started/TeamTab.png"/>

В этом примере на вкладке "Команда" отображается страница конфигурации. Выберите символ **...** в URL-адресе **конфигурации табуляции** и в раскрывающемся меню выберите команду "Изменить". Измените URL-адрес `https://yourteamsapp.ngrok.io/configure` на то `yourteamsapp.ngrok.io` , где необходимо заменить URL-адрес, используемый при размещении приложения.

### <a name="personal-tabs"></a>Личные вкладки

В приложении может быть до 16 вкладок, включая вкладку "Команда".

Личные вкладки отличаются от вкладок "Команда". Вкладка **"** Привет" уже указана в списке личных вкладок со значением заполнителя `com.contoso.helloworld.hellotab`. Выберите символ **...** в URL-адресе **конфигурации табуляции** и в раскрывающемся меню выберите команду "Изменить". Появится следующее диалоговое окно:

<img  width="450px" alt="Adding a personal tab dialog" src="~/assets/images/get-started/PersonalTab.png"/>

Обновите следующие поля, используя URL-адрес приложения:

- Измените **поле URL-адреса** содержимого на `https://yourteamsapp.ngrok.io/hello`
- Измените **поле URL-адреса веб-сайта** на `https://yourteamsapp.ngrok.io/hello`

Замените `yourteamsapp.ngrok.io` URL-адрес, используемый при размещении приложения.

#### <a name="bots"></a>боты;

В приложение можно легко добавить функциональные возможности ботов. В **Hello World** примере приложения уже есть бот, но его необходимо зарегистрировать в корпорации Майкрософт:

<img  width="450px" alt="Adding a bot" src="~/assets/images/get-started/Bots.png"/>

У бота, импортированного из примера, нет связанного идентификатора приложения. Необходимо создать бот, чтобы App Studio могли создать новый идентификатор приложения и зарегистрировать его в Корпорации Майкрософт.

> [!NOTE]
> Идентификатор приложения, созданный App Studio для бота, отличается от идентификатора приложения, созданного для приложения. Каждому боту в приложении требуется собственный идентификатор приложения.

Чтобы настроить бота, выполните следующие действия.

1. Выберите **"Удалить** " рядом с импортируемым ботом в списке ботов. Теперь нет ботов, которые нужно отобразить.
1. Выберите **"Настройка** ", чтобы **отобразить диалоговое окно "** Настройка бота".

    <img  width="450px" alt="Adding a bot dialog" src="~/assets/images/get-started/Setupbot.png"/>

1. Добавьте бот с **именем Contoso** и установите все три флажка **в области**.
1. Нажмите **кнопку "** Сохранить", чтобы выйти из диалогового окна. App Studio регистрирует бот в корпорации Майкрософт и отображает новый бот в списке ботов.
1. Теперь откройте текстовый файл в Блокноте, скопируйте и вставьте в него новый идентификатор бота.
1. Нажмите **кнопку "Создать новый пароль**" и запишите пароль в том же текстовом файле, в который вы записали идентификатор приложения бота.
1. **Обновите адрес конечной точки бота** `https://yourteamsapp.ngrok.io/api/messages``yourteamsapp.ngrok.io` и замените его URL-адресом, который использовался при размещении приложения.
1. Теперь сохраните текстовый файл, так как необходимо добавить сведения из файла в размещенное приложение, чтобы обеспечить безопасную связь с ботом.

#### <a name="messaging-extensions"></a>расширения для обмена сообщениями;

Расширения обмена сообщениями позволяют пользователям запрашивать сведения из службы и публиковать эти сведения. Информация будет опубликована в виде карточек в беседе канала. Расширения обмена сообщениями отображаются в нижней части окна создания.

Выполните следующие действия, чтобы настроить расширение обмена сообщениями:

1. Выберите **расширения для обмена** сообщениями в разделе **"** Возможности" в левой области App Studio, чтобы настроить расширение обмена сообщениями:

    <img  width="450px" alt="Adding a messaging extension" src="~/assets/images/get-started/Messagingextensions.png"/>

    Пример расширения обмена сообщениями отображается в области расширений **обмена** сообщениями.

1. Нажмите **кнопку "** Удалить", чтобы удалить расширение обмена сообщениями, выберите "Настроить" и выполните те же действия **, что** и [для ботов](#bots). **Отобразится** диалоговое окно расширения обмена сообщениями.
1. Выберите **вкладку "Использовать существующий бот** " и **выберите один из существующих ботов**.
1. Выберите бота, созданного в раскрывающемся меню. Добавьте имя **бота и** нажмите **кнопку "** Сохранить", чтобы закрыть диалоговое окно.
1. В разделе **"** Команда" выберите " **Добавить"**. Чтобы добавить команду на основе поиска, выберите "Разрешить пользователям запрашивать сведения в службе" и вставить их **в параметр сообщения** .
1. В **диалоговом** окне "Создание команды" введите следующие значения:

    В **разделе "Новая команда"**:

    - **Идентификатор команды**: введите случайный текст
    - **Заголовок**: введите случайный заголовок
    - **Описание**: введите случайное описание

    В **разделе "Параметр"**:

    - **Имя**: введите имя параметра.
    - **Заголовок**: введите заголовок карточки
    - **Описание**: введите описание карточки

1. После ввода данных нажмите кнопку **"** Сохранить", чтобы закрыть диалоговое окно.

#### <a name="register-your-app-in-teams"></a>Регистрация приложения в Teams

После ввода сведений о приложении выполните следующие действия, чтобы зарегистрировать приложение в Teams:

1. Используйте **тестирование и распространение** App Studio для установки приложения в Teams.
1. Обновите размещенное приложение, используя идентификатор приложения и пароль для бота. Для примера приложения используйте один и тот же идентификатор приложения и пароль для бота и расширения обмена сообщениями.
1. В **области слева в** App  Studio выберите "Тест и распространение" в разделе "Готово":

    <img  width="450px" alt="Testing your app" src="~/assets/images/get-started/Testanddistribute.png"/>

1. Чтобы отправить приложение в Teams, нажмите кнопку **"Установить** " в разделе **"Тест и распространение"**:

    <img  width="450px" alt="Adding a messaging extension dialog" src="~/assets/images/get-started/InstallingHelloWorld.png"/>

    > [!NOTE]
    > Если не удается загрузить приложение неопубликованным, проверьте, включена ли [отправка пользовательского приложения](../get-started/get-started-dotnet-app-studio.md#enable-sideloading-option).

1. Выберите поле **поиска** в разделе **"Добавить в группу** " и выберите команду, чтобы добавить пример приложения. Вы можете настроить специальную команду для тестирования.
1. Нажмите **кнопку** "Установить" в нижней части диалогового окна.

    Теперь ваше приложение доступно в Teams. Однако бот и расширение для обмена сообщениями не будут работать, пока вы не обновите среду размещенных приложений с помощью идентификаторов приложений и паролей.

    <img  width="450px" alt="The finished app" src="~/assets/images/get-started/Finishedhelloworld.png"/>

## <a name="register-your-app-in-teams"></a>Регистрация приложения в Teams

После ввода сведений о приложении выполните следующие действия, чтобы зарегистрировать приложение в Teams:

1. Используйте **предварительную** версию портала разработчика для установки приложения в Teams.

    :::image type="content" source="../assets/images/teams-toolkit-v2/preview-in-teams.png" alt-text="Изображение, на котором показана кнопка предварительного просмотра":::

1. Обновите размещенное приложение, используя идентификатор приложения и пароль для бота. Для примера приложения используйте один и тот же идентификатор приложения и пароль для бота и расширения обмена сообщениями.

1. Выберите **"Опубликовать для хранения"**  в разделе **"** Опубликовать" на левой панели портала разработчика:

    :::image type="content" source="../assets/images/teams-toolkit-v2/devp-publish-left-pane.png" alt-text="Изображение, на котором показан параметр &quot;Опубликовать&quot; в левой области":::

    > [!NOTE]
    > Если не удается загрузить приложение неопубликованным, проверьте, включена ли [отправка пользовательского приложения](../get-started/get-started-dotnet-app-studio.md#enable-sideloading-option).

1. Нажмите **кнопку "** Добавить", чтобы установить приложение в Teams.

    Теперь ваше приложение доступно в Teams. Однако бот и расширение для обмена сообщениями не будут работать, пока вы не обновите среду размещенных приложений с помощью идентификаторов приложений и паролей.

## <a name="update-the-credentials-for-your-hosted-app"></a>Обновление учетных данных для размещенного приложения

Пример приложения требует, чтобы для переменных среды были заданы значения, сохраненные в текстовом файле.

1. Откройте Обозреватель решений.

    :::image type="content" source="../assets/images/get-started/csharp-repo-cloned.png" alt-text="Пример репозитория для приложения c# Teams":::

1. Откройте файл `appsettings.json`.

    :::image type="content" source="../assets/images/teams-toolkit-v2/csharp-appsetting-json.png" alt-text="Изображение файла appsettings.json":::

1. **Обновите значение MicrosoftAppId**, указав идентификатор бота, сохраненный в текстовом файле.
1. **Обновите MicrosoftAppPassword**, указав сохраненный пароль бота.

    :::image type="content" source="../assets/images/get-started/get-started-net-azure-add-keys.png" alt-text="Изображение, показывающее добавление ключей Azure":::

    После внесения этих изменений перестройте приложение. Если вы используете ngrok, вы можете запустить приложение локально, а если вы размещаете его в Azure, повторно разверните приложение.

## <a name="test-the-app-capabilities-in-teams"></a>Тестирование возможностей приложения в Teams

### <a name="test-your-tab"></a>Тестирование вкладки

После установки приложения в Teams настройте его для отображения вкладки, которую нужно загрузить.

Чтобы настроить вкладку приложения:

1. Перейдите к каналу в команде, где установлен пример приложения, и нажмите кнопку **"+** ", чтобы добавить новую вкладку.
1. Выберите **Hello World** в списке **"Добавить вкладку**". Откроется диалоговое окно конфигурации, в котором можно выбрать вкладку для отображения в этом канале.
1. Нажмите **Сохранить**. Вкладка `Hello World` загружается вместе с вкладкой.

    <img width="530px" alt="Screenshot of configure" src="~/assets/images/samples-hello-world-tab-configure.png" />

### <a name="test-your-bot-in-teams"></a>Тестирование бота в Teams

Теперь бот можно протестировать в Teams.

Чтобы протестировать бот:

- Выберите канал в команде, в которой вы зарегистрировали приложение, и введите его `@your-bot-name`. Этот тип сообщения называется **упоминанием\@**. Бот отвечает на любое отправленное сообщение.

    <img width="450px" alt="Bot responses" src="~/assets/images/samples-hello-world-bot.png" />

### <a name="test-your-messaging-extension"></a>Тестирование расширения обмена сообщениями

Чтобы протестировать расширение для обмена сообщениями, с помощью

1. Выберите **...** под полем ввода в представлении беседы. Отобразится меню **с приложением Hello World**".
1. Выберите меню, отобразится набор случайных текстов. Вы можете выбрать один из случайных текстов, который будет вставлен в беседу.

    <img width="530px" alt="Messaging extension menu" src="~/assets/images/samples-hello-world-messaging-extensions-menu1.png" />

    <img width="530px" alt="Messaging extension result" src="~/assets/images/samples-hello-world-messaging-extensions-result1.png" />

1. Выберите один из случайных текстов. Отображается карточка, отформатированная и готовая к отправке с вашим сообщением.

    <img width="530px" alt="Messaging extension send" src="~/assets/images/samples-hello-world-messaging-extensions-send.png" />

| &nbsp; | &nbsp; |
|:--- | ---:|
|[Back](get-started-overview.md) | &nbsp; |
|
