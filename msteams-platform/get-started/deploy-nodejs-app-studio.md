---
title: Развертывание первого приложения с Node.js в App Studio
description: Узнайте, как развертывать Microsoft Teams с помощью Node.js в App Studio
keywords: начало работы node.js App Studio
ms.custom: scenarios:getting-started; languages:ASP,Node.js
ms.localizationpriority: medium
ms.topic: tutorial
ms.date: 11/09/2018
ms.openlocfilehash: 7f423cfd33fdca9d40f2adfe32b59ace26d39adc
ms.sourcegitcommit: 61003a14e8a179e1268bbdbd9cf5e904c5259566
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2022
ms.locfileid: "64737222"
---
# <a name="update-nodejs-app-package-in-app-studio"></a>Обновление Node.js приложения в App Studio

> [!TIP]
> **Попробуйте портал разработчика**: App Studio развивается. Настройте, распространите и управляйте Teams приложениями с помощью нового [портала разработчика](https://dev.teams.microsoft.com/).

App Studio — это Teams, которое можно установить из Teams магазина. Это упрощает создание и регистрацию приложения.

Чтобы обновить пакет приложения, выполните следующие действия.

1. Чтобы установить App Studio в Teams, щелкните значок "Приложения" в нижней части панели слева и найдите **App Studio**:

    <img  width="450px" alt="Finding App Studio in the Store View" src="~/assets/images/get-started/searchforAppStudio.png"/>

1. Выберите **плитку App Studio** и нажмите кнопку **"Установить"**. Установлена Среда App Studio:

    <img  width="450px" alt="Installing App Studio" src="~/assets/images/get-started/InstallingAppStudio.png"/>

1. Чтобы создать пакет приложения для Teams, перейдите на вкладку редактора манифеста в **App Studio**:

    <img  width="450px" alt="App Studio" src="~/assets/images/get-started/AppStudio.png"/>

    Пример поставляется с собственным манифестом и предназначен для создания пакета приложения при сборке проекта. В Node.js это делается `gulp` путем ввода в командной строке в корневом каталоге проекта.

    Пакет приложения можно создать на Node.js, `gulp` введя в командной строке корневой каталог проекта.

    ```bash
    $ gulp
    [13:39:27] Using gulpfile ~\documents\github\msteams-samples-hello-world-nodejs\gulpfile.js
    [13:39:27] Starting 'clean'...
    [13:39:27] Starting 'generate-manifest'...
    [13:39:27] Finished 'generate-manifest' after 11 ms
    [13:39:27] Finished 'clean' after 21 ms
    [13:39:27] Starting 'default'...
    Build completed. Output in manifest folder
    [13:39:27] Finished 'default' after 62 μs
    ```

    Имя созданного пакета приложения — `helloworldapp.zip`. Вы можете найти этот файл, если расположение в инструменте, которое вы используете, не является четким.

1. Теперь, чтобы изменить этот пакет приложения, выберите " **Импорт существующего** приложения" в **редакторе манифеста**:

    <img  width="450px" alt="Importing an existing app" src="~/assets/images/get-started/Importinganapp.png"/>

1. Выберите **плитку Hello World** для импортированного приложения:

    <img  width="450px" alt="Newly imported app view" src="~/assets/images/get-started/HelloWorldappdetails.png"/>

    На следующем рисунке показан импортированный пакет приложения в App Studio:

    <img  width="450px" alt="Importing the app package" src="~/assets/images/get-started/Importinganapp2.png"/>

    В левой части редактора манифеста есть список шагов. Справа есть список свойств, которые необходимо заполнить для каждого шага. По мере начала работы с примером приложения большая часть информации уже завершена. Следующие действия позволяют обновить свойства Hello World приложения.

## <a name="app-details"></a>Сведения о приложении

Выберите **сведения о приложении в** разделе **"Сведения"**. Нажмите **кнопку "** Создать", чтобы создать новый идентификатор приложения.

Новый идентификатор приложения похож на `2322041b-72bf-459d-b107-f4f335bc35bd`.

Перейдите к сведениям о приложении в области справа, включая сведения о разработчике **и** **сведения о фирменной символике** . Эти сведения важны при создании нового приложения для распространения.

## <a name="tabs"></a>Вкладки

Вкладки легко добавлять в Teams приложения. Пример приложения уже поддерживает несколько вкладок, и их можно включить.

### <a name="team-tab"></a>Вкладка "Команда"

В приложении может быть только одна вкладка "Команда":

<img  width="450px" alt="Adding a Teams tab" src="~/assets/images/get-started/TeamTab.png"/>

В этом примере на вкладке "Команда" отображается страница конфигурации. Выберите символ **...** в URL-адресе **конфигурации табуляции** и в раскрывающемся меню выберите команду "Изменить". Измените URL-адрес `https://yourteamsapp.ngrok.io/configure` на то `yourteamsapp.ngrok.io` , где необходимо заменить URL-адрес, используемый при размещении приложения.

### <a name="personal-tabs"></a>Личные вкладки

В приложении может быть до 16 вкладок, включая вкладку "Команда".

Личные вкладки отличаются от вкладок "Команда". Вкладка **"** Привет" уже указана в списке личных вкладок со значением заполнителя `com.contoso.helloworld.hellotab`. Выберите символ **...** в URL-адресе **конфигурации табуляции** и в раскрывающемся меню выберите команду "Изменить". Появится следующее диалоговое окно:

<img  width="450px" alt="Adding a personal tab dialog" src="~/assets/images/get-started/PersonalTab.png"/>

Обновите следующие поля, используя URL-адрес приложения:

* Измените **поле URL-адреса** содержимого на `https://yourteamsapp.ngrok.io/hello`
* Измените **поле URL-адреса веб-сайта** на `https://yourteamsapp.ngrok.io/hello`

Замените `yourteamsapp.ngrok.io` URL-адрес, используемый при размещении приложения.

#### <a name="bots"></a>боты;

В приложение можно легко добавить функциональные возможности ботов. В **Hello World** примере приложения уже есть бот, но его необходимо зарегистрировать в корпорации Майкрософт:

<img  width="450px" alt="Adding a bot" src="~/assets/images/get-started/Bots.png"/>

У бота, импортированного из примера, нет связанного идентификатора приложения. Необходимо создать бот, чтобы App Studio могли создать новый идентификатор приложения и зарегистрировать его в Корпорации Майкрософт.

> [!NOTE]
> Идентификатор приложения, созданный App Studio для бота, отличается от идентификатора приложения, созданного для приложения. Каждому боту в приложении требуется собственный идентификатор приложения.

Чтобы настроить бота, выполните следующие действия.

1. Выберите **"Удалить** " рядом с импортируемым ботом в списке ботов. Теперь нет ботов, которые нужно отобразить.
1. Выберите **"Настройка** ", чтобы **отобразить диалоговое окно "** Настройка бота".

    <img  width="450px" alt="Adding a bot dialog" src="~/assets/images/get-started/Setupbot.png"/>

1. Добавьте бот с **именем Contoso** и установите все три флажка **в области**.
1. Нажмите **кнопку "** Сохранить", чтобы выйти из диалогового окна. App Studio регистрирует бот в корпорации Майкрософт и отображает новый бот в списке ботов.
1. Теперь откройте текстовый файл в Блокноте, скопируйте и вставьте в него новый идентификатор бота.
1. Нажмите **кнопку "Создать новый пароль**" и запишите пароль в том же текстовом файле, в который вы записали идентификатор приложения бота.
1. **Обновите адрес конечной точки бота** `https://yourteamsapp.ngrok.io/api/messages``yourteamsapp.ngrok.io` и замените его URL-адресом, который использовался при размещении приложения.
1. Теперь сохраните текстовый файл, так как необходимо добавить сведения из файла в размещенное приложение, чтобы обеспечить безопасную связь с ботом.

#### <a name="messaging-extensions"></a>расширения для обмена сообщениями;

Расширения обмена сообщениями позволяют пользователям запрашивать сведения из службы и публиковать эти сведения. Информация будет опубликована в виде карточек в беседе канала. Расширения обмена сообщениями отображаются в нижней части окна создания.

Выполните следующие действия, чтобы настроить расширение обмена сообщениями:

1. Выберите **расширения для обмена** сообщениями в разделе **"** Возможности" в левой области App Studio, чтобы настроить расширение обмена сообщениями:

    <img  width="450px" alt="Adding a messaging extension" src="~/assets/images/get-started/Messagingextensions.png"/>

    Пример расширения обмена сообщениями отображается в области расширений **обмена** сообщениями.

1. Нажмите **кнопку "** Удалить", чтобы удалить расширение обмена сообщениями, выберите "Настроить" и выполните те же действия **, что** и [для ботов](#bots). **Отобразится** диалоговое окно расширения обмена сообщениями.
1. Выберите **вкладку "Использовать существующий бот** " и **выберите один из существующих ботов**.
1. Выберите бота, созданного в раскрывающемся меню. Добавьте имя **бота и** нажмите **кнопку "** Сохранить", чтобы закрыть диалоговое окно.
1. В разделе **"** Команда" выберите " **Добавить"**. Чтобы добавить команду на основе поиска, выберите "Разрешить пользователям запрашивать сведения в службе" и вставить их **в параметр сообщения** .
1. В **диалоговом** окне "Создание команды" введите следующие значения:

    В **разделе "Новая команда"**:

    * **Идентификатор команды**: введите случайный текст
    * **Заголовок**: введите случайный заголовок
    * **Описание**: введите случайное описание

    В **разделе "Параметр"**:

    * **Имя**: введите имя параметра.
    * **Заголовок**: введите заголовок карточки
    * **Описание**: введите описание карточки

1. После ввода данных нажмите кнопку **"** Сохранить", чтобы закрыть диалоговое окно.

#### <a name="register-your-app-in-teams"></a>Регистрация приложения в Teams

После ввода сведений о приложении выполните следующие действия, чтобы зарегистрировать приложение в Teams:

1. Используйте **функцию тестирования и распространения** App Studio, чтобы установить приложение в Teams.
1. Обновите размещенное приложение, используя идентификатор приложения и пароль для бота. Для примера приложения используйте один и тот же идентификатор приложения и пароль для бота и расширения обмена сообщениями.
1. В **области слева в** App  Studio выберите "Тест и распространение" в разделе "Готово":

    <img  width="450px" alt="Testing your app" src="~/assets/images/get-started/Testanddistribute.png"/>

1. Чтобы отправить приложение в Teams, **нажмите кнопку** "Установить" в разделе **"Тестирование и распространение"**:

    <img  width="450px" alt="Adding a messaging extension dialog" src="~/assets/images/get-started/InstallingHelloWorld.png"/>

    > [!NOTE]
    > Если не удается загрузить приложение неопубликованным, проверьте, включена ли [отправка пользовательского приложения](../get-started/get-started-dotnet-app-studio.md#enable-sideloading-option).

1. Выберите поле **поиска** в разделе **"Добавить в группу** " и выберите команду, чтобы добавить пример приложения. Вы можете настроить специальную команду для тестирования.
1. Нажмите **кнопку** "Установить" в нижней части диалогового окна.

    Теперь ваше приложение доступно в Teams. Однако бот и расширение для обмена сообщениями не будут работать, пока вы не обновите среду размещенных приложений с помощью идентификаторов приложений и паролей.

    <img  width="450px" alt="The finished app" src="~/assets/images/get-started/Finishedhelloworld.png"/>

## <a name="update-the-credentials-for-your-hosted-app"></a>Обновление учетных данных для размещенного приложения

Пример приложения требует, чтобы для следующих переменных среды были заданы значения, которые вы записали ранее:

```
MICROSOFT_APP_ID=<YOUR BOT'S APP ID>
MICROSOFT_APP_PASSWORD=<YOUR BOT'S PASSWORD>
WEBSITE_NODE_DEFAULT_VERSION=8.9.4
```

Переменные среды являются частью вашей среды. Доступ к ним может получить только код приложения. Они не предоставляются третьим лицам.

Если вы используете ngrok для запуска приложения, необходимо настроить локальные переменные среды. Вы можете использовать Visual Studio Code для добавления [конфигурации запуска](https://code.visualstudio.com/Docs/editor/debugging#_launch-configurations):

```json
{
    "type": "node",
    "request": "launch",
    "name": "Launch - Teams Debug",
    "program": "${workspaceRoot}/src/app.js",
    "cwd": "${workspaceFolder}/src",
    "env": {
        "BASE_URI": "https://yourNgrokURL.ngrok.io",
        "MICROSOFT_APP_ID": "00000000-0000-0000-0000-000000000000",
        "MICROSOFT_APP_PASSWORD": "yourBotAppPassword",
        "NODE_DEBUG": "botbuilder",
        "SUPPRESS_NO_CONFIG_WARNING": "y",
        "NODE_CONFIG_DIR": "../config"
    }
}
```

Где:

* Учетные данные авторизации для бота:
  * MICROSOFT_APP_ID идентификатор
  * MICROSOFT_APP_PASSWORD является паролем
* NODE_DEBUG, что происходит в боте в консоли Visual Studio Code отладки
* NODE_CONFIG_DIR указывает на каталог в корне репозитория ( `src` по умолчанию при локальном запуске приложения выполняется поиск корневого каталога в папке).

> [!Note]
> Если вы не остановили npm из предыдущего руководства, `npm stop` необходимо выполнить его, чтобы Visual Studio Code правильно выбрать переменные конфигурации запуска.

<a name="ConfigureTheAppTab"></a>

## <a name="test-the-app-capabilities-in-teams"></a>Тестирование возможностей приложения в Teams

После установки приложения в Teams необходимо настроить его для отображения содержимого.

### <a name="test-your-tab-in-teams"></a>Тестирование вкладки в Teams

1. Перейдите к каналу в Teams и нажмите кнопку **"+**", чтобы добавить новую вкладку.
1. Затем можно выбрать из `Hello World` списка **"Добавить вкладку** ".
1. В диалоговом окне конфигурации выберите вкладку, которую нужно отобразить в канале. Затем нажмите кнопку **"Сохранить"**.

Вы увидите вкладку `Hello World` , загруженную с выбранной вкладкой:

<img width="430px" alt="Screenshot of configure" src="~/assets/images/samples-hello-world-tab-configure.png"/>

### <a name="test-your-bot-in-teams"></a>Тестирование бота в Teams

Теперь вы можете взаимодействовать с ботом в Teams. Выберите канал в команде, в которой вы зарегистрировали приложение, `@your-bot-name`и введите сообщение. Этот тип сообщения называется **упоминанием\@**. Любое сообщение, отправленное боту, будет отправлено вам в качестве ответа:

<img width="450px" alt="Bot responses" src="~/assets/images/samples-hello-world-bot.png"/>

<a name="ComposeRichMessages"></a>

### <a name="test-your-messaging-extension"></a>Тестирование расширения обмена сообщениями

Чтобы протестировать расширение для обмена сообщениями, с помощью

1. Щелкните три точки под полем ввода в представлении беседы. Отобразится меню **с приложением Hello World**".
1. Выберите меню. Отображается набор случайных текстов. Вы можете выбрать один из случайных текстов, который будет вставлен в беседу.

    <img width="430px" alt="Messaging extension menu" src="~/assets/images/samples-hello-world-messaging-extensions-menu1.png" />

    <img width="430px" alt="Messaging extension result" src="~/assets/images/samples-hello-world-messaging-extensions-result1.png" />

1. Выберите один из случайных текстов. Отформатированная карточка будет готова к отправке с собственным сообщением, включенным в нижнюю часть:

    <img width="430px" alt="Messaging extension send" src="~/assets/images/samples-hello-world-messaging-extensions-send.png" />

| &nbsp; | &nbsp; |
|:--- | ---:|
|[Back](get-started-overview.md) | &nbsp; |
|
