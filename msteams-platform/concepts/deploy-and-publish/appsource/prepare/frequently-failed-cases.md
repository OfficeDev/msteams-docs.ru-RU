---
title: Советы по отправке приложения и часто неудачные случаи
description: В этой статье описаны советы по успешной отправке в Магазин Teams и распространенные причины сбой отправки.
author: laujan
ms.author: lajanuar
ms.topic: reference
ms.openlocfilehash: f4226bdae94db073711cb1e126a7991804b050ac
ms.sourcegitcommit: 4539479289b43812eaae07a1c0f878bed815d2d2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2021
ms.locfileid: "49797836"
---
# <a name="tips-for-a-successful-microsoft-teams-app-submission"></a>Советы по успешной отправке приложения Microsoft Teams

В этой статье представлены распространенные причины неудачной проверки отправленных приложений. Хотя он не является исчерпывающим списком всех потенциальных проблем с вашим приложением, это руководство повышает вероятность того, что отправка приложения пройдет в первый раз. *Список* политик проверки см. в политиках сертификации Commercial [Marketplace.](/legal/marketplace/certification-policies)

>[!NOTE]
>**[Раздел 1140](/legal/marketplace/certification-policies#1140-teams)** касается Microsoft Teams, а в разделе **[1140.4](https://docs.microsoft.com/legal/marketplace/certification-policies#11404-functionality)** — требования к функциональным возможностям для приложений Teams.

## <a name="validation-guidelines--most-failed-test-cases"></a>Рекомендации по проверке & большинстве неудачных тестовых случаев

### <a name="9989-general-considerations"></a>&#9989; общие соображения

*См. также* [раздел 100 — общие](/legal/marketplace/certification-policies#100-general)

* Убедитесь, что вы используете версию 1.4.1 или более поздней версии [microsoft Teams SDK.](https://www.npmjs.com/package/@microsoft/teams-js)
* Не внося изменения в приложение во время проверки. Для этого потребуется полная переоценка приложения.
* Ваше приложение не должно перестать отвечать, неожиданно останавливаться или содержать ошибки программирования. Если проблема возникнут, приложение должно корректно сбой и предоставить пользователю действительное сообщение.
* Приложение не должно автоматически загружать, устанавливать и запускать исполняемый код в пользовательской среде. Все скачиваемые приложения должны обращаться к пользователю за явным разрешением.
* Все материалы, которые вы связываете с вашим опытом, такие как описания и документация по поддержке, должны быть точными. Описания и материалы должны быть написаны грамотно, без орфографических ошибок, с правильным использованием прописных букв и знаков препинания.
* Предоставление справки и поддержки. Настоятельно рекомендуется, чтобы ваше приложение включало ссылку на справку и faq для первого запуска пользователя. Для всех личных приложений мы рекомендуем предоставить страницу справки в качестве личной вкладки для улучшения пользовательского интерфейса.
* Приложения не должны отбирать пользователя из Teams для основных пользовательских сценариев. Для отображения сведений о пользователях в Teams рекомендуется использовать модули задач и вкладки.
* При внесении каких-либо изменений в манифест в отправку номер версии приложения добавит в манифест.
* Приложение не должно отбирать пользователей из Teams для основных пользовательских сценариев. Целевые объекты ссылок в приложениях не должны связываться с внешним браузером, но должны ссылаться на элементы div, содержащиеся в Teams, например внутри модулей задач и вкладок.
* Личные приложения позволяют пользователям делиться содержимым из личного приложения с другими участниками группы.

### <a name="9989--provide-a-clear-and-simple-sign-insign-out-and-sign-up-experience"></a>&#9989; предоставление простого и понятного способов регистрации и регистрации

*См. также* [раздел 1100.5 — контроль клиентов](/legal/marketplace/certification-policies#11005-customer-control)

* Если ваше приложение или надстройка зависят от внешних учетных записей или служб, вход и выход и вход должны быть очевидными и досяжимыми во всех возможностях приложения.
* Если пользователю предоставляется явный параметр для входов, должен быть соответствующий параметр выхода (даже если приложение использует проверку подлинности без проверки [подлинности).](../../../../tabs/how-to/authentication/auth-silent-aad.md)
* При выходе из приложения пользователь должен выйти только из клиента Teams.
* Как минимум, при выходе пользователь должен выйти из тех же возможностей, что и при входе. Например, если параметр вход включает расширение обмена сообщениями и вкладку, параметр выхода должен включать как расширение обмена сообщениями, так и вкладку.

* Убедитесь, что всегда есть способ отменить следующее (или аналогичное) поведение:
  * Вход => выход.
  * Связывать учетную запись или службу => отвязать учетную запись или службу.
  * Подключение учетной записи или службы => отключение учетной записи или службы.
  * Авторизация учетной записи или службы => авторизации/запрета учетной записи или службы.
  * Регистрация учетной записи или службы => регистрации или отписки учетной записи или службы.
* Если вашему приложению требуется учетная запись или служба, необходимо предоставить пользователю способ регистрации или создания запроса на регистрацию. Исключение может быть предоставлено, если вашему приложению требуется лицензия для использования. Но в таких сценариях должен быть предоставлен четкий способ регистрации нового пользователя.
* Убедитесь, что вы предоставляете четкие инструкции новому пользователю о том, как зарегистрироваться для использования ваших служб приложений. Если готовая ссылка для регистрации недоступна, в следующих областях может быть предоставлен четкий путь к регистрации.

> [!div class="checklist"]
>
> * в разделах описания приложения;
> * в приветствие приложения;
> * в сообщении справки вашего приложения;
> * в окне, где вы просите пользователя войти в ваши службы;

* Приложения, для которых нет простого потока регистрации, также могут включать вкладку справки или ссылку на веб-страницу, где новый пользователь может получить подробные инструкции по настройке приложения с помощью Microsoft Teams.  Это гарантирует, что новый пользователь не будет заблокирован при первой попытке приложения.
* Функции входов и выходов должны работать на мобильных клиентах. Убедитесь, что вы используете [Microsoft Teams SDK](https://www.npmjs.com/package/@microsoft/teams-js) версии 1.4.1 или более поздней.

Дополнительные сведения о проверке подлинности см. в:

* [Документация по проверке подлинности](../../../authentication/authentication.md)
* [Пример проверки подлинности бота в Node](https://github.com/OfficeDev/microsoft-teams-sample-auth-node)
* [Пример проверки подлинности tab в Узле](https://github.com/OfficeDev/microsoft-teams-sample-complete-node)
* [Проверка подлинности с вкладками и ботами на C#/.NET](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp)

### <a name="9989-response-times-must-be-reasonable"></a>&#9989; время отклика должно быть разумным

* **Вкладки.** Если ответ на действие занимает более трех секунд, необходимо предоставить сообщение о загрузке или предупреждение.
* **Боты**. Ответ на команду пользователя должен происходить в течение двух секунд. Если требуется более длинная обработка, приложение должно отображать индикатор ввода текста.
* **Расширения составить.** Ответ на команду пользователя должен происходить в течение пяти секунд.

> [!TIP]
> Убедитесь, что ваше приложение отображает индикатор загрузки или предупреждение в том или ином виде, если приложение отвечает дольше, чем ожидалось.

### <a name="9989-tab-content-must-not-have-excessive-chrome-or-layered-navigation"></a>&#9989; вкладок не должно иметь чрезмерного хрома или многоуровневой навигации

* Вкладки должны предоставлять основное содержимое и избегать необходимости элементов пользовательского интерфейса. Как правило, это относится к ненужным вложенным и многоуровневым навигациям, к лишним или нерелевантным пользовательским интерфейсам рядом с содержимым или любым ссылкам на несвязанные материалы. Например, ниже приведено представление вкладки, в которое не входят меню навигации и демонстрируется только основное содержимое:

![Представление веб-страницы SharePoint](../../../../assets/images/faq/web-sp.png)  
![Представление вкладки SharePoint](../../../../assets/images/faq/tab-sp.png)

* Вкладки должны быть светлыми и не включать сложную навигацию.
* Вкладки канала, которые имеют сложные возможности редактирования в приложении, должны открывать представление редактора в нескольких окнах, а не на вкладке.
* Вкладки каналов не должны предоставлять панели приложения со значками в левой панели, конфликтуя с главной навигацией Teams.
* Вкладки не должны представлять на панели приложения значки в левой панели, конфликтуя с основной навигацией Teams.
* Вкладки со сложными возможностями редактирования в приложении должны открывать представление редактора в нескольких окнах, а не на вкладке.
* Если имеется несколько параметров представления, рассмотрите возможность выбора пользователем меню настройки вкладок. Например, вместо того чтобы встраить меню в вкладку, поместите его на страницу конфигурации, чтобы фактическое представление вкладки было чисто и сфокусировано.
* Включите *вкладку "Справка"* в качестве статической вкладки, чтобы сообщить пользователям о настройке, регистрации и использовании приложения.
* Включайте *вкладку "Параметры",* доступную из загона приложения.

![Страница конфигурации широкой идеи](../../../../assets/images/faq/wideidea.png)

### <a name="9989-tab-configuration-must-happen-in-the-configuration-screen"></a>&#9989; вкладки должна происходить на экране конфигурации

* На экране конфигурации должно быть четко по поясняется значение работы и как настроить вкладку.
* Процесс настройки всегда должен предоставлять пользователям возможность продолжать работу с пользователем в любом случае. Например, не показывать пустую доску после того, как пользователь настроит вкладку
* Вход пользователя должен быть частью процесса настройки и должен быть завершен в пользовательском интерфейсе tab. После завершения настройки и загрузки вкладки никаких дополнительных действий не требуется.
* Не показыйте всю веб-страницу во всплывающее окно конфигурации для регистрации.
* Пользователь всегда должен иметь возможность завершить настройку, даже если он не может сразу найти нужное содержимое.
* Интерфейс настройки должен предоставить пользователю возможность найти свое содержимое, закрепить URL-адрес или создать новый контент, если он не существует.
* Процесс настройки должен оставаться в контексте Teams. Пользователю не нужно оставлять интерфейс настройки для создания контента, а затем возвращаться в Teams, чтобы закрепить его.
* Эффективно используйте доступную область просмотра. Не попустим его на использование огромного логотипа во всплываемом окте конфигурации

![OneNote позволяет пользователям в paste a OneNote link in case notes can not be found](../../../../assets/images/faq/tab-onenote-config.png)

![Пользователи всегда могут создать новый план планировщика на случай, если он не существует](../../../../assets/images/faq/tab-planner-config.png)

![SharePoint также позволяет пользователю напрямую в paste a SharePoint link](../../../../assets/images/faq/tab-sp-config.png)

### <a name="9989-bots-must-always-be-responsive-and-fail-gracefully"></a>&#9989; боты должны всегда отвечать и корректно отвечать на запросы

Бот должен реагировать на любую команду, а не конечный пользователь. Вот несколько советов, которые помогут вашему боту интеллектуально реагировать на действия пользователей:

* **Используйте списки команд.** Анализ пользовательского ввода или прогнозирование намерения пользователя сложно. Вместо того чтобы позволить пользователям угадать, что может сделать ваш бот, предопустите список команд, которые понимает ваш бот.

![Список команд Flow](../../../../assets/images/faq/flow-bot.png)

* **Включит команду справки.** Пользователи, скорее всего, будут ввести "Справка", когда они потеряются или бот не отвечает ожидаемым образом. Включите команду справки, которая описывает, как будет работать значение вашего приложения, а также все допустимые команды.

![Команда справки flow](../../../../assets/images/faq/flow-help.png)

* **Включите содержимое справки или инструкции при утере бота.** Если бот не может понять входные данные пользователя, он должен предложить альтернативное действие. Например: *"К сожалению, я не знаю. Введите "справка" для получения дополнительных сведений".* Не отвечайте на сообщение об ошибке или *просто "Я не знаю".* Используйте эту возможность для обучения пользователей.

* **Использование адаптивных карточек и модулей задач, чтобы сделать ответ бота понятным и понятным для действий** 
 [Адаптивные карточки с кнопками,](/task-modules-and-cards/task-modules/task-modules-bots) которые запускают модули задач, улучшают пользовательский интерфейс бота. Эти карточки и кнопки проще использовать на мобильном устройстве, а не вводить команды пользователем. Кроме того, ответы ботов не должны быть текстовыми с длинным текстом. Боты должны использовать адаптивные карточки & модулей задач вместо пользовательского интерфейса на основе бесед и длинных текстовых ответов

* **Продумайте все области.** Убедитесь, что бот предоставляет соответствующие ответы при упоминаний () в канале и `@*botname*` в личных беседах. Если бот не предоставляет осмысленный контекст в области личных или команд, отключите эту область с помощью манифеста. (См. блок в справочнике по схеме `bots` [манифеста Microsoft Teams.)](../../../../resources/schema/manifest-schema.md#bots)

* **Включаем команду, групповой чат или беседу 1:1.** Уведомления ботов должны включать команду, групповой чат или беседу "один к одному" с соответствующим содержимым для вашей аудитории.

* **Не выдвигайте конфиденциальные данные.** Боты не должны разодвигать конфиденциальные данные в команде, групповом чате или беседе со счетом 1:1, где есть аудитория, которая не должна иметь возможности просматривать эти данные

* **Предоставление приветствия.** Бот должен предоставить приветствие FRE, которое включает интерактивное руководство с карточками карусели или кнопками "попробовать", чтобы обеспечить вовлеченность.

### <a name="9989-personal-bots-must-always-send-a-welcome-message-on-first-launch"></a>&#9989; личные боты всегда должны отправлять приветствие при первом запуске

Приветствие — это лучший способ установить тон для вашего бота личной беседы. Это первое взаимодействие пользователя с ботом. Хорошее приветствие может побудить пользователя продолжать изучать приложение. Если приветствие или вводное сообщение является запутанным или нечетким, пользователи не сразу увидят значение приложения и потеряют интерес.
Требования к приветствиям см. в разделе ниже.

> [!Note]
> Приветствие для бота канала является необязательным.

### <a name="welcome-message-requirements"></a>Требования к приветствиям

* Включив предложение о значении в приветствие.
* Предоставление рекомендаций по использованию приложения.
* Включите инструкции по регистрации и настройке приложения
* Представляет простой для чтения текст и понятный диалог — желательно карточку с кнопкой приветствия, которая загружает модуль задачи.
* С помощью кнопок и карточек сохраняем его простота и простота — избегайте длинных текстовых диалогов и диалогов.
* Включаем адаптивные карточки и кнопки, чтобы сделать приветствие более понятным.
* Вызов приветствия с помощью одной, а не двух или более одновременных.
* Приветствие должно показываться только пользователю, который настроил приложение, предпочтительно в личном чате 1:1.
* Личные приложения всегда должны предоставлять пользователю приветствие.
* Никогда не отправлять личные беседы каждому участнику команды — это считается спамом.
* Никогда не отправлять приветствие более одного раза. Повтор одного и того же приветствия через регулярные интервалы не разрешен и считается спамом.

#### <a name="avoid-welcome-message-spamming"></a>Избегайте нежелательной почты для приветствия сообщений

* **Сообщение канала от бота**. Не рассылайте пользователям нежелательные сообщения, создавая отдельные записи чата. Создайте одну публикацию потока с ответами в том же потоке.
* **Личный чат с помощью бота.** Не отправляйте несколько сообщений. Отправьте одно сообщение с полной информацией. Повтор одного и того же приветствия через регулярные интервалы не разрешен и считается нежелательным.

#### <a name="notification-only-bot-welcome-messages"></a>Приветствия бота только для уведомлений

Боты только для уведомлений должны отправлять приветствие с сообщением "Я бот только для уведомлений и не могу ответить на ваши *чаты".*

#### <a name="welcome-messages-in-the-personal-scope"></a>Приветствия в личной области

* **Сделайте сообщение кратким и информативным.**  Скорее всего, опыт пользователя и знания вашего приложения будут отличаться. Пользователь мог использовать ваше приложение на другой платформе или ничего не знать о нем. Вы хотите адаптировать свое сообщение для всех аудиторий и в паре предложений объяснить, что делает бот и как с ним взаимодействовать. Также следует объяснить ценность приложения и преимущества его использования пользователями.
![Бот "Вайс" и "Шумнинг"](../../../../assets/images/faq/cafe-bot.png)

* **Сделайте сообщение действительным.** Подумайте о том, что нужно сделать пользователям после установки приложения. Есть ли у них классная команда? Следует ли им знать о другом способе в подборе? Нужно ли им войти? Вы можете добавить действия на адаптивной карточке или предоставить конкретные примеры, такие как *"Попробуйте спросить...",* *"Это то, что я могу сделать...".*

#### <a name="welcome-messages-in-the-teamchannel--scope"></a>Приветствия в области команды или канала

При первом добавлении бота в канал все немного по-другому. Как правило, не следует отправлять сообщение 1:1 всем в команде, но бот может отправить приветствие в канале.

### <a name="9989-mobile-responsiveness-no-direct-upsell-or-payment"></a>&#9989; мобильной связи, без прямого переоплаты и оплаты

* Вкладки, адаптивные карточки, сообщения ботов и содержимое в модулях задач должны отвечать на различные размеры экранов мобильных устройств.
* Приложения, которые поддерживают iOS, должны быть полностью функциональны на последнем устройстве iPad с использованием последней версии iOS.
* Не должно включать прямую ссылку на покупки из приложения, пробные предложения, предложения для платных версий или ссылки на любые интернет-магазины, где пользователи могут приобретать другой контент, приложения или надстройки из приложения Teams на мобильной оси (Android, iOS).
* Версия надстройки для iOS или Android не должна показывать пользовательский интерфейс или язык или ссылку на другие приложения, надстройки или веб-сайт, которые просит пользователя оплатить.
* На связанных страницах политики конфиденциальности и условий использования также не должно быть коммерческих ссылок на пользовательский интерфейс или магазин.

### <a name="9989-do-not-post-sensitive-data-to-an-audience-not-intended-to-view-the-data"></a>&#9989; Не публикуть конфиденциальные данные в аудитории, которая не предназначена для просмотра данных

Ваше приложение Teams не должно размещать конфиденциальные данные, такие как кредитная карта или инструмент финансовых платежей, персональные данные (PIN-код), сведения о состоянии здоровья или контактные данные трассиры для аудитории, которая не предназначена для просмотра этих данных.

### <a name="9989-do-not-transmit-financial-payment-details-or-complete-financial-transactions-via-your-teams-app"></a>&#9989; Не передавать финансовые данные о платежах и транзакциях с помощью приложения Teams

* Ваше приложение Teams не должно попросить пользователей внести платеж непосредственно в интерфейсе Teams
* Приложения могут не передавать сведения о финансовых инструментах через пользователя в интерфейсе приложения. Приложения могут передавать ссылки на безопасные платежные службы пользователям, только если они разглашаются в условиях использования, политике конфиденциальности и любой странице профиля или веб-сайте приложения, прежде чем пользователь согласится использовать приложение.

### <a name="9989-clear-warning-before-downloading-any-files-or-executable-exe-into-a-users-environment"></a>&#9989; очистить предупреждение перед загрузкой любых файлов или исполняемых файлов ( ) в `.exe` среду пользователя

Предупредите пользователей, прежде чем ваше приложение загрузит файлы или исполняемые файлы ( )на компьютер `.exe`  или в среду пользователя.

### <a name="9989-messaging-extensions-should-provide-help-text-and-be-easy-to-read"></a>&#9989; сообщений должны предоставлять текст справки и быть простыми в прочтение

* Расширение обмена сообщениями на основе поиска должно предоставлять текст справки о том, как эффективно искать (например, показывать пример ввода).
* Модули задач должны содержать значок и короткое имя, которые содержатся в приложении или создаются из него.
* Исполняемые исполняемые сообщения расширения сообщений должны быть понятными, понятными `@mention` и понятными.
![Расширение сообщения](../../../../assets/images/faq/message-extension.png)

## <a name="m365-publisher-attestation"></a>M365 Publisher Attestation

### <a name="9989-complete-the-publisher-attestation-in-partner-center"></a>&#9989; завершения проверки издателя в Центре партнеров

* Дополнительные сведения [можно найти](/microsoft-365-app-certification/docs/attestation) в документации по программе полной проверки издателя.
* Выполните действия, которые необходимо выполнить в разделе ["Рабочий](/microsoft-365-app-certification/docs/userguide#3publisher-attestation-workflow) процесс проверки издателя", чтобы завершить процесс проверки издателя. Напишите в appcert@microsoft.com для любых вопросов.
* Дополнительные сведения [можно найти в](/azure/active-directory/develop/troubleshoot-publisher-verification) руководстве по устранению неполадок.
* Завершите самостоятель через Центр партнеров. Заполните анкету Self-Assessment соответствия **требованиям приложений.**

> [!div class="nextstepaction"]
> [Узнайте больше о политиках утверждения приложений Teams](/legal/marketplace/certification-policies#1140-teams)
