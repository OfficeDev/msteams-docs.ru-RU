---
title: Предварительное тестирование для приложений с монетизацией
author: v-ypalikila
description: Создайте и протестируйте предварительные предложения SaaS для приложения Teams, прежде чем опубликовать свое предложение.
ms.topic: conceptual
ms.author: v-ypalikila
ms.localizationpriority: high
keywords: приложения Teams предложение SaaS предварительное предложение предварительное тестирование монетизация SaaS
ms.openlocfilehash: a9427ba61d1432485e1630eb42f72106c0e842ca
ms.sourcegitcommit: 7f224d37d23e5a3f72b83254e556f5b33e807bca
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2022
ms.locfileid: "63501958"
---
# <a name="test-preview-for-monetized-apps"></a>Предварительное тестирование для приложений с монетизацией

> [!NOTE]
> Предварительное тестирование для приложений с монетизацией в настоящее время доступно только в [**предварительной версии для разработчиков**](/microsoftteams/platform/resources/dev-preview/developer-preview-intro).

Вы можете создать предложение "программное обеспечение как услуга (SaaS)" и полностью протестировать функции покупок для своих приложений с монетизацией в Teams. Пользователи, добавленные в качестве предварительной аудитории для приложения Teams, могут просмотреть ваше предложение SaaS перед публикацией.

## <a name="create-a-preview-offer-id"></a>Создание ИД предварительного предложения

Вы можете создать ИД предварительного предложения из ссылки **Предварительная версия AppSource** в Центре партнеров. Убедитесь, что предложение SaaS находится на этапе создания предварительной версии. Чтобы создать ИД предварительного предложения:

1. Перейдите в [Центр партнеров](https://go.microsoft.com/fwlink/?linkid=2166002) и войдите с помощью учетных данных разработчика.
1. Выберите **Предложения Marketplace**.
1. Выберите предложение SaaS для создания предварительной версии.
1. Добавьте [предварительную аудиторию](/azure/marketplace/create-new-saas-offer-preview) для предложения SaaS.
1. Щелкните ссылку **Предварительная версия AppSource** в разделе **Публикация**, чтобы найти ИД предварительного предложения в адресной строке браузера в формате *publisherId.offerId-preview*.

    :::image type="content" source="../../../../assets/images/apps-in-meetings/publish-status-publisher-signoff.png" alt-text="ИД предварительного предложения" border="true" :::

1. Скопируйте ИД предварительного предложения из адресной строки браузера.

      :::image type="content" source="../../../../assets/images/apps-in-meetings/test-preview-monetized-apps-preview-offer-id.png" alt-text="ИД предварительного предложения" border="true" :::

    > [!NOTE]
    > В отличие от ИД общедоступного предложения, ИД предварительного предложения можно узнать по суффиксу *-preview*. Например, **publisherId.offerId-preview**.

## <a name="configure-your-app-with-the-preview-offer-id"></a>Настройка приложения с использованием ИД предварительного предложения

Перед началом работы войдите на **портал разработчика** с помощью учетной записи разработчика с **предварительной аудиторией**, чтобы пользователи увидели ваши планы подписок в магазине Teams.

После создания ИД предварительного предложения, свяжите ИД предложения с вашим приложением Teams. Чтобы связать ИД предложения:

1. Перейдите на [портал разработчика](https://dev.teams.microsoft.com/) и войдите с помощью учетных данных разработчика.
1. Выберите **Приложения** в левой области.
1. Выберите приложение для связывания с предложением SaaS.
1. Выберите **Планы и цены** и введите **ИД издателя** и **ИД предложения**.  
  Убедитесь, что ИД предложения содержит суффикс *-preview*.
1. Выберите **Просмотр** для предварительного просмотра планов подписки.
1. Просмотрите планы, перечисленные в разделе **Подписка на приложения**, и выберите **Сохранить**.

    :::image type="content" source="../../../../assets/images/apps-in-meetings/test-preview-add-offer-id.png" alt-text="добавление ИД предложения" :::

Свойство subscriptionOffer добавляется в манифест приложения.

```json
"subscriptionOffer": {
     "offerId": "publisherId.offerId-preview"  
     }
```

>[!NOTE]
> Проверьте наличие метки *Предварительное предложение* рядом с пунктом **Подписка на приложения**, которая подтверждает, что это предложение является предварительным.

## <a name="sideload-the-app-to-teams"></a>Загрузка неопубликованного приложения в Teams

После настройки приложения с использованием ИД предварительного предложения создайте обновленный пакет приложения и отправьте его в Teams, чтобы полностью протестировать функции покупок. Дополнительные сведения см. в статье [Отправка приложения в Microsoft Teams](../../apps-upload.md). Вы также можете выбрать **Предварительный просмотр в Teams** на портале разработчика для Teams, чтобы быстро запустить приложение в клиенте Teams.

Если предварительное предложение указывается в манифесте приложения, а предварительная аудитория определена в Центре партнеров для предложения, пользователь может увидеть кнопку **Купить подписку**.

:::image type="content" source="../../../../assets/images/apps-in-meetings/test-preview-buy-subscription.png" alt-text="купить подписку" border="true":::

### <a name="error-scenarios"></a>Сценарии ошибок

* Если указано ИД предложения, но пользователь не является частью **предварительной аудитории**, определенной в Центре партнеров, кнопка **Купить подписку** не активирована, а приложение демонстрирует пользователю следующее предупреждение.

  Не найдены планы с **-preview**. Убедитесь, что вы относитесь к предварительной аудитории.

  :::image type="content" source="../../../../assets/images/apps-in-meetings/test-preview-no-preview-audience.png" alt-text="нет предварительной аудитории" border="true" :::

* Если ИД предложения, указанный в манифесте приложения, не относится к предварительному предложению, приложение демонстрирует пользователю следующее предупреждение, а загрузка без публикации отключается.
  
  Это не предварительное предложение. Обязательно добавьте **-preview** к ИД предложения.

  :::image type="content" source="../../../../assets/images/apps-in-meetings/test-preview-no-preview-offer-id.png" alt-text="нет -preview" border="true" :::

## <a name="see-also"></a>См. также

* [Включение предложения SaaS в приложение Microsoft Teams](include-saas-offer.md)
* [Создание предложения SaaS (программное обеспечение как услуга)](include-saas-offer.md#create-your-saas-offer)
* [Добавление предварительной аудитории для предложения SaaS](/azure/marketplace/create-new-saas-offer-preview)
* [Этап создания предварительной версии](/azure/marketplace/review-publish-offer)
* [Проверка и публикация предложения в коммерческом Marketplace](/azure/marketplace/review-publish-offer#validation-and-publishing-steps)
