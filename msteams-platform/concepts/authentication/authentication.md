---
title: Проверка подлинности пользователей приложений
description: Описывает проверку подлинности в Teams и ее использование в приложениях
ms.topic: conceptual
keywords: группы проверки подлинности OAuth SSO AAD
ms.openlocfilehash: 33ef0c55842c495ca44495bc0653a47b147ebbfc
ms.sourcegitcommit: dd2220f691029d043aaddfc7c229e332735acb1d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/24/2021
ms.locfileid: "51995997"
---
# <a name="authenticate-users-in-microsoft-teams"></a><span data-ttu-id="c7671-104">Проверка подлинности пользователей в Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="c7671-104">Authenticate users in Microsoft Teams</span></span>

> [!NOTE]
> <span data-ttu-id="c7671-105">Веб-проверка подлинности для мобильных клиентов требует версии 1.4.1 или более поздней версии SDK JavaScript Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="c7671-105">Web-based authentication on mobile clients requires version 1.4.1 or later of the Microsoft Teams JavaScript SDK.</span></span>

<span data-ttu-id="c7671-106">Чтобы получить доступ к данным пользователей, защищенным Azure Active Directory (AAD) и получить доступ к данным из таких служб, как Facebook и Twitter, приложение устанавливает надежное подключение к этим поставщикам.</span><span class="sxs-lookup"><span data-stu-id="c7671-106">To access user information protected by Azure Active Directory (AAD) and to access data from services like Facebook and Twitter, the app establishes a trusted connection with those providers.</span></span> <span data-ttu-id="c7671-107">Если приложение использует API Microsoft Graph в области пользователя, проверка подлинности пользователя для получения соответствующих маркеров проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="c7671-107">If the app uses Microsoft Graph APIs in the user scope, authenticate the user to retrieve the appropriate authentication tokens.</span></span>

<span data-ttu-id="c7671-108">В Teams существует два разных потока проверки подлинности для приложения.</span><span class="sxs-lookup"><span data-stu-id="c7671-108">In Teams, there are two different authentication flows for the app.</span></span> <span data-ttu-id="c7671-109">Выполните традиционный поток проверки [](~/tabs/how-to/create-tab-pages/content-page.md) подлинности на веб-сайте на странице контента, встроенной в вкладку, страницу конфигурации или модуль задач.</span><span class="sxs-lookup"><span data-stu-id="c7671-109">Perform a traditional web-based authentication flow in a [content page](~/tabs/how-to/create-tab-pages/content-page.md) embedded in a tab, a configuration page, or a task module.</span></span> <span data-ttu-id="c7671-110">Если приложение содержит разговорный бот, используйте поток OAuthPrompt и необязательно службу маркеров Azure Bot Framework для проверки подлинности пользователя в рамках беседы.</span><span class="sxs-lookup"><span data-stu-id="c7671-110">If the app contains a conversational bot, use the OAuthPrompt flow and optionally the Azure Bot Framework's token service to authenticate a user as part of a conversation.</span></span>

## <a name="web-based-authentication-flow"></a><span data-ttu-id="c7671-111">Поток проверки подлинности на веб-основе</span><span class="sxs-lookup"><span data-stu-id="c7671-111">Web-based authentication flow</span></span>

<span data-ttu-id="c7671-112">Используйте веб-поток проверки подлинности [для](~/tabs/what-are-tabs.md) вкладок и выберите его с помощью разговорных [ботов](~/bots/what-are-bots.md) или [расширений обмена сообщениями.](~/messaging-extensions/what-are-messaging-extensions.md)</span><span class="sxs-lookup"><span data-stu-id="c7671-112">Use the web-based authentication flow for [tabs](~/tabs/what-are-tabs.md) and choose to use it with [conversational bots](~/bots/what-are-bots.md) or [messaging extensions](~/messaging-extensions/what-are-messaging-extensions.md).</span></span> <span data-ttu-id="c7671-113">Используйте [SDK](/javascript/api/overview/msteams-client) клиента Microsoft Teams JavaScript на странице веб-контента, чтобы включить проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="c7671-113">Use the [Microsoft Teams JavaScript client SDK](/javascript/api/overview/msteams-client) in a web content page to enable authentication.</span></span> <span data-ttu-id="c7671-114">После включения проверки подлинности встраить страницу контента в вкладку, страницу конфигурации или модуль задач.</span><span class="sxs-lookup"><span data-stu-id="c7671-114">After enabling authentication, embed the content page in a tab, a configuration page, or a task module.</span></span> <span data-ttu-id="c7671-115">Дополнительные сведения о потоке проверки подлинности на веб-основе см. в этой странице.</span><span class="sxs-lookup"><span data-stu-id="c7671-115">For more information on web-based authentication flow, see:</span></span>

* <span data-ttu-id="c7671-116">[Добавление проверки подлинности в бот Teams](~/bots/how-to/authentication/add-authentication.md) описывает использование потока веб-проверки подлинности с помощью беседного бота.</span><span class="sxs-lookup"><span data-stu-id="c7671-116">[Add authentication to the Teams bot](~/bots/how-to/authentication/add-authentication.md) describes how to use web-based authentication flow with a conversational bot.</span></span>
* <span data-ttu-id="c7671-117">[Поток проверки подлинности на вкладке](~/tabs/how-to/authentication/auth-flow-tab.md) описывает работу проверки подлинности вкладок в Teams.</span><span class="sxs-lookup"><span data-stu-id="c7671-117">[Authentication flow in tabs](~/tabs/how-to/authentication/auth-flow-tab.md) describes how tab authentication works in Teams.</span></span> <span data-ttu-id="c7671-118">Это показывает типичный поток проверки подлинности на веб-основе, используемый для вкладок.</span><span class="sxs-lookup"><span data-stu-id="c7671-118">This shows a typical web-based authentication flow used for tabs.</span></span>
* <span data-ttu-id="c7671-119">[Проверка подлинности AAD на вкладке](~/tabs/how-to/authentication/auth-tab-AAD.md) описывает, как подключиться к AAD из вкладки в приложении Teams.</span><span class="sxs-lookup"><span data-stu-id="c7671-119">[AAD authentication in tabs](~/tabs/how-to/authentication/auth-tab-AAD.md) describes how to connect to AAD from within a tab in the app in Teams.</span></span>
* <span data-ttu-id="c7671-120">[Silent authentication AAD](~/tabs/how-to/authentication/auth-silent-AAD.md) describes how to reduce sign-in or consent prompts in the app using AAD.</span><span class="sxs-lookup"><span data-stu-id="c7671-120">[Silent authentication AAD](~/tabs/how-to/authentication/auth-silent-AAD.md) describes how to reduce sign-in or consent prompts in the app using AAD.</span></span>
* <span data-ttu-id="c7671-121">[.Net или C#](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp) [JavaScript ](https://github.com/OfficeDev/microsoft-teams-sample-complete-node) или Node.jsпредоставляет образцы для проверки подлинности на основе веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="c7671-121">[.Net or C#](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp) or [JavaScript or Node.js](https://github.com/OfficeDev/microsoft-teams-sample-complete-node) provides samples for web-based authentication.</span></span>

## <a name="the-oauthprompt-flow-for-conversational-bots"></a><span data-ttu-id="c7671-122">Поток OAuthPrompt для разговорных ботов</span><span class="sxs-lookup"><span data-stu-id="c7671-122">The OAuthPrompt flow for conversational bots</span></span>

<span data-ttu-id="c7671-123">OAuthPrompt Azure Bot Framework упрощает проверку подлинности для приложений с помощью разговорных ботов.</span><span class="sxs-lookup"><span data-stu-id="c7671-123">The Azure Bot Framework’s OAuthPrompt makes authentication easier for apps using conversational bots.</span></span> <span data-ttu-id="c7671-124">Используйте службу маркеров Azure Bot Framework для помощи кэшингу маркеров.</span><span class="sxs-lookup"><span data-stu-id="c7671-124">Use Azure Bot Framework's token service to assist with token caching.</span></span>

<span data-ttu-id="c7671-125">Дополнительные сведения об использовании OAuthPrompt см.:</span><span class="sxs-lookup"><span data-stu-id="c7671-125">For more information on using the OAuthPrompt, see:</span></span>

* <span data-ttu-id="c7671-126">[Обзор потока проверки подлинности ботов](~/bots/how-to/authentication/auth-flow-bot.md) описывает работу проверки подлинности в боте в приложении в Teams.</span><span class="sxs-lookup"><span data-stu-id="c7671-126">[Bot authentication flow overview](~/bots/how-to/authentication/auth-flow-bot.md) describes how authentication works within a bot in the app in Teams.</span></span> <span data-ttu-id="c7671-127">Здесь показан не веб-поток проверки подлинности, используемый для ботов в веб-, настольных приложениях и мобильных приложениях Teams.</span><span class="sxs-lookup"><span data-stu-id="c7671-127">This shows a non-web-based authentication flow used for bots on Teams web, desktop app, and mobile apps.</span></span>
* <span data-ttu-id="c7671-128">[Проверка подлинности ботов](~/bots/how-to/authentication/add-authentication.md) описывает добавление проверки подлинности OAuth в бот Teams.</span><span class="sxs-lookup"><span data-stu-id="c7671-128">[Bot authentication](~/bots/how-to/authentication/add-authentication.md) describes how to add OAuth authentication to the Teams bot.</span></span>

## <a name="code-sample"></a><span data-ttu-id="c7671-129">Пример кода</span><span class="sxs-lookup"><span data-stu-id="c7671-129">Code sample</span></span>

<span data-ttu-id="c7671-130">предоставляет образец проверки подлинности бота v3 SDK.</span><span class="sxs-lookup"><span data-stu-id="c7671-130">provides Bot authentication v3 SDK sample.</span></span>

| <span data-ttu-id="c7671-131">**Пример имени**</span><span class="sxs-lookup"><span data-stu-id="c7671-131">**Sample name**</span></span> | <span data-ttu-id="c7671-132">**Описание**</span><span class="sxs-lookup"><span data-stu-id="c7671-132">**Description**</span></span> | <span data-ttu-id="c7671-133">**.NET**</span><span class="sxs-lookup"><span data-stu-id="c7671-133">**.NET**</span></span> | <span data-ttu-id="c7671-134">**Node.js**</span><span class="sxs-lookup"><span data-stu-id="c7671-134">**Node.js**</span></span> | <span data-ttu-id="c7671-135">**Python**</span><span class="sxs-lookup"><span data-stu-id="c7671-135">**Python**</span></span> |
|---------------|------------|------------|-------------|---------------|
| <span data-ttu-id="c7671-136">Проверка подлинности ботов</span><span class="sxs-lookup"><span data-stu-id="c7671-136">Bot authentication</span></span> | <span data-ttu-id="c7671-137">В этом примере показано, как начать проверку подлинности в боте для Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="c7671-137">This sample shows how to get started with authentication in a bot for Microsoft Teams.</span></span> | [<span data-ttu-id="c7671-138">View</span><span class="sxs-lookup"><span data-stu-id="c7671-138">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/46.teams-auth) | [<span data-ttu-id="c7671-139">View</span><span class="sxs-lookup"><span data-stu-id="c7671-139">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/46.teams-auth) | [<span data-ttu-id="c7671-140">View</span><span class="sxs-lookup"><span data-stu-id="c7671-140">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/46.teams-auth) |

## <a name="configure-the-identity-provider"></a><span data-ttu-id="c7671-141">Настройка поставщика удостоверений</span><span class="sxs-lookup"><span data-stu-id="c7671-141">Configure the identity provider</span></span>

<span data-ttu-id="c7671-142">Независимо от потока проверки подлинности приложения настройте поставщика удостоверений для связи с приложением Teams.</span><span class="sxs-lookup"><span data-stu-id="c7671-142">Regardless of the app's authentication flow, configure the identity provider to communicate with the Teams app.</span></span> <span data-ttu-id="c7671-143">Большинство примеров и поуча-ов в основном связаны с использованием AAD в качестве поставщика удостоверений.</span><span class="sxs-lookup"><span data-stu-id="c7671-143">Most samples and walkthroughs primarily deal with using AAD as the identity provider.</span></span> <span data-ttu-id="c7671-144">Однако концепции применяются независимо от поставщика удостоверений.</span><span class="sxs-lookup"><span data-stu-id="c7671-144">The concepts, however, apply regardless of the identity provider.</span></span>

<span data-ttu-id="c7671-145">Дополнительные сведения см. [в примере настройки поставщика удостоверений.](~/concepts/authentication/configure-identity-provider.md)</span><span class="sxs-lookup"><span data-stu-id="c7671-145">For more information, see [configuring an identity provider](~/concepts/authentication/configure-identity-provider.md).</span></span>
