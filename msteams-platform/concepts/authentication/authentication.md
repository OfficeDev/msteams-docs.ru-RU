---
title: Проверка подлинности пользователя в Teams
description: Описание проверки подлинности в Teams и ее использования в приложениях
keywords: Проверка подлинности OAuth SSO SSO для Teams AAD
ms.openlocfilehash: d3ae57d9937c6794fb743b44ca8210a5afd181bf
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "41675286"
---
# <a name="authentication-in-teams"></a><span data-ttu-id="8a210-104">Проверка подлинности в Teams</span><span class="sxs-lookup"><span data-stu-id="8a210-104">Authentication in Teams</span></span>

> [!Note]
> <span data-ttu-id="8a210-105">Для проверки подлинности на основе веб-клиента на мобильных клиентах требуется версия 1.4.1 или более поздняя версия пакета SDK для Teams.</span><span class="sxs-lookup"><span data-stu-id="8a210-105">Web-based authentication on mobile clients requires version 1.4.1 or later of the Teams JavaScript SDK.</span></span>

<span data-ttu-id="8a210-106">Чтобы ваше приложение было иметь доступ к сведениям о пользователях, защищенным службой Azure Active Directory, а также получать доступ к данным из других служб, таких как Facebook и Twitter, ваше приложение будет устанавливать доверенное подключение к этим поставщикам.</span><span class="sxs-lookup"><span data-stu-id="8a210-106">In order for your app to access user information protected by Azure Active Directory, as well as access data from other services like Facebook and Twitter, your app will have to establish a trusted connection with those providers.</span></span> <span data-ttu-id="8a210-107">Если ваше приложение должно использовать API Microsoft Graph в области пользователя, вам также потребуется проверить подлинность пользователя для получения соответствующих маркеров проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8a210-107">If your app needs to use Microsoft Graph APIs in the user scope, you'll also need to authenticate the user to retrieve the appropriate authentication tokens.</span></span>

<span data-ttu-id="8a210-108">В Microsoft Teams существует два разных потока проверки подлинности для использования в приложении.</span><span class="sxs-lookup"><span data-stu-id="8a210-108">In Microsoft Teams there are two different authentication flows for your app to take advantage of.</span></span> <span data-ttu-id="8a210-109">Вы можете выполнять обычный веб-процесс проверки подлинности на [странице контента](~/tabs/how-to/create-tab-pages/content-page.md) , внедренной на вкладке, странице конфигурации или модулем задачи.</span><span class="sxs-lookup"><span data-stu-id="8a210-109">You can perform a traditional web-based authentication flow in a [content page](~/tabs/how-to/create-tab-pages/content-page.md) embedded in a tab, a configuration page, or a task module.</span></span> <span data-ttu-id="8a210-110">Если ваше приложение содержит объект Bot для общения, вы можете использовать для проверки подлинности пользователя Оауспромпт (и, при необходимости, службу маркеров Azure Bot Framework) для проверки подлинности пользователя в составе беседы.</span><span class="sxs-lookup"><span data-stu-id="8a210-110">If your app contains a conversational bot you can use the OAuthPrompt flow (and optionally the Azure Bot Framework's token service) to authenticate a user as part of a conversation.</span></span>

## <a name="web-based-authentication-flow"></a><span data-ttu-id="8a210-111">Веб-процесс проверки подлинности на основе веб-сайта</span><span class="sxs-lookup"><span data-stu-id="8a210-111">Web-based authentication flow</span></span>

<span data-ttu-id="8a210-112">Вам потребуется использовать для [вкладок](~/tabs/what-are-tabs.md)режим веб-проверки подлинности, а также использовать его с [Боты](~/bots/what-are-bots.md) или [расширениями обмена сообщениями](~/messaging-extensions/what-are-messaging-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="8a210-112">You'll need to use the web-based authentication flow for [tabs](~/tabs/what-are-tabs.md), and can choose to use it with [conversational bots](~/bots/what-are-bots.md) or [messaging extensions](~/messaging-extensions/what-are-messaging-extensions.md).</span></span> <span data-ttu-id="8a210-113">Для включения проверки подлинности используется [клиентский пакет SDK Microsoft Teams JavaScript](/javascript/api/overview/msteams-client) на странице веб-контента, затем внедрите эту страницу в вкладку, страницу конфигурации или модуль задачи.</span><span class="sxs-lookup"><span data-stu-id="8a210-113">You'll use the [Microsoft Teams JavaScript client SDK](/javascript/api/overview/msteams-client) in a web content page to enable authentication, then embed that content page in a tab, a configuration page, or a task module.</span></span> <span data-ttu-id="8a210-114">Если вы хотите использовать процесс проверки подлинности на основе веб-сайта с помощью диалогового окна "робот", вам потребуется [использовать модуль задачи с помощью Bot](~/task-modules-and-cards/task-modules/task-modules-bots.md).</span><span class="sxs-lookup"><span data-stu-id="8a210-114">If you want to use the web-based authentication flow with a conversational bot, you'll need to [use a task module with a bot](~/task-modules-and-cards/task-modules/task-modules-bots.md).</span></span>

* <span data-ttu-id="8a210-115">[В разделе Проверка подлинности на вкладках](~/tabs/how-to/authentication/auth-flow-tab.md) показано, как работает проверка подлинности в Teams.</span><span class="sxs-lookup"><span data-stu-id="8a210-115">[Authentication flow in tabs](~/tabs/how-to/authentication/auth-flow-tab.md) describes how tab authentication works in Teams.</span></span> <span data-ttu-id="8a210-116">В этом примере показан типичный процесс проверки подлинности на основе веб-сайта, используемый для вкладок.</span><span class="sxs-lookup"><span data-stu-id="8a210-116">This shows a typical web based authentication flow used for tabs.</span></span>
* <span data-ttu-id="8a210-117">[Проверка подлинности Azure AD на вкладках](~/tabs/how-to/authentication/auth-tab-AAD.md) описывается, как подключаться к Azure Active Directory с помощью вкладки приложения в Teams.</span><span class="sxs-lookup"><span data-stu-id="8a210-117">[Azure AD authentication in tabs](~/tabs/how-to/authentication/auth-tab-AAD.md) describes how to connect to Azure Active Directory from within a tab in your app in Teams.</span></span>
* <span data-ttu-id="8a210-118">[Автоматическая проверка подлинности (Azure AD)](~/tabs/how-to/authentication/auth-silent-AAD.md) в этой статье рассказывается, как уменьшить количество запросов на вход и согласие с входом в приложение с помощью Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8a210-118">[Silent authentication (Azure AD)](~/tabs/how-to/authentication/auth-silent-AAD.md) describes how to reduce sign-in/consent prompts in your app using Azure Active Directory.</span></span>
* <span data-ttu-id="8a210-119">Проверка подлинности на основе веб-сайта в [DotNet/C#](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp) или [JavaScript/Node. js](https://github.com/OfficeDev/microsoft-teams-sample-complete-node)</span><span class="sxs-lookup"><span data-stu-id="8a210-119">Web-based authentication in [dotnet/C#](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp) or [JavaScript/Node.js](https://github.com/OfficeDev/microsoft-teams-sample-complete-node)</span></span>

## <a name="the-oauthprompt-flow-for-conversational-bots"></a><span data-ttu-id="8a210-120">Оауспромпт Flow для беседного Боты</span><span class="sxs-lookup"><span data-stu-id="8a210-120">The OAuthPrompt flow for conversational bots</span></span>

<span data-ttu-id="8a210-121">Оауспромпт в Azure Bot Framework упрощает проверку подлинности для приложений, использующих функции беседы Боты.</span><span class="sxs-lookup"><span data-stu-id="8a210-121">The Azure Bot Framework’s OAuthPrompt makes authentication easier for apps using conversational bots.</span></span> <span data-ttu-id="8a210-122">Кроме того, вы можете использовать службу маркеров Azure Bot Framework для кэширования маркеров.</span><span class="sxs-lookup"><span data-stu-id="8a210-122">You can take advantage of Azure Bot Framework's token service to assist with token caching as well.</span></span>

<span data-ttu-id="8a210-123">Более подробную информацию об использовании Оауспромпт можно найти в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="8a210-123">For more information on using the OAuthPrompt see:</span></span>

* <span data-ttu-id="8a210-124">[Общие сведения о](~/bots/how-to/authentication/auth-flow-bot.md) процессе проверки подлинности на Bot описываются в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="8a210-124">[Bot authentication flow overview](~/bots/how-to/authentication/auth-flow-bot.md) describes how authentication works within a bot in your app in Teams.</span></span> <span data-ttu-id="8a210-125">В этом примере показан процесс проверки подлинности на основе веб-сайта, используемый для Боты во всех версиях Teams (веб, классическое приложение и мобильные приложения).</span><span class="sxs-lookup"><span data-stu-id="8a210-125">This shows a non-web based authentication flow used for bots on all versions of Teams (web, desktop app, and mobile apps)</span></span>
* [<span data-ttu-id="8a210-126">Проверка подлинности с помощью Bot</span><span class="sxs-lookup"><span data-stu-id="8a210-126">Bot authentication</span></span>](~/bots/how-to/authentication/add-authentication.md)
* <span data-ttu-id="8a210-127">Пример кода односерверной проверки подлинности (v3 SDK) в [DotNet/C#](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/46.teams-auth) или [JavaScript/Node. js](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/46.teams-auth)</span><span class="sxs-lookup"><span data-stu-id="8a210-127">Bot authentication (v3 SDK) sample in [dotnet/C#](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/46.teams-auth) or [JavaScript/Node.js](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/46.teams-auth)</span></span>

## <a name="configure-your-identity-provider"></a><span data-ttu-id="8a210-128">Настройка поставщика удостоверений</span><span class="sxs-lookup"><span data-stu-id="8a210-128">Configure your identity provider</span></span>

<span data-ttu-id="8a210-129">Независимо от того, какой процесс проверки подлинности использует ваше приложение (вы можете использовать и то, и другое), вам потребуется настроить поставщик удостоверений для связи с приложением Teams.</span><span class="sxs-lookup"><span data-stu-id="8a210-129">Regardless of which authentication flow your app is using (you might even be using both), you'll need to configure your identity provider to communicate with your Teams app.</span></span> <span data-ttu-id="8a210-130">Большинство примеров и пошаговых руководств, которые вы найдете здесь, будут работать в первую очередь с помощью Azure Active Directory в качестве поставщика удостоверений.</span><span class="sxs-lookup"><span data-stu-id="8a210-130">The majority of the samples and walkthroughs you'll find here will deal primarily with using Azure Active Directory as your identity provider.</span></span> <span data-ttu-id="8a210-131">Однако концепции применяются независимо от поставщика удостоверений, который вы будете использовать.</span><span class="sxs-lookup"><span data-stu-id="8a210-131">The concepts however apply regardless of which identity provider you'll use.</span></span>

<span data-ttu-id="8a210-132">Дополнительные сведения см. [в статье Настройка поставщика удостоверений](~/concepts/authentication/configure-identity-provider.md)</span><span class="sxs-lookup"><span data-stu-id="8a210-132">For more information see [configuring an identity provider](~/concepts/authentication/configure-identity-provider.md)</span></span>
