---
title: Выбор программы установки для тестирования и отлаки приложения
description: Описание параметров тестирования и отладки приложений Microsoft Teams
keywords: команды запускают приложения отлаки
ms.topic: conceptual
ms.openlocfilehash: ea851a0d3ecf3ec87093bcc095050190a282c25e
ms.sourcegitcommit: 4539479289b43812eaae07a1c0f878bed815d2d2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2021
ms.locfileid: "49797801"
---
# <a name="choosing-a-setup-to-test-and-debug-your-microsoft-teams-app"></a><span data-ttu-id="b036c-104">Выбор программы установки для тестирования и отлаки приложения Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="b036c-104">Choosing a setup to test and debug your Microsoft Teams app</span></span>

<span data-ttu-id="b036c-105">Приложения Microsoft Teams могут содержать одну или несколько возможностей, и способы их запуска или даже их ведущего приложения могут быть другими.</span><span class="sxs-lookup"><span data-stu-id="b036c-105">Microsoft Teams apps can contain one or more capabilities, and the ways to run or even host them may be different.</span></span> <span data-ttu-id="b036c-106">В общем, для отладки у нас есть следующие способы запуска приложения Microsoft Teams:</span><span class="sxs-lookup"><span data-stu-id="b036c-106">When it comes to debugging, in general, we have the following ways to run your Microsoft Teams app:</span></span>

* <span data-ttu-id="b036c-107">**Чисто локальный** &emsp; Для ботов вы можете протестировать свой опыт в эмуляторе бота.</span><span class="sxs-lookup"><span data-stu-id="b036c-107">**Purely local**&emsp;For bots, you can test your experience in the Bot Emulator.</span></span> <span data-ttu-id="b036c-108">Для другого содержимого можно запускать локально в браузере и адресовать содержимое с помощью `http://localhost` .</span><span class="sxs-lookup"><span data-stu-id="b036c-108">For other content, you can run locally in your browser and address content through `http://localhost`.</span></span>
* <span data-ttu-id="b036c-109">**Локальное хостинг в Teams** &emsp; Для этого необходимо запускать локально с программным туннелингом и [создавать пакет](~/concepts/build-and-test/apps-package.md) для [отправки](~/concepts/deploy-and-publish/apps-upload.md) в Teams.</span><span class="sxs-lookup"><span data-stu-id="b036c-109">**Locally hosted, in Teams**&emsp;This involves running locally with tunneling software and [creating a package](~/concepts/build-and-test/apps-package.md) to [upload](~/concepts/deploy-and-publish/apps-upload.md) into Teams.</span></span> <span data-ttu-id="b036c-110">Это позволяет легко запускать и отлаголать приложение в клиенте Teams.</span><span class="sxs-lookup"><span data-stu-id="b036c-110">This allows you to easily run and debug your app within the Teams client.</span></span>
* <span data-ttu-id="b036c-111">**В Teams с облачным хостингом** Это действительно имитирует (или является) поддержку приложения Teams на уровне производства.</span><span class="sxs-lookup"><span data-stu-id="b036c-111">**Cloud-hosted, in Teams** This truly simulates (or is) production-level support for a Teams app.</span></span> <span data-ttu-id="b036c-112">Он включает отправку решения на доступный извне сервер или облачного поставщика (мы рекомендуем, конечно, Azure) и создание пакета для отправки [в](~/concepts/deploy-and-publish/apps-upload.md) Teams. [](~/concepts/build-and-test/apps-package.md)</span><span class="sxs-lookup"><span data-stu-id="b036c-112">It involves uploading your solution to your externally accessible server or cloud provider of choice (we recommend Azure, of course) and [creating a package](~/concepts/build-and-test/apps-package.md) to [upload](~/concepts/deploy-and-publish/apps-upload.md) into Teams.</span></span>

<span data-ttu-id="b036c-113">Для исключительно локального или локального тестирования Teams вы можете запускать этот опыт с собственного компьютера.</span><span class="sxs-lookup"><span data-stu-id="b036c-113">For purely local or local Teams testing, you run the experience from your own computer.</span></span> <span data-ttu-id="b036c-114">Это позволяет фактически компилировать и запускать IDE, а также использовать все преимущества таких методов, как точки останова и пошаговая отладка.</span><span class="sxs-lookup"><span data-stu-id="b036c-114">This allows you to actually compile and run within your IDE, and take full advantage of such techniques as breakpoints and step debugging.</span></span> <span data-ttu-id="b036c-115">Для отладки и тестирования в производственном масштабе рекомендуется следовать рекомендациям компании, чтобы обеспечить поддержку тестирования, промежуточного и развертывания с помощью собственных процессов.</span><span class="sxs-lookup"><span data-stu-id="b036c-115">For production-scale debugging and testing, we recommend that you follow your own company guidelines to ensure you are able to support testing, staging, and deployment through your own processes.</span></span>

<span data-ttu-id="b036c-116">Как правило, мы рекомендуем использовать несколько манифестов и пакетов, чтобы обеспечить разделение между производственными и службами разработки.</span><span class="sxs-lookup"><span data-stu-id="b036c-116">In general we recommend you use multiple manifests and packages to allow you to maintain separation between production and development services.</span></span> <span data-ttu-id="b036c-117">Например, можно зарегистрировать отдельные боты разработки и производства и создать соответствующие пакеты для их отправки в тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="b036c-117">For example, you might choose to register separate development and production bots and create appropriate packages to upload them in your testing environment.</span></span> <span data-ttu-id="b036c-118">Мы также рекомендуем отправить и протестировать свой производственный пакет перед отправкой приложения для публикации в нашем магазине приложений или распространением среди пользователей.</span><span class="sxs-lookup"><span data-stu-id="b036c-118">We also recommend you upload and test your production package before submitting your app for publishing in our app store, or distributing to customers.</span></span>

## <a name="purely-local"></a><span data-ttu-id="b036c-119">Чисто локальный</span><span class="sxs-lookup"><span data-stu-id="b036c-119">Purely local</span></span>

> [!NOTE]
> <span data-ttu-id="b036c-120">В этом случае вы не сможете получить доступ к функциям приложения Teams или функциям бота Teams, таким как вызовы в список и другие функции для каналов.</span><span class="sxs-lookup"><span data-stu-id="b036c-120">Running this way does not give you access to Teams app functionality or Teams-specific bot functions like roster calls and other channel-specific functionality.</span></span> <span data-ttu-id="b036c-121">Кроме того, некоторые возможности могут быть разрешены в Bot Framework в эмуляторе ботов, которые могут не работать при запуске в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="b036c-121">In addition, some capabilities may be allowed by the Bot Framework in the Bot Emulator that might not function when running in Microsoft Teams.</span></span>

<span data-ttu-id="b036c-122">Бот можно запустить в эмуляторе бота.</span><span class="sxs-lookup"><span data-stu-id="b036c-122">Your bot can be run within the Bot Emulator.</span></span> <span data-ttu-id="b036c-123">Это позволяет протестировать некоторые основные логики бота, увидеть примерный макет сообщений и выполнить простые тесты.</span><span class="sxs-lookup"><span data-stu-id="b036c-123">This enables you to test some of the core logic of the bot, see a rough layout of messages, and perform simple tests.</span></span> <span data-ttu-id="b036c-124">Необходимо выполнить следующие шаги.</span><span class="sxs-lookup"><span data-stu-id="b036c-124">Here are the steps:</span></span>

* <span data-ttu-id="b036c-125">Локальный запуск кода</span><span class="sxs-lookup"><span data-stu-id="b036c-125">Run the code locally</span></span>
* <span data-ttu-id="b036c-126">Запустите эмулятор бота и установите URL-адрес:</span><span class="sxs-lookup"><span data-stu-id="b036c-126">Launch the Bot Emulator and set the URL:</span></span>
  * <span data-ttu-id="b036c-127">Node.js: `http://localhost:3978/api/messages`</span><span class="sxs-lookup"><span data-stu-id="b036c-127">Node.js: `http://localhost:3978/api/messages`</span></span>
  * <span data-ttu-id="b036c-128">.NET/C#: `http://localhost:3979/api/messages`</span><span class="sxs-lookup"><span data-stu-id="b036c-128">.NET/C#: `http://localhost:3979/api/messages`</span></span>
* <span data-ttu-id="b036c-129">Оставьте код приложения Майкрософт и пароль приложения Майкрософт пустыми в соответствие с переменными среды по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b036c-129">Leave the Microsoft app ID and Microsoft app password blank, to match the default environment variables.</span></span>

## <a name="locally-hosted"></a><span data-ttu-id="b036c-130">Локальное</span><span class="sxs-lookup"><span data-stu-id="b036c-130">Locally hosted</span></span>

<span data-ttu-id="b036c-131">Так как Microsoft Teams является полностью облачным продуктом, он требует, чтобы все доступные ему службы были общедоступными с помощью конечных точек HTTPS.</span><span class="sxs-lookup"><span data-stu-id="b036c-131">Because Microsoft Teams is an entirely cloud-based product, it requires all services it accesses to be available publicly using HTTPS endpoints.</span></span> <span data-ttu-id="b036c-132">Таким образом, чтобы ваше приложение работало в Teams, необходимо опубликовать код в любом облаке или сделать локальный работающий экземпляр доступным извне.</span><span class="sxs-lookup"><span data-stu-id="b036c-132">Therefore, to enable your app to work within Teams, you need to either publish the code to the cloud of your choice, or make our local running instance externally accessible.</span></span> <span data-ttu-id="b036c-133">Последнее можно сделать с помощью программного обеспечения для туннелинга.</span><span class="sxs-lookup"><span data-stu-id="b036c-133">We can do the latter with tunneling software.</span></span>

<span data-ttu-id="b036c-134">Хотя вы можете использовать любое средство выбора, мы используем и рекомендуем [ngrok,](https://ngrok.com/download)который создает внешний URL-адрес для порта, открытого локально на компьютере.</span><span class="sxs-lookup"><span data-stu-id="b036c-134">Although you can use any tool of choice, we use and recommend [ngrok](https://ngrok.com/download), which creates an externally addressable URL for a port you open locally on your machine.</span></span> <span data-ttu-id="b036c-135">Настройка ngrok при подготовке к локальному запуску приложения Microsoft Teams:</span><span class="sxs-lookup"><span data-stu-id="b036c-135">To set up ngrok in preparation for running your Microsoft Teams app locally:</span></span>

* <span data-ttu-id="b036c-136">В приложении терминала перейдите к каталогу, в котором ngrok.exe установлено.</span><span class="sxs-lookup"><span data-stu-id="b036c-136">In a terminal application, go the directory where you have ngrok.exe installed.</span></span> <span data-ttu-id="b036c-137">Чтобы избежать этого шага, можно добавить его в качестве переменной пути.</span><span class="sxs-lookup"><span data-stu-id="b036c-137">You may want to add it as a path variable to avoid this step.</span></span>
* <span data-ttu-id="b036c-138">Запустите, например, или замените номер `ngrok http 3978 --host-header=localhost:3978` порта при необходимости.</span><span class="sxs-lookup"><span data-stu-id="b036c-138">Run, for example, `ngrok http 3978 --host-header=localhost:3978`, or replace the port number as needed.</span></span>

<span data-ttu-id="b036c-139">При этом ngrok запускается для прослушивания порта, который вы указали.</span><span class="sxs-lookup"><span data-stu-id="b036c-139">This launches ngrok to listen on the port you specify.</span></span> <span data-ttu-id="b036c-140">В ответ он предоставляет внешний URL-адрес, действительный до тех пор, пока работает ngrok.</span><span class="sxs-lookup"><span data-stu-id="b036c-140">In return, it gives you an externally addressable URL, valid for as long as ngrok is running.</span></span>

> [!NOTE]
> <span data-ttu-id="b036c-141">Если вы остановите и перезапустите ngrok, URL-адрес изменится.</span><span class="sxs-lookup"><span data-stu-id="b036c-141">If you stop and restart ngrok, the URL changes.</span></span>

<span data-ttu-id="b036c-142">Чтобы использовать ngrok в проекте и в зависимости от возможностей, необходимо заменить все ссылки на URL-адреса в коде, конфигурации и/или manifest.jsв файле, чтобы использовать эту конечную точку URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="b036c-142">To use ngrok in your project, and depending on the capabilities you are using, you must replace all URL references in your code, configuration, and/or manifest.json file to use this URL endpoint.</span></span>

<span data-ttu-id="b036c-143">Например, для ботов, зарегистрированных в Microsoft Bot Framework, обновите конечную точку обмена сообщениями бота, чтобы использовать эту новую конечную точку ngrok.</span><span class="sxs-lookup"><span data-stu-id="b036c-143">For example, for bots registered in the Microsoft Bot Framework, update the bot's messaging endpoint to use this new ngrok endpoint.</span></span> <span data-ttu-id="b036c-144">Например, `https://2d1224fb.ngrok.io/api/messages`.</span><span class="sxs-lookup"><span data-stu-id="b036c-144">For example, `https://2d1224fb.ngrok.io/api/messages`.</span></span> <span data-ttu-id="b036c-145">Вы можете проверить, работает ли ngrok, протестировать ответ бота в окне тестового чата портала Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="b036c-145">You can validate that ngrok is working by testing bot response in the Bot Framework portal's Test chat window.</span></span> <span data-ttu-id="b036c-146">(Опять же, как и эмулятор, этот тест не позволяет получить доступ к функциям Teams.)</span><span class="sxs-lookup"><span data-stu-id="b036c-146">(Again, like the emulator, this test doesn't allow you to access Teams-specific functionality.)</span></span>

> [!NOTE]
> <span data-ttu-id="b036c-147">Чтобы обновить конечную точку обмена сообщениями для бота, необходимо использовать Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="b036c-147">To update the messaging endpoint for a bot, you must use the Bot Framework.</span></span> <span data-ttu-id="b036c-148">Щелкните бота [в списке ботов в Bot Framework.](https://dev.botframework.com/bots)</span><span class="sxs-lookup"><span data-stu-id="b036c-148">Click on your bot in [your list of bots in Bot Framework](https://dev.botframework.com/bots).</span></span> <span data-ttu-id="b036c-149">Вам не нужно мигрировать бот в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="b036c-149">You do not need to migrate your bot to Microsoft Azure.</span></span> <span data-ttu-id="b036c-150">Вы также можете обновить конечную точку обмена сообщениями с [помощью App Studio.](~/concepts/build-and-test/app-studio-overview.md)</span><span class="sxs-lookup"><span data-stu-id="b036c-150">You can also update your messaging endpoint through [App Studio](~/concepts/build-and-test/app-studio-overview.md).</span></span>

## <a name="cloud-hosted"></a><span data-ttu-id="b036c-151">Размещение в облаке</span><span class="sxs-lookup"><span data-stu-id="b036c-151">Cloud-hosted</span></span>

<span data-ttu-id="b036c-152">Вы можете использовать любую внешнюю адресуемую службу для применения кода разработки и производства, а также конечных точек HTTPS.</span><span class="sxs-lookup"><span data-stu-id="b036c-152">You can use any externally addressable service to host your development and production code and their HTTPS endpoints.</span></span> <span data-ttu-id="b036c-153">Не ожидается, что ваши возможности будут находиться в одной службе.</span><span class="sxs-lookup"><span data-stu-id="b036c-153">There is no expectation that your capabilities reside on the same service.</span></span> <span data-ttu-id="b036c-154">Мы требуем, чтобы все домены, к которые имеют доступ из ваших приложений Microsoft Teams, были указаны в объекте в manifest.js[`validDomains`](~/resources/schema/manifest-schema.md#validdomains) в файле.</span><span class="sxs-lookup"><span data-stu-id="b036c-154">We do require that all domains being accessed from your Microsoft Teams apps be listed in the [`validDomains`](~/resources/schema/manifest-schema.md#validdomains) object in the manifest.json file.</span></span>

> [!NOTE]
> <span data-ttu-id="b036c-155">Чтобы обеспечить безопасную среду, в явном качестве укажийте конкретные домены и поддомены, на которые вы ссылались, и эти домены должны быть в вашем контроле.</span><span class="sxs-lookup"><span data-stu-id="b036c-155">To ensure a secure environment, be explicit about the exact domain and subdomains you reference, and those domains must be in your control.</span></span> <span data-ttu-id="b036c-156">Например, `*.azurewebsites.net` не рекомендуется, но `contoso.azurewebsites.net` будет.</span><span class="sxs-lookup"><span data-stu-id="b036c-156">For example, `*.azurewebsites.net` would not be recommended, but `contoso.azurewebsites.net` would.</span></span>

## <a name="loading-and-running"></a><span data-ttu-id="b036c-157">Загрузка и запуск</span><span class="sxs-lookup"><span data-stu-id="b036c-157">Loading and running</span></span>

<span data-ttu-id="b036c-158">Как правило, для загрузки и запуска работы в Microsoft Teams необходимо создать пакет и отправить его в Teams, следуя следующим рекомендациям:</span><span class="sxs-lookup"><span data-stu-id="b036c-158">In general, to load and run your experience within Microsoft Teams, you need to create a package and upload it into Teams, using the following guidance:</span></span>

* [<span data-ttu-id="b036c-159">Создание пакета для приложения Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="b036c-159">Create the package for your Microsoft Teams app</span></span>](~/concepts/build-and-test/apps-package.md)
* [<span data-ttu-id="b036c-160">Отправка приложения в Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="b036c-160">Upload your app in Microsoft Teams</span></span>](~/concepts/deploy-and-publish/apps-upload.md)
