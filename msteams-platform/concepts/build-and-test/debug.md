---
title: Выбор настройки для тестирования и отладки приложения
description: Описание параметров для тестирования и отладки приложений Microsoft Teams в локальной и облачной среде.
keywords: teams запуск отладка приложения локальный облачный узел
ms.localizationpriority: high
ms.topic: conceptual
ms.openlocfilehash: 957d673bfd3f7bbfaab05fd035e8de809fd66983
ms.sourcegitcommit: f15bd0e90eafb00e00cf11183b129038de8354af
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2022
ms.locfileid: "65111537"
---
# <a name="choose-a-setup-to-test-and-debug-your-microsoft-teams-app"></a>Выбор настройки для тестирования и отладки приложения Microsoft Teams

Приложения Microsoft Teams содержат одну или несколько возможностей, и способы их запуска или даже размещения различаются. Для отладки используйте один из следующих способов:

* **Исключительно локально.** Вы можете протестировать возможности бота в эмуляторе бота. Другое содержимое можно запускать локально в браузере. К нему можно обращаться с помощью `http://localhost`.
* **Локальное размещение в Teams**. Включает запуск приложения локально в программном обеспечении для туннелирования и [создание пакета](~/concepts/build-and-test/apps-package.md) для [отправки](~/concepts/deploy-and-publish/apps-upload.md) в Teams. Это позволяет легко запускать и отлаживать приложение в клиенте Teams.
* **Размещение в облаке в Teams**. Это действительно имитирует поддержку рабочего уровня для приложения Teams. Оно включает отправку решения на выбранный сервер с внешним доступом или поставщика облачных служб и [создание пакета](~/concepts/build-and-test/apps-package.md) для [отправки](~/concepts/deploy-and-publish/apps-upload.md) в Teams.

Запустите функцию со своего компьютера для исключительно локального или локального тестирования Teams. Это позволяет компилировать и запускать в интегрированной среде разработки и в полной мере использовать такие методы, как точки останова и пошаговая отладка.

> [!NOTE]
> Для отладки и тестирования в производственном масштабе рекомендуется следовать собственным рекомендациям компании, чтобы убедиться, что обеспечить тестирование, подготовку и развертывание с помощью собственных процессов.

Используйте несколько манифестов и пакетов, чтобы сохранить разделение между производственными службами и службами разработки. Например, вы можете зарегистрировать отдельных ботов для разработки и производства и создать соответствующие пакеты для их отправки в тестовую среду. Мы также рекомендуем загрузить и протестировать производственный пакет перед отправкой приложения для публикации в нашем магазине приложений или распространения среди клиентов.

## <a name="purely-local"></a>Исключительно локальный запуск

> [!NOTE]
> Локальный запуск бота не предоставляет вам доступ к функциям приложения Teams или функциям бота, специфичным для Teams, таким как вызовы реестра и другие функции, специфичные для канала. Кроме того, некоторые возможности, разрешенные платформой Bot Framework в эмуляторе бота, могут не работать при запуске в Microsoft Teams.

Бот может быть запущен в эмуляторе бота. Это позволяет протестировать некоторые основные логики бота, увидеть примерный макет сообщений и выполнить простые тесты. Ниже описаны этапы этого процесса.

1. Запустите код локально.
2. Запустите эмулятор бота и задайте URL-адрес:
   * Node.js: `http://localhost:3978/api/messages`
   * .NET/C#: `http://localhost:3979/api/messages`
3. Оставьте идентификатор приложения Майкрософт и пароль приложения Майкрософт пустыми, чтобы они соответствовали переменным среды по умолчанию.

## <a name="locally-hosted"></a>Локальное размещение

Microsoft Teams является полностью облачным продуктом. Для него требуется, чтобы все используемые службы были доступны общедоступны с помощью конечных точек HTTPS. Таким образом, чтобы приложение могло работать в Teams, вам необходимо либо опубликовать код в облаке по вашему выбору, либо сделать локальный запущенный экземпляр доступным из внешней среды. Последнее можно сделать с помощью программного обеспечения для туннелирования.

Хотя вы можете использовать любое средство по вашему выбору, мы используем и рекомендуем средство [ngrok](https://ngrok.com/download), которое создает доступный из внешней среды URL-адрес для порта, который вы открываете локально на компьютере.

Чтобы настроить ngrok для подготовки к локальному запуску приложения Microsoft Teams, выполните следующие действия.

1. Перейдите в каталог, в котором у вас установлен ngrok.exe в приложении терминалов. Чтобы избежать этого шага, его можно добавить в качестве переменной пути.
2. Выполните, например, `ngrok http 3978 --host-header=localhost:3978`, или замените номер порта по мере необходимости.
   При этом запускается ngrok для отображения указанного порта. В ответ он предоставляет доступный из внешней среды URL-адрес, действительный до тех пор, пока запущен ngrok.

> [!NOTE]
> Если остановить и перезапустить ngrok, URL-адрес изменится.

Чтобы использовать ngrok в проекте на основе используемых возможностей, необходимо заменить все ссылки URL-адреса в своем коде, конфигурации и файле manifest.json, чтобы использовать эту конечную точку URL-адреса.

Для ботов, зарегистрированных в Microsoft Bot Framework, обновите конечную точку обмена сообщениями бота, чтобы использовать эту новую конечную точку ngrok. Например, `https://2d1224fb.ngrok.io/api/messages`. Вы можете убедиться, что ngrok работает, проверив ответ бота в окне тестового чата на портале Bot Framework. Как и в эмуляторе, этот тест не позволяет получить доступ к функциям Teams.

> [!NOTE]
> Чтобы обновить конечную точку обмена сообщениями для бота, необходимо использовать Bot Framework. Выберите бота в [списке ботов в Bot Framework](https://dev.botframework.com/bots). Вам не нужно переносить бот в Microsoft Azure. Вы также можете обновить конечную точку обмена сообщениями с помощью [App Studio](~/concepts/build-and-test/app-studio-overview.md).

## <a name="cloud-hosted"></a>Размещение в облаке

Вы можете использовать любую службу с внешними адресами для размещения кода разработки и производства и их конечных точек HTTPS. Нет никаких ожиданий, что ваши возможности находятся в одной службе. Требуется, чтобы все домены были доступны из приложений Microsoft Teams, перечисленных в объекте [`validDomains`](~/resources/schema/manifest-schema.md#validdomains) в файле `manifest.json`.

> [!NOTE]
> Чтобы обеспечить безопасную среду, четко укажите домен и поддомены, на которые вы ссылаетесь, и эти домены должны находиться под вашим контролем. Например, `*.azurewebsites.net` не рекомендуется, однако `contoso.azurewebsites.net` рекомендуется.

## <a name="load-and-run-your-experience"></a>Загрузка и запуск функции

Чтобы загрузить и запустить свою функцию в Microsoft Teams, вам необходимо создать пакет и загрузить его в Teams. Дополнительные сведения см. в указанных ниже статьях.

* [Создание пакета приложения Microsoft Teams](~/concepts/build-and-test/apps-package.md)
* [Отправка приложения в Microsoft Teams](~/concepts/deploy-and-publish/apps-upload.md).

## <a name="next-step"></a>Следующий этап

> [!div class="nextstepaction"]
> [Добавление тестовых данные в среду](~/concepts/build-and-test/test-data.md)

## <a name="see-also"></a>Дополнительные ресурсы

[Локальное тестирование и отладка бота](../../bots/how-to/debug/locally-with-an-ide.md#test-and-debug-your-bot-locally)
