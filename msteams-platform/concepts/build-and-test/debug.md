---
title: Выбор конфигурации для тестирования и отладки приложения
description: Описание параметров тестирования и отладки Microsoft Teams в локальной и облачной среде.
keywords: команды запуск отладка приложения локальное размещение в облаке узел
ms.localizationpriority: high
ms.topic: conceptual
ms.openlocfilehash: e87032cbe9b116aa0ddbe816169c2763301edd07
ms.sourcegitcommit: 591bab4c7e01ac9099b9a540f149b64e6e31e6e8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2022
ms.locfileid: "65135761"
---
# <a name="choose-a-setup-to-test-and-debug-your-microsoft-teams-app"></a>Выбор конфигурации для тестирования и отладки приложения Microsoft Teams

Приложения Microsoft Teams содержат одну или несколько возможностей, причем способы запуска и даже размещения для них различаются. Для отладки используйте один из следующих способов:

* **Исключительно локально.** Для ботов можно протестировать пользовательское взаимодействие в службе эмулятора ботов. Другие типы программ можно запускать локально в браузере и адресовать содержимое с помощью `http://localhost`.
* **Локальное размещение в Teams**. Это подразумевает запуск приложения локально с помощью туннелирующего программного обеспечения и [создание пакета](~/concepts/build-and-test/apps-package.md) для [отправки](~/concepts/deploy-and-publish/apps-upload.md) в Teams. Это позволяет легко запускать и отлаживать приложение в клиенте Teams.
* **Размещение в облаке в Teams**. Этот сценарий обеспечивает полную имитацию поддержки приложения Teams в производственной среде. Он включает отправку решения на выбранный внешний сервер или поставщик облачных служб и [создание пакета](~/concepts/build-and-test/apps-package.md) для [отправки](~/concepts/deploy-and-publish/apps-upload.md) в Teams.

Запустите интерфейс с собственного компьютера для исключительно локального тестирования или локального тестирования в Teams. Это позволяет компилировать и запускать интегрированную среду разработки и использовать все преимущества таких методов, как точки останова и пошаговая отладка.

> [!NOTE]
> Для отладки и тестирования в производственном масштабе рекомендуется следовать собственным рекомендациям компании, чтобы обеспечить поддержку тестирования, промежуточного размещения и развертывания с помощью собственных процессов.

Используйте несколько манифестов и пакетов для поддержания разделения между службами разработки и производственными службами. Например, вы можете зарегистрировать отдельные боты для среды разработки и производственной среды и создать соответствующие пакеты для их отправки в тестовую среду. Мы также рекомендуем отправить и протестировать рабочий пакет перед отправкой приложения для публикации в нашем магазине приложений или распространения клиентам.

## <a name="purely-local"></a>Исключительно локальное

> [!NOTE]
> Локальный запуск бота не предоставляет доступ к функциям Teams приложения или функциям бота, специфичным для Teams, таким как вызовы списков личного состава и другие функциональные возможности, относящиеся к каналам. Кроме того, Bot Framework реализует в эмуляторе ботов некоторые возможности, которые могут не работать при запуске в Microsoft Teams.

Бот можно запустить в эмуляторе ботов. Это позволяет протестировать часть базовой логики бота, просмотреть приблизительную компоновку сообщений и выполнить простые тесты. Для этого выполните следующие шаги.

1. Запустите код локально.
2. Запустите эмулятор ботов и задайте URL-адрес:
   * Node.js: `http://localhost:3978/api/messages`
   * .NET/C#: `http://localhost:3979/api/messages`
3. Оставьте идентификатор приложения Майкрософт и пароль приложения Майкрософт пустыми для соответствия с переменными среды по умолчанию.

## <a name="locally-hosted"></a>Локальное размещение

Microsoft Teams является полностью облачным продуктом. Для него нужно, чтобы все используемые службы были доступны из облака через конечные точки HTTPS. Таким образом, чтобы приложение могло работать в Teams, вам необходимо либо опубликовать код в облаке по вашему выбору, либо сделать локальный запущенный экземпляр доступным из внешней среды. Последнее можно сделать с помощью программного обеспечения для туннелирования.

Хотя вы можете использовать любое средство по вашему выбору, мы используем и рекомендуем средство [ngrok](https://ngrok.com/download), которое создает доступный из внешней среды URL-адрес для порта, который вы открываете локально на компьютере.

Чтобы настроить ngrok для подготовки к локальному запуску приложения Microsoft Teams, выполните следующие действия.

1. Перейдите в каталог, в котором у вас установлен ngrok.exe в приложении терминалов. Чтобы избежать этого шага, его можно добавить в качестве переменной пути.
2. Выполните, например, `ngrok http 3978 --host-header=localhost:3978`, или замените номер порта по мере необходимости.
   При этом запускается ngrok для прослушивания указанного порта. В ответ он предоставляет доступный из внешней среды URL-адрес, действительный до тех пор, пока запущен ngrok.

> [!NOTE]
> Если остановить и перезапустить ngrok, URL-адрес изменится.

Чтобы использовать ngrok в проекте на основе используемых возможностей, замените все вхождения URL-адреса в своем коде, конфигурации и файле manifest.json, чтобы использовать эту конечную точку URL-адреса.

Для ботов, зарегистрированных в Microsoft Bot Framework, обновите конечную точку обмена сообщениями бота, чтобы использовать эту новую конечную точку ngrok. Например, `https://2d1224fb.ngrok.io/api/messages`. Вы можете убедиться, что ngrok работает, проверив ответ бота в окне тестового чата на портале Bot Framework. Как и в эмуляторе, этот тест не позволяет получить доступ к функциям Teams.

> [!NOTE]
> * Чтобы обновить конечную точку обмена сообщениями для бота, необходимо использовать Bot Framework. Выберите бота в [списке ботов в Bot Framework](https://dev.botframework.com/bots). Вам не нужно переносить бот в Microsoft Azure. Вы также можете обновить конечную точку обмена сообщениями с помощью [App Studio](~/concepts/build-and-test/app-studio-overview.md).
> * Если вы до сих пор использовали App Studio, рекомендуем попробовать Портал разработчика для настройки приложений Teams, распространения их и управления ими. App Studio станет нерекомендуемой к употреблению не позднее 30 июня 2022 г.

## <a name="cloud-hosted"></a>Размещение в облаке

Вы можете использовать любую службу с внешними адресами для размещения кода разработки и производства и их конечных точек HTTPS. Никто не требует, чтобы ваши возможности находились в одной и той же службе. Требуется, чтобы все домены были доступны из приложений Microsoft Teams, перечисленных в объекте [`validDomains`](~/resources/schema/manifest-schema.md#validdomains) в файле `manifest.json`.

> [!NOTE]
> Чтобы обеспечить безопасную среду, четко укажите домен и поддомены, на которые вы ссылаетесь, и эти домены должны находиться под вашим контролем. Например, `*.azurewebsites.net` не рекомендуется, однако `contoso.azurewebsites.net` рекомендуется.

## <a name="load-and-run-your-experience"></a>Загрузка и запуск интерфейса

Чтобы загрузить и запустить свою функцию в Microsoft Teams, вам необходимо создать пакет и отправить его в Teams. Дополнительные сведения см. в указанных ниже статьях.

* [Создание пакета приложения Microsoft Teams](~/concepts/build-and-test/apps-package.md).
* [Отправка приложения в Microsoft Teams](~/concepts/deploy-and-publish/apps-upload.md).

## <a name="next-step"></a>Следующий этап

> [!div class="nextstepaction"]
> [Добавление тестовых данные в среду](~/concepts/build-and-test/test-data.md)

## <a name="see-also"></a>Дополнительные ресурсы

[Локальное тестирование и отладка бота](../../bots/how-to/debug/locally-with-an-ide.md#test-and-debug-your-bot-locally)
