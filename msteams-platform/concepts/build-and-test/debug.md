---
title: Выбор конфигурации для тестирования и отладки приложения
description: В этом модуле вы узнаете о вариантах тестирования и отладки приложений Microsoft Teams в локальной и облачной среде.
ms.localizationpriority: medium
ms.topic: conceptual
ms.openlocfilehash: 5f2a53db5540656d3fd62047ed0fef9256ba62d6
ms.sourcegitcommit: 69a45722c5c09477bbff3ba1520e6c81d2d2d997
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2022
ms.locfileid: "67312193"
---
# <a name="choose-a-test-setup-and-debug-your-teams-app"></a>Выбор тестовой установки и отладка приложения Teams

Приложения Microsoft Teams содержат одну или несколько возможностей, причем способы запуска и даже размещения для них различаются. Для отладки используйте один из следующих способов:

* **Исключительно локально.** Для ботов можно протестировать пользовательское взаимодействие в службе эмулятора ботов. Другие типы программ можно запускать локально в браузере и адресовать содержимое с помощью `http://localhost`.
* **Локальное размещение в Teams**. Это подразумевает запуск приложения локально с помощью туннелирующего программного обеспечения и [создание пакета](~/concepts/build-and-test/apps-package.md) для [отправки](~/concepts/deploy-and-publish/apps-upload.md) в Teams. Это позволяет легко запускать и отлаживать приложение в клиенте Teams.
* **Размещение в облаке в Teams**. Этот сценарий обеспечивает полную имитацию поддержки приложения Teams в производственной среде. Он включает отправку решения на выбранный внешний сервер или поставщик облачных служб и [создание пакета](~/concepts/build-and-test/apps-package.md) для [отправки](~/concepts/deploy-and-publish/apps-upload.md) в Teams.

Запустите интерфейс с собственного компьютера для исключительно локального тестирования или локального тестирования в Teams. Это позволяет компилировать и запускать интегрированную среду разработки и использовать все преимущества таких методов, как точки останова и пошаговая отладка.

> [!NOTE]
> Для отладки и тестирования в производственном масштабе рекомендуется следовать собственным рекомендациям компании, чтобы обеспечить поддержку тестирования, промежуточного размещения и развертывания с помощью собственных процессов.

Используйте несколько манифестов и пакетов для поддержания разделения между службами разработки и производственными службами. Например, вы можете зарегистрировать отдельные боты для среды разработки и производственной среды и создать соответствующие пакеты для их отправки в тестовую среду. Мы также рекомендуем отправить и протестировать рабочий пакет перед отправкой приложения для публикации в нашем магазине приложений или распространения клиентам.

## <a name="purely-local"></a>Исключительно локальное

> [!NOTE]
> Локальный запуск бота не предоставляет доступ к функциям Teams приложения или функциям бота, специфичным для Teams, таким как вызовы списков личного состава и другие функциональные возможности, относящиеся к каналам. Кроме того, bot Framework разрешает некоторые возможности в эмуляторе бота, которые могут не работать при запуске в Teams.

Бот можно запустить в эмуляторе ботов. Это позволяет протестировать часть базовой логики бота, просмотреть приблизительную компоновку сообщений и выполнить простые тесты. Для этого выполните следующие шаги.

1. Запустите код локально.
2. Запустите эмулятор ботов и задайте URL-адрес:
   * Node.js: `http://localhost:3978/api/messages`
   * .NET/C#: `http://localhost:3979/api/messages`
3. Оставьте идентификатор приложения Майкрософт и пароль приложения Майкрософт пустыми для соответствия с переменными среды по умолчанию.

## <a name="locally-hosted"></a>Локальное размещение

Teams — это полностью облачный продукт, который требует, чтобы все доступные службы были общедоступными с помощью конечных точек HTTPS. Таким образом, чтобы приложение могло работать в Teams, вам необходимо либо опубликовать код в облаке по вашему выбору, либо сделать локальный запущенный экземпляр доступным из внешней среды. Последнее можно сделать с помощью программного обеспечения для туннелирования.

Хотя вы можете использовать любое средство по вашему выбору, мы используем и рекомендуем средство [ngrok](https://ngrok.com/download), которое создает доступный из внешней среды URL-адрес для порта, который вы открываете локально на компьютере.

Чтобы настроить ngrok в процессе подготовки к локальному выполнению приложения Teams, выполните следующие действия.

1. Перейдите в каталог, в котором у вас установлен ngrok.exe в приложении терминалов. Чтобы избежать этого шага, его можно добавить в качестве переменной пути.
2. Выполните, например, `ngrok http 3978 --host-header=localhost:3978`, или замените номер порта по мере необходимости.
   При этом запускается ngrok для прослушивания указанного порта. В ответ он предоставляет доступный из внешней среды URL-адрес, действительный до тех пор, пока запущен ngrok.

> [!NOTE]
> Если остановить и перезапустить ngrok, URL-адрес изменится.

Чтобы использовать ngrok в проекте на основе возможностей, которые вы используете, необходимо заменить все ссылки на URL-адреса в файле кода, конфигурации и файла manifest.json, чтобы использовать эту конечную точку URL-адреса.

Для ботов, зарегистрированных в Microsoft Bot Framework, обновите конечную точку обмена сообщениями бота, чтобы использовать эту новую конечную точку ngrok. Например, `https://2d1224fb.ngrok.io/api/messages`. Вы можете убедиться, что ngrok работает, проверив ответ бота в окне тестового чата на портале Bot Framework. Как и в эмуляторе, этот тест не позволяет получить доступ к функциональным возможностям Teams.

> [!NOTE]
> Чтобы обновить конечную точку обмена сообщениями для бота, необходимо использовать Bot Framework. Выберите бота в [списке ботов в Bot Framework](https://dev.botframework.com/bots). Вам не нужно переносить бот в Microsoft Azure. Вы также можете обновить конечную точку обмена сообщениями с помощью [портала разработчика для Teams](~/concepts/build-and-test/teams-developer-portal.md).

## <a name="cloud-hosted"></a>Размещение в облаке

Вы можете использовать любую службу с внешними адресами для размещения кода разработки и производства и их конечных точек HTTPS. Нет никаких ожиданий, что ваши возможности находятся в одной службе. Мы требуем, чтобы доступ ко всем доменам был от приложений Teams, перечисленных в объекте [`validDomains`](~/resources/schema/manifest-schema.md#validdomains) в файле `manifest.json` .

> [!NOTE]
> Чтобы обеспечить безопасную среду, четко укажите домен и поддомены, на которые вы ссылаетесь, и эти домены должны находиться под вашим контролем. Например, `*.azurewebsites.net` не рекомендуется, но `contoso.azurewebsites.net` рекомендуется.

## <a name="load-and-run-your-experience"></a>Загрузка и запуск интерфейса

Чтобы загрузить и запустить свой интерфейс в Teams, необходимо создать пакет и отправить его в Teams. Дополнительные сведения см. в указанных ниже статьях.

* [Создание пакета приложения Microsoft Teams](~/concepts/build-and-test/apps-package.md).
* [Отправка приложения в Microsoft Teams](~/concepts/deploy-and-publish/apps-upload.md).

## <a name="next-step"></a>Следующий этап

> [!div class="nextstepaction"]
> [Добавление тестовых данные в среду](~/concepts/build-and-test/test-data.md)

## <a name="see-also"></a>Дополнительные ресурсы

[Проверка и отладка бота локально с помощью IDE](../../bots/how-to/debug/locally-with-an-ide.md#test-and-debug-your-bot-locally-with-ide)

[DevTools для вкладок Microsoft Teams](../../tabs/how-to/developer-tools.md)
