---
title: Отладка приложения Teams
description: Описывает действия, которые необходимо предпринять для запуска и отладки приложений Microsoft Teams.
keywords: Запуск отладки приложений Teams
ms.topic: conceptual
ms.openlocfilehash: 913306bd24a55797e72396a031d917ec99c43bb9
ms.sourcegitcommit: 9fbc701a9a039ecdc360aefbe86df52b9c3593f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/12/2020
ms.locfileid: "46652151"
---
# <a name="debugging-your-teams-app"></a><span data-ttu-id="c6f8f-104">Отладка приложения Teams</span><span class="sxs-lookup"><span data-stu-id="c6f8f-104">Debugging your Teams app</span></span>

<span data-ttu-id="c6f8f-105">Приложения Microsoft Teams могут содержать одну или несколько возможностей, и способы их запуска и даже размещения могут отличаться.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-105">Microsoft Teams apps can contain one or more capabilities, and the ways to run or even host them may be different.</span></span> <span data-ttu-id="c6f8f-106">В общем случае для запуска приложения Microsoft Teams можно использовать следующие способы отладки:</span><span class="sxs-lookup"><span data-stu-id="c6f8f-106">When it comes to debugging, in general, we have the following ways to run your Microsoft Teams app:</span></span>

* <span data-ttu-id="c6f8f-107">**Чисто локально** &emsp; Для боты можно проверить работу в эмуляторе Bot.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-107">**Purely local**&emsp;For bots, you can test your experience in the Bot Emulator.</span></span> <span data-ttu-id="c6f8f-108">Для другого содержимого можно выполнить локальную работу в браузере и адрес содержимого с помощью `http://localhost` .</span><span class="sxs-lookup"><span data-stu-id="c6f8f-108">For other content, you can run locally in your browser and address content through `http://localhost`.</span></span>
* <span data-ttu-id="c6f8f-109">**Локально размещено в Teams** &emsp; В этом случае используется локальное программное обеспечение для туннелирования и [создается пакет](~/concepts/build-and-test/apps-package.md) для [отправки](~/concepts/deploy-and-publish/apps-upload.md) в Teams.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-109">**Locally hosted, in Teams**&emsp;This involves running locally with tunneling software and [creating a package](~/concepts/build-and-test/apps-package.md) to [upload](~/concepts/deploy-and-publish/apps-upload.md) into Teams.</span></span> <span data-ttu-id="c6f8f-110">Это позволяет легко запускать и отлаживать приложение в клиенте Teams.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-110">This allows you to easily run and debug your app within the Teams client.</span></span>
* <span data-ttu-id="c6f8f-111">**Размещение в облаке, в Teams** Это действительно имитирует (или) производственную поддержку для приложения Teams.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-111">**Cloud-hosted, in Teams** This truly simulates (or is) production-level support for a Teams app.</span></span> <span data-ttu-id="c6f8f-112">Он включает в себя отправку решения на ваш внешний доступный сервер или облачный поставщик (мы рекомендуем Azure) и [создаем пакет](~/concepts/build-and-test/apps-package.md) для [отправки](~/concepts/deploy-and-publish/apps-upload.md) в Teams.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-112">It involves uploading your solution to your externally accessible server or cloud provider of choice (we recommend Azure, of course) and [creating a package](~/concepts/build-and-test/apps-package.md) to [upload](~/concepts/deploy-and-publish/apps-upload.md) into Teams.</span></span>

<span data-ttu-id="c6f8f-113">Для тестирования локальных или локальных команд вы запускаете работу с собственного компьютера.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-113">For purely local or local Teams testing, you run the experience from your own computer.</span></span> <span data-ttu-id="c6f8f-114">Это позволяет реально компилировать и запускать их в среде IDE и использовать все преимущества таких приемов, как точки останова и отладка.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-114">This allows you to actually compile and run within your IDE, and take full advantage of such techniques as breakpoints and step debugging.</span></span> <span data-ttu-id="c6f8f-115">При отладке и тестировании масштаба предприятия рекомендуется следовать собственным рекомендациям, чтобы обеспечить поддержку тестирования, промежуточного хранения и развертывания с помощью собственных процессов.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-115">For production-scale debugging and testing, we recommend that you follow your own company guidelines to ensure you are able to support testing, staging, and deployment through your own processes.</span></span>

<span data-ttu-id="c6f8f-116">В общем случае рекомендуется использовать несколько манифестов и пакетов, чтобы обеспечить поддержку разделения между рабочими службами и службами разработки.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-116">In general we recommend you use multiple manifests and packages to allow you to maintain separation between production and development services.</span></span> <span data-ttu-id="c6f8f-117">Например, вы можете зарегистрировать отдельный Боты разработки и рабочую среду и создать соответствующие пакеты для их отправки в тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-117">For example, you might choose to register separate development and production bots and create appropriate packages to upload them in your testing environment.</span></span> <span data-ttu-id="c6f8f-118">Мы также рекомендуем отправить и протестировать производственный пакет перед отправкой приложения для публикации в магазине приложений или распространения на клиентов.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-118">We also recommend you upload and test your production package before submitting your app for publishing in our app store, or distributing to customers.</span></span>

## <a name="purely-local"></a><span data-ttu-id="c6f8f-119">Чисто локально</span><span class="sxs-lookup"><span data-stu-id="c6f8f-119">Purely local</span></span>

> [!NOTE]
> <span data-ttu-id="c6f8f-120">Таким образом, вы не предоставляете доступ к функциям приложения Teams или функциям ленты, специфичным для Teams, например, к вызовам из списков и другим функциональным возможностям, зависящим от канала</span><span class="sxs-lookup"><span data-stu-id="c6f8f-120">Running this way does not give you access to Teams app functionality or Teams-specific bot functions like roster calls and other channel-specific functionality.</span></span> <span data-ttu-id="c6f8f-121">Кроме того, в пошаговом эмуляторе ленты может быть разрешено использовать некоторые возможности, которые могут не работать при работе в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-121">In addition, some capabilities may be allowed by the Bot Framework in the Bot Emulator that might not function when running in Microsoft Teams.</span></span>

<span data-ttu-id="c6f8f-122">Ваш Bot можно запустить в эмуляторе Bot.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-122">Your bot can be run within the Bot Emulator.</span></span> <span data-ttu-id="c6f8f-123">Это позволяет тестировать основную логику ленты, просматривать грубую структуру сообщений и выполнять простые тесты.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-123">This enables you to test some of the core logic of the bot, see a rough layout of messages, and perform simple tests.</span></span> <span data-ttu-id="c6f8f-124">Необходимо выполнить следующие шаги.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-124">Here are the steps:</span></span>

* <span data-ttu-id="c6f8f-125">Запуск кода на локальном компьютере</span><span class="sxs-lookup"><span data-stu-id="c6f8f-125">Run the code locally</span></span>
* <span data-ttu-id="c6f8f-126">Запустите эмулятор ленты и задайте URL-адрес:</span><span class="sxs-lookup"><span data-stu-id="c6f8f-126">Launch the Bot Emulator and set the URL:</span></span>
  * <span data-ttu-id="c6f8f-127">Node.js: `http://localhost:3978/api/messages`</span><span class="sxs-lookup"><span data-stu-id="c6f8f-127">Node.js: `http://localhost:3978/api/messages`</span></span>
  * <span data-ttu-id="c6f8f-128">.NET/C#: `http://localhost:3979/api/messages`</span><span class="sxs-lookup"><span data-stu-id="c6f8f-128">.NET/C#: `http://localhost:3979/api/messages`</span></span>
* <span data-ttu-id="c6f8f-129">Оставьте поле идентификатор приложения Microsoft и пароль Microsoft App пустыми, чтобы они были согласованы с переменными среды по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-129">Leave the Microsoft app ID and Microsoft app password blank, to match the default environment variables.</span></span>

## <a name="locally-hosted"></a><span data-ttu-id="c6f8f-130">Локально размещено</span><span class="sxs-lookup"><span data-stu-id="c6f8f-130">Locally hosted</span></span>

<span data-ttu-id="c6f8f-131">Так как Microsoft Teams является полностью облачным продуктом, ему необходимы все службы, к которым он обращается, с помощью конечных точек HTTPS.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-131">Because Microsoft Teams is an entirely cloud-based product, it requires all services it accesses to be available publicly using HTTPS endpoints.</span></span> <span data-ttu-id="c6f8f-132">Таким образом, чтобы приложение работало в Teams, необходимо либо опубликовать код в выбранном вами облаке, либо сделать локальный экземпляр запущенным извне.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-132">Therefore, to enable your app to work within Teams, you need to either publish the code to the cloud of your choice, or make our local running instance externally accessible.</span></span> <span data-ttu-id="c6f8f-133">Мы можем выполнить Последнее действие с туннелированием программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-133">We can do the latter with tunneling software.</span></span>

<span data-ttu-id="c6f8f-134">Несмотря на то, что вы можете использовать любое средство выбора, мы используем и рекомендуем [ngrok](https://ngrok.com/download), который создает URL-адрес с внешним адресом для порта, открываемого локально на вашем компьютере.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-134">Although you can use any tool of choice, we use and recommend [ngrok](https://ngrok.com/download), which creates an externally addressable URL for a port you open locally on your machine.</span></span> <span data-ttu-id="c6f8f-135">Чтобы настроить ngrok в процессе подготовки к запуску приложения Microsoft Teams, выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="c6f8f-135">To set up ngrok in preparation for running your Microsoft Teams app locally:</span></span>

* <span data-ttu-id="c6f8f-136">В приложении терминала перейдите к каталогу, в котором установлен ngrok.exe.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-136">In a terminal application, go the directory where you have ngrok.exe installed.</span></span> <span data-ttu-id="c6f8f-137">Чтобы избежать этого действия, можно добавить его в качестве переменной пути.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-137">You may want to add it as a path variable to avoid this step.</span></span>
* <span data-ttu-id="c6f8f-138">Запустите, например, `ngrok http 3978 --host-header=localhost:3978` или замените номер порта по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-138">Run, for example, `ngrok http 3978 --host-header=localhost:3978`, or replace the port number as needed.</span></span>

<span data-ttu-id="c6f8f-139">Будет запущен ngrok для прослушивания указанного порта.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-139">This launches ngrok to listen on the port you specify.</span></span> <span data-ttu-id="c6f8f-140">В качестве возврата вы получите URL-адрес с внешним адресом, допустимый до тех пор, пока работает ngrok.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-140">In return, it gives you an externally addressable URL, valid for as long as ngrok is running.</span></span>

> [!NOTE]
> <span data-ttu-id="c6f8f-141">Если остановить и перезапустить ngrok, URL-адрес изменится.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-141">If you stop and restart ngrok, the URL changes.</span></span>

<span data-ttu-id="c6f8f-142">Чтобы использовать ngrok в проекте и в зависимости от используемых возможностей, необходимо заменить все URL-адреса в коде, конфигурации и/или manifest.jsв файле, чтобы использовать эту конечную точку URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-142">To use ngrok in your project, and depending on the capabilities you are using, you must replace all URL references in your code, configuration, and/or manifest.json file to use this URL endpoint.</span></span>

<span data-ttu-id="c6f8f-143">Например, для Боты, зарегистрированного в Microsoft Bot Framework, обновите конечную точку обмена сообщениями ленты, чтобы использовать эту новую конечную точку ngrok.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-143">For example, for bots registered in the Microsoft Bot Framework, update the bot's messaging endpoint to use this new ngrok endpoint.</span></span> <span data-ttu-id="c6f8f-144">Например, `https://2d1224fb.ngrok.io/api/messages`.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-144">For example, `https://2d1224fb.ngrok.io/api/messages`.</span></span> <span data-ttu-id="c6f8f-145">Вы можете проверить, работает ngrok, проверив ответ Bot в окне тест чата портала Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-145">You can validate that ngrok is working by testing bot response in the Bot Framework portal's Test chat window.</span></span> <span data-ttu-id="c6f8f-146">(Как и в случае с эмулятором, эта проверка не позволяет получить доступ к функциям, зависящим от Teams.)</span><span class="sxs-lookup"><span data-stu-id="c6f8f-146">(Again, like the emulator, this test doesn't allow you to access Teams-specific functionality.)</span></span>

> [!NOTE]
> <span data-ttu-id="c6f8f-147">Чтобы обновить конечную точку обмена сообщениями для Bot, необходимо использовать среду Bot.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-147">To update the messaging endpoint for a bot, you must use the Bot Framework.</span></span> <span data-ttu-id="c6f8f-148">Щелкните элемент Bot в [списке боты в Bot Framework](https://dev.botframework.com/bots).</span><span class="sxs-lookup"><span data-stu-id="c6f8f-148">Click on your bot in [your list of bots in Bot Framework](https://dev.botframework.com/bots).</span></span> <span data-ttu-id="c6f8f-149">Нет необходимости переносить Bot в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-149">You do not need to migrate your bot to Microsoft Azure.</span></span> <span data-ttu-id="c6f8f-150">Вы также можете обновить конечную точку обмена сообщениями в [приложении App Studio](~/concepts/build-and-test/app-studio-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c6f8f-150">You can also update your messaging endpoint through [App Studio](~/concepts/build-and-test/app-studio-overview.md).</span></span>

## <a name="cloud-hosted"></a><span data-ttu-id="c6f8f-151">Размещение в облаке</span><span class="sxs-lookup"><span data-stu-id="c6f8f-151">Cloud-hosted</span></span>

<span data-ttu-id="c6f8f-152">Вы можете использовать любую внешнюю службу для размещения кода разработки и рабочего кода, а также конечных точек HTTPS.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-152">You can use any externally addressable service to host your development and production code and their HTTPS endpoints.</span></span> <span data-ttu-id="c6f8f-153">Не существует ожидания того, что ваши возможности находятся в одной службе.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-153">There is no expectation that your capabilities reside on the same service.</span></span> <span data-ttu-id="c6f8f-154">Для этого необходимо, чтобы все домены, к которым обращаются из приложений Microsoft Teams, были указаны в [`validDomains`](~/resources/schema/manifest-schema.md#validdomains) объекте manifest.jsв файле.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-154">We do require that all domains being accessed from your Microsoft Teams apps be listed in the [`validDomains`](~/resources/schema/manifest-schema.md#validdomains) object in the manifest.json file.</span></span>

> [!NOTE]
> <span data-ttu-id="c6f8f-155">Чтобы обеспечить надежную среду, следует явно указать конкретные доменные и поддомены, на которые вы ссылаетесь, и эти домены должны находиться в вашем элементе управления.</span><span class="sxs-lookup"><span data-stu-id="c6f8f-155">To ensure a secure environment, be explicit about the exact domain and subdomains you reference, and those domains must be in your control.</span></span> <span data-ttu-id="c6f8f-156">Например, `*.azurewebsites.net` не рекомендуется `contoso.azurewebsites.net` .</span><span class="sxs-lookup"><span data-stu-id="c6f8f-156">For example, `*.azurewebsites.net` would not be recommended, but `contoso.azurewebsites.net` would.</span></span>

## <a name="loading-and-running"></a><span data-ttu-id="c6f8f-157">Загрузка и запуск</span><span class="sxs-lookup"><span data-stu-id="c6f8f-157">Loading and running</span></span>

<span data-ttu-id="c6f8f-158">В общем случае для загрузки и запуска взаимодействия в Microsoft Teams необходимо создать пакет и отправить его в Teams, выполнив следующие рекомендации:</span><span class="sxs-lookup"><span data-stu-id="c6f8f-158">In general, to load and run your experience within Microsoft Teams, you need to create a package and upload it into Teams, using the following guidance:</span></span>

* [<span data-ttu-id="c6f8f-159">Создание пакета для приложения Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="c6f8f-159">Create the package for your Microsoft Teams app</span></span>](~/concepts/build-and-test/apps-package.md)
* [<span data-ttu-id="c6f8f-160">Отправка приложения в Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="c6f8f-160">Upload your app in Microsoft Teams</span></span>](~/concepts/deploy-and-publish/apps-upload.md)
