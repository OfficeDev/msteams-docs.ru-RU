---
title: Начало работы с App Studio и Node. js
description: Приступая к созданию замечательных приложений в Microsoft Teams с помощью Node. js и App Studio
keywords: Приступая к работе Node. js NodeJS App Studio
ms.date: 11/09/2018
ms.openlocfilehash: 36da6d7445ad7780f6bbbf52ccce3e558c76be72
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "41675599"
---
# <a name="get-started-on-the-microsoft-teams-platform-with-nodejs-and-app-studio"></a>Приступая к работе на платформе Microsoft Teams с Node. js и App Studio

Платформа для разработчиков [Microsoft Teams](/microsoftteams/) позволяет легко расширять Teams и самостоятельно интегрировать свои приложения и службы в рабочую область Teams. Затем эти приложения можно распространять на предприятие или в Teams по всему миру.

Для расширения Microsoft Teams необходимо создать приложение Microsoft Teams. Приложение Microsoft Teams — это веб-приложение, которое вы размещаете. Затем это приложение можно интегрировать в рабочую область пользователя в Teams.

[!include [prepare your environment](~/includes/prepare-environment.md)]

<a name="DownloadAndHost"></a>

## <a name="download-and-host-your-app"></a>Скачайте приложение и разместите его

Выполните следующие действия, чтобы скачать и разместить простое приложение "Hello World" в Teams.

<a name="GetPrerequisites"></a>

### <a name="get-prerequisites"></a>Получение необходимых компонентов

Для выполнения этого руководства необходимы следующие средства. Если у вас их еще нет, их можно установить из этих ссылок.

- [Git](https://git-scm.com/downloads)
- [Node. js и NPM](https://nodejs.org/)
- Получение любого текстового редактора или IDE. Вы можете установить и использовать [Visual Studio Code](https://code.visualstudio.com/download) бесплатно.

Если вы видите варианты для добавления `git`, `node`, `npm`и `code` для пути во время установки, выберите для этого. Это будет удобно.

Убедитесь, что средства доступны, выполнив следующую команду в окне терминала:

> [!NOTE]
> Используйте окно терминала, наиболее удобное для вашей платформы. В этих примерах используется bash (включенный в Git), но эти сценарии будут выполняться на большинстве платформ.

```bash
$ git --version
git version 2.19.0.windows.1

$ node -v
v8.9.3

$ npm -v
5.5.1

$ gulp -v
CLI version 4.0.2
```

У вас может быть другая версия этих приложений. Это не должна быть проблема, за исключением gulp. Для gulp необходимо использовать версию 4.0.0 или более позднюю.

Если у вас не установлен gulp (или установлена неправильная версия), сделайте это сейчас, выполнив `npm install gulp` в окне терминала.

Если вы установили код Visual Studio, вы можете проверить установку, выполнив следующие действия:

```bash
code --version
1.28.2
929bacba01ef658b873545e26034d1a8067445e9
```

Вы можете продолжить использование этого окна терминала для выполнения команд, приведенных в этом руководстве.

<a name="DownloadSample"></a>

### <a name="download-the-sample"></a>Скачать пример

Мы предоставили простой [Hello, World!](https://github.com/OfficeDev/msteams-samples-hello-world-nodejs) пример, чтобы приступить к работе. В окне терминала выполните приведенную ниже команду, чтобы клонировать репозиторий примера на локальный компьютер.

```bash
git clone https://github.com/OfficeDev/msteams-samples-hello-world-nodejs.git
```

> [!TIP]
> Вы можете [разветвление](https://help.github.com/articles/fork-a-repo/) этого [репозитория](https://github.com/OfficeDev/msteams-samples-hello-world-nodejs) , если вы хотите изменить и вернуть изменения в репозитории GitHub для последующего использования.

<a name="BuildRun"></a>

### <a name="build-and-run-the-sample"></a>Сборка и запуск примера

После клонирования репозитория перейдите к каталогу, содержащему пример:

```bash
cd msteams-samples-hello-world-nodejs
```

Чтобы создать пример, необходимо установить все его зависимости. Выполните следующую команду, чтобы сделать это:

```bash
npm install
```

Должна появиться подмножество зависимостей. После завершения можно запустить приложение:

```bash
npm start
```

Когда приложение приветствия запускается, оно отображается `App started listening on port 3333` в окне терминала.

> [!NOTE]
> Если в приведенном выше сообщении отображается другой номер порта, это вызвано тем, что задана переменная среды порта. Вы можете продолжить использовать этот порт или изменить переменную среды на 3333.

На этом шаге можно открыть окно браузера и перейти по следующим URL-адресам, чтобы убедиться, что загружаются все URL-адреса приложений:

- [http://localhost:3333](http://localhost:3333)
- [http://localhost:3333/hello](http://localhost:3333/hello)
- [http://localhost:3333/first](http://localhost:3333/first)
- [http://localhost:3333/second](http://localhost:3333/second)

<a name="HostSample"></a>

### <a name="host-the-sample-app"></a>Размещение примера приложения

Помните, что приложения в Microsoft Teams представляют собой веб-приложения, которые предоставляют одну или несколько возможностей. Чтобы платформа Teams загружала приложение, ваше приложение должно быть достижимо из Интернета. Чтобы приложение было достижимо из Интернета, необходимо *разместить* приложение.

Для локального тестирования можно запустить приложение на локальном компьютере и создать для него туннель с конечной точкой веб-сайта. [ngrok](https://ngrok.com) — это бесплатный инструмент, который позволяет вам выполнить именно эту задачу. С помощью *ngrok* вы можете получить веб-адрес, `https://d0ac14a5.ngrok.io` например (этот URL-адрес — это только пример). Вы можете [скачать и установить](https://ngrok.com/download) *ngrok* для своей среды. Убедитесь, что вы добавляете его в папку `PATH`.

После установки можно открыть новое окно терминала и выполнить следующую команду для создания туннеля. В примере используется порт 3333, поэтому обязательно указывайте его здесь.

```bash
ngrok http 3333 -host-header=localhost:3333
```

*Ngrok* прослушивает запросы из Интернета и направляет их в ваше приложение, работающее на порте 3333. Вы можете проверить его, открыв браузер и перейдя `https://d0ac14a5.ngrok.io/hello` на страницу приветствия приложения. Обязательно используйте адрес пересылки, отображаемый в *ngrok* в сеансе консоли, а не этот URL-адрес.

> [!NOTE]
> Если вы использовали другой порт в описанном выше шаге [Build and run](#build-and-run-the-sample) , убедитесь, что для установки туннеля *ngrok* используется тот же номер порта.
> [!TIP]
> Рекомендуется запустить *ngrok* в другом окне терминала, чтобы оно было запущено без конфликта с приложением узла, которое позже необходимо остановить, перестроить и повторно запустить. Сеанс *ngrok* возвратит полезную информацию об отладке в этом окне.

Существует платная версия *ngrok* , позволяющая использовать постоянные имена. Если вы используете бесплатную версию, приложение будет доступно только в текущем сеансе на компьютере разработчика. Если компьютер выключен или перейдет в спящий режим, служба станет недоступна. Помните об этом при совместном использовании приложения для тестирования другими пользователями. Если вам нужно перезапустить службу, она возвратит новый адрес, и вам потребуется обновить все место, где используется этот адрес.

Помните, что запишите URL-адрес своего приложения, так как это потребуется позже при регистрации приложения в Teams с помощью App Studio. Для этой цели Блокнот работает нормально.

<a name="DeployToTeams"></a>

## <a name="deploy-your-app-to-microsoft-teams"></a>Развертывание приложения в Microsoft Teams

На этом шаге у вас есть приложение, размещенное в Интернете, но вы пока не назначите Teams, где искать его, или даже то, что вызывает приложение. Теперь необходимо создать пакет приложения. Это немного больше текстового файла, содержащего манифест приложения, и некоторые значки, которые клиент Teams будет использовать для правильного отображения и фирменного стиля приложения. Этот пакет приложения можно создать вручную или с помощью App Studio — средства, которое работает в Teams, которое упростит процесс регистрации приложения. App Studio — это рекомендуемый способ создания и обновления пакета приложения.

Для любого способа потребуется следующее:

- URL-адрес, по которому ваше приложение может быть найдено в Интернете.
- Значки, которые будут использоваться Teams для фирменного стиля приложения. Пример сопровождается значками заполнителя, расположенными в разделе "срк\статик\имажес. Кроме того, при необходимости в App Studio будут использоваться значки по умолчанию.

[!include[Use App Studio to configure the app package](~/includes/get-started/get-started-use-app-studio.md)]

## <a name="update-your-hosted-app"></a>Обновление размещенного приложения

Для примера приложения требуются следующие переменные среды, чтобы задать значения, которые вы захотите заметку ранее.

```
MICROSOFT_APP_ID=<YOUR BOT'S APP ID>
MICROSOFT_APP_PASSWORD=<YOUR BOT'S PASSWORD>
WEBSITE_NODE_DEFAULT_VERSION=8.9.4
```

То, как это делается, зависит от того, как вы размещаете приложение. Важно то, что использование переменных среды заключается в том, что эти значения являются частью среды, но они могут быть доступны для кода приложения, но они не видны третьим лицам, которые могут изучать файлы, составляющие сайт.

Если вы используете приложение с помощью ngrok, вам потребуется настроить некоторые локальные переменные среды. Это можно сделать множеством способов, но при использовании Visual Studio Code проще всего добавить [конфигурацию запуска](https://code.visualstudio.com/Docs/editor/debugging#_launch-configurations):

``` 
{
    "type": "node",
    "request": "launch",
    "name": "Launch - Teams Debug",
    "program": "${workspaceRoot}/src/app.js",
    "cwd": "${workspaceFolder}/src",
    "env": {
        "BASE_URI": "https://yourNgrokURL.ngrok.io",
        "MICROSOFT_APP_ID": "00000000-0000-0000-0000-000000000000",
        "MICROSOFT_APP_PASSWORD": "yourBotAppPassword",
        "NODE_DEBUG": "botbuilder",
        "SUPPRESS_NO_CONFIG_WARNING": "y",
        "NODE_CONFIG_DIR": "../config"
    }
}
```

Где:

MICROSOFT_APP_ID и MICROSOFT_APP_PASSWORD — это идентификатор и пароль, соответственно, для ленты.
NODE_DEBUG покажет, что происходит в программе Bot в консоли отладки кода Visual Studio.
NODE_CONFIG_DIR указывает на каталог в корне репозитория (по умолчанию при локальном запуске приложения он ищет его в папке src).

> [!Note]
> Если вы еще не остановили NPM в руководстве ранее, вам потребуется выполнить `npm stop` его, чтобы Visual Studio Code мог правильно расказывать переменные настройки запуска.

<a name="ConfigureTheAppTab"></a>

## <a name="configure-the-app-tab"></a>Настройка вкладки "приложение"

После установки приложения в команду его необходимо настроить для отображения контента. Перейдите к каналу в группе и нажмите кнопку **"+"** , чтобы добавить новую вкладку. Затем можно выбрать `Hello World` в списке **Добавить вкладку** . После этого появится диалоговое окно настройки. Это диалоговое окно позволит выбрать вкладку для отображения в этом канале. После того, как вы настроили `Save` вкладку и нажали кнопку `Hello World` , вы увидите вкладку, загруженную с выбранной вкладкой.

<img width="430px" src="~/assets/images/samples-hello-world-tab-configure.png" title="Снимок экрана: Настройка" />

### <a name="test-your-bot-in-teams"></a>Тестирование ленты в Teams

Теперь вы можете взаимодействовать с роботом в Teams. Выберите канал в группе, в которой вы зарегистрировали свое приложение, и `@your-bot-name`введите текст, за которым следует сообщение. Это называется ** \@упоминанием**. Любое сообщение, отправляемое в Bot, будет отправлено вам в качестве ответа.

<img width="450px" title="Ответы от Bot" src="~/assets/images/samples-hello-world-bot.png" />

<a name="ComposeRichMessages"></a>

### <a name="test-your-messaging-extension"></a>Проверка расширения системы обмена сообщениями

Чтобы проверить расширение системы обмена сообщениями, щелкните три точки под полем ввода в представлении беседы. В меню появится приложение **"Hello World"** . Щелкнув его, вы увидите несколько случайных текстов. Вы можете выбрать один из них и вставить его в беседу.

<img width="430px" title="Меню расширения для обмена сообщениями" src="~/assets/images/samples-hello-world-messaging-extensions-menu.png" />

<img width="430px" title="Результат расширения системы обмена сообщениями" src="~/assets/images/samples-hello-world-messaging-extensions-result.png" />

Выберите один из случайных текстов, и вы увидите карту, отформатированную и готовую к отправке сообщения в нижней части.

<img width="430px" title="Отправка расширения обмена сообщениями" src="~/assets/images/samples-hello-world-messaging-extensions-send.png" />
