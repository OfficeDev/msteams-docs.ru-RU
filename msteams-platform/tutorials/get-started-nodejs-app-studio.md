---
title: Учебник - Создайте свое первое приложение с помощью Node.js
description: Узнайте, как начать строить Microsoft Teams приложения с Node.js.
keywords: начало работы node.js nodejs App Studio
ms.topic: tutorial
localization_priority: Normal
ms.custom: scenarios:getting-started; languages:JavaScript,Node.js
ms.openlocfilehash: 46272671443e07432513b667af424b5c5be05f2e
ms.sourcegitcommit: 51e4a1464ea58c254ad6bd0317aca03ebf6bf1f6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2021
ms.locfileid: "52566544"
---
# <a name="create-your-first-microsoft-teams-app-using-nodejs"></a>Создайте свое первое Microsoft Teams приложение с помощью Node.js

Этот учебник поможет вам начать создавать приложение Microsoft Teams с помощью Node.js.

[!include [prepare your environment](~/includes/prepare-environment.md)]

<a name="DownloadAndHost"></a>

## <a name="download-and-host-your-app"></a>Загрузка и хост приложения

Следуйте этим шагам, чтобы загрузить и разместить простое приложение "привет миру" Teams.

<a name="GetPrerequisites"></a>

### <a name="get-prerequisites"></a>Получить предпосылки

Чтобы завершить этот учебник, вам нужны следующие инструменты. Если у вас их еще нет, вы можете установить их по этим ссылкам.

- [Git](https://git-scm.com/downloads)
- [Node.js и NPM](https://nodejs.org/)
- Получите любой текстовый редактор или IDE. Вы можете установить и [использовать Visual Studio Code](https://code.visualstudio.com/download) бесплатно.

Если вы видите `git` `node` варианты, чтобы добавить , , и PATH во время `npm` `code` установки, решили сделать это. Это будет удобно.

Убедитесь, что инструменты доступны, выехав в окне терминала:

> [!NOTE]
> Используйте окно терминала, которое вам больше всего удобно на платформе. В этих примерах используется Bash (который включен в Git), но эти скрипты будут работать на большинстве платформ.

```bash
$ git --version
git version 2.19.0.windows.1

$ node -v
v8.9.3

$ npm -v
5.5.1

$ gulp -v
CLI version 2.3.0
Local version 4.0.2
```

У вас может быть другая версия этих приложений. Это не должно быть проблемой, за исключением глотка. Для глотка вам нужно будет использовать версию 4.0.0 или позже.

Если у вас нет установленного глотка (или установлена неправильная версия), сделайте это сейчас, `npm install gulp` заев в окно терминала.

Если вы установили Visual Studio Code, вы можете проверить установку, вытехав:

```bash
code --version
1.28.2
929bacba01ef658b873545e26034d1a8067445e9
```

Вы можете продолжать использовать это окно терминала для запуска команд, которые следуют в этом учебнике.

<a name="DownloadSample"></a>

### <a name="download-the-sample"></a>Скачать образец

Мы предоставили простой [Привет, Мир!](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/app-hello-world/nodejs) образец, чтобы вы начали. В окне терминала запустите следующую команду клонировать репозиторий образца локальной машины:

```bash
git clone https://github.com/OfficeDev/Microsoft-Teams-Samples.git
```

> [!TIP]
> Вы можете [раскошелиться](https://help.github.com/articles/fork-a-repo/) на [это репо,](https://github.com/OfficeDev/Microsoft-Teams-Samples) если вы хотите изменить и проверить свои изменения в GitHub репо для будущей ссылки.

<a name="BuildRun"></a>

### <a name="build-and-run-the-sample"></a>Сборка и запуск примера

После клонирования репо измените каталог, в который хранится образец:

```bash
cd Microsoft-Teams-Samples/samples/app-hello-world/nodejs/
```

Для создания образца необходимо установить все его зависимости. Вы запустите следующую команду, чтобы сделать это:

```bash
npm install
```

Вы должны увидеть кучу зависимостей получить установлен. Как только они будут закончены, вы можете запустить приложение:

```bash
npm start
```

Когда начинается приложение hello-world, оно `App started listening on port 3333` отображается в окне терминала.

> [!NOTE]
> Если вы видите другой номер порта, отображаемый в сообщении выше, это потому, что у вас есть переменный набор среды PORT. Вы можете продолжать использовать этот порт или изменять переменную среды до 3333.

На этом этапе можно открыть окно браузера и перейти к следующим URL-адресам, чтобы убедиться, что все URL-адреса приложений загружаются:

- `http://localhost:3333`
- `http://localhost:3333/hello`
- `http://localhost:3333/first`
- `http://localhost:3333/second`

<a name="HostSample"></a>

### <a name="host-the-sample-app"></a>Хозяин образца приложения

Помните, что приложения Microsoft Teams веб-приложений подвергая одну или несколько возможностей. Для Teams платформы для загрузки приложения приложение должно быть доступно из Интернета. Чтобы сделать приложение доступно из Интернета, необходимо разместить *приложение.*

Для локального тестирования вы можете запустить приложение на локальной машине и создать туннель к нему с веб-конечной точкой. [ngrok](https://ngrok.com) это бесплатный инструмент, который позволяет делать именно это. С *ngrok вы* можете получить веб-адрес, такой как `https://d0ac14a5.ngrok.io` (этот URL является лишь примером). Вы можете [скачать и установить](https://ngrok.com/download) *ngrok для* вашей среды. Убедитесь, что вы добавляете его в место в `PATH` вашем .

После установки можно открыть новое окно терминала и вы запустить следующую команду для создания туннеля. Образец использует порт 3333, поэтому не забудьте указать его здесь:

```bash
ngrok http 3333 -host-header=localhost:3333
```

*Ngrok* будет слушать запросы из Интернета и будет маршрут их к вашему приложению работает на порт 3333. Вы можете проверить, открыв браузер и `https://d0ac14a5.ngrok.io/hello` загрузив страницу привет вашего приложения. Пожалуйста, не забудьте использовать адрес переголовки, *отображаемый ngrok* в сеансе консоли, а не этот URL.

> [!NOTE]
> Если вы использовали другой порт в [сборке и запустить шаг](#build-and-run-the-sample) выше, убедитесь, что вы используете тот же номер порта для *установки туннеля ngrok.*
> [!TIP]
> Это хорошая идея, чтобы запустить *ngrok в* другом окне терминала, чтобы держать его работает, не мешая с приложением узла, который вы, возможно, позже придется остановить, восстановить и повторно запустить. Сеанс *ngrok вернет* полезную информацию об отладке в этом окне.

Существует платная версия *ngrok, которая* позволяет стойкие имена. Если вы используете бесплатную версию, ваше приложение будет доступно только во время текущей сессии на вашей машине разработки. Если машина выключена или засыпает, служба больше не будет доступна. Помните об этом при совместном использовании приложения для тестирования другими пользователями. Если вам придется перезапустить службу он вернет новый адрес, и вам придется обновить каждое место, которое использует этот адрес.

Помните, обратите внимание на URL вашего приложения, потому что вам понадобится это позже, когда вы регистрируете приложение с Teams с помощью App Studio. Блокнот прекрасно работает для этой цели.

<a name="DeployToTeams"></a>

## <a name="deploy-your-app-to-microsoft-teams"></a>Развертывайте приложение для Microsoft Teams

На данный момент у вас есть приложение, размещено в Интернете, но у вас нет еще способа сказать Teams, где его искать, или даже то, что ваше приложение называется. Для этого теперь вам придется создать пакет приложений. Это немного больше, чем текстовый файл, который содержит манифест приложения и некоторые значки, которые Teams клиент будет использовать для правильного отображения и бренд вашего приложения. Вы можете вручную создать этот пакет приложений, или вы можете использовать App Studio, инструмент, который работает Teams, который упростит процесс регистрации приложения. App Studio является рекомендуемый способ создания и обновления пакета приложений.

Для любого метода вам понадобится следующее:

- URL-адрес, по которому ваше приложение можно найти в Интернете.
- Иконки, Teams будут использоваться для бренд вашего приложения. Образец поставляется с иконками заполнителя, расположенными в "src'static"images. App Studio также предоставит значки по умолчанию, если это необходимо.

[!include[Use App Studio to configure the app package](~/includes/get-started/get-started-use-app-studio.md)]

## <a name="update-your-hosted-app"></a>Обновление размещено приложение

Пример приложения требует, чтобы следующие переменные среды были установлены на значения, которые вы сделали к сведению ранее:

```
MICROSOFT_APP_ID=<YOUR BOT'S APP ID>
MICROSOFT_APP_PASSWORD=<YOUR BOT'S PASSWORD>
WEBSITE_NODE_DEFAULT_VERSION=8.9.4
```

Как вы это делаете, отличается в зависимости от того, как вы размещали приложение. Важно использовать переменные среды в том, что эти значения являются частью вашей среды - они могут быть доступны по коду для вашего приложения, но они не подвергаются третьим лицам, которые могут изучить файлы, которые составляют ваш сайт.

Если вы используете приложение с помощью ngrok, вам нужно настроить некоторые локальные переменные среды. Есть много способов сделать это, но проще всего, если вы используете Visual Studio Code, заключается в том, чтобы добавить [конфигурацию запуска:](https://code.visualstudio.com/Docs/editor/debugging#_launch-configurations)

``` 
{
    "type": "node",
    "request": "launch",
    "name": "Launch - Teams Debug",
    "program": "${workspaceRoot}/src/app.js",
    "cwd": "${workspaceFolder}/src",
    "env": {
        "BASE_URI": "https://yourNgrokURL.ngrok.io",
        "MICROSOFT_APP_ID": "00000000-0000-0000-0000-000000000000",
        "MICROSOFT_APP_PASSWORD": "yourBotAppPassword",
        "NODE_DEBUG": "botbuilder",
        "SUPPRESS_NO_CONFIG_WARNING": "y",
        "NODE_CONFIG_DIR": "../config"
    }
}
```

Где:

MICROSOFT_APP_ID и MICROSOFT_APP_PASSWORD является идентификатором и паролем, соответственно, для вашего бота.
NODE_DEBUG покажет вам, что происходит в вашем боте в Visual Studio Code отладки.
NODE_CONFIG_DIR указывает на каталог в корне репозитория (по умолчанию, когда приложение запущено локально, оно ищет его в папке src).

> [!Note]
> Если вы не остановили npm от более предыдущего в учебнике, то вам будет нужно побежать `npm stop` для того чтобы Visual Studio Code для того чтобы pickup ваши переменные конфигурации старта правильно.

<a name="ConfigureTheAppTab"></a>

## <a name="configure-the-app-tab"></a>Настройка вкладки приложения

Как только вы установите приложение в команду, вам нужно будет настроить его, чтобы показать содержимое. Перейдите на канал в команде и нажмите на **кнопку «Я»,** чтобы добавить новую вкладку. Затем вы можете выбрать `Hello World` из **списка вкладок** Добавить. Затем вам будет представлен диалог конфигурации. Этот диалог позволит вам выбрать, какую вкладку для отображения в этом канале. После выбора вкладки и нажатия кнопки вы `Save` можете увидеть вкладку `Hello World` загружены вкладке вы выбрали:

<img width="430px" alt="Screenshot of configure" src="~/assets/images/samples-hello-world-tab-configure.png"/>

### <a name="test-your-bot-in-teams"></a>Проверьте своего бота в Teams

Теперь вы можете взаимодействовать с ботом в Teams. Выберите канал в команде, где вы зарегистрировали приложение, и ввемите, `@your-bot-name` а затем ваше сообщение. Это называется **\@ упоминанием**. Независимо от сообщения, которое вы отправляете боту, вы будете отправлены вам в качестве ответа:

<img width="450px" alt="Bot responses" src="~/assets/images/samples-hello-world-bot.png"/>

<a name="ComposeRichMessages"></a>

### <a name="test-your-messaging-extension"></a>Проверьте расширение обмена сообщениями

Чтобы проверить расширение обмена сообщениями, вы можете нажать на три точки ниже входной коробки в представлении разговора. Меню будет всплывающее с **приложением "Hello World"** в нем. При нажатии на него, вы увидите ряд случайных текстов. Вы можете выбрать любой из них, и он будет вставлен в ваш разговор:

<img width="430px" alt="Messaging extension menu" src="~/assets/images/samples-hello-world-messaging-extensions-menu.png" />

<img width="430px" alt="Messaging extension result" src="~/assets/images/samples-hello-world-messaging-extensions-result.png" />

Выберите один из случайных текстов, и вы увидите карту отформатированы и готовы отправить с вашим собственным сообщением в нижней части:

<img width="430px" alt="Messaging extension send" src="~/assets/images/samples-hello-world-messaging-extensions-send.png" />
