---
title: Учебник . Создайте свое первое приложение с Node.js
description: Узнайте, как начать создание приложений Microsoft Teams с помощью Node.js.
keywords: начало работы node.js nodejs App Studio
ms.topic: tutorial
ms.custom: scenarios:getting-started; languages:JavaScript,Node.js
ms.openlocfilehash: 61be1056a07952c6cf166dbe183fa257ceaf7227
ms.sourcegitcommit: 6ff8d1244ac386641ebf9401804b8df3854b02dc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/18/2021
ms.locfileid: "50294763"
---
# <a name="create-your-first-microsoft-teams-app-using-nodejs"></a>Создайте свое первое приложение Microsoft Teams с Node.js

В этом руководстве помогают начать создание приложения Microsoft Teams с Node.js.

[!include [prepare your environment](~/includes/prepare-environment.md)]

<a name="DownloadAndHost"></a>

## <a name="download-and-host-your-app"></a>Загрузка и хост-сайт приложения

Выполните следующие действия, чтобы скачать и провести простое приложение "Hello World" в Teams.

<a name="GetPrerequisites"></a>

### <a name="get-prerequisites"></a>Получить необходимые условия

Для завершения этого руководства необходимы следующие средства. Если их еще нет, их можно установить по этим ссылкам.

- [Git](https://git-scm.com/downloads)
- [Node.js и NPM](https://nodejs.org/)
- Получите любой текстовый редактор или IDE. Вы можете установить и [использовать Visual Studio код](https://code.visualstudio.com/download) бесплатно.

Если вы видите варианты добавления , и path во время `git` `node` `npm` `code` установки, выберите для этого. Это будет удобно.

Убедитесь, что эти средства доступны, запуская следующие средства в окне терминала:

> [!NOTE]
> Используйте окно терминала, которое наиболее удобно для вашей платформы. В этих примерах используется Bash (который входит в Git), но эти скрипты будут работать на большинстве платформ.

```bash
$ git --version
git version 2.19.0.windows.1

$ node -v
v8.9.3

$ npm -v
5.5.1

$ gulp -v
CLI version 2.3.0
Local version 4.0.2
```

У вас может быть другая версия этих приложений. Это не должно быть проблемой, за исключением глотка. Для глотка необходимо использовать версию 4.0.0 или более поздней версии.

Если установлено не установлено глоток (или установлена неправильная версия), делайте это сейчас, запуская `npm install gulp` в окне терминала.

Если установлен код Visual Studio, вы можете проверить установку при запуске:

```bash
code --version
1.28.2
929bacba01ef658b873545e26034d1a8067445e9
```

Вы можете продолжать использовать это окно терминала для запуска команд, которые следуют в этом руководстве.

<a name="DownloadSample"></a>

### <a name="download-the-sample"></a>Скачайте пример

Мы предоставили простой [привет, мир!](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/app-hello-world/nodejs) пример, чтобы вы начали. В окне терминала запустите следующую команду, чтобы клонировать репозиторий образца на локальной машине:

```bash
git clone https://github.com/OfficeDev/Microsoft-Teams-Samples.git
```

> [!TIP]
> Вы можете [раздвоить](https://help.github.com/articles/fork-a-repo/) это [репо,](https://github.com/OfficeDev/Microsoft-Teams-Samples) если вы хотите изменить и проверить изменения в репо GitHub для будущей ссылки.

<a name="BuildRun"></a>

### <a name="build-and-run-the-sample"></a>Сборка и запуск примера

После клонирования репо измените каталог, в который содержится пример:

```bash
cd Microsoft-Teams-Samples/samples/app-hello-world/nodejs/
```

Чтобы создать образец, необходимо установить все его зависимости. Для этого запустите следующую команду:

```bash
npm install
```

Необходимо увидеть, как устанавливается куча зависимостей. После их завершения вы можете запустить приложение:

```bash
npm start
```

Когда приложение hello-world запускается, оно отображается `App started listening on port 3333` в окне терминала.

> [!NOTE]
> Если в вышеуказанном сообщении отображается другой номер порта, это потому, что у вас есть переменная среды ПОРТ. Вы можете продолжать использовать этот порт или изменить переменную среды на 3333.

На этом этапе можно открыть окно браузера и перейти к следующим URL-адресам, чтобы убедиться, что все URL-адреса приложений загружаются:

- [http://localhost:3333](http://localhost:3333)
- [http://localhost:3333/hello](http://localhost:3333/hello)
- [http://localhost:3333/first](http://localhost:3333/first)
- [http://localhost:3333/second](http://localhost:3333/second)

<a name="HostSample"></a>

### <a name="host-the-sample-app"></a>Хост пример приложения

Помните, что приложения в Microsoft Teams — это веб-приложения, которые обнажают одну или несколько возможностей. Для загрузки приложения на платформе Teams ваше приложение должно быть доступно из Интернета. Чтобы сделать ваше приложение доступно из Интернета, необходимо *провести* ваше приложение.

Для локального тестирования можно запустить приложение на локальной машине и создать туннель к ней с помощью веб-конечной точки. [ngrok](https://ngrok.com) — это бесплатный инструмент, который позволяет делать именно это. С *помощью ngrok* можно получить такой веб-адрес, как `https://d0ac14a5.ngrok.io` (этот URL-адрес — только пример). Вы можете [скачать и установить](https://ngrok.com/download) *ngrok для* вашей среды. Убедитесь, что вы добавляете его в расположение в вашем `PATH` .

После установки можно открыть новое окно терминала и запустить следующую команду для создания туннеля. В примере используется порт 3333, поэтому не забудьте указать его здесь.

```bash
ngrok http 3333 -host-header=localhost:3333
```

*Ngrok* будет прослушивать запросы из Интернета и перенанастрает их в приложение, которое работает в порту 3333. Вы можете проверить, открыв браузер и загрузив страницу `https://d0ac14a5.ngrok.io/hello` привета приложения. Не забудьте использовать адрес переададки, *отображающийся ngrok* в сеансе консоли, а не этот URL-адрес.

> [!NOTE]
> Если вы использовали другой порт [](#build-and-run-the-sample) в сборке и запуске шаг выше, убедитесь, что вы используете тот же номер порта для установки *туннеля ngrok.*
> [!TIP]
> Неплохо запустить *ngrok* в другом окне терминала, чтобы не мешать приложению узла, которое впоследствии может потребоваться остановить, перестроить и повторно запустить. Сеанс *ngrok* возвращает полезную информацию об отладке в этом окне.

Существует платная версия *ngrok,* которая позволяет настойчивые имена. Если вы используете бесплатную версию, приложение будет доступно только во время текущего сеанса на компьютере разработки. Если машина отключена или переходит в спящий режим, служба больше не будет доступна. Помните об этом при совместном использовании приложения для тестирования другими пользователями. Если вам придется перезапустить службу, она возвращает новый адрес, и вам придется обновить каждое место, которое использует этот адрес.

Помните, что обратите внимание на URL-адрес вашего приложения, так как это потребуется позже при регистрации приложения в Teams с помощью студии App. Блокнот отлично работает для этой цели.

<a name="DeployToTeams"></a>

## <a name="deploy-your-app-to-microsoft-teams"></a>Развертывание приложения в Microsoft Teams

На данный момент у вас есть приложение, которое находится в Интернете, но вы еще не можете сказать Teams, где его искать, или даже то, что ваше приложение называется. Для этого необходимо создать пакет приложений. Это не более чем текстовый файл, содержащий манифест приложения и некоторые значки, которые клиент Teams будет использовать для правильного отображения и брендинга приложения. Вы можете вручную создать этот пакет приложений или использовать App Studio , средство, которое работает в Teams, что упростит процесс регистрации приложения. App Studio — это рекомендуемый способ создания и обновления пакета приложений.

Для любого метода потребуется следующее:

- URL-адрес, на котором ваше приложение можно найти в Интернете.
- Значки, которые teams будут использовать для брендинга приложения. Пример поставляется с значками-местообнаружителями, расположенными в "src\static\images". App Studio также будет предоставлять значки по умолчанию, если это необходимо.

[!include[Use App Studio to configure the app package](~/includes/get-started/get-started-use-app-studio.md)]

## <a name="update-your-hosted-app"></a>Обновление вашего хозяйского приложения

Пример приложения требует, чтобы следующие переменные среды были задаты значениям, которые вы сделали ранее.

```
MICROSOFT_APP_ID=<YOUR BOT'S APP ID>
MICROSOFT_APP_PASSWORD=<YOUR BOT'S PASSWORD>
WEBSITE_NODE_DEFAULT_VERSION=8.9.4
```

То, как это сделать, зависит от того, как вы хозяйили приложение. Важное значение в использовании переменных среды в том, что эти значения являются частью вашей среды : к ним можно получить доступ с помощью кода для вашего приложения, но они не подвергаются воздействию третьих лиц, которые могут изучить файлы, составляющие ваш сайт.

Если вы используете приложение с помощью ngrok, вам потребуется настроить некоторые локальные переменные среды. Это можно сделать по-разному, но проще всего, если вы используете Visual Studio Code, добавить конфигурацию [запуска:](https://code.visualstudio.com/Docs/editor/debugging#_launch-configurations)

``` 
{
    "type": "node",
    "request": "launch",
    "name": "Launch - Teams Debug",
    "program": "${workspaceRoot}/src/app.js",
    "cwd": "${workspaceFolder}/src",
    "env": {
        "BASE_URI": "https://yourNgrokURL.ngrok.io",
        "MICROSOFT_APP_ID": "00000000-0000-0000-0000-000000000000",
        "MICROSOFT_APP_PASSWORD": "yourBotAppPassword",
        "NODE_DEBUG": "botbuilder",
        "SUPPRESS_NO_CONFIG_WARNING": "y",
        "NODE_CONFIG_DIR": "../config"
    }
}
```

Где:

MICROSOFT_APP_ID и MICROSOFT_APP_PASSWORD является ID и пароль, соответственно, для вашего бота.
NODE_DEBUG вы сможете показать, что происходит в боте в консоли Visual Studio отлаживке кода.
NODE_CONFIG_DIR указывает на каталог в корне репозитория (по умолчанию при локальном запуске приложения он ищет его в папке SRC).

> [!Note]
> Если вы не остановили npm из более ранней в учебнике, необходимо выполнить для того, чтобы Visual Studio код правильно подобрать переменные конфигурации `npm stop` запуска.

<a name="ConfigureTheAppTab"></a>

## <a name="configure-the-app-tab"></a>Настройка вкладки приложения

После установки приложения в команду необходимо настроить его для демонстрации контента. Перейдите к каналу в команде и нажмите кнопку **"+",** чтобы добавить новую вкладку. Затем можно выбрать `Hello World` из списка **Добавить вкладку.** Затем вам будет представлен диалоговое окно конфигурации. Этот диалоговое окно позволит выбрать вкладку, которая будет отображаться в этом канале. После выбора вкладки и щелкнуть ее можно увидеть вкладку, `Save` `Hello World` загруженную выбранной вкладками.

<img width="430px" alt="Screenshot of configure" src="~/assets/images/samples-hello-world-tab-configure.png"/>

### <a name="test-your-bot-in-teams"></a>Тестирование бота в Teams

Теперь вы можете взаимодействовать с ботом в Teams. Выберите канал в команде, в которой вы зарегистрировали приложение, и введите , а затем `@your-bot-name` ваше сообщение. Это называется **\@ упоминанием**. Любое сообщение, отправленное боту, будет отправлено вам в качестве ответа.

<img width="450px" alt="Bot responses" src="~/assets/images/samples-hello-world-bot.png"/>

<a name="ComposeRichMessages"></a>

### <a name="test-your-messaging-extension"></a>Тестирование расширения обмена сообщениями

Чтобы проверить расширение обмена сообщениями, вы можете щелкнуть три точки ниже входного окна в представлении беседы. В нем всплывет меню с приложением **"Hello World".** При нажатии на него вы увидите несколько случайных текстов. Вы можете выбрать любой из них, и он будет вставлен в ваш разговор.

<img width="430px" alt="Messaging extension menu" src="~/assets/images/samples-hello-world-messaging-extensions-menu.png" />

<img width="430px" alt="Messaging extension result" src="~/assets/images/samples-hello-world-messaging-extensions-result.png" />

Выберите один из случайных текстов, и в нижней части будет отформатирована карточка, готовая к отправке с собственным сообщением.

<img width="430px" alt="Messaging extension send" src="~/assets/images/samples-hello-world-messaging-extensions-send.png" />
