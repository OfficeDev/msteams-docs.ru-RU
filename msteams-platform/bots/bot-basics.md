---
title: Обработчики действий ботов
author: clearab
description: Понимание обработчиков действий бота в Teams.
ms.topic: conceptual
localization_priority: Normal
ms.author: anclear
ms.openlocfilehash: da770d930ca6d00503c0102f1e683a60161636fd
ms.sourcegitcommit: 825abed2f8784d2bab7407ba7a4455ae17bbd28f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2021
ms.locfileid: "52020192"
---
# <a name="bot-activity-handlers"></a><span data-ttu-id="51789-103">Обработчики действий ботов</span><span class="sxs-lookup"><span data-stu-id="51789-103">Bot activity handlers</span></span>

<span data-ttu-id="51789-104">Этот документ строится на статье о том, [как боты работают в](https://aka.ms/how-bots-work) основной документации Bot [Framework.](https://aka.ms/azure-bot-service-docs)</span><span class="sxs-lookup"><span data-stu-id="51789-104">This document builds on the article on [how bots work](https://aka.ms/how-bots-work) in the core [Bot Framework documentation](https://aka.ms/azure-bot-service-docs).</span></span> <span data-ttu-id="51789-105">Основное различие между ботами, разработанными для Microsoft Teams и основной инфраструктурой ботов, заключается в функции, предоставляемые в Teams.</span><span class="sxs-lookup"><span data-stu-id="51789-105">The primary difference between bots developed for Microsoft Teams and the core Bot Framework is in the features provided in Teams.</span></span>

<span data-ttu-id="51789-106">Для организации разговорной логики для бота используется обработок действий.</span><span class="sxs-lookup"><span data-stu-id="51789-106">To organize the conversational logic for your bot, an activity handler is used.</span></span> <span data-ttu-id="51789-107">Действия обрабатываются двумя способами с помощью обработчиков Teams действий и логики ботов.</span><span class="sxs-lookup"><span data-stu-id="51789-107">Activities are handled in two ways using Teams activity handlers and bot logic.</span></span> <span data-ttu-id="51789-108">Обработник Teams добавляет поддержку для Microsoft Teams событий и взаимодействий.</span><span class="sxs-lookup"><span data-stu-id="51789-108">The Teams activity handler adds support for Microsoft Teams-specific events and interactions.</span></span> <span data-ttu-id="51789-109">Объект бота содержит разговорное рассуждение или логику поворота и предоставляет обработщик поворота, который является методом, который может принимать входящие действия из адаптер бота.</span><span class="sxs-lookup"><span data-stu-id="51789-109">The bot object contains the conversational reasoning or logic for a turn and exposes a turn handler, which is the method that can accept incoming activities from the bot adapter.</span></span>

## <a name="teams-activity-handlers"></a><span data-ttu-id="51789-110">Teams обработчики действий</span><span class="sxs-lookup"><span data-stu-id="51789-110">Teams activity handlers</span></span>

<span data-ttu-id="51789-111">Teams обработок действий получен Microsoft Bot Framework обработить действия Microsoft Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="51789-111">Teams activity handler is derived from Microsoft Bot Framework's activity handler.</span></span> <span data-ttu-id="51789-112">Он передает все Teams, прежде чем разрешить обработку Teams определенных действий.</span><span class="sxs-lookup"><span data-stu-id="51789-112">It routes all Teams activities before allowing any non-Teams specific activities to be handled.</span></span>

<span data-ttu-id="51789-113">Когда бот для Teams получает действие, он передается обработчику действий.</span><span class="sxs-lookup"><span data-stu-id="51789-113">When a bot for Teams receives an activity, it is routed to the activity handlers.</span></span> <span data-ttu-id="51789-114">Все действия проходят через один базовый обработатель, называемый обработивель поворота.</span><span class="sxs-lookup"><span data-stu-id="51789-114">All activities are routed through one base handler called the turn handler.</span></span> <span data-ttu-id="51789-115">Обработник поворота вызывает обработник необходимых действий для управления любыми полученными действиями.</span><span class="sxs-lookup"><span data-stu-id="51789-115">The turn handler calls the required activity handler to manage any activity received.</span></span> <span data-ttu-id="51789-116">Бот Teams происходит из класса, который является `TeamsActivityHandler` производным от класса Bot `ActivityHandler` Framework.</span><span class="sxs-lookup"><span data-stu-id="51789-116">The Teams bot is derived from `TeamsActivityHandler` class, which is derived from the Bot Framework's `ActivityHandler` class.</span></span>

# <a name="c"></a>[<span data-ttu-id="51789-117">C#</span><span class="sxs-lookup"><span data-stu-id="51789-117">C#</span></span>](#tab/csharp)

<span data-ttu-id="51789-118">Боты создаются с помощью bot Framework.</span><span class="sxs-lookup"><span data-stu-id="51789-118">Bots are created using the Bot Framework.</span></span> <span data-ttu-id="51789-119">Если боты получают сообщение, обработник поворота получает уведомление о входящих действиях.</span><span class="sxs-lookup"><span data-stu-id="51789-119">If the bots receive a message activity, then the turn handler receives a notification of that incoming activity.</span></span> <span data-ttu-id="51789-120">Обработитель поворота отправляет входящие действия `OnMessageActivityAsync` обработнику действий.</span><span class="sxs-lookup"><span data-stu-id="51789-120">The turn handler then sends the incoming activity to the `OnMessageActivityAsync` activity handler.</span></span> <span data-ttu-id="51789-121">В Teams эта функция остается той же.</span><span class="sxs-lookup"><span data-stu-id="51789-121">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="51789-122">Если бот получает действие обновления беседы, обработитель поворота получает уведомление о входящих действиях и отправляет входящие действия `OnConversationUpdateActivityAsync` в .</span><span class="sxs-lookup"><span data-stu-id="51789-122">If the bot receives a conversation update activity, then the turn handler receives a notification of that incoming activity and sends the incoming activity to `OnConversationUpdateActivityAsync`.</span></span> <span data-ttu-id="51789-123">Обработ Teams действий сначала проверяет все Teams события.</span><span class="sxs-lookup"><span data-stu-id="51789-123">The Teams activity handler first checks for any Teams specific events.</span></span> <span data-ttu-id="51789-124">Если события не найдены, он передает их обработнику действий Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="51789-124">If no events are found, it then passes them along to the Bot Framework's activity handler.</span></span>

<span data-ttu-id="51789-125">В классе обработчик Teams действий есть два основных обработчиков Teams действий и `OnConversationUpdateActivityAsync` `OnInvokeActivityAsync` .</span><span class="sxs-lookup"><span data-stu-id="51789-125">In the Teams activity handler class, there are two primary Teams activity handlers, `OnConversationUpdateActivityAsync` and `OnInvokeActivityAsync`.</span></span> <span data-ttu-id="51789-126">`OnConversationUpdateActivityAsync`маршруты всех действий обновления беседы и `OnInvokeActivityAsync` маршруты всех Teams вызывают действия.</span><span class="sxs-lookup"><span data-stu-id="51789-126">`OnConversationUpdateActivityAsync` routes all conversation update activities and `OnInvokeActivityAsync` routes all Teams invoke activities.</span></span>

<span data-ttu-id="51789-127">Чтобы реализовать логику для Teams обработчиков действий, необходимо переопредить методы в боте, как показано в разделе [логика](#bot-logic) бота.</span><span class="sxs-lookup"><span data-stu-id="51789-127">To implement your logic for Teams specific activity handlers, you must override the methods in your bot as shown in the [bot logic](#bot-logic) section.</span></span> <span data-ttu-id="51789-128">Для этих обработчиков не существует базовой реализации, поэтому в переопределяемой логике необходимо добавить логику.</span><span class="sxs-lookup"><span data-stu-id="51789-128">There is no base implementation for these handlers, therefore, you must add the logic that you want in your override.</span></span>

# <a name="javascript"></a>[<span data-ttu-id="51789-129">JavaScript</span><span class="sxs-lookup"><span data-stu-id="51789-129">JavaScript</span></span>](#tab/javascript)

<span data-ttu-id="51789-130">Боты создаются с помощью bot Framework.</span><span class="sxs-lookup"><span data-stu-id="51789-130">Bots are created using the Bot Framework.</span></span> <span data-ttu-id="51789-131">Если боты получают сообщение, обработник поворота получает уведомление о входящих действиях.</span><span class="sxs-lookup"><span data-stu-id="51789-131">If the bots receive a message activity, then the turn handler receives a notification of that incoming activity.</span></span> <span data-ttu-id="51789-132">Обработитель поворота отправляет входящие действия `onMessage` обработнику действий.</span><span class="sxs-lookup"><span data-stu-id="51789-132">The turn handler then sends the incoming activity to the `onMessage` activity handler.</span></span> <span data-ttu-id="51789-133">В Teams эта функция остается той же.</span><span class="sxs-lookup"><span data-stu-id="51789-133">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="51789-134">Если бот получает действие обновления беседы, обработитель поворота получает уведомление о входящих действиях и отправляет входящие действия `dispatchConversationUpdateActivity` в .</span><span class="sxs-lookup"><span data-stu-id="51789-134">If the bot receives a conversation update activity, then the turn handler receives a notification of that incoming activity and sends the incoming activity to `dispatchConversationUpdateActivity`.</span></span> <span data-ttu-id="51789-135">Обработ Teams действий сначала проверяет все Teams события.</span><span class="sxs-lookup"><span data-stu-id="51789-135">The Teams activity handler first checks for any Teams specific events.</span></span> <span data-ttu-id="51789-136">Если события не найдены, он передает их обработнику действий Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="51789-136">If no events are found, it then passes them along to the Bot Framework's activity handler.</span></span>

<span data-ttu-id="51789-137">В классе обработчик Teams действий есть два основных обработчиков Teams действий и `dispatchConversationUpdateActivity` `onInvokeActivity` .</span><span class="sxs-lookup"><span data-stu-id="51789-137">In the Teams activity handler class, there are two primary Teams activity handlers, `dispatchConversationUpdateActivity` and `onInvokeActivity`.</span></span> <span data-ttu-id="51789-138">`dispatchConversationUpdateActivity`маршруты всех действий обновления беседы и `onInvokeActivity` маршруты всех Teams вызывают действия.</span><span class="sxs-lookup"><span data-stu-id="51789-138">`dispatchConversationUpdateActivity` routes all conversation update activities and `onInvokeActivity` routes all Teams invoke activities.</span></span>

<span data-ttu-id="51789-139">Чтобы реализовать логику для Teams обработчиков действий, необходимо переопредить методы в боте, как показано в разделе [логика](#bot-logic) бота.</span><span class="sxs-lookup"><span data-stu-id="51789-139">To implement your logic for Teams specific activity handlers, you must override the methods in your bot as shown in the [bot logic](#bot-logic) section.</span></span> <span data-ttu-id="51789-140">Определите логику бота для этих обработчиков, а затем обязательно `next()` позвоните в конце.</span><span class="sxs-lookup"><span data-stu-id="51789-140">Define your bot logic for these handlers, then be sure to call `next()` at the end.</span></span> <span data-ttu-id="51789-141">`next()`Позвонив, убедитесь, что следующий обработок выполняется.</span><span class="sxs-lookup"><span data-stu-id="51789-141">By calling `next()` you ensure that the next handler runs.</span></span>

# <a name="python"></a>[<span data-ttu-id="51789-142">Python</span><span class="sxs-lookup"><span data-stu-id="51789-142">Python</span></span>](#tab/python)

<span data-ttu-id="51789-143">Боты создаются с помощью bot Framework.</span><span class="sxs-lookup"><span data-stu-id="51789-143">Bots are created using the Bot Framework.</span></span> <span data-ttu-id="51789-144">Если боты получают сообщение, обработник поворота получает уведомление о входящих действиях.</span><span class="sxs-lookup"><span data-stu-id="51789-144">If the bots receive a message activity, then the turn handler receives a notification of that incoming activity.</span></span> <span data-ttu-id="51789-145">Обработитель поворота отправляет входящие действия `on_message_activity` обработнику действий.</span><span class="sxs-lookup"><span data-stu-id="51789-145">The turn handler then sends the incoming activity to the `on_message_activity` activity handler.</span></span> <span data-ttu-id="51789-146">В Teams эта функция остается той же.</span><span class="sxs-lookup"><span data-stu-id="51789-146">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="51789-147">Если бот получает действие обновления беседы, обработитель поворота получает уведомление о входящих действиях и отправляет входящие действия `on_conversation_update_activity` в .</span><span class="sxs-lookup"><span data-stu-id="51789-147">If the bot receives a conversation update activity, then the turn handler receives a notification of that incoming activity and sends the incoming activity to `on_conversation_update_activity`.</span></span> <span data-ttu-id="51789-148">Обработ Teams действий сначала проверяет все Teams события.</span><span class="sxs-lookup"><span data-stu-id="51789-148">The Teams activity handler first checks for any Teams specific events.</span></span> <span data-ttu-id="51789-149">Если события не найдены, он передает их обработнику действий Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="51789-149">If no events are found, it then passes them along to the Bot Framework's activity handler.</span></span>

<span data-ttu-id="51789-150">В классе обработчик Teams действий есть два основных обработчиков Teams действий и `on_conversation_update_activity` `on_invoke_activity` .</span><span class="sxs-lookup"><span data-stu-id="51789-150">In the Teams activity handler class, there are two primary Teams activity handlers, `on_conversation_update_activity` and `on_invoke_activity`.</span></span> <span data-ttu-id="51789-151">`on_conversation_update_activity`маршруты всех действий обновления беседы и `on_invoke_activity` маршруты всех Teams вызывают действия.</span><span class="sxs-lookup"><span data-stu-id="51789-151">`on_conversation_update_activity` routes all conversation update activities and `on_invoke_activity` routes all Teams invoke activities.</span></span>

<span data-ttu-id="51789-152">Чтобы реализовать логику для Teams обработчиков действий, необходимо переопредить методы в боте, как показано в разделе [логика](#bot-logic) бота.</span><span class="sxs-lookup"><span data-stu-id="51789-152">To implement your logic for Teams specific activity handlers, you must override the methods in your bot as shown in the [bot logic](#bot-logic) section.</span></span> <span data-ttu-id="51789-153">Для этих обработчиков не существует базовой реализации, поэтому в переопределяемой логике необходимо добавить логику.</span><span class="sxs-lookup"><span data-stu-id="51789-153">There is no base implementation for these handlers, therefore, you must add the logic that you want in your override.</span></span>

---

## <a name="bot-logic"></a><span data-ttu-id="51789-154">Логика бота</span><span class="sxs-lookup"><span data-stu-id="51789-154">Bot logic</span></span>

<span data-ttu-id="51789-155">Логика бота обрабатывает входящие действия из одного или более каналов бота и в ответ создает исходящую деятельность.</span><span class="sxs-lookup"><span data-stu-id="51789-155">The bot logic processes incoming activities from one or more of your bot channels and in response generates outgoing activities.</span></span> <span data-ttu-id="51789-156">Это по-прежнему относится к ботам, полученным Teams обработить действия, которые сначала проверяют Teams действий.</span><span class="sxs-lookup"><span data-stu-id="51789-156">This is still true of bots derived from the Teams activity handler class, which first checks for Teams activities.</span></span> <span data-ttu-id="51789-157">После проверки Teams действий он передает все другие действия обработивею действий Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="51789-157">After checking for Teams activities, it passes all other activities to the Bot Framework's activity handler.</span></span>

# <a name="c"></a>[<span data-ttu-id="51789-158">C#</span><span class="sxs-lookup"><span data-stu-id="51789-158">C#</span></span>](#tab/csharp)

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="51789-159">Обработчики Core Bot Framework</span><span class="sxs-lookup"><span data-stu-id="51789-159">Core Bot Framework handlers</span></span>

>[!NOTE]
> <span data-ttu-id="51789-160">За **исключением**  действий добавленных и удаленых членов, все обработчики действий, описанные в этом разделе, продолжают работать так же, как и с Teams ботом.</span><span class="sxs-lookup"><span data-stu-id="51789-160">Except for the **added** and **removed** members' activities, all the activity handlers described in this section continue to work as they do with a non-Teams bot.</span></span>

<span data-ttu-id="51789-161">Обработчики действий отличаются в контексте группы, где новый член добавляется в команду вместо потока сообщений.</span><span class="sxs-lookup"><span data-stu-id="51789-161">Activity handlers are different in context of a team, where a new member is added to the team instead of a message thread.</span></span>

<span data-ttu-id="51789-162">В список обработчиков, определенных в списке, входят `ActivityHandler` следующие:</span><span class="sxs-lookup"><span data-stu-id="51789-162">The list of handlers defined in `ActivityHandler` include the following:</span></span>

| <span data-ttu-id="51789-163">Событие</span><span class="sxs-lookup"><span data-stu-id="51789-163">Event</span></span> | <span data-ttu-id="51789-164">Обработник</span><span class="sxs-lookup"><span data-stu-id="51789-164">Handler</span></span> | <span data-ttu-id="51789-165">Описание</span><span class="sxs-lookup"><span data-stu-id="51789-165">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="51789-166">Любой полученный тип действий</span><span class="sxs-lookup"><span data-stu-id="51789-166">Any activity type received</span></span> | `OnTurnAsync` | <span data-ttu-id="51789-167">Этот метод вызывает один из других обработчиков в зависимости от типа полученной активности.</span><span class="sxs-lookup"><span data-stu-id="51789-167">This method calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="51789-168">Полученная активность сообщений</span><span class="sxs-lookup"><span data-stu-id="51789-168">Message activity received</span></span> | `OnMessageActivityAsync` | <span data-ttu-id="51789-169">Этот метод может быть переопределен для обработки `Message` действий.</span><span class="sxs-lookup"><span data-stu-id="51789-169">This method can be overridden to handle a `Message` activity.</span></span> |
| <span data-ttu-id="51789-170">Получена активность обновления беседы</span><span class="sxs-lookup"><span data-stu-id="51789-170">Conversation update activity received</span></span> | `OnConversationUpdateActivityAsync` | <span data-ttu-id="51789-171">Этот метод вызывает обработник, если участники, помимо бота, присоединились или покинули беседу, в `ConversationUpdate` действии.</span><span class="sxs-lookup"><span data-stu-id="51789-171">This method calls a handler if members other than the bot joined or left the conversation, on a `ConversationUpdate` activity.</span></span> |
| <span data-ttu-id="51789-172">Участники, не вступив в бот, присоединились к беседе</span><span class="sxs-lookup"><span data-stu-id="51789-172">Non-bot members joined the conversation</span></span> | `OnMembersAddedAsync` | <span data-ttu-id="51789-173">Этот метод может быть переопределен для обработки участников, присоединявшихся к беседе.</span><span class="sxs-lookup"><span data-stu-id="51789-173">This method can be overridden to handle members joining a conversation.</span></span> |
| <span data-ttu-id="51789-174">Участники, не вносяые в боты, покинули беседу</span><span class="sxs-lookup"><span data-stu-id="51789-174">Non-bot members left the conversation</span></span> | `OnMembersRemovedAsync` | <span data-ttu-id="51789-175">Этот метод может быть переопределен для обработки участников, покидая беседу.</span><span class="sxs-lookup"><span data-stu-id="51789-175">This method can be overridden to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="51789-176">Полученная активность событий</span><span class="sxs-lookup"><span data-stu-id="51789-176">Event activity received</span></span> | `OnEventActivityAsync` | <span data-ttu-id="51789-177">Этот метод вызывает обработок, определенный типу события, в `Event` действии.</span><span class="sxs-lookup"><span data-stu-id="51789-177">This method calls a handler specific to the event type, on an `Event` activity.</span></span> |
| <span data-ttu-id="51789-178">Полученная активность событий token-response</span><span class="sxs-lookup"><span data-stu-id="51789-178">Token-response event activity received</span></span> | `OnTokenResponseEventAsync` | <span data-ttu-id="51789-179">Этот метод может быть переопределен для обработки событий отклика маркеров.</span><span class="sxs-lookup"><span data-stu-id="51789-179">This method can be overridden to handle token response events.</span></span> |
| <span data-ttu-id="51789-180">Получена активность событий, не относяка к маркерам</span><span class="sxs-lookup"><span data-stu-id="51789-180">Non-token-response event activity received</span></span> | `OnEventAsync` | <span data-ttu-id="51789-181">Этот метод может быть переопределен для обработки других типов событий.</span><span class="sxs-lookup"><span data-stu-id="51789-181">This method can be overridden to handle other types of events.</span></span> |
| <span data-ttu-id="51789-182">Другой полученный тип действий</span><span class="sxs-lookup"><span data-stu-id="51789-182">Other activity type received</span></span> | `OnUnrecognizedActivityTypeAsync` | <span data-ttu-id="51789-183">Этот метод может быть переопределен для обработки любого типа действий в противном случае без рукой.</span><span class="sxs-lookup"><span data-stu-id="51789-183">This method can be overridden to handle any activity type otherwise unhandled.</span></span> |

#### <a name="teams-specific-activity-handlers"></a><span data-ttu-id="51789-184">Teams обработчики действий</span><span class="sxs-lookup"><span data-stu-id="51789-184">Teams specific activity handlers</span></span>

<span data-ttu-id="51789-185">Список обработчиков в разделе обработчики core Bot Framework расширяется, чтобы включить `TeamsActivityHandler` следующие:</span><span class="sxs-lookup"><span data-stu-id="51789-185">The `TeamsActivityHandler` extends the list of handlers in the core Bot Framework handlers section to include the following:</span></span>

| <span data-ttu-id="51789-186">Событие</span><span class="sxs-lookup"><span data-stu-id="51789-186">Event</span></span> | <span data-ttu-id="51789-187">Обработник</span><span class="sxs-lookup"><span data-stu-id="51789-187">Handler</span></span> | <span data-ttu-id="51789-188">Описание</span><span class="sxs-lookup"><span data-stu-id="51789-188">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="51789-189">channelCreated</span><span class="sxs-lookup"><span data-stu-id="51789-189">channelCreated</span></span> | `OnTeamsChannelCreatedAsync` | <span data-ttu-id="51789-190">Этот метод может быть переопределен для обработки создаемого Teams канала.</span><span class="sxs-lookup"><span data-stu-id="51789-190">This method can be overridden to handle a Teams channel being created.</span></span> <span data-ttu-id="51789-191">Дополнительные сведения см. в [канале, созданном в](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-191">For more information, see [channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="51789-192">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="51789-192">channelDeleted</span></span> | `OnTeamsChannelDeletedAsync` | <span data-ttu-id="51789-193">Этот метод может быть переопределен для обработки удаленного Teams канала.</span><span class="sxs-lookup"><span data-stu-id="51789-193">This method can be overridden to handle a Teams channel being deleted.</span></span> <span data-ttu-id="51789-194">Дополнительные сведения см. в [ссылке на канал, удаленный в](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-194">For more information, see [channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="51789-195">ChannelRenamed</span><span class="sxs-lookup"><span data-stu-id="51789-195">channelRenamed</span></span> | `OnTeamsChannelRenamedAsync` | <span data-ttu-id="51789-196">Этот метод может быть переопределен для обработки Teams переименования канала.</span><span class="sxs-lookup"><span data-stu-id="51789-196">This method can be overridden to handle a Teams channel being renamed.</span></span> <span data-ttu-id="51789-197">Дополнительные сведения см. в [сайте channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [conversation update events.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-197">For more information, see [channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="51789-198">переименованная команда</span><span class="sxs-lookup"><span data-stu-id="51789-198">teamRenamed</span></span> | `OnTeamsTeamRenamedAsync` | <span data-ttu-id="51789-199">`return Task.CompletedTask;`Этот метод может быть переопределен для обработки Teams переименованной группы.</span><span class="sxs-lookup"><span data-stu-id="51789-199">`return Task.CompletedTask;` This method can be overridden to handle a Teams team being renamed.</span></span> <span data-ttu-id="51789-200">Дополнительные сведения см. в [группе, переименованной в](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-200">For more information, see [team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="51789-201">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="51789-201">MembersAdded</span></span> | `OnTeamsMembersAddedAsync` | <span data-ttu-id="51789-202">Этот метод вызывает `OnMembersAddedAsync` метод `ActivityHandler` в .</span><span class="sxs-lookup"><span data-stu-id="51789-202">This method calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="51789-203">Метод может быть переопределен для обработки участников, присоединявшихся к команде.</span><span class="sxs-lookup"><span data-stu-id="51789-203">The method can be overridden to handle members joining a team.</span></span> <span data-ttu-id="51789-204">Дополнительные сведения см. в [дополнительных сведениях, добавленных участниками группы](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-204">For more information, see [team members added](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="51789-205">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="51789-205">MembersRemoved</span></span> | `OnTeamsMembersRemovedAsync` | <span data-ttu-id="51789-206">Этот метод вызывает `OnMembersRemovedAsync` метод `ActivityHandler` в .</span><span class="sxs-lookup"><span data-stu-id="51789-206">This method calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="51789-207">Метод может быть переопределен для обработки участников, покидая команду.</span><span class="sxs-lookup"><span data-stu-id="51789-207">The method can be overridden to handle members leaving a team.</span></span> <span data-ttu-id="51789-208">Дополнительные сведения см. в [сведениях о членах группы, удаленых в](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-208">For more information, see [team members removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|

#### <a name="teams-invoke-activities"></a><span data-ttu-id="51789-209">Teams действия</span><span class="sxs-lookup"><span data-stu-id="51789-209">Teams invoke activities</span></span>

<span data-ttu-id="51789-210">Список обработчиков Teams, которые вызваны из обработчика Teams действий, включает `OnInvokeActivityAsync` следующие:</span><span class="sxs-lookup"><span data-stu-id="51789-210">The list of Teams activity handlers called from the `OnInvokeActivityAsync` Teams activity handler include the following:</span></span>

| <span data-ttu-id="51789-211">Типы ссылок</span><span class="sxs-lookup"><span data-stu-id="51789-211">Invoke types</span></span>                    | <span data-ttu-id="51789-212">Обработник</span><span class="sxs-lookup"><span data-stu-id="51789-212">Handler</span></span>                              | <span data-ttu-id="51789-213">Описание</span><span class="sxs-lookup"><span data-stu-id="51789-213">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="51789-214">CardAction.Invoke</span><span class="sxs-lookup"><span data-stu-id="51789-214">CardAction.Invoke</span></span>               | `OnTeamsCardActionInvokeAsync`       | <span data-ttu-id="51789-215">Этот метод вызывается при вызове действия карты из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-215">This method is invoked when a card action invoke activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-216">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="51789-216">fileConsent/invoke</span></span>              | `OnTeamsFileConsentAcceptAsync`      | <span data-ttu-id="51789-217">Этот метод вызывается при приеме пользователем карточки согласия на файл.</span><span class="sxs-lookup"><span data-stu-id="51789-217">This method is invoked when a file consent card is accepted by the user.</span></span> |
| <span data-ttu-id="51789-218">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="51789-218">fileConsent/invoke</span></span>              | `OnTeamsFileConsentAsync`            | <span data-ttu-id="51789-219">Этот метод вызывается, когда действие карточки согласия на файл получается из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-219">This method is invoked when a file consent card activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-220">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="51789-220">fileConsent/invoke</span></span>              | `OnTeamsFileConsentDeclineAsync`     | <span data-ttu-id="51789-221">Этот метод вызывается при отклонении пользователем карточки согласия на файл.</span><span class="sxs-lookup"><span data-stu-id="51789-221">This method is invoked when a file consent card is declined by the user.</span></span> |
| <span data-ttu-id="51789-222">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="51789-222">actionableMessage/executeAction</span></span> | `OnTeamsO365ConnectorCardActionAsync` | <span data-ttu-id="51789-223">Этот метод вызывается, когда действие карты соединители O365 получается из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-223">This method is invoked when a O365 connector card action activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-224">signin/verifyState</span><span class="sxs-lookup"><span data-stu-id="51789-224">signin/verifyState</span></span>              | `OnTeamsSigninVerifyStateAsync`      | <span data-ttu-id="51789-225">Этот метод вызывается при проверке действия signIn состояния, полученного из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-225">This method is invoked when a signIn verify state activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-226">task/fetch</span><span class="sxs-lookup"><span data-stu-id="51789-226">task/fetch</span></span>                      | `OnTeamsTaskModuleFetchAsync`        | <span data-ttu-id="51789-227">Этот метод может быть переопределен в производных классах, чтобы обеспечить логику при извлечении модуля задач.</span><span class="sxs-lookup"><span data-stu-id="51789-227">This method can be overridden in a derived class to provide logic when a task module is fetched.</span></span> |
| <span data-ttu-id="51789-228">task/submit</span><span class="sxs-lookup"><span data-stu-id="51789-228">task/submit</span></span>                     | `OnTeamsTaskModuleSubmitAsync`       | <span data-ttu-id="51789-229">Этот метод может быть переопределен в производных классах, чтобы обеспечить логику при отправке модуля задач.</span><span class="sxs-lookup"><span data-stu-id="51789-229">This method can be overridden in a derived class to provide logic when a task module is submitted.</span></span> |

<span data-ttu-id="51789-230">Действия вызова, перечисленные в этом разделе, для разговорных ботов в Teams.</span><span class="sxs-lookup"><span data-stu-id="51789-230">The invoke activities listed in this section are for conversational bots in Teams.</span></span> <span data-ttu-id="51789-231">SDK Bot Framework также поддерживает вызов действий, определенных для расширений обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="51789-231">The Bot Framework SDK also supports invoke activities specific to messaging extensions.</span></span> <span data-ttu-id="51789-232">Дополнительные сведения см. в дополнительных сведениях [о расширении обмена сообщениями.](https://aka.ms/azure-bot-what-are-messaging-extensions)</span><span class="sxs-lookup"><span data-stu-id="51789-232">For more information, see [what are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions).</span></span>

# <a name="javascript"></a>[<span data-ttu-id="51789-233">JavaScript</span><span class="sxs-lookup"><span data-stu-id="51789-233">JavaScript</span></span>](#tab/javascript)

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="51789-234">Обработчики Core Bot Framework</span><span class="sxs-lookup"><span data-stu-id="51789-234">Core Bot Framework handlers</span></span>

>[!NOTE]
> <span data-ttu-id="51789-235">За **исключением**  действий добавленных и удаленых членов, все обработчики действий, описанные в этом разделе, продолжают работать так же, как и с Teams ботом.</span><span class="sxs-lookup"><span data-stu-id="51789-235">Except for the **added** and **removed** members' activities, all the activity handlers described in this section continue to work as they do with a non-Teams bot.</span></span>

<span data-ttu-id="51789-236">Обработчики действий отличаются в контексте группы, где новый член добавляется в команду вместо потока сообщений.</span><span class="sxs-lookup"><span data-stu-id="51789-236">Activity handlers are different in context of a team, where the new member is added to the team instead of a message thread.</span></span>

<span data-ttu-id="51789-237">В список обработчиков, определенных в списке, входят `ActivityHandler` следующие:</span><span class="sxs-lookup"><span data-stu-id="51789-237">The list of handlers defined in `ActivityHandler` include the following:</span></span>

| <span data-ttu-id="51789-238">Событие</span><span class="sxs-lookup"><span data-stu-id="51789-238">Event</span></span> | <span data-ttu-id="51789-239">Обработник</span><span class="sxs-lookup"><span data-stu-id="51789-239">Handler</span></span> | <span data-ttu-id="51789-240">Описание</span><span class="sxs-lookup"><span data-stu-id="51789-240">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="51789-241">Любой полученный тип действий</span><span class="sxs-lookup"><span data-stu-id="51789-241">Any activity type received</span></span> | `onTurn` | <span data-ttu-id="51789-242">Этот метод вызывает один из других обработчиков в зависимости от типа полученной активности.</span><span class="sxs-lookup"><span data-stu-id="51789-242">This method calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="51789-243">Полученная активность сообщений</span><span class="sxs-lookup"><span data-stu-id="51789-243">Message activity received</span></span> | `onMessage` | <span data-ttu-id="51789-244">Этот метод помогает обрабатывать `Message` действия.</span><span class="sxs-lookup"><span data-stu-id="51789-244">This method helps to handle a `Message` activity.</span></span> |
| <span data-ttu-id="51789-245">Получена активность обновления беседы</span><span class="sxs-lookup"><span data-stu-id="51789-245">Conversation update activity received</span></span> | `onConversationUpdate` | <span data-ttu-id="51789-246">Этот метод вызывает обработник, если участники, помимо бота, присоединились или покинули беседу, в `ConversationUpdate` действии.</span><span class="sxs-lookup"><span data-stu-id="51789-246">This method calls a handler if members other than the bot joined or left the conversation, on a `ConversationUpdate` activity.</span></span> |
| <span data-ttu-id="51789-247">Участники, не вступив в бот, присоединились к беседе</span><span class="sxs-lookup"><span data-stu-id="51789-247">Non-bot members joined the conversation</span></span> | `onMembersAdded` | <span data-ttu-id="51789-248">Этот метод помогает обрабатывать присоединение участников к беседе.</span><span class="sxs-lookup"><span data-stu-id="51789-248">This method helps to handle members joining a conversation.</span></span> |
| <span data-ttu-id="51789-249">Участники, не вносяые в боты, покинули беседу</span><span class="sxs-lookup"><span data-stu-id="51789-249">Non-bot members left the conversation</span></span> | `onMembersRemoved` | <span data-ttu-id="51789-250">Этот метод помогает обрабатывать участников, покидая беседу.</span><span class="sxs-lookup"><span data-stu-id="51789-250">This method helps to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="51789-251">Полученная активность событий</span><span class="sxs-lookup"><span data-stu-id="51789-251">Event activity received</span></span> | `onEvent` | <span data-ttu-id="51789-252">Этот метод вызывает обработок, определенный типу события, в `Event` действии.</span><span class="sxs-lookup"><span data-stu-id="51789-252">This method calls a handler specific to the event type, on an `Event` activity.</span></span> |
| <span data-ttu-id="51789-253">Полученная активность событий token-response</span><span class="sxs-lookup"><span data-stu-id="51789-253">Token-response event activity received</span></span> | `onTokenResponseEvent` | <span data-ttu-id="51789-254">Этот метод помогает обрабатывать события отклика маркеров.</span><span class="sxs-lookup"><span data-stu-id="51789-254">This method helps to handle token response events.</span></span> |
| <span data-ttu-id="51789-255">Другой полученный тип действий</span><span class="sxs-lookup"><span data-stu-id="51789-255">Other activity type received</span></span> | `onUnrecognizedActivityType` | <span data-ttu-id="51789-256">Этот метод помогает обрабатывать любые типы действий в противном случае без проблем.</span><span class="sxs-lookup"><span data-stu-id="51789-256">This method helps to handle any activity type otherwise unhandled.</span></span> |

#### <a name="teams-specific-activity-handlers"></a><span data-ttu-id="51789-257">Teams обработчики действий</span><span class="sxs-lookup"><span data-stu-id="51789-257">Teams specific activity handlers</span></span>

<span data-ttu-id="51789-258">Список обработчиков в разделе обработчики core Bot Framework расширяется, чтобы включить `TeamsActivityHandler` следующие:</span><span class="sxs-lookup"><span data-stu-id="51789-258">The `TeamsActivityHandler` extends the list of handlers in the core Bot Framework handlers section to include the following:</span></span>

| <span data-ttu-id="51789-259">Событие</span><span class="sxs-lookup"><span data-stu-id="51789-259">Event</span></span> | <span data-ttu-id="51789-260">Обработник</span><span class="sxs-lookup"><span data-stu-id="51789-260">Handler</span></span> | <span data-ttu-id="51789-261">Описание</span><span class="sxs-lookup"><span data-stu-id="51789-261">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="51789-262">channelCreated</span><span class="sxs-lookup"><span data-stu-id="51789-262">channelCreated</span></span> | `OnTeamsChannelCreatedAsync` | <span data-ttu-id="51789-263">Этот метод может быть переопределен для обработки создаемого Teams канала.</span><span class="sxs-lookup"><span data-stu-id="51789-263">This method can be overridden to handle a Teams channel being created.</span></span> <span data-ttu-id="51789-264">Дополнительные сведения см. в [канале, созданном в](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-264">For more information, see [channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="51789-265">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="51789-265">channelDeleted</span></span> | `OnTeamsChannelDeletedAsync` | <span data-ttu-id="51789-266">Этот метод может быть переопределен для обработки удаленного Teams канала.</span><span class="sxs-lookup"><span data-stu-id="51789-266">This method can be overridden to handle a Teams channel being deleted.</span></span> <span data-ttu-id="51789-267">Дополнительные сведения см. в [ссылке на канал, удаленный в](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-267">For more information, see [channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="51789-268">ChannelRenamed</span><span class="sxs-lookup"><span data-stu-id="51789-268">channelRenamed</span></span> | `OnTeamsChannelRenamedAsync` | <span data-ttu-id="51789-269">Этот метод может быть переопределен для обработки Teams переименования канала.</span><span class="sxs-lookup"><span data-stu-id="51789-269">This method can be overridden to handle a Teams channel being renamed.</span></span> <span data-ttu-id="51789-270">Дополнительные сведения см. в [сайте channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [conversation update events.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-270">For more information, see [channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="51789-271">переименованная команда</span><span class="sxs-lookup"><span data-stu-id="51789-271">teamRenamed</span></span> | `OnTeamsTeamRenamedAsync` | <span data-ttu-id="51789-272">`return Task.CompletedTask;`Этот метод может быть переопределен для обработки Teams переименованной группы.</span><span class="sxs-lookup"><span data-stu-id="51789-272">`return Task.CompletedTask;` This method can be overridden to handle a Teams team being renamed.</span></span> <span data-ttu-id="51789-273">Дополнительные сведения см. в [группе, переименованной в](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-273">For more information, see [team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="51789-274">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="51789-274">MembersAdded</span></span> | `OnTeamsMembersAddedAsync` | <span data-ttu-id="51789-275">Этот метод вызывает `OnMembersAddedAsync` метод `ActivityHandler` в .</span><span class="sxs-lookup"><span data-stu-id="51789-275">This method calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="51789-276">Метод может быть переопределен для обработки участников, присоединявшихся к команде.</span><span class="sxs-lookup"><span data-stu-id="51789-276">The method can be overridden to handle members joining a team.</span></span> <span data-ttu-id="51789-277">Дополнительные сведения см. в [дополнительных сведениях, добавленных участниками группы](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-277">For more information, see [team members added](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="51789-278">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="51789-278">MembersRemoved</span></span> | `OnTeamsMembersRemovedAsync` | <span data-ttu-id="51789-279">Этот метод вызывает `OnMembersRemovedAsync` метод `ActivityHandler` в .</span><span class="sxs-lookup"><span data-stu-id="51789-279">This method calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="51789-280">Метод может быть переопределен для обработки участников, покидая команду.</span><span class="sxs-lookup"><span data-stu-id="51789-280">The method can be overridden to handle members leaving a team.</span></span> <span data-ttu-id="51789-281">Дополнительные сведения см. в [сведениях о членах группы, удаленых в](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-281">For more information, see [team members removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |

#### <a name="teams-invoke-activities"></a><span data-ttu-id="51789-282">Teams действия</span><span class="sxs-lookup"><span data-stu-id="51789-282">Teams invoke activities</span></span>

<span data-ttu-id="51789-283">Список обработчиков Teams, которые вызваны из обработчика Teams действий, включает `onInvokeActivity` следующие:</span><span class="sxs-lookup"><span data-stu-id="51789-283">The list of Teams activity handlers called from the `onInvokeActivity` Teams activity handler include the following:</span></span>

| <span data-ttu-id="51789-284">Типы ссылок</span><span class="sxs-lookup"><span data-stu-id="51789-284">Invoke types</span></span>                    | <span data-ttu-id="51789-285">Обработник</span><span class="sxs-lookup"><span data-stu-id="51789-285">Handler</span></span>                              | <span data-ttu-id="51789-286">Описание</span><span class="sxs-lookup"><span data-stu-id="51789-286">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="51789-287">CardAction.Invoke</span><span class="sxs-lookup"><span data-stu-id="51789-287">CardAction.Invoke</span></span>               | `handleTeamsCardActionInvoke`       | <span data-ttu-id="51789-288">Этот метод вызывается при вызове действия карты из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-288">This method is invoked when a card action invoke activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-289">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="51789-289">fileConsent/invoke</span></span>              | `handleTeamsFileConsentAccept`      | <span data-ttu-id="51789-290">Этот метод вызывается при приеме пользователем карточки согласия на файл.</span><span class="sxs-lookup"><span data-stu-id="51789-290">This method is invoked when a file consent card is accepted by the user.</span></span> |
| <span data-ttu-id="51789-291">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="51789-291">fileConsent/invoke</span></span>              | `handleTeamsFileConsent`            | <span data-ttu-id="51789-292">Этот метод вызывается, когда действие карточки согласия на файл получается из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-292">This method is invoked when a file consent card activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-293">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="51789-293">fileConsent/invoke</span></span>              | `handleTeamsFileConsentDecline`     | <span data-ttu-id="51789-294">Этот метод вызывается при отклонении пользователем карточки согласия на файл.</span><span class="sxs-lookup"><span data-stu-id="51789-294">This method is invoked when a file consent card is declined by the user.</span></span> |
| <span data-ttu-id="51789-295">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="51789-295">actionableMessage/executeAction</span></span> | `handleTeamsO365ConnectorCardAction` | <span data-ttu-id="51789-296">Этот метод вызывается, когда действие карты соединители O365 получается из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-296">This method is invoked when a O365 connector card action activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-297">signin/verifyState</span><span class="sxs-lookup"><span data-stu-id="51789-297">signin/verifyState</span></span>              | `handleTeamsSigninVerifyState`      | <span data-ttu-id="51789-298">Этот метод вызывается при проверке действия signIn состояния, полученного из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-298">This method is invoked when a signIn verify state activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-299">task/fetch</span><span class="sxs-lookup"><span data-stu-id="51789-299">task/fetch</span></span>                      | `handleTeamsTaskModuleFetch`        | <span data-ttu-id="51789-300">Этот метод может быть переопределен в производных классах, чтобы обеспечить логику при извлечении модуля задач.</span><span class="sxs-lookup"><span data-stu-id="51789-300">This method can be overridden in a derived class to provide logic when a task module is fetched.</span></span> |
| <span data-ttu-id="51789-301">task/submit</span><span class="sxs-lookup"><span data-stu-id="51789-301">task/submit</span></span>                     | `handleTeamsTaskModuleSubmit`       | <span data-ttu-id="51789-302">Этот метод может быть переопределен в производных классах, чтобы обеспечить логику при отправке модуля задач.</span><span class="sxs-lookup"><span data-stu-id="51789-302">This method can be overridden in a derived class to provide logic when a task module is submitted.</span></span> |

<span data-ttu-id="51789-303">Действия вызова, перечисленные в этом разделе, для разговорных ботов в Teams.</span><span class="sxs-lookup"><span data-stu-id="51789-303">The invoke activities listed in this section are for conversational bots in Teams.</span></span> <span data-ttu-id="51789-304">SDK Bot Framework также поддерживает вызов действий, определенных для расширений обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="51789-304">The Bot Framework SDK also supports invoke activities specific to messaging extensions.</span></span> <span data-ttu-id="51789-305">Дополнительные сведения см. в дополнительных сведениях [о расширении обмена сообщениями.](https://aka.ms/azure-bot-what-are-messaging-extensions)</span><span class="sxs-lookup"><span data-stu-id="51789-305">For more information, see [what are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions).</span></span>

# <a name="python"></a>[<span data-ttu-id="51789-306">Python</span><span class="sxs-lookup"><span data-stu-id="51789-306">Python</span></span>](#tab/python)

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="51789-307">Обработчики Core Bot Framework</span><span class="sxs-lookup"><span data-stu-id="51789-307">Core Bot Framework handlers</span></span>

>[!NOTE]
> <span data-ttu-id="51789-308">За **исключением**  действий добавленных и удаленых членов, все обработчики действий, описанные в этом разделе, продолжают работать так же, как и с Teams ботом.</span><span class="sxs-lookup"><span data-stu-id="51789-308">Except for the **added** and **removed** members' activities, all the activity handlers described in this section continue to work as they do with a non-Teams bot.</span></span>

<span data-ttu-id="51789-309">Обработчики действий отличаются в контексте группы, где новый член добавляется в команду вместо потока сообщений.</span><span class="sxs-lookup"><span data-stu-id="51789-309">Activity handlers are different in context of a team, where the new member is added to the team instead of a message thread.</span></span>

<span data-ttu-id="51789-310">В список обработчиков, определенных в списке, входят `ActivityHandler` следующие:</span><span class="sxs-lookup"><span data-stu-id="51789-310">The list of handlers defined in `ActivityHandler` include the following:</span></span>

| <span data-ttu-id="51789-311">Событие</span><span class="sxs-lookup"><span data-stu-id="51789-311">Event</span></span> | <span data-ttu-id="51789-312">Обработник</span><span class="sxs-lookup"><span data-stu-id="51789-312">Handler</span></span> | <span data-ttu-id="51789-313">Описание</span><span class="sxs-lookup"><span data-stu-id="51789-313">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="51789-314">Любой полученный тип действий</span><span class="sxs-lookup"><span data-stu-id="51789-314">Any activity type received</span></span> | `on_turn` | <span data-ttu-id="51789-315">Этот метод вызывает один из других обработчиков в зависимости от типа полученной активности.</span><span class="sxs-lookup"><span data-stu-id="51789-315">This method calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="51789-316">Полученная активность сообщений</span><span class="sxs-lookup"><span data-stu-id="51789-316">Message activity received</span></span> | `on_message_activity` | <span data-ttu-id="51789-317">Этот метод может быть переопределен для обработки `Message` действий.</span><span class="sxs-lookup"><span data-stu-id="51789-317">This method can be overridden to handle a `Message` activity.</span></span> |
| <span data-ttu-id="51789-318">Получена активность обновления беседы</span><span class="sxs-lookup"><span data-stu-id="51789-318">Conversation update activity received</span></span> | `on_conversation_update_activity` | <span data-ttu-id="51789-319">Этот метод вызывает обработник, если участники, кроме бота, присоединяются или покидают беседу.</span><span class="sxs-lookup"><span data-stu-id="51789-319">This method calls a handler if members other than the bot join or leave the conversation.</span></span> |
| <span data-ttu-id="51789-320">Участники, не вступив в бот, присоединились к беседе</span><span class="sxs-lookup"><span data-stu-id="51789-320">Non-bot members joined the conversation</span></span> | `on_members_added_activity` | <span data-ttu-id="51789-321">Этот метод может быть переопределен для обработки участников, присоединявшихся к беседе.</span><span class="sxs-lookup"><span data-stu-id="51789-321">This method can be overridden to handle members joining a conversation.</span></span> |
| <span data-ttu-id="51789-322">Участники, не вносяые в боты, покинули беседу</span><span class="sxs-lookup"><span data-stu-id="51789-322">Non-bot members left the conversation</span></span> | `on_members_removed_activity` | <span data-ttu-id="51789-323">Этот метод может быть переопределен для обработки участников, покидая беседу.</span><span class="sxs-lookup"><span data-stu-id="51789-323">This method can be overridden to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="51789-324">Полученная активность событий</span><span class="sxs-lookup"><span data-stu-id="51789-324">Event activity received</span></span> | `on_event_activity` | <span data-ttu-id="51789-325">Этот метод вызывает обработник, определенный типу события.</span><span class="sxs-lookup"><span data-stu-id="51789-325">This method calls a handler specific to the type of event.</span></span> |
| <span data-ttu-id="51789-326">Полученная активность событий token-response</span><span class="sxs-lookup"><span data-stu-id="51789-326">Token-response event activity received</span></span> | `on_token_response_event` | <span data-ttu-id="51789-327">Этот метод может быть переопределен для обработки событий отклика маркеров.</span><span class="sxs-lookup"><span data-stu-id="51789-327">This method can be overridden to handle token response events.</span></span> |
| <span data-ttu-id="51789-328">Получена активность событий, не относяка к маркерам</span><span class="sxs-lookup"><span data-stu-id="51789-328">Non-token-response event activity received</span></span> | `on_event` | <span data-ttu-id="51789-329">Этот метод может быть переопределен для обработки других типов событий.</span><span class="sxs-lookup"><span data-stu-id="51789-329">This method can be overridden to handle other types of events.</span></span> |
| <span data-ttu-id="51789-330">Другие полученные типы действий</span><span class="sxs-lookup"><span data-stu-id="51789-330">Other activity types received</span></span> | `on_unrecognized_activity_type` | <span data-ttu-id="51789-331">Этот метод может быть переопределен для обработки любого типа действий, которые не обрабатываются.</span><span class="sxs-lookup"><span data-stu-id="51789-331">This method can be overridden to handle any type of activity that is not handled.</span></span> |

#### <a name="teams-specific-activity-handlers"></a><span data-ttu-id="51789-332">Teams обработчики действий</span><span class="sxs-lookup"><span data-stu-id="51789-332">Teams specific activity handlers</span></span>

<span data-ttu-id="51789-333">Список обработчиков из основного раздела обработчиков Bot Framework расширяется, включив в него `TeamsActivityHandler` следующие:</span><span class="sxs-lookup"><span data-stu-id="51789-333">The `TeamsActivityHandler` extends the list of handlers from the core Bot Framework handlers section to include the following:</span></span>

| <span data-ttu-id="51789-334">Событие</span><span class="sxs-lookup"><span data-stu-id="51789-334">Event</span></span> | <span data-ttu-id="51789-335">Обработник</span><span class="sxs-lookup"><span data-stu-id="51789-335">Handler</span></span> | <span data-ttu-id="51789-336">Описание</span><span class="sxs-lookup"><span data-stu-id="51789-336">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="51789-337">channelCreated</span><span class="sxs-lookup"><span data-stu-id="51789-337">channelCreated</span></span> | `on_teams_channel_created` | <span data-ttu-id="51789-338">Этот метод может быть переопределен для обработки создаемого Teams канала.</span><span class="sxs-lookup"><span data-stu-id="51789-338">This method can be overridden to handle a Teams channel being created.</span></span> <span data-ttu-id="51789-339">Дополнительные сведения см. в [канале, созданном в](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-339">For more information, see [channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="51789-340">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="51789-340">channelDeleted</span></span> | `on_teams_channel_deleted` | <span data-ttu-id="51789-341">Этот метод может быть переопределен для обработки удаленного Teams канала.</span><span class="sxs-lookup"><span data-stu-id="51789-341">This method can be overridden to handle a Teams channel being deleted.</span></span> <span data-ttu-id="51789-342">Дополнительные сведения см. в [ссылке на канал, удаленный в](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-342">For more information, see [channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="51789-343">ChannelRenamed</span><span class="sxs-lookup"><span data-stu-id="51789-343">channelRenamed</span></span> | `on_teams_channel_renamed` | <span data-ttu-id="51789-344">Этот метод может быть переопределен для обработки Teams переименования канала.</span><span class="sxs-lookup"><span data-stu-id="51789-344">This method can be overridden to handle a Teams channel being renamed.</span></span> <span data-ttu-id="51789-345">Дополнительные сведения см. в [сайте channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [conversation update events.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-345">For more information, see [channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="51789-346">переименованная команда</span><span class="sxs-lookup"><span data-stu-id="51789-346">teamRenamed</span></span> | `on_teams_team_renamed` | <span data-ttu-id="51789-347">`return Task.CompletedTask;`Этот метод может быть переопределен для обработки Teams переименованной группы.</span><span class="sxs-lookup"><span data-stu-id="51789-347">`return Task.CompletedTask;` This method can be overridden to handle a Teams team being renamed.</span></span> <span data-ttu-id="51789-348">Дополнительные сведения см. в [группе, переименованной в](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-348">For more information, see [team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="51789-349">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="51789-349">MembersAdded</span></span> | `on_teams_members_added` | <span data-ttu-id="51789-350">Этот метод вызывает `OnMembersAddedAsync` метод `ActivityHandler` в .</span><span class="sxs-lookup"><span data-stu-id="51789-350">This method calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="51789-351">Метод может быть переопределен для обработки участников, присоединявшихся к команде.</span><span class="sxs-lookup"><span data-stu-id="51789-351">The method can be overridden to handle members joining a team.</span></span> <span data-ttu-id="51789-352">Дополнительные сведения см. в [дополнительных сведениях, добавленных участниками группы](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-352">For more information, see [team members added](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="51789-353">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="51789-353">MembersRemoved</span></span> | `on_teams_members_removed` | <span data-ttu-id="51789-354">Этот метод вызывает `OnMembersRemovedAsync` метод `ActivityHandler` в .</span><span class="sxs-lookup"><span data-stu-id="51789-354">This method calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="51789-355">Метод может быть переопределен для обработки участников, покидая команду.</span><span class="sxs-lookup"><span data-stu-id="51789-355">The method can be overridden to handle members leaving a team.</span></span> <span data-ttu-id="51789-356">Дополнительные сведения см. в [сведениях о членах группы, удаленых в](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="51789-356">For more information, see [team members removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|

#### <a name="teams-invoke-activities"></a><span data-ttu-id="51789-357">Teams действия</span><span class="sxs-lookup"><span data-stu-id="51789-357">Teams invoke activities</span></span>

<span data-ttu-id="51789-358">Список обработчиков Teams, которые вызваны из обработчика Teams действий, включает `on_invoke_activity` следующие:</span><span class="sxs-lookup"><span data-stu-id="51789-358">The list of Teams activity handlers called from the `on_invoke_activity` Teams activity handler include the following:</span></span>

| <span data-ttu-id="51789-359">Типы ссылок</span><span class="sxs-lookup"><span data-stu-id="51789-359">Invoke types</span></span>                    | <span data-ttu-id="51789-360">Обработник</span><span class="sxs-lookup"><span data-stu-id="51789-360">Handler</span></span>                              | <span data-ttu-id="51789-361">Описание</span><span class="sxs-lookup"><span data-stu-id="51789-361">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="51789-362">CardAction.Invoke</span><span class="sxs-lookup"><span data-stu-id="51789-362">CardAction.Invoke</span></span>               | `on_teams_card_action_invoke`       | <span data-ttu-id="51789-363">Этот метод вызывается при вызове действия карты из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-363">This method is invoked when a card action invoke activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-364">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="51789-364">fileConsent/invoke</span></span>              | `on_teams_file_consent_accept`      | <span data-ttu-id="51789-365">Этот метод вызывается при приеме пользователем карточки согласия на файл.</span><span class="sxs-lookup"><span data-stu-id="51789-365">This method is invoked when a file consent card is accepted by the user.</span></span> |
| <span data-ttu-id="51789-366">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="51789-366">fileConsent/invoke</span></span>              | `on_teams_file_consent`            | <span data-ttu-id="51789-367">Этот метод вызывается, когда действие карточки согласия на файл получается из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-367">This method is invoked when a file consent card activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-368">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="51789-368">fileConsent/invoke</span></span>              | `on_teams_file_consent_decline`     | <span data-ttu-id="51789-369">Этот метод вызывается при отклонении пользователем карточки согласия на файл.</span><span class="sxs-lookup"><span data-stu-id="51789-369">This method is invoked when a file consent card is declined by the user.</span></span> |
| <span data-ttu-id="51789-370">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="51789-370">actionableMessage/executeAction</span></span> | `on_teams_o365_connector_card_action` | <span data-ttu-id="51789-371">Этот метод вызывается, когда действие карты соединители O365 получается из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-371">This method is invoked when a O365 connector card action activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-372">signin/verifyState</span><span class="sxs-lookup"><span data-stu-id="51789-372">signin/verifyState</span></span>              | `on_teams_signin_verify_state`      | <span data-ttu-id="51789-373">Этот метод вызывается при проверке действия signIn состояния, полученного из соединитетеля.</span><span class="sxs-lookup"><span data-stu-id="51789-373">This method is invoked when a signIn verify state activity is received from the connector.</span></span> |
| <span data-ttu-id="51789-374">task/fetch</span><span class="sxs-lookup"><span data-stu-id="51789-374">task/fetch</span></span>                      | `on_teams_task_module_fetch`        | <span data-ttu-id="51789-375">Этот метод может быть переопределен в производных классах, чтобы обеспечить логику при извлечении модуля задач.</span><span class="sxs-lookup"><span data-stu-id="51789-375">This method can be overridden in a derived class to provide logic when a task module is fetched.</span></span> |
| <span data-ttu-id="51789-376">task/submit</span><span class="sxs-lookup"><span data-stu-id="51789-376">task/submit</span></span>                     | `on_teams_task_module_submit`       | <span data-ttu-id="51789-377">Этот метод может быть переопределен в производных классах, чтобы обеспечить логику при отправке модуля задач.</span><span class="sxs-lookup"><span data-stu-id="51789-377">This method can be overridden in a derived class to provide logic when a task module is submitted.</span></span> |

<span data-ttu-id="51789-378">Действия вызова, перечисленные в этом разделе, для разговорных ботов в Teams.</span><span class="sxs-lookup"><span data-stu-id="51789-378">The invoke activities listed in this section are for conversational bots in Teams.</span></span> <span data-ttu-id="51789-379">SDK Bot Framework также поддерживает вызов действий, определенных для расширений обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="51789-379">The Bot Framework SDK also supports invoke activities specific to messaging extensions.</span></span> <span data-ttu-id="51789-380">Дополнительные сведения см. в дополнительных сведениях [о расширении обмена сообщениями.](https://aka.ms/azure-bot-what-are-messaging-extensions)</span><span class="sxs-lookup"><span data-stu-id="51789-380">For more information, see [what are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions).</span></span>

---

* * *

<span data-ttu-id="51789-381">Теперь, когда вы ознакомились с обработчиками действий ботов, давайте посмотрим, как боты ведут себя по-разному в зависимости от беседы и сообщений, которые они получают или отправляют.</span><span class="sxs-lookup"><span data-stu-id="51789-381">Now that you have familiarized yourself with bot activity handlers, let us see how bots behave differently depending on the conversation and the messages it receives or sends.</span></span>

## <a name="next-step"></a><span data-ttu-id="51789-382">Следующий этап</span><span class="sxs-lookup"><span data-stu-id="51789-382">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="51789-383">Основы разговора</span><span class="sxs-lookup"><span data-stu-id="51789-383">Conversation basics</span></span>](~/bots/how-to/conversations/conversation-basics.md)
