---
title: Основные сведения о Bot
author: clearab
description: Общие сведения о Боты в Teams.
ms.topic: conceptual
ms.author: anclear
ms.openlocfilehash: e1b0c79b73ae89c8ab76ba0a1ff045603ab0b932
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "41675333"
---
# <a name="bot-basics"></a><span data-ttu-id="87270-103">Основные сведения о Bot</span><span class="sxs-lookup"><span data-stu-id="87270-103">Bot basics</span></span>

<span data-ttu-id="87270-104">Это введение, которое создает, [как боты работает](https://aka.ms/how-bots-work) в основной [документации по основной среде](https://aka.ms/azure-bot-service-docs).</span><span class="sxs-lookup"><span data-stu-id="87270-104">This is an introduction that builds on the article [How bots work](https://aka.ms/how-bots-work) in the core [Bot Framework documentation](https://aka.ms/azure-bot-service-docs).</span></span> <span data-ttu-id="87270-105">Вы можете найти эту статью и другие статьи в разделе *Основные понятия* , которые можно использовать.</span><span class="sxs-lookup"><span data-stu-id="87270-105">You may find that article, and the other articles in the *Concepts* section, useful.</span></span>

<span data-ttu-id="87270-106">Основное отличие в Боты, разработанной для Microsoft Teams, заключается в том, как обрабатываются действия.</span><span class="sxs-lookup"><span data-stu-id="87270-106">The primary difference in bots developed for Microsoft Teams is in how activities are handled.</span></span> <span data-ttu-id="87270-107">Обработчик действий Microsoft Teams является производным от обработчика действий в среде Bot для маршрутизации всех действий Teams, прежде чем разрешить обработку любых действий, не связанных с Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-107">The Microsoft Teams activity handler derives from the Bot Framework's activity handler to route all Teams activities before allowing any non-Teams specific activities to be handled.</span></span>

## <a name="teams-activity-handlers"></a><span data-ttu-id="87270-108">Обработчики действий Teams</span><span class="sxs-lookup"><span data-stu-id="87270-108">Teams Activity handlers</span></span>

<span data-ttu-id="87270-109">Когда Bot для Microsoft Teams получает действие, оно передается его *обработчикам действий*.</span><span class="sxs-lookup"><span data-stu-id="87270-109">When a bot for Microsoft Teams receives an activity, it passes it on to its *activity handlers*.</span></span> <span data-ttu-id="87270-110">В рамках этой процедуры существует один базовый обработчик, называемый *обработчиком*, который выполняет маршрутизацию всех действий через.</span><span class="sxs-lookup"><span data-stu-id="87270-110">Under the covers, there's one base handler called the *turn handler*, that all activities are routed through.</span></span> <span data-ttu-id="87270-111">*Обработчик переворота* вызывает необходимый обработчик действий для обработки любого типа полученного действия.</span><span class="sxs-lookup"><span data-stu-id="87270-111">The *turn handler* calls the required activity handler to handle whatever type of activity was received.</span></span> <span data-ttu-id="87270-112">В отличие от приложения Bot, разработанного для Microsoft Teams, он `TeamsActivityHandler` является производным от класса, производного от `ActivityHandler` класса Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="87270-112">Where a bot designed for Microsoft Teams differs is that it is derived from `TeamsActivityHandler` class that is derived from the Bot Framework's `ActivityHandler` class.</span></span>

# <a name="ctabcsharp"></a>[<span data-ttu-id="87270-113">C#</span><span class="sxs-lookup"><span data-stu-id="87270-113">C#</span></span>](#tab/csharp)

<span data-ttu-id="87270-114">Как и в случае с любыми Bot, созданными с помощью Microsoft Bot Framework, если Bot получает действие сообщения, обработчик переводит видит, что это входящее `OnMessageActivityAsync` действие и отправляет его обработчику действий.</span><span class="sxs-lookup"><span data-stu-id="87270-114">As with any bot created using the Microsoft Bot Framework, if the bot receives a message activity, the turn handler sees that incoming activity and sends it to the `OnMessageActivityAsync` activity handler.</span></span> <span data-ttu-id="87270-115">В Teams эта функциональная возможность остается прежней.</span><span class="sxs-lookup"><span data-stu-id="87270-115">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="87270-116">Если Bot получает действие обновления беседы, обработчик переводит видит, что это входящее действие, и отправляет его `OnConversationUpdateActivityAsync` обработчику действий *Teams* , который сначала проверяет наличие определенных событий Teams и передает его в обработчик действий, выполняемый в среде Bot, если ничего не найдено.</span><span class="sxs-lookup"><span data-stu-id="87270-116">If the bot receives a conversation update activity, the turn handler sees that incoming activity and sends it to the `OnConversationUpdateActivityAsync` *Teams* activity handler that will first check for any Teams specific events and pass it along to the Bot Framework's activity handler if none are found.</span></span>

<span data-ttu-id="87270-117">В классе обработчика действий Teams существует два основных обработчика действий Teams `OnConversationUpdateActivityAsync` , которые направляют все действия по обновлению беседы и `OnInvokeActivityAsync` направляют все действия по вызову Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-117">In the Teams activity handler class, there are two primary Teams activity handlers, `OnConversationUpdateActivityAsync` that routes all conversation update activities, and `OnInvokeActivityAsync` that routes all Teams invoke activities.</span></span>

<span data-ttu-id="87270-118">Чтобы реализовать логику для определенных обработчиков действий в Teams, вы переопределите эти методы в интерфейсе Bot, как показано в разделе " [логика ленты ленты](#bot-logic) ".</span><span class="sxs-lookup"><span data-stu-id="87270-118">To implement your logic for Teams specific activity handlers, you'll override these methods in your bot as shown in the [Bot logic](#bot-logic) section below.</span></span> <span data-ttu-id="87270-119">Для каждого из этих обработчиков не существует базовой реализации, поэтому просто добавьте логику, которую нужно использовать в переопределении.</span><span class="sxs-lookup"><span data-stu-id="87270-119">For each of these handlers, there is no base implementation, so just add the logic that you want in your override.</span></span>

# <a name="javascripttabjavascript"></a>[<span data-ttu-id="87270-120">JavaScript</span><span class="sxs-lookup"><span data-stu-id="87270-120">JavaScript</span></span>](#tab/javascript)

<span data-ttu-id="87270-121">Как и в случае с любыми Bot, созданными с помощью Microsoft Bot Framework, если Bot получает действие сообщения, обработчик переводит видит, что это входящее `onMessage` действие и отправляет его обработчику действий.</span><span class="sxs-lookup"><span data-stu-id="87270-121">As with any bot created using the Microsoft Bot Framework, if the bot receives a message activity, the turn handler sees that incoming activity and sends it to the `onMessage` activity handler.</span></span> <span data-ttu-id="87270-122">В Teams эта функциональная возможность остается прежней.</span><span class="sxs-lookup"><span data-stu-id="87270-122">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="87270-123">Если Bot получает действие обновления беседы, обработчик переводит видит, что это входящее действие, и отправляет его `dispatchConversationUpdateActivity` обработчику действий *Teams* , который сначала проверяет наличие определенных событий Teams и передает его в обработчик действий Bot Frameworks, если ничего не найдено.</span><span class="sxs-lookup"><span data-stu-id="87270-123">If the bot receives a conversation update activity, the turn handler sees that incoming activity and sends it to the `dispatchConversationUpdateActivity` *Teams* activity handler that will first check for any Teams specific events and pass it along to the bot frameworks activity handler if none are found.</span></span>

<span data-ttu-id="87270-124">В классе обработчика действий Teams существует два основных обработчика действий Teams `dispatchConversationUpdateActivity` , которые направляют все действия по обновлению беседы и `onInvokeActivity` направляют все действия по вызову Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-124">In the Teams activity handler class, there are two primary Teams activity handlers, `dispatchConversationUpdateActivity` that routes all conversation update Activities, and `onInvokeActivity` that routes all Teams invoke activities.</span></span>

<span data-ttu-id="87270-125">Чтобы реализовать логику для определенных обработчиков действий в Teams, вы переопределите эти методы в интерфейсе Bot, как показано в разделе " [логика ленты ленты](#bot-logic) ".</span><span class="sxs-lookup"><span data-stu-id="87270-125">To implement your logic for Teams specific activity handlers, you'll override these methods in your bot as seen in the [Bot logic](#bot-logic) section below.</span></span> <span data-ttu-id="87270-126">Для каждого из этих обработчиков определите логику ленты, а затем **обязательно вызовите `next()` ее в конце**.</span><span class="sxs-lookup"><span data-stu-id="87270-126">For each of these handlers, define your bot logic, then **be sure to call `next()` at the end**.</span></span> <span data-ttu-id="87270-127">Вызывая `next()` гарантию, вы гарантируете выполнение следующего обработчика.</span><span class="sxs-lookup"><span data-stu-id="87270-127">By calling `next()` you ensure that the next handler runs.</span></span>

---

## <a name="bot-logic"></a><span data-ttu-id="87270-128">Логика Bot</span><span class="sxs-lookup"><span data-stu-id="87270-128">Bot logic</span></span>

<span data-ttu-id="87270-129">Логика Bot обрабатывает входящие действия из одного или нескольких каналов ленты и создает исходящие действия в ответе.</span><span class="sxs-lookup"><span data-stu-id="87270-129">The bot logic processes incoming activities from one or more of your bot channels and generates outgoing activities in response.</span></span>  <span data-ttu-id="87270-130">Это по-прежнему относится к Боты, производному от класса обработчика действий Teams, который сначала проверяет действия Teams, а затем передает все остальные действия обработчику действий Bot Frameworks.</span><span class="sxs-lookup"><span data-stu-id="87270-130">This is still true of bots derived from the Teams activity handler class, which first checks for Teams activities, then passes all other activities to the bot frameworks activity handler.</span></span>

# <a name="ctabcsharp"></a>[<span data-ttu-id="87270-131">C#</span><span class="sxs-lookup"><span data-stu-id="87270-131">C#</span></span>](#tab/csharp)

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="87270-132">Основные обработчики ленты</span><span class="sxs-lookup"><span data-stu-id="87270-132">Core Bot Framework handlers</span></span>

<span data-ttu-id="87270-133">Все описанные ниже обработчики действий продолжают работать так же, как и при работе с роботом, не являющимся участником Teams, за исключением того, что *добавленные* члены и участники *удалили* действия, они будут отличаться в контексте команды, в которой новый участник добавляется в группу, а не в цепочку сообщений.</span><span class="sxs-lookup"><span data-stu-id="87270-133">All of the activity handlers described below will continue to work as they do with a non-Teams bot, with the exception of handling members *added* and members *removed* activities, these will be different in the context of a team, where the new member is added to the team as opposed to a message thread.</span></span>

<span data-ttu-id="87270-134">Обработчики, определенные `ActivityHandler` в, описаны ниже.</span><span class="sxs-lookup"><span data-stu-id="87270-134">The handlers defined in `ActivityHandler` are outlined below.</span></span>

| <span data-ttu-id="87270-135">Событие</span><span class="sxs-lookup"><span data-stu-id="87270-135">Event</span></span> | <span data-ttu-id="87270-136">Событий</span><span class="sxs-lookup"><span data-stu-id="87270-136">Handler</span></span> | <span data-ttu-id="87270-137">Описание</span><span class="sxs-lookup"><span data-stu-id="87270-137">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="87270-138">Любой тип действия, полученный</span><span class="sxs-lookup"><span data-stu-id="87270-138">Any activity type received</span></span> | `OnTurnAsync` | <span data-ttu-id="87270-139">Вызывает один из других обработчиков в зависимости от типа полученного действия.</span><span class="sxs-lookup"><span data-stu-id="87270-139">Calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="87270-140">Получено сообщений об активности</span><span class="sxs-lookup"><span data-stu-id="87270-140">Message activity received</span></span> | `OnMessageActivityAsync` | <span data-ttu-id="87270-141">Переопределите это `Message` действие, чтобы обработать действие.</span><span class="sxs-lookup"><span data-stu-id="87270-141">Override this to handle a `Message` activity.</span></span> |
| <span data-ttu-id="87270-142">Получено действие обновления беседы</span><span class="sxs-lookup"><span data-stu-id="87270-142">Conversation update activity received</span></span> | `OnConversationUpdateActivityAsync` | <span data-ttu-id="87270-143">При работе `ConversationUpdate` с действием вызывается обработчик, если участники, отличные от присоединенных к началу или левой стороне объекта.</span><span class="sxs-lookup"><span data-stu-id="87270-143">On a `ConversationUpdate` activity, calls a handler if members other than the bot joined or left the conversation.</span></span> |
| <span data-ttu-id="87270-144">Участники, не являющиеся участниками Bot, присоединились к беседе</span><span class="sxs-lookup"><span data-stu-id="87270-144">Non-bot members joined the conversation</span></span> | `OnMembersAddedAsync` | <span data-ttu-id="87270-145">Переопределите этот метод для обработки членов, присоединяющихся к беседе.</span><span class="sxs-lookup"><span data-stu-id="87270-145">Override this to handle members joining a conversation.</span></span> |
| <span data-ttu-id="87270-146">Участники, не являющиеся участниками Bot, оставили беседу</span><span class="sxs-lookup"><span data-stu-id="87270-146">Non-bot members left the conversation</span></span> | `OnMembersRemovedAsync` | <span data-ttu-id="87270-147">Переопределите этот метод, чтобы элементы обрабатывали беседу.</span><span class="sxs-lookup"><span data-stu-id="87270-147">Override this to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="87270-148">Получено действий с событиями</span><span class="sxs-lookup"><span data-stu-id="87270-148">Event activity received</span></span> | `OnEventActivityAsync` | <span data-ttu-id="87270-149">Для `Event` действия вызывает обработчик, зависящий от типа события.</span><span class="sxs-lookup"><span data-stu-id="87270-149">On an `Event` activity, calls a handler specific to the event type.</span></span> |
| <span data-ttu-id="87270-150">Получено действий с событиями Token и Response</span><span class="sxs-lookup"><span data-stu-id="87270-150">Token-response event activity received</span></span> | `OnTokenResponseEventAsync` | <span data-ttu-id="87270-151">Переопределите этот метод, чтобы обрабатывать события ответа маркеров.</span><span class="sxs-lookup"><span data-stu-id="87270-151">Override this to handle token response events.</span></span> |
| <span data-ttu-id="87270-152">Получено действий событий, не связанных с маркером и откликом</span><span class="sxs-lookup"><span data-stu-id="87270-152">Non-token-response event activity received</span></span> | `OnEventAsync` | <span data-ttu-id="87270-153">Переопределите этот метод, чтобы обрабатывать события других типов.</span><span class="sxs-lookup"><span data-stu-id="87270-153">Override this to handle other types of events.</span></span> |
| <span data-ttu-id="87270-154">Получен другой тип действия</span><span class="sxs-lookup"><span data-stu-id="87270-154">Other activity type received</span></span> | `OnUnrecognizedActivityTypeAsync` | <span data-ttu-id="87270-155">Переопределите это значение, чтобы обработать любой тип действия, не обработанный в обратном случае.</span><span class="sxs-lookup"><span data-stu-id="87270-155">Override this to handle any activity type otherwise unhandled.</span></span> |

#### <a name="teams-specific-handlers"></a><span data-ttu-id="87270-156">Обработчики, зависящие от Teams</span><span class="sxs-lookup"><span data-stu-id="87270-156">Teams-specific handlers</span></span>

<span data-ttu-id="87270-157">Далее `TeamsActivityHandler` приведен список обработчиков, приведенных выше, для включения следующих элементов:</span><span class="sxs-lookup"><span data-stu-id="87270-157">The `TeamsActivityHandler` extends the list of handlers above to include the following:</span></span>

| <span data-ttu-id="87270-158">Событие</span><span class="sxs-lookup"><span data-stu-id="87270-158">Event</span></span> | <span data-ttu-id="87270-159">Событий</span><span class="sxs-lookup"><span data-stu-id="87270-159">Handler</span></span> | <span data-ttu-id="87270-160">Описание</span><span class="sxs-lookup"><span data-stu-id="87270-160">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="87270-161">чаннелкреатед</span><span class="sxs-lookup"><span data-stu-id="87270-161">channelCreated</span></span> | `OnTeamsChannelCreatedAsync` | <span data-ttu-id="87270-162">Переопределите этот метод для обработки создаваемого канала Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-162">Override this to handle a Teams channel being created.</span></span> <span data-ttu-id="87270-163">Для получения дополнительных сведений см [канал, созданный](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) в разделе [события обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-163">For more information see [Channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="87270-164">чаннелделетед</span><span class="sxs-lookup"><span data-stu-id="87270-164">channelDeleted</span></span> | `OnTeamsChannelDeletedAsync` | <span data-ttu-id="87270-165">Переопределите это значение, чтобы обработать удаленный канал команд.</span><span class="sxs-lookup"><span data-stu-id="87270-165">Override this to handle a Teams channel being deleted.</span></span> <span data-ttu-id="87270-166">Дополнительные сведения см. [канал, удаленный](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) в [событиях обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-166">For more information see [Channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="87270-167">чаннелренамед</span><span class="sxs-lookup"><span data-stu-id="87270-167">channelRenamed</span></span> | `OnTeamsChannelRenamedAsync` | <span data-ttu-id="87270-168">Переопределите этот метод для обработки переименования канала Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-168">Override this to handle a Teams channel being renamed.</span></span> <span data-ttu-id="87270-169">Дополнительные сведения см. в разделе [Переименование канала](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) в [событиях обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-169">For more information see [Channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="87270-170">теамренамед</span><span class="sxs-lookup"><span data-stu-id="87270-170">teamRenamed</span></span> | `OnTeamsTeamRenamedAsync` | <span data-ttu-id="87270-171">`return Task.CompletedTask;`Переопределите это для обработки переименования команды Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-171">`return Task.CompletedTask;` Override this to handle a Teams Team being Renamed.</span></span> <span data-ttu-id="87270-172">Дополнительные сведения см. в разделе [Переименование](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) в [событиях обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-172">For more information see [Team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="87270-173">мемберсаддед</span><span class="sxs-lookup"><span data-stu-id="87270-173">MembersAdded</span></span> | `OnTeamsMembersAddedAsync` | <span data-ttu-id="87270-174">Вызывает `OnMembersAddedAsync` метод в `ActivityHandler`файле.</span><span class="sxs-lookup"><span data-stu-id="87270-174">Calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="87270-175">Переопределите это, чтобы участники группы выполнили присоединение к ней.</span><span class="sxs-lookup"><span data-stu-id="87270-175">Override this to handle members joining a team.</span></span> <span data-ttu-id="87270-176">Дополнительные сведения см. в статье [Добавление члена группы](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Added) в [события обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-176">For more information see [Team member added](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Added) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="87270-177">мемберсремовед</span><span class="sxs-lookup"><span data-stu-id="87270-177">MembersRemoved</span></span> | `OnTeamsMembersRemovedAsync` | <span data-ttu-id="87270-178">Вызывает `OnMembersRemovedAsync` метод в `ActivityHandler`файле.</span><span class="sxs-lookup"><span data-stu-id="87270-178">Calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="87270-179">Переопределите этот метод, чтобы обрабатывать участников, открывая команду.</span><span class="sxs-lookup"><span data-stu-id="87270-179">Override this to handle members leaving a team.</span></span> <span data-ttu-id="87270-180">Дополнительные сведения об [удалении члена группы](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Removed) в разделе [события обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-180">For more information see [Team member removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Removed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|

#### <a name="teams-invoke--activities"></a><span data-ttu-id="87270-181">Действия при вызове Teams</span><span class="sxs-lookup"><span data-stu-id="87270-181">Teams invoke  activities</span></span>

<span data-ttu-id="87270-182">Ниже приведен список всех обработчиков действий Teams, вызываемых из `OnInvokeActivityAsync` обработчика действий _Teams_ :</span><span class="sxs-lookup"><span data-stu-id="87270-182">Here is a list of all of the Teams activity handlers called from the `OnInvokeActivityAsync` _Teams_ activity handler:</span></span>

| <span data-ttu-id="87270-183">Типы Invoke</span><span class="sxs-lookup"><span data-stu-id="87270-183">Invoke types</span></span>                    | <span data-ttu-id="87270-184">Событий</span><span class="sxs-lookup"><span data-stu-id="87270-184">Handler</span></span>                              | <span data-ttu-id="87270-185">Описание</span><span class="sxs-lookup"><span data-stu-id="87270-185">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="87270-186">Кардактион. Invoke</span><span class="sxs-lookup"><span data-stu-id="87270-186">CardAction.Invoke</span></span>               | `OnTeamsCardActionInvokeAsync`       | <span data-ttu-id="87270-187">Вызов действия карточки Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-187">Teams Card Action Invoke.</span></span> |
| <span data-ttu-id="87270-188">Филеконсент/Invoke</span><span class="sxs-lookup"><span data-stu-id="87270-188">fileConsent/invoke</span></span>              | `OnTeamsFileConsentAcceptAsync`      | <span data-ttu-id="87270-189">Принятие согласия для файлов Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-189">Teams File Consent Accept.</span></span> |
| <span data-ttu-id="87270-190">Филеконсент/Invoke</span><span class="sxs-lookup"><span data-stu-id="87270-190">fileConsent/invoke</span></span>              | `OnTeamsFileConsentAsync`            | <span data-ttu-id="87270-191">Разрешение на файл Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-191">Teams File Consent.</span></span> |
| <span data-ttu-id="87270-192">Филеконсент/Invoke</span><span class="sxs-lookup"><span data-stu-id="87270-192">fileConsent/invoke</span></span>              | `OnTeamsFileConsentDeclineAsync`     | <span data-ttu-id="87270-193">Разрешение на файл Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-193">Teams File Consent.</span></span> |
| <span data-ttu-id="87270-194">Актионаблемессаже/executeAction</span><span class="sxs-lookup"><span data-stu-id="87270-194">actionableMessage/executeAction</span></span> | `OnTeamsO365ConnectorCardActionAsync` | <span data-ttu-id="87270-195">Действие соединительной карточки Teams O365.</span><span class="sxs-lookup"><span data-stu-id="87270-195">Teams O365 Connector Card Action.</span></span> |
| <span data-ttu-id="87270-196">Вход/Верифистате</span><span class="sxs-lookup"><span data-stu-id="87270-196">signin/verifyState</span></span>              | `OnTeamsSigninVerifyStateAsync`      | <span data-ttu-id="87270-197">Проверка состояния входа в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-197">Teams Sign in Verify State.</span></span> |
| <span data-ttu-id="87270-198">задача/получение</span><span class="sxs-lookup"><span data-stu-id="87270-198">task/fetch</span></span>                      | `OnTeamsTaskModuleFetchAsync`        | <span data-ttu-id="87270-199">Загрузка модуля задач Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-199">Teams Task Module Fetch.</span></span> |
| <span data-ttu-id="87270-200">задача и отправляются</span><span class="sxs-lookup"><span data-stu-id="87270-200">task/submit</span></span>                     | `OnTeamsTaskModuleSubmitAsync`       | <span data-ttu-id="87270-201">Отправляются модули задач Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-201">Teams Task Module Submit.</span></span> |

<span data-ttu-id="87270-202">Приведенные выше действия по вызываемым вопросам относятся к боты в Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-202">The invoke activities listed above are for conversational bots in Teams.</span></span> <span data-ttu-id="87270-203">Пакет SDK для Bot Framework также поддерживает вызовы, относящиеся к расширениям обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="87270-203">The Bot Framework SDK also supports invokes specific to messaging extensions.</span></span> <span data-ttu-id="87270-204">Дополнительные сведения см. в разделе [что такое расширения обмена сообщениями](https://aka.ms/azure-bot-what-are-messaging-extensions)</span><span class="sxs-lookup"><span data-stu-id="87270-204">For more information see [What are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions)</span></span>

# <a name="javascripttabjavascript"></a>[<span data-ttu-id="87270-205">JavaScript</span><span class="sxs-lookup"><span data-stu-id="87270-205">JavaScript</span></span>](#tab/javascript)

<span data-ttu-id="87270-206">Все описанные ниже обработчики действий продолжают работать так же, как и при работе с Bot-роботом, за исключением обработки *добавленных* участников и участников, *удаленных* действий, они будут отличаться в контексте команды, в которой новый участник добавляется в группу, а не в цепочку сообщений.</span><span class="sxs-lookup"><span data-stu-id="87270-206">All of the activity handlers described below will continue to work as they do with a non-Teams bot, with the exception of handling the members *added* and members *removed* activities, these will be different in the context of a team, where the new member is added to the team as opposed to a message thread.</span></span>

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="87270-207">Основные обработчики ленты</span><span class="sxs-lookup"><span data-stu-id="87270-207">Core Bot Framework handlers</span></span>

<span data-ttu-id="87270-208">Обработчики, определенные `ActivityHandler` в, описаны ниже.</span><span class="sxs-lookup"><span data-stu-id="87270-208">The handlers defined in `ActivityHandler` are outlined below.</span></span>

| <span data-ttu-id="87270-209">Событие</span><span class="sxs-lookup"><span data-stu-id="87270-209">Event</span></span> | <span data-ttu-id="87270-210">Событий</span><span class="sxs-lookup"><span data-stu-id="87270-210">Handler</span></span> | <span data-ttu-id="87270-211">Описание</span><span class="sxs-lookup"><span data-stu-id="87270-211">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="87270-212">Любой тип действия, полученный</span><span class="sxs-lookup"><span data-stu-id="87270-212">Any activity type received</span></span> | `onTurn` | <span data-ttu-id="87270-213">Вызывает один из других обработчиков в зависимости от типа полученного действия.</span><span class="sxs-lookup"><span data-stu-id="87270-213">Calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="87270-214">Получено сообщений об активности</span><span class="sxs-lookup"><span data-stu-id="87270-214">Message activity received</span></span> | `onMessage` | <span data-ttu-id="87270-215">Предоставьте функцию для этого, чтобы обработать `Message` действие.</span><span class="sxs-lookup"><span data-stu-id="87270-215">Provide a function for this to handle a `Message` activity.</span></span> |
| <span data-ttu-id="87270-216">Получено действие обновления беседы</span><span class="sxs-lookup"><span data-stu-id="87270-216">Conversation update activity received</span></span> | `onConversationUpdate` | <span data-ttu-id="87270-217">При работе `ConversationUpdate` с действием вызывается обработчик, если участники, отличные от присоединенных к началу или левой стороне объекта.</span><span class="sxs-lookup"><span data-stu-id="87270-217">On a `ConversationUpdate` activity, calls a handler if members other than the bot joined or left the conversation.</span></span> |
| <span data-ttu-id="87270-218">Участники, не являющиеся участниками Bot, присоединились к беседе</span><span class="sxs-lookup"><span data-stu-id="87270-218">Non-bot members joined the conversation</span></span> | `onMembersAdded` | <span data-ttu-id="87270-219">Предоставьте функцию для обработки членов, присоединяющихся к беседе.</span><span class="sxs-lookup"><span data-stu-id="87270-219">Provide a function for this to handle members joining a conversation.</span></span> |
| <span data-ttu-id="87270-220">Участники, не являющиеся участниками Bot, оставили беседу</span><span class="sxs-lookup"><span data-stu-id="87270-220">Non-bot members left the conversation</span></span> | `onMembersRemoved` | <span data-ttu-id="87270-221">Предоставьте функцию для этого, чтобы обрабатывать элементы, оставив беседу.</span><span class="sxs-lookup"><span data-stu-id="87270-221">Provide a function for this to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="87270-222">Получено действий с событиями</span><span class="sxs-lookup"><span data-stu-id="87270-222">Event activity received</span></span> | `onEvent` | <span data-ttu-id="87270-223">Для `Event` действия вызывает обработчик, зависящий от типа события.</span><span class="sxs-lookup"><span data-stu-id="87270-223">On an `Event` activity, calls a handler specific to the event type.</span></span> |
| <span data-ttu-id="87270-224">Получено действий с событиями Token и Response</span><span class="sxs-lookup"><span data-stu-id="87270-224">Token-response event activity received</span></span> | `onTokenResponseEvent` | <span data-ttu-id="87270-225">Предоставьте функцию для этого, чтобы обрабатывать события ответа маркеров.</span><span class="sxs-lookup"><span data-stu-id="87270-225">Provide a function for this to handle token response events.</span></span> |
| <span data-ttu-id="87270-226">Получен другой тип действия</span><span class="sxs-lookup"><span data-stu-id="87270-226">Other activity type received</span></span> | `onUnrecognizedActivityType` | <span data-ttu-id="87270-227">Предоставление функции для обработки любого типа действий в ином случае необработанным.</span><span class="sxs-lookup"><span data-stu-id="87270-227">Provide a function for this to handle any activity type otherwise unhandled.</span></span> |
| <span data-ttu-id="87270-228">Обработчики действий завершены</span><span class="sxs-lookup"><span data-stu-id="87270-228">Activity handlers have completed</span></span> | `onDialog` | <span data-ttu-id="87270-229">Предоставляет функцию для обработки любой обработки, которая должна выполняться в конце выполнения, после завершения всех обработчиков действий.</span><span class="sxs-lookup"><span data-stu-id="87270-229">Provide a function for this to handle any processing that should be done at the end of a turn, after the rest of your activity handlers have completed.</span></span> |

#### <a name="teams-specific-handlers"></a><span data-ttu-id="87270-230">Обработчики, зависящие от Teams</span><span class="sxs-lookup"><span data-stu-id="87270-230">Teams-specific handlers</span></span>

<span data-ttu-id="87270-231">Далее `TeamsActivityHandler` приведен список обработчиков, приведенных выше, для включения следующих элементов:</span><span class="sxs-lookup"><span data-stu-id="87270-231">The `TeamsActivityHandler` extends the list of handlers above to include the following:</span></span>

| <span data-ttu-id="87270-232">Событие</span><span class="sxs-lookup"><span data-stu-id="87270-232">Event</span></span> | <span data-ttu-id="87270-233">Событий</span><span class="sxs-lookup"><span data-stu-id="87270-233">Handler</span></span> | <span data-ttu-id="87270-234">Описание</span><span class="sxs-lookup"><span data-stu-id="87270-234">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="87270-235">чаннелкреатед</span><span class="sxs-lookup"><span data-stu-id="87270-235">channelCreated</span></span> | `OnTeamsChannelCreatedAsync` | <span data-ttu-id="87270-236">Переопределите этот метод для обработки создаваемого канала Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-236">Override this to handle a Teams channel being created.</span></span> <span data-ttu-id="87270-237">Для получения дополнительных сведений см [канал, созданный](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) в разделе [события обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-237">For more information see [Channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="87270-238">чаннелделетед</span><span class="sxs-lookup"><span data-stu-id="87270-238">channelDeleted</span></span> | `OnTeamsChannelDeletedAsync` | <span data-ttu-id="87270-239">Переопределите это значение, чтобы обработать удаленный канал команд.</span><span class="sxs-lookup"><span data-stu-id="87270-239">Override this to handle a Teams channel being deleted.</span></span> <span data-ttu-id="87270-240">Дополнительные сведения см. [канал, удаленный](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) в [событиях обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-240">For more information see [Channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="87270-241">чаннелренамед</span><span class="sxs-lookup"><span data-stu-id="87270-241">channelRenamed</span></span> | `OnTeamsChannelRenamedAsync` | <span data-ttu-id="87270-242">Переопределите этот метод для обработки переименования канала Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-242">Override this to handle a Teams channel being renamed.</span></span> <span data-ttu-id="87270-243">Дополнительные сведения см. в разделе [Переименование канала](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) в [событиях обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-243">For more information see [Channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="87270-244">теамренамед</span><span class="sxs-lookup"><span data-stu-id="87270-244">teamRenamed</span></span> | `OnTeamsTeamRenamedAsync` | <span data-ttu-id="87270-245">`return Task.CompletedTask;`Переопределите это для обработки переименования команды Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-245">`return Task.CompletedTask;` Override this to handle a Teams Team being Renamed.</span></span> <span data-ttu-id="87270-246">Дополнительные сведения см. в разделе [Переименование](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) в [событиях обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-246">For more information see [Team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="87270-247">мемберсаддед</span><span class="sxs-lookup"><span data-stu-id="87270-247">MembersAdded</span></span> | `OnTeamsMembersAddedAsync` | <span data-ttu-id="87270-248">Вызывает `OnMembersAddedAsync` метод в `ActivityHandler`файле.</span><span class="sxs-lookup"><span data-stu-id="87270-248">Calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="87270-249">Переопределите это, чтобы участники группы выполнили присоединение к ней.</span><span class="sxs-lookup"><span data-stu-id="87270-249">Override this to handle members joining a team.</span></span> <span data-ttu-id="87270-250">Дополнительные сведения см. в статье [Добавление члена группы](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Added) в [события обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-250">For more information see [Team member added](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Added) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="87270-251">мемберсремовед</span><span class="sxs-lookup"><span data-stu-id="87270-251">MembersRemoved</span></span> | `OnTeamsMembersRemovedAsync` | <span data-ttu-id="87270-252">Вызывает `OnMembersRemovedAsync` метод в `ActivityHandler`файле.</span><span class="sxs-lookup"><span data-stu-id="87270-252">Calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="87270-253">Переопределите этот метод, чтобы обрабатывать участников, открывая команду.</span><span class="sxs-lookup"><span data-stu-id="87270-253">Override this to handle members leaving a team.</span></span> <span data-ttu-id="87270-254">Дополнительные сведения об [удалении члена группы](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Removed) в разделе [события обновления беседы](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="87270-254">For more information see [Team member removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Removed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |

#### <a name="teams-invoke-activities"></a><span data-ttu-id="87270-255">Действия при вызове Teams</span><span class="sxs-lookup"><span data-stu-id="87270-255">Teams invoke activities</span></span>

<span data-ttu-id="87270-256">Ниже приведен список всех обработчиков действий Teams, вызываемых из `onInvokeActivity` обработчика действий _Teams_ :</span><span class="sxs-lookup"><span data-stu-id="87270-256">Here is a list of all of the Teams activity handlers called from the `onInvokeActivity` _Teams_ activity handler:</span></span>

| <span data-ttu-id="87270-257">Типы Invoke</span><span class="sxs-lookup"><span data-stu-id="87270-257">Invoke types</span></span>                    | <span data-ttu-id="87270-258">Событий</span><span class="sxs-lookup"><span data-stu-id="87270-258">Handler</span></span>                              | <span data-ttu-id="87270-259">Описание</span><span class="sxs-lookup"><span data-stu-id="87270-259">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="87270-260">Кардактион. Invoke</span><span class="sxs-lookup"><span data-stu-id="87270-260">CardAction.Invoke</span></span>               | `handleTeamsCardActionInvoke`       | <span data-ttu-id="87270-261">Вызов действия карточки Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-261">Teams Card Action Invoke.</span></span> |
| <span data-ttu-id="87270-262">Филеконсент/Invoke</span><span class="sxs-lookup"><span data-stu-id="87270-262">fileConsent/invoke</span></span>              | `handleTeamsFileConsentAccept`      | <span data-ttu-id="87270-263">Принятие согласия для файлов Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-263">Teams File Consent Accept.</span></span> |
| <span data-ttu-id="87270-264">Филеконсент/Invoke</span><span class="sxs-lookup"><span data-stu-id="87270-264">fileConsent/invoke</span></span>              | `handleTeamsFileConsent`            | <span data-ttu-id="87270-265">Разрешение на файл Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-265">Teams File Consent.</span></span> |
| <span data-ttu-id="87270-266">Филеконсент/Invoke</span><span class="sxs-lookup"><span data-stu-id="87270-266">fileConsent/invoke</span></span>              | `handleTeamsFileConsentDecline`     | <span data-ttu-id="87270-267">Разрешение на файл Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-267">Teams File Consent.</span></span> |
| <span data-ttu-id="87270-268">Актионаблемессаже/executeAction</span><span class="sxs-lookup"><span data-stu-id="87270-268">actionableMessage/executeAction</span></span> | `handleTeamsO365ConnectorCardAction` | <span data-ttu-id="87270-269">Действие соединительной карточки Teams O365.</span><span class="sxs-lookup"><span data-stu-id="87270-269">Teams O365 Connector Card Action.</span></span> |
| <span data-ttu-id="87270-270">Вход/Верифистате</span><span class="sxs-lookup"><span data-stu-id="87270-270">signin/verifyState</span></span>              | `handleTeamsSigninVerifyState`      | <span data-ttu-id="87270-271">Проверка состояния входа в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-271">Teams Sign in Verify State.</span></span> |
| <span data-ttu-id="87270-272">задача/получение</span><span class="sxs-lookup"><span data-stu-id="87270-272">task/fetch</span></span>                      | `handleTeamsTaskModuleFetch`        | <span data-ttu-id="87270-273">Загрузка модуля задач Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-273">Teams Task Module Fetch.</span></span> |
| <span data-ttu-id="87270-274">задача и отправляются</span><span class="sxs-lookup"><span data-stu-id="87270-274">task/submit</span></span>                     | `handleTeamsTaskModuleSubmit`       | <span data-ttu-id="87270-275">Отправляются модули задач Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-275">Teams Task Module Submit.</span></span> |

<span data-ttu-id="87270-276">Приведенные выше действия по вызываемым вопросам относятся к боты в Teams.</span><span class="sxs-lookup"><span data-stu-id="87270-276">The invoke activities listed above are for conversational bots in Teams.</span></span> <span data-ttu-id="87270-277">Пакет SDK для Bot Framework также поддерживает вызовы, относящиеся к расширениям обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="87270-277">The Bot Framework SDK also supports invocations specific to messaging extensions.</span></span> <span data-ttu-id="87270-278">Дополнительные сведения см. в разделе [что такое расширения обмена сообщениями](https://aka.ms/azure-bot-what-are-messaging-extensions)</span><span class="sxs-lookup"><span data-stu-id="87270-278">For more information see [What are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions)</span></span>

---
