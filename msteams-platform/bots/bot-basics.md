---
title: Основы бота
author: clearab
description: Основные принципы работы ботов в Teams.
ms.topic: conceptual
ms.author: anclear
ms.openlocfilehash: 43dd351b30fdba3435d39aca43aae0f2de00ed24
ms.sourcegitcommit: d0e71ea63af2f67eba75ba283ec46cc7cdf87d75
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/24/2020
ms.locfileid: "49731960"
---
# <a name="bot-basics"></a><span data-ttu-id="363dd-103">Основы бота</span><span class="sxs-lookup"><span data-stu-id="363dd-103">Bot basics</span></span>

<span data-ttu-id="363dd-104">Это введение, которое построено на статье о том, как [боты работают](https://aka.ms/how-bots-work) в основной документации [Bot Framework.](https://aka.ms/azure-bot-service-docs)</span><span class="sxs-lookup"><span data-stu-id="363dd-104">This is an introduction that builds on the article [How bots work](https://aka.ms/how-bots-work) in the core [Bot Framework documentation](https://aka.ms/azure-bot-service-docs).</span></span> <span data-ttu-id="363dd-105">Эта статья и другие статьи в разделе  "Понятия" могут оказаться полезными.</span><span class="sxs-lookup"><span data-stu-id="363dd-105">You may find that article, and the other articles in the *Concepts* section, useful.</span></span>

<span data-ttu-id="363dd-106">Основное различие в ботах, разработанных для Microsoft Teams, заключается в том, как обрабатываются действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-106">The primary difference in bots developed for Microsoft Teams is in how the activities are handled.</span></span> <span data-ttu-id="363dd-107">Обработок действий Microsoft Teams является на основе обработки действий Bot Framework, чтобы перенаправить все действия Teams, прежде чем разрешать обработку любых действий, не относяющихся к Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-107">The Microsoft Teams activity handler derives from the Bot Framework's activity handler to route  all Teams activities before allowing any non-Teams specific activities to be handled.</span></span>

## <a name="teams-activity-handlers"></a><span data-ttu-id="363dd-108">Обработчики действий Teams</span><span class="sxs-lookup"><span data-stu-id="363dd-108">Teams Activity handlers</span></span>

<span data-ttu-id="363dd-109">Когда бот для Microsoft Teams получает действие, он передает его обработчику *действий.*</span><span class="sxs-lookup"><span data-stu-id="363dd-109">When a bot for Microsoft Teams receives an activity, it passes it on to its *activity handlers*.</span></span> <span data-ttu-id="363dd-110">Под обложками имеется один базовый обработатель под названием обработок поворота, через который перенаправлются все действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-110">Under the covers, there's one base handler called the *turn handler*, that all activities are routed through.</span></span> <span data-ttu-id="363dd-111">*Обработок поворота* вызывает требуемого обработка действий для обработки любого типа полученного действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-111">The *turn handler* calls the required activity handler to handle whatever type of activity was received.</span></span> <span data-ttu-id="363dd-112">Бот, разработанный для Microsoft Teams, отличается тем, что он является производным от класса, производного от `TeamsActivityHandler` класса Bot `ActivityHandler` Framework.</span><span class="sxs-lookup"><span data-stu-id="363dd-112">Where a bot designed for Microsoft Teams differs is that it is derived from `TeamsActivityHandler` class that is derived from the Bot Framework's `ActivityHandler` class.</span></span>

# <a name="c"></a>[<span data-ttu-id="363dd-113">C#</span><span class="sxs-lookup"><span data-stu-id="363dd-113">C#</span></span>](#tab/csharp)

<span data-ttu-id="363dd-114">Как и любой бот, созданный с помощью Microsoft Bot Framework, если бот получает действие сообщения, обработитель поворота видит это входящие действия и отправляет его обработелю `OnMessageActivityAsync` действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-114">As with any bot created using the Microsoft Bot Framework, if the bot receives a message activity, the turn handler sees that incoming activity and sends it to the `OnMessageActivityAsync` activity handler.</span></span> <span data-ttu-id="363dd-115">В Teams эта функция остается такой же.</span><span class="sxs-lookup"><span data-stu-id="363dd-115">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="363dd-116">Если бот получает действие обновления беседы, обработитель поворота видит это входящие действия и отправляет его в `OnConversationUpdateActivityAsync` .</span><span class="sxs-lookup"><span data-stu-id="363dd-116">If the bot receives a conversation update activity, the turn handler sees that incoming activity and sends it to the `OnConversationUpdateActivityAsync`.</span></span> <span data-ttu-id="363dd-117">Обработник действий *Teams,* который сначала проверяет все конкретные события Teams и передает его в обработок действий Bot Framework, если его не найти.</span><span class="sxs-lookup"><span data-stu-id="363dd-117">*Teams* activity handler that will first check for any Teams specific events and pass it along to the Bot Framework's activity handler if none are found.</span></span>

<span data-ttu-id="363dd-118">В классе обработчиков действий Teams есть два основных обработчиков действий Teams, которые маршрутизют все действия по обновлению бесед и маршрутизизют все действия, `OnConversationUpdateActivityAsync` `OnInvokeActivityAsync` вызываемые Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-118">In the Teams activity handler class, there are two primary Teams activity handlers, `OnConversationUpdateActivityAsync` that routes all conversation update activities, and `OnInvokeActivityAsync` that routes all Teams invoke activities.</span></span>

<span data-ttu-id="363dd-119">Чтобы реализовать логику для конкретных обработчиков действий Teams, вы переопределите эти методы в боте, как показано в разделе логики [бота](#bot-logic) ниже.</span><span class="sxs-lookup"><span data-stu-id="363dd-119">To implement your logic for Teams specific activity handlers, you'll override these methods in your bot as shown in the [Bot logic](#bot-logic) section below.</span></span> <span data-ttu-id="363dd-120">Для каждого из этих обработчиков не существует базовой реализации, поэтому просто добавьте логику, которая будет вам нужна в переопределе.</span><span class="sxs-lookup"><span data-stu-id="363dd-120">For each of these handlers, there is no base implementation, so just add the logic that you want in your override.</span></span>

# <a name="javascript"></a>[<span data-ttu-id="363dd-121">JavaScript</span><span class="sxs-lookup"><span data-stu-id="363dd-121">JavaScript</span></span>](#tab/javascript)

<span data-ttu-id="363dd-122">Как и любой бот, созданный с помощью Microsoft Bot Framework, если бот получает действие сообщения, обработитель поворота видит это входящие действия и отправляет его обработелю `onMessage` действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-122">As with any bot created using the Microsoft Bot Framework, if the bot receives a message activity, the turn handler sees that incoming activity and sends it to the `onMessage` activity handler.</span></span> <span data-ttu-id="363dd-123">В Teams эта функция остается такой же.</span><span class="sxs-lookup"><span data-stu-id="363dd-123">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="363dd-124">Если бот получает действие обновления беседы, обработитель поворота видит это входящие действия и отправляет его в `dispatchConversationUpdateActivity` .</span><span class="sxs-lookup"><span data-stu-id="363dd-124">If the bot receives a conversation update activity, the turn handler sees that incoming activity and sends it to the `dispatchConversationUpdateActivity`.</span></span> <span data-ttu-id="363dd-125">Обработник действий *Teams,* который сначала проверяет все конкретные события Teams и передает его обработители действий на основе ботов, если они не найдены.</span><span class="sxs-lookup"><span data-stu-id="363dd-125">*Teams* activity handler that will first check for any Teams specific events and pass it along to the bot frameworks activity handler if none are found.</span></span>

<span data-ttu-id="363dd-126">В классе обработчиков действий Teams есть два основных обработчиков действий Teams, которые маршрутизют все действия по обновлению бесед и маршрутизют все действия, `dispatchConversationUpdateActivity` `onInvokeActivity` вызываемые Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-126">In the Teams activity handler class, there are two primary Teams activity handlers, `dispatchConversationUpdateActivity` that routes all conversation update Activities, and `onInvokeActivity` that routes all Teams invoke activities.</span></span>

<span data-ttu-id="363dd-127">Чтобы реализовать логику для конкретных обработчиков действий Teams, вы переопределите [](#bot-logic) эти методы в боте, как по видно из раздела логики бота.</span><span class="sxs-lookup"><span data-stu-id="363dd-127">To implement your logic for Teams specific activity handlers, you'll override these methods in your bot as seen in the [Bot logic](#bot-logic) section.</span></span> <span data-ttu-id="363dd-128">Для каждого из этих обработчиков определите логику бота, а затем обязательно **вызовите `next()` его в конце.**</span><span class="sxs-lookup"><span data-stu-id="363dd-128">For each of these handlers, define your bot logic, then **be sure to call `next()` at the end**.</span></span> <span data-ttu-id="363dd-129">Вызов позволяет `next()` убедиться, что выполняется следующий обработок.</span><span class="sxs-lookup"><span data-stu-id="363dd-129">By calling `next()` you ensure that the next handler runs.</span></span>

# <a name="python"></a>[<span data-ttu-id="363dd-130">Python</span><span class="sxs-lookup"><span data-stu-id="363dd-130">Python</span></span>](#tab/python)

<span data-ttu-id="363dd-131">Боты создаются с помощью Microsoft Bot Framework, если они получают сообщение, то обработник поворота получает уведомление о том, что входящие действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-131">Bots are created using the Microsoft Bot Framework, if these bot receive a message activity, then the turn handler receives a notification of that incoming activity.</span></span> <span data-ttu-id="363dd-132">Затем обработитель поворота отправляет входящие действия в `on_message_activity` обработитель действий.</span><span class="sxs-lookup"><span data-stu-id="363dd-132">The turn handler then sends the incoming activity to the `on_message_activity` activity handler.</span></span> <span data-ttu-id="363dd-133">В Teams эта функция остается такой же.</span><span class="sxs-lookup"><span data-stu-id="363dd-133">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="363dd-134">Если бот получает действие обновления беседы, обработитель поворота получает уведомление о входящих действиях и отправляет входящие действия в `on_conversation_update_activity` .</span><span class="sxs-lookup"><span data-stu-id="363dd-134">If the bot receives a conversation update activity, then the turn handler receives a notification of that incoming activity and sends the incoming activity to `on_conversation_update_activity`.</span></span> <span data-ttu-id="363dd-135">Обработник действий Teams сначала проверяет все конкретные события Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-135">The Teams activity handler will first check for any Teams specific events.</span></span> <span data-ttu-id="363dd-136">Если события не найдены, они будут переданы в обработок действий Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="363dd-136">If no events are found, it will then pass them along to the Bot Framework's activity handler.</span></span>

<span data-ttu-id="363dd-137">В классе обработчиков действий Teams есть два основных обработчиков действий Teams и `on_conversation_update_activity` `on_invoke_activity` .</span><span class="sxs-lookup"><span data-stu-id="363dd-137">In the Teams activity handler class, there are two primary Teams activity handlers, `on_conversation_update_activity` and `on_invoke_activity`.</span></span> <span data-ttu-id="363dd-138">`on_conversation_update_activity` Маршруты всех действий по обновлению бесед `on_invoke_activity` и маршруты всех действий, вызываемой Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-138">`on_conversation_update_activity` routes all conversation update activities and `on_invoke_activity` routes all Teams invoke activities.</span></span>

<span data-ttu-id="363dd-139">Чтобы реализовать логику для конкретных обработчиков действий Teams, необходимо переопредить эти методы в боте, как показано в разделе [логики](#bot-logic) бота.</span><span class="sxs-lookup"><span data-stu-id="363dd-139">To implement your logic for Teams specific activity handlers, you need to override these methods in your bot as shown in the [Bot logic](#bot-logic) section.</span></span> <span data-ttu-id="363dd-140">Базовая реализация этих обработчиков не существует, поэтому необходимо добавить логику, необходимую для переопределения.</span><span class="sxs-lookup"><span data-stu-id="363dd-140">There is no base implementation for these handlers, therefore, you need to add the logic that you want in your override.</span></span>

---

## <a name="bot-logic"></a><span data-ttu-id="363dd-141">Логика бота</span><span class="sxs-lookup"><span data-stu-id="363dd-141">Bot logic</span></span>

<span data-ttu-id="363dd-142">Логика бота обрабатывает входящие действия из одного или более каналов ботов и создает исходящую активность в ответ.</span><span class="sxs-lookup"><span data-stu-id="363dd-142">The bot logic processes incoming activities from one or more of your bot channels and generates outgoing activities in response.</span></span>  <span data-ttu-id="363dd-143">Это по-прежнему относится к ботам, производным от класса обработвода действий Teams, который сначала проверяет действия Teams, а затем передает все остальные действия обработиму действий в рамках ботов.</span><span class="sxs-lookup"><span data-stu-id="363dd-143">This is still true of bots derived from the Teams activity handler class, which first checks for Teams activities, then passes all other activities to the bot frameworks activity handler.</span></span>

# <a name="c"></a>[<span data-ttu-id="363dd-144">C#</span><span class="sxs-lookup"><span data-stu-id="363dd-144">C#</span></span>](#tab/csharp)

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="363dd-145">Обработчики Core Bot Framework</span><span class="sxs-lookup"><span data-stu-id="363dd-145">Core Bot Framework handlers</span></span>

<span data-ttu-id="363dd-146">Все описанные ниже обработчики действий продолжат работать так же, как и с  ботом,  не относястого к Teams, за исключением обработки добавленных членов и удалений участников, они будут разными в контексте команды, где новый участник добавляется в команду, а не поток сообщений.</span><span class="sxs-lookup"><span data-stu-id="363dd-146">All of the activity handlers described below will continue to work as they do with a non-Teams bot, with the exception of handling members *added* and members *removed* activities, these will be different in the context of a team, where the new member is added to the team as opposed to a message thread.</span></span>

<span data-ttu-id="363dd-147">Обработчики, определенные в `ActivityHandler` них, описаны ниже.</span><span class="sxs-lookup"><span data-stu-id="363dd-147">The handlers defined in `ActivityHandler` are outlined below:</span></span>

| <span data-ttu-id="363dd-148">Событие</span><span class="sxs-lookup"><span data-stu-id="363dd-148">Event</span></span> | <span data-ttu-id="363dd-149">Обработник</span><span class="sxs-lookup"><span data-stu-id="363dd-149">Handler</span></span> | <span data-ttu-id="363dd-150">Описание</span><span class="sxs-lookup"><span data-stu-id="363dd-150">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="363dd-151">Любой полученный тип действия</span><span class="sxs-lookup"><span data-stu-id="363dd-151">Any activity type received</span></span> | `OnTurnAsync` | <span data-ttu-id="363dd-152">Вызывает один из других обработчиков в зависимости от типа полученного действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-152">Calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="363dd-153">Полученная активность сообщения</span><span class="sxs-lookup"><span data-stu-id="363dd-153">Message activity received</span></span> | `OnMessageActivityAsync` | <span data-ttu-id="363dd-154">Переопределять это для обработки `Message` действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-154">Override this to handle a `Message` activity.</span></span> |
| <span data-ttu-id="363dd-155">Получена информация об обновлении беседы</span><span class="sxs-lookup"><span data-stu-id="363dd-155">Conversation update activity received</span></span> | `OnConversationUpdateActivityAsync` | <span data-ttu-id="363dd-156">В действии вызывается обработок, если участники, кроме бота, присоединились к беседе `ConversationUpdate` или покидали ее.</span><span class="sxs-lookup"><span data-stu-id="363dd-156">On a `ConversationUpdate` activity, calls a handler if members other than the bot joined or left the conversation.</span></span> |
| <span data-ttu-id="363dd-157">К беседе присоединились не боты</span><span class="sxs-lookup"><span data-stu-id="363dd-157">Non-bot members joined the conversation</span></span> | `OnMembersAddedAsync` | <span data-ttu-id="363dd-158">Переопределять это, чтобы обработать участников, присоединявшихся к беседе.</span><span class="sxs-lookup"><span data-stu-id="363dd-158">Override this to handle members joining a conversation.</span></span> |
| <span data-ttu-id="363dd-159">Участники, не относякие к ботам, покинули беседу</span><span class="sxs-lookup"><span data-stu-id="363dd-159">Non-bot members left the conversation</span></span> | `OnMembersRemovedAsync` | <span data-ttu-id="363dd-160">Переопределять это, чтобы обрабатывать участников, покидая беседу.</span><span class="sxs-lookup"><span data-stu-id="363dd-160">Override this to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="363dd-161">Полученная активность события</span><span class="sxs-lookup"><span data-stu-id="363dd-161">Event activity received</span></span> | `OnEventActivityAsync` | <span data-ttu-id="363dd-162">В `Event` действии вызывается обработок, специфический для типа события.</span><span class="sxs-lookup"><span data-stu-id="363dd-162">On an `Event` activity, calls a handler specific to the event type.</span></span> |
| <span data-ttu-id="363dd-163">Полученное действие события токена</span><span class="sxs-lookup"><span data-stu-id="363dd-163">Token-response event activity received</span></span> | `OnTokenResponseEventAsync` | <span data-ttu-id="363dd-164">Переопределять это для обработки событий отклика маркера.</span><span class="sxs-lookup"><span data-stu-id="363dd-164">Override this to handle token response events.</span></span> |
| <span data-ttu-id="363dd-165">Получена активность события, не относяка к маркеру</span><span class="sxs-lookup"><span data-stu-id="363dd-165">Non-token-response event activity received</span></span> | `OnEventAsync` | <span data-ttu-id="363dd-166">Переопределять это для обработки событий других типов.</span><span class="sxs-lookup"><span data-stu-id="363dd-166">Override this to handle other types of events.</span></span> |
| <span data-ttu-id="363dd-167">Получен другой тип действия</span><span class="sxs-lookup"><span data-stu-id="363dd-167">Other activity type received</span></span> | `OnUnrecognizedActivityTypeAsync` | <span data-ttu-id="363dd-168">Переопределять это действие для обработки любых типов действий в противном случае без обработки.</span><span class="sxs-lookup"><span data-stu-id="363dd-168">Override this to handle any activity type otherwise unhandled.</span></span> |

#### <a name="teams-specific-handlers"></a><span data-ttu-id="363dd-169">Обработчики для Teams</span><span class="sxs-lookup"><span data-stu-id="363dd-169">Teams-specific handlers</span></span>

<span data-ttu-id="363dd-170">Список обработчиков выше расширяется, включив в него `TeamsActivityHandler` следующие:</span><span class="sxs-lookup"><span data-stu-id="363dd-170">The `TeamsActivityHandler` extends the list of handlers above to include the following:</span></span>

| <span data-ttu-id="363dd-171">Событие</span><span class="sxs-lookup"><span data-stu-id="363dd-171">Event</span></span> | <span data-ttu-id="363dd-172">Обработник</span><span class="sxs-lookup"><span data-stu-id="363dd-172">Handler</span></span> | <span data-ttu-id="363dd-173">Описание</span><span class="sxs-lookup"><span data-stu-id="363dd-173">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="363dd-174">channelCreated</span><span class="sxs-lookup"><span data-stu-id="363dd-174">channelCreated</span></span> | `OnTeamsChannelCreatedAsync` | <span data-ttu-id="363dd-175">Переопределять это для обработки создания канала Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-175">Override this to handle a Teams channel being created.</span></span> <span data-ttu-id="363dd-176">Дополнительные сведения см. в [канале, созданном](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-176">For more information see [Channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="363dd-177">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="363dd-177">channelDeleted</span></span> | `OnTeamsChannelDeletedAsync` | <span data-ttu-id="363dd-178">Переопределять это для обработки удаления канала Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-178">Override this to handle a Teams channel being deleted.</span></span> <span data-ttu-id="363dd-179">Дополнительные сведения см. в [канале, удаленном](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-179">For more information see [Channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="363dd-180">channelRenamed</span><span class="sxs-lookup"><span data-stu-id="363dd-180">channelRenamed</span></span> | `OnTeamsChannelRenamedAsync` | <span data-ttu-id="363dd-181">Переопределять это для обработки переименования канала Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-181">Override this to handle a Teams channel being renamed.</span></span> <span data-ttu-id="363dd-182">Дополнительные сведения см. в [канале, переименованном](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-182">For more information see [Channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="363dd-183">teamRenamed</span><span class="sxs-lookup"><span data-stu-id="363dd-183">teamRenamed</span></span> | `OnTeamsTeamRenamedAsync` | <span data-ttu-id="363dd-184">`return Task.CompletedTask;` Переопределять это для обработки переименования команды Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-184">`return Task.CompletedTask;` Override this to handle a Teams Team being Renamed.</span></span> <span data-ttu-id="363dd-185">Дополнительные сведения см. в [переименованной команде](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-185">For more information see [Team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="363dd-186">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="363dd-186">MembersAdded</span></span> | `OnTeamsMembersAddedAsync` | <span data-ttu-id="363dd-187">Вызывает метод `OnMembersAddedAsync` в `ActivityHandler` .</span><span class="sxs-lookup"><span data-stu-id="363dd-187">Calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="363dd-188">Переопределять это, чтобы обрабатывать участников, присоединявшихся к команде.</span><span class="sxs-lookup"><span data-stu-id="363dd-188">Override this to handle members joining a team.</span></span> <span data-ttu-id="363dd-189">Дополнительные сведения [см. в сведениях, добавленных участниками команды](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-189">For more information see [Team members added](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="363dd-190">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="363dd-190">MembersRemoved</span></span> | `OnTeamsMembersRemovedAsync` | <span data-ttu-id="363dd-191">Вызывает метод `OnMembersRemovedAsync` в `ActivityHandler` .</span><span class="sxs-lookup"><span data-stu-id="363dd-191">Calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="363dd-192">Переопределять это, чтобы обрабатывать участников, покидая команду.</span><span class="sxs-lookup"><span data-stu-id="363dd-192">Override this to handle members leaving a team.</span></span> <span data-ttu-id="363dd-193">Дополнительные сведения [см. в сведениях, которые участники команды удалили](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-193">For more information see [Team members removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|

#### <a name="teams-invoke-activities"></a><span data-ttu-id="363dd-194">Вызов действий в Teams</span><span class="sxs-lookup"><span data-stu-id="363dd-194">Teams invoke activities</span></span>

<span data-ttu-id="363dd-195">Вот список всех обработчиков действий Teams, которые вызваны из обработчиков `OnInvokeActivityAsync` действий _Teams:_</span><span class="sxs-lookup"><span data-stu-id="363dd-195">Here is a list of all of the Teams activity handlers called from the `OnInvokeActivityAsync` _Teams_ activity handler:</span></span>

| <span data-ttu-id="363dd-196">Типы вызовов</span><span class="sxs-lookup"><span data-stu-id="363dd-196">Invoke types</span></span>                    | <span data-ttu-id="363dd-197">Обработник</span><span class="sxs-lookup"><span data-stu-id="363dd-197">Handler</span></span>                              | <span data-ttu-id="363dd-198">Описание</span><span class="sxs-lookup"><span data-stu-id="363dd-198">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="363dd-199">CardAction.Invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-199">CardAction.Invoke</span></span>               | `OnTeamsCardActionInvokeAsync`       | <span data-ttu-id="363dd-200">Вызов действия карточки Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-200">Teams Card Action Invoke.</span></span> |
| <span data-ttu-id="363dd-201">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-201">fileConsent/invoke</span></span>              | `OnTeamsFileConsentAcceptAsync`      | <span data-ttu-id="363dd-202">Teams File Consent Accept.</span><span class="sxs-lookup"><span data-stu-id="363dd-202">Teams File Consent Accept.</span></span> |
| <span data-ttu-id="363dd-203">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-203">fileConsent/invoke</span></span>              | `OnTeamsFileConsentAsync`            | <span data-ttu-id="363dd-204">Согласие на файл Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-204">Teams File Consent.</span></span> |
| <span data-ttu-id="363dd-205">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-205">fileConsent/invoke</span></span>              | `OnTeamsFileConsentDeclineAsync`     | <span data-ttu-id="363dd-206">Согласие на файл Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-206">Teams File Consent.</span></span> |
| <span data-ttu-id="363dd-207">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="363dd-207">actionableMessage/executeAction</span></span> | `OnTeamsO365ConnectorCardActionAsync` | <span data-ttu-id="363dd-208">Действие карточки соединитела Teams O365.</span><span class="sxs-lookup"><span data-stu-id="363dd-208">Teams O365 connector Card Action.</span></span> |
| <span data-ttu-id="363dd-209">signin/verifyState</span><span class="sxs-lookup"><span data-stu-id="363dd-209">signin/verifyState</span></span>              | `OnTeamsSigninVerifyStateAsync`      | <span data-ttu-id="363dd-210">Teams Sign in Verify State.</span><span class="sxs-lookup"><span data-stu-id="363dd-210">Teams Sign in Verify State.</span></span> |
| <span data-ttu-id="363dd-211">task/fetch</span><span class="sxs-lookup"><span data-stu-id="363dd-211">task/fetch</span></span>                      | `OnTeamsTaskModuleFetchAsync`        | <span data-ttu-id="363dd-212">Извлечение модуля задач Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-212">Teams Task Module Fetch.</span></span> |
| <span data-ttu-id="363dd-213">task/submit</span><span class="sxs-lookup"><span data-stu-id="363dd-213">task/submit</span></span>                     | `OnTeamsTaskModuleSubmitAsync`       | <span data-ttu-id="363dd-214">Отправка модуля задач Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-214">Teams Task Module Submit.</span></span> |

<span data-ttu-id="363dd-215">Действия по вызову, перечисленные выше, для ботов бесед в Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-215">The invoke activities listed above are for conversational bots in Teams.</span></span> <span data-ttu-id="363dd-216">SDK Bot Framework также поддерживает вызовы, специфичная для расширений обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="363dd-216">The Bot Framework SDK also supports invokes specific to messaging extensions.</span></span> <span data-ttu-id="363dd-217">Дополнительные сведения см. [в дополнительных сведениях о расширениях обмена сообщениями](https://aka.ms/azure-bot-what-are-messaging-extensions)</span><span class="sxs-lookup"><span data-stu-id="363dd-217">For more information see [What are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions)</span></span>

# <a name="javascript"></a>[<span data-ttu-id="363dd-218">JavaScript</span><span class="sxs-lookup"><span data-stu-id="363dd-218">JavaScript</span></span>](#tab/javascript)

<span data-ttu-id="363dd-219">Все описанные ниже обработчики действий продолжат работать так же, как и боты,  не  в том числе Teams, за исключением обработки действий, добавленных и удалимых участников, в контексте команды, в которой новый участник добавляется в команду, а не в потоке сообщений.</span><span class="sxs-lookup"><span data-stu-id="363dd-219">All of the activity handlers described below will continue to work as they do with a non-Teams bot, with the exception of handling the members *added* and members *removed* activities, these will be different in the context of a team, where the new member is added to the team as opposed to a message thread.</span></span>

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="363dd-220">Обработчики Core Bot Framework</span><span class="sxs-lookup"><span data-stu-id="363dd-220">Core Bot Framework handlers</span></span>

<span data-ttu-id="363dd-221">Обработчики, определенные в `ActivityHandler` них, описаны ниже.</span><span class="sxs-lookup"><span data-stu-id="363dd-221">The handlers defined in `ActivityHandler` are outlined below.</span></span>

| <span data-ttu-id="363dd-222">Событие</span><span class="sxs-lookup"><span data-stu-id="363dd-222">Event</span></span> | <span data-ttu-id="363dd-223">Обработник</span><span class="sxs-lookup"><span data-stu-id="363dd-223">Handler</span></span> | <span data-ttu-id="363dd-224">Описание</span><span class="sxs-lookup"><span data-stu-id="363dd-224">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="363dd-225">Любой полученный тип действия</span><span class="sxs-lookup"><span data-stu-id="363dd-225">Any activity type received</span></span> | `onTurn` | <span data-ttu-id="363dd-226">Вызывает один из других обработчиков в зависимости от типа полученного действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-226">Calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="363dd-227">Полученная активность сообщения</span><span class="sxs-lookup"><span data-stu-id="363dd-227">Message activity received</span></span> | `onMessage` | <span data-ttu-id="363dd-228">Предоставление функции для обработки `Message` действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-228">Provide a function for this to handle a `Message` activity.</span></span> |
| <span data-ttu-id="363dd-229">Получена информация об обновлении беседы</span><span class="sxs-lookup"><span data-stu-id="363dd-229">Conversation update activity received</span></span> | `onConversationUpdate` | <span data-ttu-id="363dd-230">В действии вызывается обработок, если участники, кроме бота, присоединились к беседе `ConversationUpdate` или покидали ее.</span><span class="sxs-lookup"><span data-stu-id="363dd-230">On a `ConversationUpdate` activity, calls a handler if members other than the bot joined or left the conversation.</span></span> |
| <span data-ttu-id="363dd-231">К беседе присоединились не боты</span><span class="sxs-lookup"><span data-stu-id="363dd-231">Non-bot members joined the conversation</span></span> | `onMembersAdded` | <span data-ttu-id="363dd-232">Предоставление функции для этого для обработки участников, присоединявшихся к беседе.</span><span class="sxs-lookup"><span data-stu-id="363dd-232">Provide a function for this to handle members joining a conversation.</span></span> |
| <span data-ttu-id="363dd-233">Участники, не относякие к ботам, покинули беседу</span><span class="sxs-lookup"><span data-stu-id="363dd-233">Non-bot members left the conversation</span></span> | `onMembersRemoved` | <span data-ttu-id="363dd-234">Предоставление функции для этого для обработки участников, покидая беседу.</span><span class="sxs-lookup"><span data-stu-id="363dd-234">Provide a function for this to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="363dd-235">Полученная активность события</span><span class="sxs-lookup"><span data-stu-id="363dd-235">Event activity received</span></span> | `onEvent` | <span data-ttu-id="363dd-236">В `Event` действии вызывается обработок, специфический для типа события.</span><span class="sxs-lookup"><span data-stu-id="363dd-236">On an `Event` activity, calls a handler specific to the event type.</span></span> |
| <span data-ttu-id="363dd-237">Полученное действие события токена</span><span class="sxs-lookup"><span data-stu-id="363dd-237">Token-response event activity received</span></span> | `onTokenResponseEvent` | <span data-ttu-id="363dd-238">Предоставление функции для обработки событий отклика маркера.</span><span class="sxs-lookup"><span data-stu-id="363dd-238">Provide a function for this to handle token response events.</span></span> |
| <span data-ttu-id="363dd-239">Получен другой тип действия</span><span class="sxs-lookup"><span data-stu-id="363dd-239">Other activity type received</span></span> | `onUnrecognizedActivityType` | <span data-ttu-id="363dd-240">Предодать функцию для обработки любого типа действия в противном случае без обработки.</span><span class="sxs-lookup"><span data-stu-id="363dd-240">Provide a function for this to handle any activity type otherwise unhandled.</span></span> |
| <span data-ttu-id="363dd-241">Обработчики действий завершены</span><span class="sxs-lookup"><span data-stu-id="363dd-241">Activity handlers have completed</span></span> | `onDialog` | <span data-ttu-id="363dd-242">Предо включите функцию для обработки любой обработки, которая должна быть выполнена в конце поворота после завершения остальных обработчиков действий.</span><span class="sxs-lookup"><span data-stu-id="363dd-242">Provide a function for this to handle any processing that should be done at the end of a turn after the rest of your activity handlers have completed.</span></span> |

#### <a name="teams-specific-handlers"></a><span data-ttu-id="363dd-243">Обработчики для Teams</span><span class="sxs-lookup"><span data-stu-id="363dd-243">Teams-specific handlers</span></span>

<span data-ttu-id="363dd-244">Список обработчиков в разделе "Обработчики Core Bot Framework" расширяется, включив в него `TeamsActivityHandler` следующие:</span><span class="sxs-lookup"><span data-stu-id="363dd-244">The `TeamsActivityHandler` extends the list of handlers in the Core Bot Framework handlers section to include the following:</span></span>

| <span data-ttu-id="363dd-245">Событие</span><span class="sxs-lookup"><span data-stu-id="363dd-245">Event</span></span> | <span data-ttu-id="363dd-246">Обработник</span><span class="sxs-lookup"><span data-stu-id="363dd-246">Handler</span></span> | <span data-ttu-id="363dd-247">Описание</span><span class="sxs-lookup"><span data-stu-id="363dd-247">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="363dd-248">channelCreated</span><span class="sxs-lookup"><span data-stu-id="363dd-248">channelCreated</span></span> | `OnTeamsChannelCreatedAsync` | <span data-ttu-id="363dd-249">Переопределять это для обработки создания канала Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-249">Override this to handle a Teams channel being created.</span></span> <span data-ttu-id="363dd-250">Дополнительные сведения см. в [канале, созданном](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-250">For more information see [Channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="363dd-251">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="363dd-251">channelDeleted</span></span> | `OnTeamsChannelDeletedAsync` | <span data-ttu-id="363dd-252">Переопределять это для обработки удаления канала Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-252">Override this to handle a Teams channel being deleted.</span></span> <span data-ttu-id="363dd-253">Дополнительные сведения см. в [канале, удаленном](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-253">For more information see [Channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="363dd-254">channelRenamed</span><span class="sxs-lookup"><span data-stu-id="363dd-254">channelRenamed</span></span> | `OnTeamsChannelRenamedAsync` | <span data-ttu-id="363dd-255">Переопределять это для обработки переименования канала Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-255">Override this to handle a Teams channel being renamed.</span></span> <span data-ttu-id="363dd-256">Дополнительные сведения см. в [канале, переименованном](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-256">For more information see [Channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="363dd-257">teamRenamed</span><span class="sxs-lookup"><span data-stu-id="363dd-257">teamRenamed</span></span> | `OnTeamsTeamRenamedAsync` | <span data-ttu-id="363dd-258">`return Task.CompletedTask;` Переопределять это для обработки переименования команды Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-258">`return Task.CompletedTask;` Override this to handle a Teams team being renamed.</span></span> <span data-ttu-id="363dd-259">Дополнительные сведения см. в [переименованной команде](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-259">For more information see [Team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="363dd-260">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="363dd-260">MembersAdded</span></span> | `OnTeamsMembersAddedAsync` | <span data-ttu-id="363dd-261">Вызывает метод `OnMembersAddedAsync` в `ActivityHandler` .</span><span class="sxs-lookup"><span data-stu-id="363dd-261">Calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="363dd-262">Переопределять это, чтобы обрабатывать участников, присоединявшихся к команде.</span><span class="sxs-lookup"><span data-stu-id="363dd-262">Override this to handle members joining a team.</span></span> <span data-ttu-id="363dd-263">Дополнительные сведения [см. в сведениях, добавленных участниками команды](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-263">For more information see [Team members added](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="363dd-264">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="363dd-264">MembersRemoved</span></span> | `OnTeamsMembersRemovedAsync` | <span data-ttu-id="363dd-265">Вызывает метод `OnMembersRemovedAsync` в `ActivityHandler` .</span><span class="sxs-lookup"><span data-stu-id="363dd-265">Calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="363dd-266">Переопределять это, чтобы обрабатывать участников, покидая команду.</span><span class="sxs-lookup"><span data-stu-id="363dd-266">Override this to handle members leaving a team.</span></span> <span data-ttu-id="363dd-267">Дополнительные сведения [см. в сведениях, которые участники команды удалили](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-267">For more information see [Team members removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |

#### <a name="teams-invoke-activities"></a><span data-ttu-id="363dd-268">Вызов действий в Teams</span><span class="sxs-lookup"><span data-stu-id="363dd-268">Teams invoke activities</span></span>

<span data-ttu-id="363dd-269">Вот список всех обработчиков действий Teams, которые вызваны из обработчиков `onInvokeActivity` действий Teams:</span><span class="sxs-lookup"><span data-stu-id="363dd-269">Here is a list of all of the Teams activity handlers called from the `onInvokeActivity` Teams activity handler:</span></span>

| <span data-ttu-id="363dd-270">Типы вызовов</span><span class="sxs-lookup"><span data-stu-id="363dd-270">Invoke types</span></span>                    | <span data-ttu-id="363dd-271">Обработник</span><span class="sxs-lookup"><span data-stu-id="363dd-271">Handler</span></span>                              | <span data-ttu-id="363dd-272">Описание</span><span class="sxs-lookup"><span data-stu-id="363dd-272">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="363dd-273">CardAction.Invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-273">CardAction.Invoke</span></span>               | `handleTeamsCardActionInvoke`       | <span data-ttu-id="363dd-274">Вызов действия карточки Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-274">Teams card action invoke.</span></span> |
| <span data-ttu-id="363dd-275">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-275">fileConsent/invoke</span></span>              | `handleTeamsFileConsentAccept`      | <span data-ttu-id="363dd-276">Согласие на файл Teams принимается.</span><span class="sxs-lookup"><span data-stu-id="363dd-276">Teams file consent accept.</span></span> |
| <span data-ttu-id="363dd-277">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-277">fileConsent/invoke</span></span>              | `handleTeamsFileConsent`            | <span data-ttu-id="363dd-278">Согласие на файл Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-278">Teams file consent.</span></span> |
| <span data-ttu-id="363dd-279">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-279">fileConsent/invoke</span></span>              | `handleTeamsFileConsentDecline`     | <span data-ttu-id="363dd-280">Согласие на файл Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-280">Teams file consent.</span></span> |
| <span data-ttu-id="363dd-281">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="363dd-281">actionableMessage/executeAction</span></span> | `handleTeamsO365ConnectorCardAction` | <span data-ttu-id="363dd-282">Действие карточки соединители Teams O365.</span><span class="sxs-lookup"><span data-stu-id="363dd-282">Teams O365 connector card action.</span></span> |
| <span data-ttu-id="363dd-283">signin/verifyState</span><span class="sxs-lookup"><span data-stu-id="363dd-283">signin/verifyState</span></span>              | `handleTeamsSigninVerifyState`      | <span data-ttu-id="363dd-284">Teams sign in verify state.</span><span class="sxs-lookup"><span data-stu-id="363dd-284">Teams sign in verify state.</span></span> |
| <span data-ttu-id="363dd-285">task/fetch</span><span class="sxs-lookup"><span data-stu-id="363dd-285">task/fetch</span></span>                      | `handleTeamsTaskModuleFetch`        | <span data-ttu-id="363dd-286">Извлечение модуля задач Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-286">Teams task module fetch.</span></span> |
| <span data-ttu-id="363dd-287">task/submit</span><span class="sxs-lookup"><span data-stu-id="363dd-287">task/submit</span></span>                     | `handleTeamsTaskModuleSubmit`       | <span data-ttu-id="363dd-288">Отправка модуля задач Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-288">Teams task module submit.</span></span> |

<span data-ttu-id="363dd-289">Действия по вызову, перечисленные в разделе "Действия по вызову Teams", посвящены ботам в беседах в Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-289">The invoke activities listed in the Teams invoke activities section are for conversational bots in Teams.</span></span> <span data-ttu-id="363dd-290">SDK Bot Framework также поддерживает вызов действий, характерных для расширений обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="363dd-290">The Bot Framework SDK also supports invoke activities specific to messaging extensions.</span></span> <span data-ttu-id="363dd-291">Дополнительные сведения см. в дополнительных сведениях [о расширениях обмена сообщениями.](https://aka.ms/azure-bot-what-are-messaging-extensions)</span><span class="sxs-lookup"><span data-stu-id="363dd-291">For more information, see [What are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions).</span></span>

# <a name="python"></a>[<span data-ttu-id="363dd-292">Python</span><span class="sxs-lookup"><span data-stu-id="363dd-292">Python</span></span>](#tab/python)

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="363dd-293">Обработчики Core Bot Framework</span><span class="sxs-lookup"><span data-stu-id="363dd-293">Core Bot Framework handlers</span></span>

>[!NOTE]
> <span data-ttu-id="363dd-294">За исключением действий добавленных и удаленных участников, все обработчики действий, описанные в этом разделе, продолжают работать так же, как и боты, не в том числе Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-294">Except for the added and removed members' activities, all of the activity handlers described in this section continue to work as they do with a non-Teams bot.</span></span>

<span data-ttu-id="363dd-295">Обработчики действий отличаются в контексте команды, в которой новый участник добавляется в команду вместо потока сообщений.</span><span class="sxs-lookup"><span data-stu-id="363dd-295">Activity handlers are different in context of a team, where the new member is added to the team instead of a message thread.</span></span>

<span data-ttu-id="363dd-296">В список обработчиков, определенных в списке, `ActivityHandler` входят следующие:</span><span class="sxs-lookup"><span data-stu-id="363dd-296">The list of handlers defined in `ActivityHandler` include the following:</span></span>

| <span data-ttu-id="363dd-297">Событие</span><span class="sxs-lookup"><span data-stu-id="363dd-297">Event</span></span> | <span data-ttu-id="363dd-298">Обработник</span><span class="sxs-lookup"><span data-stu-id="363dd-298">Handler</span></span> | <span data-ttu-id="363dd-299">Описание</span><span class="sxs-lookup"><span data-stu-id="363dd-299">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="363dd-300">Любой полученный тип действия</span><span class="sxs-lookup"><span data-stu-id="363dd-300">Any activity type received</span></span> | `on_turn` | <span data-ttu-id="363dd-301">Вызывает один из других обработчиков в зависимости от типа полученного действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-301">Calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="363dd-302">Полученная активность сообщения</span><span class="sxs-lookup"><span data-stu-id="363dd-302">Message activity received</span></span> | `on_message_activity` | <span data-ttu-id="363dd-303">Переопределяет этот процесс для `Message` обработки действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-303">Overrides this to handle a `Message` activity.</span></span> |
| <span data-ttu-id="363dd-304">Получена информация об обновлении беседы</span><span class="sxs-lookup"><span data-stu-id="363dd-304">Conversation update activity received</span></span> | `on_conversation_update_activity` | <span data-ttu-id="363dd-305">Вызывает обработ который, если участники, кроме бота, присоединяются к беседе или покидают ее.</span><span class="sxs-lookup"><span data-stu-id="363dd-305">Calls a handler if members other than the bot join or leave the conversation.</span></span> |
| <span data-ttu-id="363dd-306">К беседе присоединились не боты</span><span class="sxs-lookup"><span data-stu-id="363dd-306">Non-bot members joined the conversation</span></span> | `on_members_added_activity` | <span data-ttu-id="363dd-307">Переопределяется для обработки присоединения участников к беседе.</span><span class="sxs-lookup"><span data-stu-id="363dd-307">Overrides this to handle members joining a conversation.</span></span> |
| <span data-ttu-id="363dd-308">Участники, не относякие к ботам, покинули беседу</span><span class="sxs-lookup"><span data-stu-id="363dd-308">Non-bot members left the conversation</span></span> | `on_members_removed_activity` | <span data-ttu-id="363dd-309">Переопределяется для обработки участников, покидая беседу.</span><span class="sxs-lookup"><span data-stu-id="363dd-309">Overrides this to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="363dd-310">Полученная активность события</span><span class="sxs-lookup"><span data-stu-id="363dd-310">Event activity received</span></span> | `on_event_activity` | <span data-ttu-id="363dd-311">Вызывает обработок, относякся к типу события.</span><span class="sxs-lookup"><span data-stu-id="363dd-311">Calls a handler specific to the type of event.</span></span> |
| <span data-ttu-id="363dd-312">Полученное действие события токена</span><span class="sxs-lookup"><span data-stu-id="363dd-312">Token-response event activity received</span></span> | `on_token_response_event` | <span data-ttu-id="363dd-313">Переопределяет эту возможность для обработки событий отклика маркера.</span><span class="sxs-lookup"><span data-stu-id="363dd-313">Overrides this to handle token response events.</span></span> |
| <span data-ttu-id="363dd-314">Получена активность события, не относяка к маркеру</span><span class="sxs-lookup"><span data-stu-id="363dd-314">Non-token-response event activity received</span></span> | `on_event` | <span data-ttu-id="363dd-315">Переопределяет эту возможность для обработки событий других типов.</span><span class="sxs-lookup"><span data-stu-id="363dd-315">Overrides this to handle other types of events.</span></span> |
| <span data-ttu-id="363dd-316">Другие типы полученных действий</span><span class="sxs-lookup"><span data-stu-id="363dd-316">Other activity types received</span></span> | `on_unrecognized_activity_type` | <span data-ttu-id="363dd-317">Переопределяется для обработки любых типов не обрабатываемого действия.</span><span class="sxs-lookup"><span data-stu-id="363dd-317">Overrides this to handle any type of activity that is not handled.</span></span> |

#### <a name="teams-specific-handlers"></a><span data-ttu-id="363dd-318">Обработчики для Teams</span><span class="sxs-lookup"><span data-stu-id="363dd-318">Teams-specific handlers</span></span>

<span data-ttu-id="363dd-319">Список обработчиков из раздела Core Bot Framework расширяется, включив в него `TeamsActivityHandler` следующие:</span><span class="sxs-lookup"><span data-stu-id="363dd-319">The `TeamsActivityHandler` extends the list of handlers from the Core Bot Framework handlers section to include the following:</span></span>

| <span data-ttu-id="363dd-320">Событие</span><span class="sxs-lookup"><span data-stu-id="363dd-320">Event</span></span> | <span data-ttu-id="363dd-321">Обработник</span><span class="sxs-lookup"><span data-stu-id="363dd-321">Handler</span></span> | <span data-ttu-id="363dd-322">Описание</span><span class="sxs-lookup"><span data-stu-id="363dd-322">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="363dd-323">channelCreated</span><span class="sxs-lookup"><span data-stu-id="363dd-323">channelCreated</span></span> | `on_teams_channel_created` | <span data-ttu-id="363dd-324">Переопределяется для обработки создания канала Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-324">Overrides this to handle a Teams channel being created.</span></span> <span data-ttu-id="363dd-325">Дополнительные сведения см. в [канале, созданном](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-325">For more information, see [Channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="363dd-326">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="363dd-326">channelDeleted</span></span> | `on_teams_channel_deleted` | <span data-ttu-id="363dd-327">Переопределяется для обработки удаления канала Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-327">Overrides this to handle a Teams channel being deleted.</span></span> <span data-ttu-id="363dd-328">Дополнительные сведения см. в [канале, удаленном](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-328">For more information, see [Channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="363dd-329">channelRenamed</span><span class="sxs-lookup"><span data-stu-id="363dd-329">channelRenamed</span></span> | `on_teams_channel_renamed` | <span data-ttu-id="363dd-330">Переопределяется для обработки переименования канала Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-330">Overrides this to handle a Teams channel being renamed.</span></span> <span data-ttu-id="363dd-331">Дополнительные сведения см. в [переименовыв канале](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-331">For more information, see [Channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="363dd-332">teamRenamed</span><span class="sxs-lookup"><span data-stu-id="363dd-332">teamRenamed</span></span> | `on_teams_team_renamed` | <span data-ttu-id="363dd-333">`return Task.CompletedTask;` Переопределяется для обработки переименования команды Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-333">`return Task.CompletedTask;` Overrides this to handle a Teams team being renamed.</span></span> <span data-ttu-id="363dd-334">Дополнительные сведения см. в [переименованной команде](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-334">For more information, see [Team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="363dd-335">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="363dd-335">MembersAdded</span></span> | `on_teams_members_added` | <span data-ttu-id="363dd-336">Вызывает метод `OnMembersAddedAsync` в `ActivityHandler` .</span><span class="sxs-lookup"><span data-stu-id="363dd-336">Calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="363dd-337">Переопределяется для обработки присоединения участников к команде.</span><span class="sxs-lookup"><span data-stu-id="363dd-337">Overrides this to handle members joining a team.</span></span> <span data-ttu-id="363dd-338">Дополнительные сведения см. [в сведениях, добавленных участниками команды](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-338">For more information, see [Team members added](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="363dd-339">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="363dd-339">MembersRemoved</span></span> | `on_teams_members_removed` | <span data-ttu-id="363dd-340">Вызывает метод `OnMembersRemovedAsync` в `ActivityHandler` .</span><span class="sxs-lookup"><span data-stu-id="363dd-340">Calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="363dd-341">Переопределяется для обработки выходных участников команды.</span><span class="sxs-lookup"><span data-stu-id="363dd-341">Overrides this to handle members leaving a team.</span></span> <span data-ttu-id="363dd-342">Дополнительные сведения см. в [сведениях, которые участники команды удалили](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) в [событиях обновления беседы.](https://aka.ms/azure-bot-subscribe-to-conversation-events)</span><span class="sxs-lookup"><span data-stu-id="363dd-342">For more information, see [Team members removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|

#### <a name="teams-invoke-activities"></a><span data-ttu-id="363dd-343">Вызов действий в Teams</span><span class="sxs-lookup"><span data-stu-id="363dd-343">Teams invoke activities</span></span>

<span data-ttu-id="363dd-344">Список обработчиков действий Teams, которые вызваны обработчиком действий `on_invoke_activity` Teams, включает следующие:</span><span class="sxs-lookup"><span data-stu-id="363dd-344">The list of Teams activity handlers called from the `on_invoke_activity` Teams activity handler include the following:</span></span>

| <span data-ttu-id="363dd-345">Типы вызовов</span><span class="sxs-lookup"><span data-stu-id="363dd-345">Invoke types</span></span>                    | <span data-ttu-id="363dd-346">Обработник</span><span class="sxs-lookup"><span data-stu-id="363dd-346">Handler</span></span>                              | <span data-ttu-id="363dd-347">Описание</span><span class="sxs-lookup"><span data-stu-id="363dd-347">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="363dd-348">CardAction.Invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-348">CardAction.Invoke</span></span>               | `on_teams_card_action_invoke`       | <span data-ttu-id="363dd-349">Вызов действия карточки Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-349">Teams card action invoke.</span></span> |
| <span data-ttu-id="363dd-350">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-350">fileConsent/invoke</span></span>              | `on_teams_file_consent_accept`      | <span data-ttu-id="363dd-351">Согласие на файл Teams принимается.</span><span class="sxs-lookup"><span data-stu-id="363dd-351">Teams file consent accept.</span></span> |
| <span data-ttu-id="363dd-352">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-352">fileConsent/invoke</span></span>              | `on_teams_file_consent`            | <span data-ttu-id="363dd-353">Согласие на файл Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-353">Teams file consent.</span></span> |
| <span data-ttu-id="363dd-354">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="363dd-354">fileConsent/invoke</span></span>              | `on_teams_file_consent_decline`     | <span data-ttu-id="363dd-355">Согласие на файл Teams отклонено.</span><span class="sxs-lookup"><span data-stu-id="363dd-355">Teams file consent decline.</span></span> |
| <span data-ttu-id="363dd-356">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="363dd-356">actionableMessage/executeAction</span></span> | `on_teams_o365_connector_card_action` | <span data-ttu-id="363dd-357">Действие карточки соединители Teams O365.</span><span class="sxs-lookup"><span data-stu-id="363dd-357">Teams O365 connector card action.</span></span> |
| <span data-ttu-id="363dd-358">signin/verifyState</span><span class="sxs-lookup"><span data-stu-id="363dd-358">signin/verifyState</span></span>              | `on_teams_signin_verify_state`      | <span data-ttu-id="363dd-359">Teams sign in verify state.</span><span class="sxs-lookup"><span data-stu-id="363dd-359">Teams sign in verify state.</span></span> |
| <span data-ttu-id="363dd-360">task/fetch</span><span class="sxs-lookup"><span data-stu-id="363dd-360">task/fetch</span></span>                      | `on_teams_task_module_fetch`        | <span data-ttu-id="363dd-361">Извлечение модуля задач Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-361">Teams task module fetch.</span></span> |
| <span data-ttu-id="363dd-362">task/submit</span><span class="sxs-lookup"><span data-stu-id="363dd-362">task/submit</span></span>                     | `on_teams_task_module_submit`       | <span data-ttu-id="363dd-363">Отправка модуля задач Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-363">Teams task module submit.</span></span> |

<span data-ttu-id="363dd-364">Действия по вызову, перечисленные в разделе "Действия по вызову Teams", посвящены ботам в беседах в Teams.</span><span class="sxs-lookup"><span data-stu-id="363dd-364">The invoke activities listed in the Teams invoke activities section are for conversational bots in Teams.</span></span> <span data-ttu-id="363dd-365">SDK Bot Framework также поддерживает вызов действий, характерных для расширений обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="363dd-365">The Bot Framework SDK also supports invoke activities specific to messaging extensions.</span></span> <span data-ttu-id="363dd-366">Дополнительные сведения см. в дополнительных сведениях [о расширениях обмена сообщениями.](https://aka.ms/azure-bot-what-are-messaging-extensions)</span><span class="sxs-lookup"><span data-stu-id="363dd-366">For more information, see [What are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions).</span></span>

---
