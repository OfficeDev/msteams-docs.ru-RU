---
title: Локальное тестирование и отладка бота
author: surbhigupta
description: Узнайте о локальном тестировании и отладке бота с помощью интегрированной среды разработки Teams с помощью загрузки неопубликованных приложений, Teams с помощью эмулятора бота и прямого общения с ботом.
ms.topic: overview
ms.localizationpriority: medium
ms.author: anclear
ms.openlocfilehash: a673f1cd260c9b53de477cdd5084bd521c79bd41
ms.sourcegitcommit: 0117c4e750a388a37cc189bba8fc0deafc3fd230
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2022
ms.locfileid: "65103988"
---
# <a name="test-and-debug-your-bot-locally"></a>Локальное тестирование и отладка бота

При тестировании бота необходимо учитывать контексты, в которых должен выполняться бот, и любые функциональные возможности, которые вы могли добавить в бот, для которых требуются данные, относящиеся к Microsoft Teams. Убедитесь, что метод, используемый для тестирования бота, соответствует его функциональным возможностям.

## <a name="test-by-uploading-to-teams"></a>Тестирование путем отправки в Teams

Самый полный способ протестировать бот — создать пакет приложения и отправить его в Teams. Это единственный метод проверки всех функциональных возможностей, доступных боту во всех областях.

Существует два способа отправки приложения:

* Используйте [App Studio](~/concepts/build-and-test/app-studio-overview.md).
* [Создайте пакет приложения](~/concepts/build-and-test/apps-package.md) вручную, а затем [отправьте его](~/concepts/deploy-and-publish/apps-upload.md).

> [!NOTE]
> Чтобы изменить манифест и повторно отправить [приложение,](#delete-a-bot-from-teams) удалите бот перед отправкой измененного пакета приложения.
> Чтобы протестировать бот, включите загрузку неопубликованных приложений Teams. См [. раздел "Включение загрузки неопубликованных приложений"](/microsoftteams/platform/concepts/build-and-test/prepare-your-o365-tenant#enable-custom-teams-apps-and-turn-on-custom-app-uploading).

## <a name="debug-your-bot-locally"></a>Локальная отладка бота

Если бот размещается локально во время разработки, для тестирования бота необходимо использовать службу туннелирования, например [ngrok](https://ngrok.com/) . После скачивания и установки ngrok добавьте `ngrok` в путь и выполните следующую команду, чтобы запустить службу туннелирования:

```bash
ngrok http <port> -host-header=localhost:<port>
```

Используйте конечную точку HTTPS, предоставленную ngrok в манифесте приложения.

> [!NOTE]
> Если закрыть командное окно и перезапустить его, будет создан новый URL-адрес, и вам потребуется обновить адрес конечной точки бота, чтобы использовать его.

## <a name="test-your-bot-without-uploading-to-teams"></a>Тестирование бота без отправки в Teams

Иногда может потребоваться протестировать бот, не устанавливая его в качестве приложения в Teams. Мы предоставляем два метода для тестирования бота. Тестирование бота без его установки в качестве приложения может оказаться полезным, чтобы убедиться, что бот доступен и отвечает, однако он не позволит протестировать полный набор Microsoft Teams функций, которые вы, возможно, добавили в бот. Если вам нужно полностью протестировать бот, [ознакомьтесь с тестированием, передав его](#test-by-uploading-to-teams).

### <a name="use-the-bot-emulator"></a>Использование бота Emulator

Это Bot Framework Emulator является классическим приложением, которое позволяет разработчикам ботов тестировать и отлаживать свои боты локально или удаленно. Эмулятор помогает общаться в чате с ботом и проверять сообщения, отправляемые и получаемые ботом. Это может быть полезно для проверки доступности бота и реагирования на него. Однако эмулятор не позволяет тестировать какие-либо функциональные Teams, которые вы добавили в бот, и ответы от бота являются точным визуальным представлением того, как они отображаются в Teams. Если вам нужно протестировать одно из этих компонентов, лучше всего [отправить бот](#test-by-uploading-to-teams).

Дополнительные сведения см[. в полных инструкциях по](/azure/bot-service/bot-service-debug-emulator?view=azure-bot-service-4.0&preserve-view=true) Bot Framework Emulator.

### <a name="talk-to-your-bot-directly-by-id"></a>Общение с ботом напрямую по идентификатору

> [!Important]
> Беседа с ботом по идентификатору предназначена только для основных целей тестирования. Все Teams, которые вы добавили в бот, не работают.

Вы также можете инициировать беседу с ботом, используя его идентификатор. Когда бот был добавлен с помощью одного из этих методов, он недоступен в беседах каналов и вы не можете воспользоваться другими возможностями приложения Microsoft Teams, такими как вкладки или расширения сообщений. Вы можете инициировать беседу одним из следующих способов:

* На странице [панели мониторинга бота](https://dev.botframework.com/bots) в разделе **"Каналы**" нажмите кнопку **"Добавить Microsoft Teams"**. Microsoft Teams запускает личный чат с ботом.

* Напрямую ссылаться на идентификатор приложения бота из Microsoft Teams:
   1. На странице [панели мониторинга бота](https://dev.botframework.com/bots) в разделе " **Сведения**" скопируйте идентификатор приложения **Майкрософт** для бота.
  
      ![Получение appID для бота](~/assets/images/bots_appid_botframework.png)
  
   2. Откройте Microsoft Teams, в области **чата** щелкните значок **"Добавить чат**". В **поле "К:**" вставьте идентификатор приложения Майкрософт бота.
  
      ![Отправка ботов](~/assets/images/bots_uploading.png)

      Идентификатор приложения должен разрешаться в имя бота.

   3. Выберите бота и отправьте сообщение, чтобы инициировать беседу.
      Кроме того, можно вставить идентификатор приложения бота в поле поиска в левом верхнем углу Microsoft Teams. На странице результатов поиска перейдите на вкладку **"** Люди", чтобы увидеть бота и начать беседу с ним.

> [!Note]
> Чтобы Microsoft Teams ссылку на идентификатор приложения бота, включите загрузку [неопубликованных приложений](/microsoftteams/platform/concepts/build-and-test/prepare-your-o365-tenant#enable-custom-teams-apps-and-turn-on-custom-app-uploading).

Бот получает событие при `conversationUpdate` добавлении ботов в команду без сведений о команде в объекте `channelData` .

## <a name="block-a-bot-in-personal-chat"></a>Блокировка бота в личном чате

Пользователи могут запретить боту отправлять личные сообщения чата. Они могут переключить его, щелкнув бота правой кнопкой мыши в канале чата и выбрав "Блокировать **беседу бота"**. Это означает, что боты продолжают отправлять сообщения, но пользователь не получает их.

![Блокировка бота](~/assets/images/bots/botdisable.png)

## <a name="remove-a-bot-from-a-team"></a>Удаление бота из команды

Пользователи могут удалить бота, щелкнив значок корзины в списке ботов в представлении команды. Это только удаляет бот из использования этой команды, отдельные пользователи по-прежнему могут взаимодействовать в личном контексте. Боты в личном контексте не могут быть отключены или удалены пользователями.

## <a name="disable-a-bot-in-teams"></a>Отключение бота в Teams

Чтобы запретить боту получать сообщения, перейдите на панель мониторинга  бота и измените Microsoft Teams канале. Снимите **флажок "Включить Microsoft Teams**". Это не позволяет пользователям взаимодействовать с ботом, однако он по-прежнему будет обнаруживаемым, и пользователи по-прежнему смогут добавлять его в Teams.

## <a name="delete-a-bot-from-teams"></a>Удаление бота из Teams

Чтобы полностью удалить бот из Teams, перейдите на панель мониторинга **бота** и измените Microsoft Teams канале. Нажмите **кнопку "** Удалить" внизу. Это не позволяет пользователям обнаруживать, добавлять и взаимодействовать с ботом. Это не приводит к удалению бота из экземпляров Teams других пользователей, однако он также перестает работать для них.

## <a name="see-also"></a>См. также

* [Отладка бота с помощью ПО промежуточного слоя для проверки](/azure/bot-service/bot-service-debug-inspection-middleware)
* [Локальная отладка бота для звонков и собраний](~/bots/calls-and-meetings/debugging-local-testing-calling-meeting-bots.md)
