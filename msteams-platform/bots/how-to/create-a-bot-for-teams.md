---
title: Создание бота с помощью App Studio
author: clearab
description: Узнайте, как создать бота Microsoft Teams с помощью App Studio.
ms.topic: conceptual
localization_priority: Priority
ms.author: anclear
ms.openlocfilehash: 42b825ff2883e9b2b8b13dbd6774ed7ce6d0f40f
ms.sourcegitcommit: aca9990e1f84b07b9e77c08bfeca4440eb4e64f0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/25/2020
ms.locfileid: "49476973"
---
# <a name="create-a-bot-using-app-studio"></a><span data-ttu-id="5f011-103">Создание бота с помощью App Studio</span><span class="sxs-lookup"><span data-stu-id="5f011-103">Create a bot using App Studio</span></span>

> [!TIP]
> <span data-ttu-id="5f011-104">Ищете быстрый способ приступить к работе?</span><span class="sxs-lookup"><span data-stu-id="5f011-104">Looking for a faster way to get started?</span></span> <span data-ttu-id="5f011-105">Создайте [бота](../../build-your-first-app/build-bot.md), используя набор средств Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="5f011-105">Create a [bot](../../build-your-first-app/build-bot.md) using the Microsoft Teams Toolkit.</span></span>

<span data-ttu-id="5f011-106">Чтобы создать бота для беседы, вам потребуется выполнить следующие действия:</span><span class="sxs-lookup"><span data-stu-id="5f011-106">You'll need to complete the following steps to create a conversational bot:</span></span>

1. <span data-ttu-id="5f011-107">Подготовить среду разработки.</span><span class="sxs-lookup"><span data-stu-id="5f011-107">Prepare your development environment.</span></span>
1. <span data-ttu-id="5f011-108">Создать веб-службу.</span><span class="sxs-lookup"><span data-stu-id="5f011-108">Create your web service.</span></span>
1. <span data-ttu-id="5f011-109">Зарегистрировать веб-службу в качестве бота в Microsoft Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="5f011-109">Register your web service as a bot with Microsoft Bot Framework.</span></span>
1. <span data-ttu-id="5f011-110">Создать манифест приложения и пакет приложения.</span><span class="sxs-lookup"><span data-stu-id="5f011-110">Create your app manifest and your app package.</span></span>
1. <span data-ttu-id="5f011-111">Отправить свой пакет в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="5f011-111">Upload your package to Microsoft Teams.</span></span>

<span data-ttu-id="5f011-112">Создание веб-службы, регистрация веб-службы и создание пакета приложения с помощью Bot Framework могут осуществляться в любом порядке. Но поскольку эти три действия тесно связаны, независимо от порядка их выполнения вам потребуется вернуться, чтобы обновить остальные из них.</span><span class="sxs-lookup"><span data-stu-id="5f011-112">Creating your web service, registering your web service, and creating your app package, with the Bot Framework can be done in any order; however, because the three pieces are so intertwined, no matter in which order you do them, you'll need to return to update the others.</span></span> <span data-ttu-id="5f011-113">Для вашей регистрации требуется конечная точка обмена сообщениями из развернутой веб-службы, а вашей веб-службе необходим идентификатор и пароль, созданный при регистрации.</span><span class="sxs-lookup"><span data-stu-id="5f011-113">Your registration needs the messaging endpoint from your deployed web service and your web service needs the ID and password created from your registration.</span></span> <span data-ttu-id="5f011-114">Манифесту приложения также требуется идентификатор регистрации, чтобы подключить Teams к вашей веб-службе.</span><span class="sxs-lookup"><span data-stu-id="5f011-114">Your app manifest also needs the registration ID to connect Teams to your web service.</span></span>

<span data-ttu-id="5f011-115">В процессе создания бота вы будете регулярно переходить от изменения манифеста приложения к развертыванию кода в веб-службе.</span><span class="sxs-lookup"><span data-stu-id="5f011-115">As you're building your bot, you'll regularly move between changing your app manifest and deploying code to your web service.</span></span> <span data-ttu-id="5f011-116">При работе с манифестом приложения учитывайте, что можно вручную выполнять действия с файлом JSON или вносить изменения с помощью App Studio.</span><span class="sxs-lookup"><span data-stu-id="5f011-116">When working with the app manifest, keep in mind you can either manually manipulate the JSON file, or make changes through App Studio.</span></span> <span data-ttu-id="5f011-117">В любом случае вам потребуется повторно развернуть (отправить) свое приложение в Teams, если вы вносите изменения в манифест. Однако это не требуется при развертывании изменений в веб-службе.</span><span class="sxs-lookup"><span data-stu-id="5f011-117">Either way, you'll need to re-deploy (upload) your app in Teams when you make a change to the manifest; however, there's no need to do so when you deploy changes to your web service.</span></span>

<span data-ttu-id="5f011-118">Дополнительные сведения о платформе Bot Framework см. в [документации по Bot Framework](/azure/bot-service/).</span><span class="sxs-lookup"><span data-stu-id="5f011-118">See the [Bot Framework Documentation](/azure/bot-service/) for additional information on the Bot Framework.</span></span>

[!include[prepare environment](~/includes/prepare-environment.md)]

## <a name="create-your-web-service"></a><span data-ttu-id="5f011-119">Создание веб-службы</span><span class="sxs-lookup"><span data-stu-id="5f011-119">Create your web service</span></span>

<span data-ttu-id="5f011-120">Основа вашего бота — это веб-служба.</span><span class="sxs-lookup"><span data-stu-id="5f011-120">The heart of your bot is your web service.</span></span> <span data-ttu-id="5f011-121">Она определяет единственный маршрут, обычно `/api/messages`, для получения всех запросов.</span><span class="sxs-lookup"><span data-stu-id="5f011-121">It will define a single route, typically `/api/messages`, on which to receive all requests.</span></span> <span data-ttu-id="5f011-122">Чтобы приступить к работе, можно воспользоваться одним из нескольких вариантов:</span><span class="sxs-lookup"><span data-stu-id="5f011-122">To get started, you have a few options to choose from:</span></span>

* <span data-ttu-id="5f011-123">Начните работу с примером бота для беседы в Teams в [C#/dotnet](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/57.teams-conversation-bot) или [JavaScript](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/57.teams-conversation-bot).</span><span class="sxs-lookup"><span data-stu-id="5f011-123">Start with the Teams conversation bot sample in either [C#/dotnet](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/57.teams-conversation-bot) or [JavaScript](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/57.teams-conversation-bot).</span></span>
* <span data-ttu-id="5f011-124">Если вы используете JavaScript, примените [генератор Yeoman для Microsoft Teams](https://github.com/OfficeDev/generator-teams) для формирования своего приложения Teams, включая веб-службу.</span><span class="sxs-lookup"><span data-stu-id="5f011-124">If you're using JavaScript, use the [Yeoman Generator for Microsoft Teams](https://github.com/OfficeDev/generator-teams) to scaffold your Teams app, including your web service.</span></span> <span data-ttu-id="5f011-125">Это особенно удобно при создании приложения Teams, содержащего не только бота для беседы.</span><span class="sxs-lookup"><span data-stu-id="5f011-125">This is particularly helpful when building a Teams app that contains more than just a conversational bot.</span></span>
* <span data-ttu-id="5f011-126">Создайте веб-службу с нуля.</span><span class="sxs-lookup"><span data-stu-id="5f011-126">Create your web service from scratch.</span></span> <span data-ttu-id="5f011-127">Вы можете добавить пакет SDK Bot Framework для своего языка или работать непосредственно с полезными данными JSON.</span><span class="sxs-lookup"><span data-stu-id="5f011-127">You can choose to add the Bot Framework SDK for your language, or you can work directly with the JSON payloads.</span></span>

## <a name="register-your-web-service-with-the-bot-framework"></a><span data-ttu-id="5f011-128">Регистрация веб-службы в Bot Framework</span><span class="sxs-lookup"><span data-stu-id="5f011-128">Register your web service with the Bot Framework</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5f011-129">При регистрации веб-службы обязательно присвойте параметру **Отображаемое имя** такое же имя, которое вы использовали для параметра **Краткое имя** в манифесте приложения.</span><span class="sxs-lookup"><span data-stu-id="5f011-129">When registering your web service, be sure to set the **Display name** to the same name you used for your **Short name** in your app manifest.</span></span> <span data-ttu-id="5f011-130">Если приложение распространяется путем прямой отправки или через каталог приложений организации, сообщения, отправленные в беседу ботом, будут использовать **отображаемое имя**, указанное при регистрации, а не **краткое имя** приложения.</span><span class="sxs-lookup"><span data-stu-id="5f011-130">When your app is distributed by either direct uploading or through an organization's app catalog, messages sent to a conversation by your bot will use the registration's **Display name** rather than the app's **Short name**.</span></span>

<span data-ttu-id="5f011-131">Регистрация веб-службы в Bot Framework обеспечивает безопасный канал связи между клиентом Teams и вашей веб-службой.</span><span class="sxs-lookup"><span data-stu-id="5f011-131">Registering your web service with the Bot Framework provides a secure communication channel between the Teams client and your web service.</span></span> <span data-ttu-id="5f011-132">Клиент Teams и веб-служба никогда не взаимодействуют напрямую.</span><span class="sxs-lookup"><span data-stu-id="5f011-132">The Teams client and your web service never communicate directly.</span></span> <span data-ttu-id="5f011-133">Вместо этого сообщения направляются через службу Bot Framework Service (Microsoft Teams использует отдельный экземпляр этой службы, совместимый со стандартами Office 365).</span><span class="sxs-lookup"><span data-stu-id="5f011-133">Instead, messages are routed through the Bot Framework Service (Microsoft Teams uses a separate instance of this service that is compliant with Office 365 standards).</span></span>

<span data-ttu-id="5f011-134">У вас есть два варианта регистрации веб-службы в Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="5f011-134">You have two options when registering your web service with the Bot Framework.</span></span> <span data-ttu-id="5f011-135">Чтобы зарегистрировать бота, не используя подписку на Azure, можно применить [App Studio](#using-app-studio) или [портал прежней версии](#in-the-legacy-portal).</span><span class="sxs-lookup"><span data-stu-id="5f011-135">You can use either [App Studio](#using-app-studio) or the [legacy portal](#in-the-legacy-portal) to register your bot without using an Azure subscription.</span></span> <span data-ttu-id="5f011-136">Кроме того, если у вас уже есть подписка на Azure (или вы не против ее создать), можно использовать [портал Azure](#with-an-azure-subscription) для регистрации вашей веб-службы.</span><span class="sxs-lookup"><span data-stu-id="5f011-136">Or, if you already have an Azure subscription (or don't mind creating one), you can use [the Azure portal](#with-an-azure-subscription) to register your web service.</span></span>

### <a name="without-an-azure-subscription"></a><span data-ttu-id="5f011-137">Без подписки на Azure</span><span class="sxs-lookup"><span data-stu-id="5f011-137">Without an Azure subscription</span></span>

<span data-ttu-id="5f011-138">Если вы не хотите регистрировать бота в Azure, вы **должны** использовать ссылку https://dev.botframework.com/bots/new или App Studio.</span><span class="sxs-lookup"><span data-stu-id="5f011-138">If you do not wish to create your bot registration in Azure, you **must** use either this link - https://dev.botframework.com/bots/new, or App Studio.</span></span> <span data-ttu-id="5f011-139">Если нажать кнопку *Создать бота* на портале Bot Framework, вы зарегистрируете бота в Microsoft Azure, и вам потребуется предоставить подписку на Azure.</span><span class="sxs-lookup"><span data-stu-id="5f011-139">If you click on the *Create a bot* button in the Bot Framework portal, you will create your bot registration in Microsoft Azure, and will need to provide an Azure subscription.</span></span> <span data-ttu-id="5f011-140">Для управления регистрацией или ее переноса в подписку на Azure после создания перейдите на сайт https://dev.botframework.com/bots.</span><span class="sxs-lookup"><span data-stu-id="5f011-140">To manage your registration or migrate it to an Azure subscription after creation go to: https://dev.botframework.com/bots.</span></span>

<span data-ttu-id="5f011-141">При изменении свойств существующей регистрации Bot Framework, не зарегистрированной в Azure, отображается столбец "Состояние миграции" и синяя кнопка "Миграция", ведущая на портал Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="5f011-141">When you edit the properties of an existing Bot Framework registration not registered in Azure, you'll see A "Migration status" column and a blue "Migrate" button that will take you to the Microsoft Azure portal.</span></span> <span data-ttu-id="5f011-142">Не нажимайте кнопку "Миграция", если это не требуется.</span><span class="sxs-lookup"><span data-stu-id="5f011-142">Don't select the "Migrate" button unless that's what you want to do.</span></span> <span data-ttu-id="5f011-143">Вместо этого выберите **имя** бота, и вы сможете изменить его свойства:</span><span class="sxs-lookup"><span data-stu-id="5f011-143">Instead, select the **name** of the bot and you can edit its properties:</span></span>

   ![Изменение свойств бота](~/assets/images/bots/bf-migrate-bot-to-azure.png)

<span data-ttu-id="5f011-145">Сценарии, **требующие** регистрации бота в Azure (путем его создания на портале Azure или с помощью миграции):</span><span class="sxs-lookup"><span data-stu-id="5f011-145">Scenarios when you **must** have your bot registration in Azure (either by creating it in the Azure portal or via migration):</span></span>

* <span data-ttu-id="5f011-146">Вы хотите использовать [OAuthPrompt](./authentication/auth-flow-bot.md) платформы Bot Framework для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5f011-146">You want to use the Bot Framework's [OAuthPrompt](./authentication/auth-flow-bot.md) for authentication.</span></span>
* <span data-ttu-id="5f011-147">Вы хотите включить дополнительные каналы, такие как веб-чат, прямая линия или Скайп.</span><span class="sxs-lookup"><span data-stu-id="5f011-147">You want to enable additional channels like Web Chat, Direct Line, or Skype.</span></span>

#### <a name="using-app-studio"></a><span data-ttu-id="5f011-148">Использование App Studio</span><span class="sxs-lookup"><span data-stu-id="5f011-148">Using App Studio</span></span>

<span data-ttu-id="5f011-149">*App Studio* — это приложение Teams, помогающее создавать приложения Teams, включая регистрацию вашей веб-службы в виде бота, создание манифеста приложения и пакета приложения, а также обновление параметров и настроек.</span><span class="sxs-lookup"><span data-stu-id="5f011-149">*App Studio* is a Teams application that helps you build Teams apps, including registering your web service as a bot, creating an app manifest and your app package, and updating settings and configurations.</span></span> <span data-ttu-id="5f011-150">Оно также содержит библиотеку элементов управления React и настраиваемые примеры для карточек.</span><span class="sxs-lookup"><span data-stu-id="5f011-150">It also contains a React control library and configurable samples for cards.</span></span> <span data-ttu-id="5f011-151">См. статью [Начало работы с Teams App Studio](../../concepts/build-and-test/app-studio-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5f011-151">See [Getting started with Teams App Studio](../../concepts/build-and-test/app-studio-overview.md).</span></span>

<span data-ttu-id="5f011-152">Помните, что если вы используете App Studio для регистрации веб-службы, вам потребуется перейти на сайт https://dev.botframework.com/bots для управления регистрацией.</span><span class="sxs-lookup"><span data-stu-id="5f011-152">Remember, if you use App Studio to register your web service you'll need to go to https://dev.botframework.com/bots to manage your registration.</span></span>

#### <a name="in-the-legacy-portal"></a><span data-ttu-id="5f011-153">На портале прежней версии</span><span class="sxs-lookup"><span data-stu-id="5f011-153">In the legacy portal</span></span>

<span data-ttu-id="5f011-154">Создайте регистрацию бота с помощью ссылки https://dev.botframework.com/bots/new.</span><span class="sxs-lookup"><span data-stu-id="5f011-154">Create your bot registration using this link: https://dev.botframework.com/bots/new.</span></span> <span data-ttu-id="5f011-155">**После создания бота обязательно добавьте Microsoft Teams в виде канала из списка основных каналов.**</span><span class="sxs-lookup"><span data-stu-id="5f011-155">**Be sure to add Microsoft Teams as a channel from the featured channels list after creating your bot.**</span></span> <span data-ttu-id="5f011-156">Вы можете повторно использовать любой сгенерированный вами идентификатор приложения Майкрософт, если вы уже создали пакет или манифест приложения.</span><span class="sxs-lookup"><span data-stu-id="5f011-156">Feel free to re-use any Microsoft App ID you generated if you've already created your app package/manifest.</span></span>

   ![Страница регистрации в Bot Framework](~/assets/images/bots/bfregister.png)

### <a name="with-an-azure-subscription"></a><span data-ttu-id="5f011-158">С помощью подписки на Azure</span><span class="sxs-lookup"><span data-stu-id="5f011-158">With an Azure subscription</span></span>

<span data-ttu-id="5f011-159">Вы также можете зарегистрировать свою веб-службу, создав ресурс регистрации каналов ботов на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="5f011-159">You can also register your web service by creating a Bot Channels Registration resource in the Azure portal.</span></span>

[!INCLUDE [bot channels registration steps](~/includes/bots/azure-bot-channels-registration.md)]

<span data-ttu-id="5f011-160">[Портал Bot Framework](https://dev.botframework.com) оптимизирован для регистрации ботов в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="5f011-160">The [Bot Framework portal](https://dev.botframework.com) is optimized for registering bots in Microsoft Azure.</span></span> <span data-ttu-id="5f011-161">Вот некоторые моменты, которые следует знать:</span><span class="sxs-lookup"><span data-stu-id="5f011-161">Here are some things to know:</span></span>

* <span data-ttu-id="5f011-162">После создания бота обязательно добавьте Microsoft Teams в виде канала из списка основных каналов.</span><span class="sxs-lookup"><span data-stu-id="5f011-162">Be sure to add Microsoft Teams as a channel from the featured channels list after creating your bot.</span></span>
* <span data-ttu-id="5f011-163">Каналы Microsoft Teams для ботов, зарегистрированных в Azure, являются **бесплатными**.</span><span class="sxs-lookup"><span data-stu-id="5f011-163">The Microsoft Teams channel for bots registered on Azure is **free**.</span></span> <span data-ttu-id="5f011-164">Сообщения, отправленные по каналу Teams, НЕ будут учитываться в числе использованных сообщений для бота.</span><span class="sxs-lookup"><span data-stu-id="5f011-164">Messages sent over the Teams channel will NOT count towards the consumed messages for the bot.</span></span>
* <span data-ttu-id="5f011-165">Если вы зарегистрировали бота с помощью Microsoft Azure, код бота не требуется *размещать* в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="5f011-165">If you register your bot using Microsoft Azure, your bot code doesn't need to be *hosted* on Microsoft Azure.</span></span>
* <span data-ttu-id="5f011-166">Если вы зарегистрировали бота с помощью портала Microsoft Azure, у вас должна быть учетная запись Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="5f011-166">If you do register a bot using Microsoft Azure portal, you must have a Microsoft Azure account.</span></span> <span data-ttu-id="5f011-167">Вы можете [создать ее бесплатно](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="5f011-167">You can [create one for free](https://azure.microsoft.com/free/).</span></span> <span data-ttu-id="5f011-168">Чтобы подтвердить свою личность при создании учетной записи Azure, вам потребуется предоставить кредитную карту, но с нее не будет взиматься плата. Создание и использование ботов в Microsoft Teams всегда бесплатно.</span><span class="sxs-lookup"><span data-stu-id="5f011-168">To verify your identity when you create an Azure account, you must provide a credit card, but it won't be charged; it's always free to create and use bots with Microsoft Teams.</span></span>

## <a name="create-your-app-manifest-and-package"></a><span data-ttu-id="5f011-169">Создание манифеста и пакета приложения</span><span class="sxs-lookup"><span data-stu-id="5f011-169">Create your app manifest and package</span></span>

<span data-ttu-id="5f011-170">[Манифест приложения](~/resources/schema/manifest-schema.md) определяет метаданные для приложения, точки расширения, используемые приложением, и указатели на веб-службы, к которым подключаются эти точки расширения.</span><span class="sxs-lookup"><span data-stu-id="5f011-170">Your [app manifest](~/resources/schema/manifest-schema.md) defines the metadata for your app, the extension points your app is using, and pointers to the web services those extension points connect to.</span></span> <span data-ttu-id="5f011-171">Вы можете использовать App Studio для создания манифеста приложения или создать его вручную.</span><span class="sxs-lookup"><span data-stu-id="5f011-171">You can either use App Studio to help you create your app manifest, or create it manually.</span></span>

### <a name="add-using-app-studio"></a><span data-ttu-id="5f011-172">Добавление с помощью App Studio</span><span class="sxs-lookup"><span data-stu-id="5f011-172">Add using App Studio</span></span>

1. <span data-ttu-id="5f011-173">В клиенте Teams откройте App Studio из меню переполнения **...** на панели навигации слева.</span><span class="sxs-lookup"><span data-stu-id="5f011-173">In the Teams client, open App Studio from the **...** overflow menu on the left navigation rail.</span></span> <span data-ttu-id="5f011-174">Если приложение App Studio еще не установлено, это можно сделать, выполнив его поиск.</span><span class="sxs-lookup"><span data-stu-id="5f011-174">If App Studio isn't already installed, you can do so by searching for it.</span></span>
2. <span data-ttu-id="5f011-175">На вкладке **Редактор манифеста** нажмите кнопку **Создать приложение** (а если вы добавляете бота в существующее приложение, можно импортировать пакет приложения).</span><span class="sxs-lookup"><span data-stu-id="5f011-175">On the **Manifest editor** tab select **Create a new app** (or if you're adding a bot to an existing app, you can import your app package)</span></span>
3. <span data-ttu-id="5f011-176">Добавьте сведения о приложении (см. [определение схемы манифеста](~/resources/schema/manifest-schema.md) с полным описанием каждого поля).</span><span class="sxs-lookup"><span data-stu-id="5f011-176">Add your app details (see [manifest schema definition](~/resources/schema/manifest-schema.md) for full descriptions of each field).</span></span>
4. <span data-ttu-id="5f011-177">На вкладке **Боты** нажмите кнопку **Настройка**.</span><span class="sxs-lookup"><span data-stu-id="5f011-177">On the **Bots** tab select the **Setup** button.</span></span>
5. <span data-ttu-id="5f011-178">Вы можете создать новую регистрацию веб-службы (**Новый бот**) или, если вы уже зарегистрировали одну из них, выберите элемент **Существующий бот**.</span><span class="sxs-lookup"><span data-stu-id="5f011-178">You can either create a new web service registration (**New bot**), or if you've already registered one, select **Existing bot**.</span></span>
6. <span data-ttu-id="5f011-179">Выберите возможности и области, которые нужны для бота.</span><span class="sxs-lookup"><span data-stu-id="5f011-179">Select the capabilities and scopes your bot will need.</span></span>
7. <span data-ttu-id="5f011-180">При необходимости обновите адрес конечной точки бота, чтобы он указывал на вашего бота.</span><span class="sxs-lookup"><span data-stu-id="5f011-180">If necessary, update your bot endpoint address to point to your bot.</span></span> <span data-ttu-id="5f011-181">Он должен выглядеть примерно следующим образом: `https://someplace.com/api/messages`.</span><span class="sxs-lookup"><span data-stu-id="5f011-181">It should look something like `https://someplace.com/api/messages`.</span></span>
8. <span data-ttu-id="5f011-182">При необходимости добавьте [команды бота](~/bots/how-to/create-a-bot-commands-menu.md).</span><span class="sxs-lookup"><span data-stu-id="5f011-182">Optionally, add [bot commands](~/bots/how-to/create-a-bot-commands-menu.md).</span></span>
9. <span data-ttu-id="5f011-183">Кроме того, вы можете скачать готовый пакет приложения на вкладке **Тестирование и распространение**.</span><span class="sxs-lookup"><span data-stu-id="5f011-183">Optionally, you can download your completed app package from the **Test and distribute** tab.</span></span>

### <a name="create-it-manually"></a><span data-ttu-id="5f011-184">Создание вручную</span><span class="sxs-lookup"><span data-stu-id="5f011-184">Create it manually</span></span>

<span data-ttu-id="5f011-185">Как и в случае расширений для обмена сообщениями и вкладок, вам нужно обновить [манифест приложения](~/resources/schema/manifest-schema.md), чтобы определить своего бота.</span><span class="sxs-lookup"><span data-stu-id="5f011-185">As with messaging extensions and tabs, you update the [app-manifest](~/resources/schema/manifest-schema.md) to define your bot.</span></span> <span data-ttu-id="5f011-186">Добавьте новую структуру JSON верхнего уровня в манифест приложения с использованием свойства `bots`.</span><span class="sxs-lookup"><span data-stu-id="5f011-186">Add new top-level JSON structure in your app manifest with the `bots` property.</span></span>

|<span data-ttu-id="5f011-187">Имя</span><span class="sxs-lookup"><span data-stu-id="5f011-187">Name</span></span>| <span data-ttu-id="5f011-188">Тип</span><span class="sxs-lookup"><span data-stu-id="5f011-188">Type</span></span>| <span data-ttu-id="5f011-189">Максимальный размер</span><span class="sxs-lookup"><span data-stu-id="5f011-189">Maximum size</span></span> | <span data-ttu-id="5f011-190">Обязательный</span><span class="sxs-lookup"><span data-stu-id="5f011-190">Required</span></span> | <span data-ttu-id="5f011-191">Описание</span><span class="sxs-lookup"><span data-stu-id="5f011-191">Description</span></span>|
|---|---|---|---|---|
|`botId`|<span data-ttu-id="5f011-192">String</span><span class="sxs-lookup"><span data-stu-id="5f011-192">String</span></span>|<span data-ttu-id="5f011-193">64 символа</span><span class="sxs-lookup"><span data-stu-id="5f011-193">64 characters</span></span>|<span data-ttu-id="5f011-194">✔</span><span class="sxs-lookup"><span data-stu-id="5f011-194">✔</span></span>|<span data-ttu-id="5f011-195">Уникальный идентификатор приложения Майкрософт для бота, зарегистрированный в Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="5f011-195">The unique Microsoft app ID for the bot as registered with the Bot Framework.</span></span> <span data-ttu-id="5f011-196">Он может совпадать с общим идентификатором приложения.</span><span class="sxs-lookup"><span data-stu-id="5f011-196">This may well be the same as the overall app ID.</span></span>|
|`needsChannelSelector`|<span data-ttu-id="5f011-197">Логический</span><span class="sxs-lookup"><span data-stu-id="5f011-197">Boolean</span></span>|||<span data-ttu-id="5f011-198">Описывает, использует ли бот пользовательское указание для добавления бота в определенный канал.</span><span class="sxs-lookup"><span data-stu-id="5f011-198">Describes whether or not the bot utilizes a user hint to add the bot to a specific channel.</span></span> <span data-ttu-id="5f011-199">Значение по умолчанию: `false`.</span><span class="sxs-lookup"><span data-stu-id="5f011-199">Default: `false`.</span></span>|
|`isNotificationOnly`|<span data-ttu-id="5f011-200">Логический</span><span class="sxs-lookup"><span data-stu-id="5f011-200">Boolean</span></span>|||<span data-ttu-id="5f011-201">Указывает, является ли бот односторонним и только для уведомлений, в отличие от бота для беседы.</span><span class="sxs-lookup"><span data-stu-id="5f011-201">Indicates whether a bot is a one-way, notification-only bot, as opposed to a conversational bot.</span></span> <span data-ttu-id="5f011-202">Значение по умолчанию: `false`.</span><span class="sxs-lookup"><span data-stu-id="5f011-202">Default: `false`.</span></span>|
|`supportsFiles`|<span data-ttu-id="5f011-203">Логический</span><span class="sxs-lookup"><span data-stu-id="5f011-203">Boolean</span></span>|||<span data-ttu-id="5f011-204">Указывает, поддерживает ли бот возможность отправки и скачивания файлов в личном чате.</span><span class="sxs-lookup"><span data-stu-id="5f011-204">Indicates whether the bot supports the ability to upload/download files in personal chat.</span></span> <span data-ttu-id="5f011-205">Значение по умолчанию: `false`.</span><span class="sxs-lookup"><span data-stu-id="5f011-205">Default: `false`.</span></span>|
|`scopes`|<span data-ttu-id="5f011-206">Массив перечислений</span><span class="sxs-lookup"><span data-stu-id="5f011-206">Array of enum</span></span>|<span data-ttu-id="5f011-207">3</span><span class="sxs-lookup"><span data-stu-id="5f011-207">3</span></span>|<span data-ttu-id="5f011-208">✔</span><span class="sxs-lookup"><span data-stu-id="5f011-208">✔</span></span>|<span data-ttu-id="5f011-209">Указывает, предлагает ли бот функции в контексте канала в `team`, в групповом чате (`groupchat`) или функции, ограниченные только отдельным пользователем (`personal`).</span><span class="sxs-lookup"><span data-stu-id="5f011-209">Specifies whether the bot offers an experience in the context of a channel in a `team`, in a group chat (`groupchat`), or an experience scoped to an individual user alone (`personal`).</span></span> <span data-ttu-id="5f011-210">Эти параметры не являются исключающими.</span><span class="sxs-lookup"><span data-stu-id="5f011-210">These options are non-exclusive.</span></span>|

<span data-ttu-id="5f011-211">При необходимости можно определить один или несколько списков команд, которые ваш бот может рекомендовать для пользователей.</span><span class="sxs-lookup"><span data-stu-id="5f011-211">Optionally, you can define one or more lists of commands that your bot can recommend to users.</span></span> <span data-ttu-id="5f011-212">Объект является массивом (не более 2 элементов), и все элементы относятся к типу `object`.</span><span class="sxs-lookup"><span data-stu-id="5f011-212">The object is an array (maximum of 2 elements) with all elements of type `object`.</span></span> <span data-ttu-id="5f011-213">Для каждой области, поддерживаемой ботом, требуется определить отдельный список команд.</span><span class="sxs-lookup"><span data-stu-id="5f011-213">You must define a separate command list for each scope that your bot supports.</span></span> <span data-ttu-id="5f011-214">Дополнительные сведения *см.* в статье [Меню ботов](./create-a-bot-commands-menu.md).</span><span class="sxs-lookup"><span data-stu-id="5f011-214">*See* [Bot menus](./create-a-bot-commands-menu.md), for more information.</span></span>

|<span data-ttu-id="5f011-215">Имя</span><span class="sxs-lookup"><span data-stu-id="5f011-215">Name</span></span>| <span data-ttu-id="5f011-216">Тип</span><span class="sxs-lookup"><span data-stu-id="5f011-216">Type</span></span>| <span data-ttu-id="5f011-217">Максимальный размер</span><span class="sxs-lookup"><span data-stu-id="5f011-217">Maximum size</span></span> | <span data-ttu-id="5f011-218">Обязательный</span><span class="sxs-lookup"><span data-stu-id="5f011-218">Required</span></span> | <span data-ttu-id="5f011-219">Описание</span><span class="sxs-lookup"><span data-stu-id="5f011-219">Description</span></span>|
|---|---|---|---|---|
|`items.scopes`|<span data-ttu-id="5f011-220">массив перечислений</span><span class="sxs-lookup"><span data-stu-id="5f011-220">array of enum</span></span>|<span data-ttu-id="5f011-221">3</span><span class="sxs-lookup"><span data-stu-id="5f011-221">3</span></span>|<span data-ttu-id="5f011-222">✔</span><span class="sxs-lookup"><span data-stu-id="5f011-222">✔</span></span>|<span data-ttu-id="5f011-223">Указывает область, для которой действует список команд.</span><span class="sxs-lookup"><span data-stu-id="5f011-223">Specifies the scope for which the command list is valid.</span></span> <span data-ttu-id="5f011-224">Возможны значения `team`, `personal` и `groupchat`.</span><span class="sxs-lookup"><span data-stu-id="5f011-224">Options are `team`, `personal`, and `groupchat`.</span></span>|
|`items.commands`|<span data-ttu-id="5f011-225">массив объектов</span><span class="sxs-lookup"><span data-stu-id="5f011-225">array of objects</span></span>|<span data-ttu-id="5f011-226">10</span><span class="sxs-lookup"><span data-stu-id="5f011-226">10</span></span>|<span data-ttu-id="5f011-227">✔</span><span class="sxs-lookup"><span data-stu-id="5f011-227">✔</span></span>|<span data-ttu-id="5f011-228">Массив команд, поддерживаемых ботом:</span><span class="sxs-lookup"><span data-stu-id="5f011-228">An array of commands the bot supports:</span></span><br><span data-ttu-id="5f011-229">`title`: имя команды бота (строка, 32)</span><span class="sxs-lookup"><span data-stu-id="5f011-229">`title`: the bot command name (string, 32)</span></span><br><span data-ttu-id="5f011-230">`description`: простое описание или пример синтаксиса команды и ее аргумента (строка, 128)</span><span class="sxs-lookup"><span data-stu-id="5f011-230">`description`: a simple description or example of the command syntax and its argument (string, 128)</span></span>|

#### <a name="simple-manifest-example"></a><span data-ttu-id="5f011-231">Пример простого манифеста</span><span class="sxs-lookup"><span data-stu-id="5f011-231">Simple manifest example</span></span>

<span data-ttu-id="5f011-232">Пример ниже является простым объектом бота с двумя определенными списками команд.</span><span class="sxs-lookup"><span data-stu-id="5f011-232">The example below is a simple bot object, with two command lists defined.</span></span> <span data-ttu-id="5f011-233">Это не весь файл манифеста приложения, а только часть, относящаяся к расширениям для обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="5f011-233">This is not the entire app manifest file, just the part specific to messaging extensions.</span></span>

```json
...
  "bots": [
    {
      "botId": "%MICROSOFT-APP-ID-REGISTERED-WITH-BOT-FRAMEWORK%",
      "needsChannelSelector": false,
      "isNotificationOnly": false,
      "scopes": [ "team", "personal", "groupchat" ],
      "supportsFiles": true,
      "commandLists": [
        {
          "scopes": [ "team", "groupchat" ],
          "commands": [
            {
              "title": "Command 1",
              "description": "Description of Command 1"
            },
            {
              "title": "Command N",
              "description": "Description of Command N"
            }
          ]
        },
        {
          "scopes": [ "personal", "groupchat" ],
          "commands": [
            {
              "title": "Personal command 1",
              "description": "Description of Personal command 1"
            },
            {
              "title": "Personal command N",
              "description": "Description of Personal command N"
            }
          ]
        }
      ]
    }
  ],
...
```

#### <a name="create-your-app-package-manually"></a><span data-ttu-id="5f011-234">Создание пакета приложения вручную</span><span class="sxs-lookup"><span data-stu-id="5f011-234">Create your app package manually</span></span>

<span data-ttu-id="5f011-235">Чтобы создать пакет приложения, требуется добавить манифест приложения и (необязательно) значки приложения в ZIP-файл архива.</span><span class="sxs-lookup"><span data-stu-id="5f011-235">To create an app package, you need to add your app manifest and (optionally) your app icons to a .zip archive file.</span></span> <span data-ttu-id="5f011-236">Полные сведения см. в статье [Создание пакета приложения](~/concepts/build-and-test/apps-package.md).</span><span class="sxs-lookup"><span data-stu-id="5f011-236">See [Create your app package](~/concepts/build-and-test/apps-package.md) for complete details.</span></span> <span data-ttu-id="5f011-237">Убедитесь, что ZIP-архив содержит только необходимые файлы без дополнительной вложенной структуры папок.</span><span class="sxs-lookup"><span data-stu-id="5f011-237">Make sure your .zip archive contains only the necessary files, and has no additional folder structure inside of it.</span></span>

## <a name="upload-your-package-to-microsoft-teams"></a><span data-ttu-id="5f011-238">Отправка пакета в Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="5f011-238">Upload your package to Microsoft Teams</span></span>

> [!NOTE]
> <span data-ttu-id="5f011-239">Чтобы успешно загрузить бота, ваш администратор клиента должен [разрешить загрузку](/microsoftteams/manage-apps#manage-org-wide-app-settings) сторонних или пользовательских приложений в Teams.</span><span class="sxs-lookup"><span data-stu-id="5f011-239">To successfully upload your bot, your tenant admin must first [allow uploading](/microsoftteams/manage-apps#manage-org-wide-app-settings) third-party or custom apps in Teams.</span></span>

<span data-ttu-id="5f011-240">Если вы используете App Studio, можно установить приложение из вкладки **Тестирование и распространение** раздела **Редактор манифеста**.</span><span class="sxs-lookup"><span data-stu-id="5f011-240">If you've been using App Studio, you can install your app from the **Test and distribute** tab of the **Manifest editor**.</span></span> <span data-ttu-id="5f011-241">Или можно установить пакет приложения, открыв меню переполнения `...` на панели навигации слева, выбрав **Другие приложения** и щелкнув ссылку **Загрузить пользовательское приложение**.</span><span class="sxs-lookup"><span data-stu-id="5f011-241">Alternatively, you can install your app package by clicking the `...` overflow menu from the left navigation rail, clicking **More apps**, then the **Upload a custom app** link.</span></span> <span data-ttu-id="5f011-242">Чтобы внести дополнительные изменения перед отправкой, можно также импортировать манифест или пакет приложения в App Studio.</span><span class="sxs-lookup"><span data-stu-id="5f011-242">You can also import an app manifest or app package into App Studio to make additional updates before uploading.</span></span>

## <a name="bots-in-teams-meetings"></a><span data-ttu-id="5f011-243">Боты на собраниях Teams</span><span class="sxs-lookup"><span data-stu-id="5f011-243">Bots in Teams meetings</span></span>

<span data-ttu-id="5f011-244">В собраниях в Teams поддерживаются боты.</span><span class="sxs-lookup"><span data-stu-id="5f011-244">Teams supports bot invocation during meetings.</span></span> <span data-ttu-id="5f011-245">Когда бот получает сообщение вызова, он может определить пользователя и клиента по двум деталям: `userId` и `tenantId`.</span><span class="sxs-lookup"><span data-stu-id="5f011-245">When your bot receives the invoke message, it can identify the user and tenant from `userId` and `tenantId`.</span></span> <span data-ttu-id="5f011-246">`meetingId` может быть частью объекта `channelData`.</span><span class="sxs-lookup"><span data-stu-id="5f011-246">The `meetingId` can be found as part of the `channelData` object.</span></span> <span data-ttu-id="5f011-247">Вы можете использовать `userId` и `meetingId` для запроса к API `GetParticipant`, чтобы получить роли пользователей.</span><span class="sxs-lookup"><span data-stu-id="5f011-247">Your bot can use the `userId` and `meetingId`  for the `GetParticipant` API request to retrieve user roles.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5f011-248">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="5f011-248">Next steps</span></span>

* [<span data-ttu-id="5f011-249">Основы беседы для ботов</span><span class="sxs-lookup"><span data-stu-id="5f011-249">Bot conversation basics</span></span>](./conversations/conversation-basics.md)
* [<span data-ttu-id="5f011-250">Подписка на события беседы</span><span class="sxs-lookup"><span data-stu-id="5f011-250">Subscribe to conversation events</span></span>](./conversations/subscribe-to-conversation-events.md)
