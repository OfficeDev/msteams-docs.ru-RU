---
title: Создание бота для Microsoft Teams
author: clearab
description: Как создать бота для Microsoft Teams с помощью App Studio, генератора Yeoman и других средств.
ms.topic: conceptual
localization_priority: Priority
ms.author: anclear
ms.openlocfilehash: 03196c32e5e1a4b2714a4c916a71c80fc10a5edc
ms.sourcegitcommit: 1aa0b172931d0f81db346452788c41dc4a6717b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "48209832"
---
# <a name="create-a-bot-for-microsoft-teams"></a><span data-ttu-id="b0e32-103">Создание бота для Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="b0e32-103">Create a bot for Microsoft Teams</span></span>

<span data-ttu-id="b0e32-104">Чтобы создать бота для беседы, вам потребуется выполнить следующие действия:</span><span class="sxs-lookup"><span data-stu-id="b0e32-104">You'll need to complete the following steps to create a conversational bot:</span></span>

1. <span data-ttu-id="b0e32-105">Подготовить среду разработки.</span><span class="sxs-lookup"><span data-stu-id="b0e32-105">Prepare your development environment.</span></span>
1. <span data-ttu-id="b0e32-106">Создать веб-службу.</span><span class="sxs-lookup"><span data-stu-id="b0e32-106">Create your web service.</span></span>
1. <span data-ttu-id="b0e32-107">Зарегистрировать веб-службу в качестве бота в Microsoft Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="b0e32-107">Register your web service as a bot with Microsoft Bot Framework.</span></span>
1. <span data-ttu-id="b0e32-108">Создать манифест приложения и пакет приложения.</span><span class="sxs-lookup"><span data-stu-id="b0e32-108">Create your app manifest and your app package.</span></span>
1. <span data-ttu-id="b0e32-109">Отправить свой пакет в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="b0e32-109">Upload your package to Microsoft Teams.</span></span>

<span data-ttu-id="b0e32-110">Создание веб-службы, регистрация веб-службы и создание пакета приложения с помощью Bot Framework могут осуществляться в любом порядке. Но поскольку эти три действия тесно связаны, независимо от порядка их выполнения вам потребуется вернуться, чтобы обновить остальные из них.</span><span class="sxs-lookup"><span data-stu-id="b0e32-110">Creating your web service, registering your web service, and creating your app package, with the Bot Framework can be done in any order; however, because the three pieces are so intertwined, no matter in which order you do them, you'll need to return to update the others.</span></span> <span data-ttu-id="b0e32-111">Для вашей регистрации требуется конечная точка обмена сообщениями из развернутой веб-службы, а вашей веб-службе необходим идентификатор и пароль, созданный при регистрации.</span><span class="sxs-lookup"><span data-stu-id="b0e32-111">Your registration needs the messaging endpoint from your deployed web service and your web service needs the ID and password created from your registration.</span></span> <span data-ttu-id="b0e32-112">Манифесту приложения также требуется идентификатор регистрации, чтобы подключить Teams к вашей веб-службе.</span><span class="sxs-lookup"><span data-stu-id="b0e32-112">Your app manifest also needs the registration ID to connect Teams to your web service.</span></span>

<span data-ttu-id="b0e32-113">В процессе создания бота вы будете регулярно переходить от изменения манифеста приложения к развертыванию кода в веб-службе.</span><span class="sxs-lookup"><span data-stu-id="b0e32-113">As you're building your bot, you'll regularly move between changing your app manifest and deploying code to your web service.</span></span> <span data-ttu-id="b0e32-114">При работе с манифестом приложения учитывайте, что можно вручную выполнять действия с файлом JSON или вносить изменения с помощью App Studio.</span><span class="sxs-lookup"><span data-stu-id="b0e32-114">When working with the app manifest, keep in mind you can either manually manipulate the JSON file, or make changes through App Studio.</span></span> <span data-ttu-id="b0e32-115">В любом случае вам потребуется повторно развернуть (отправить) свое приложение в Teams, если вы вносите изменения в манифест. Однако это не требуется при развертывании изменений в веб-службе.</span><span class="sxs-lookup"><span data-stu-id="b0e32-115">Either way, you'll need to re-deploy (upload) your app in Teams when you make a change to the manifest; however, there's no need to do so when you deploy changes to your web service.</span></span>

<span data-ttu-id="b0e32-116">Дополнительные сведения о платформе Bot Framework см. в [документации по Bot Framework](/azure/bot-service/).</span><span class="sxs-lookup"><span data-stu-id="b0e32-116">See the [Bot Framework Documentation](/azure/bot-service/) for additional information on the Bot Framework.</span></span>

[!include[prepare environment](~/includes/prepare-environment.md)]

## <a name="create-your-web-service"></a><span data-ttu-id="b0e32-117">Создание веб-службы</span><span class="sxs-lookup"><span data-stu-id="b0e32-117">Create your web service</span></span>

<span data-ttu-id="b0e32-118">Основа вашего бота — это веб-служба.</span><span class="sxs-lookup"><span data-stu-id="b0e32-118">The heart of your bot is your web service.</span></span> <span data-ttu-id="b0e32-119">Она определяет единственный маршрут, обычно `/api/messages`, для получения всех запросов.</span><span class="sxs-lookup"><span data-stu-id="b0e32-119">It will define a single route, typically `/api/messages`, on which to receive all requests.</span></span> <span data-ttu-id="b0e32-120">Чтобы приступить к работе, можно воспользоваться одним из нескольких вариантов:</span><span class="sxs-lookup"><span data-stu-id="b0e32-120">To get started, you have a few options to choose from:</span></span>

* <span data-ttu-id="b0e32-121">Начните работу с примером бота для беседы в Teams в [C#/dotnet](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/57.teams-conversation-bot) или [JavaScript](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/57.teams-conversation-bot).</span><span class="sxs-lookup"><span data-stu-id="b0e32-121">Start with the Teams conversation bot sample in either [C#/dotnet](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/57.teams-conversation-bot) or [JavaScript](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/57.teams-conversation-bot).</span></span>
* <span data-ttu-id="b0e32-122">Если вы используете JavaScript, примените [генератор Yeoman для Microsoft Teams](https://github.com/OfficeDev/generator-teams) для формирования своего приложения Teams, включая веб-службу.</span><span class="sxs-lookup"><span data-stu-id="b0e32-122">If you're using JavaScript, use the [Yeoman Generator for Microsoft Teams](https://github.com/OfficeDev/generator-teams) to scaffold your Teams app, including your web service.</span></span> <span data-ttu-id="b0e32-123">Это особенно удобно при создании приложения Teams, содержащего не только бота для беседы.</span><span class="sxs-lookup"><span data-stu-id="b0e32-123">This is particularly helpful when building a Teams app that contains more than just a conversational bot.</span></span>
* <span data-ttu-id="b0e32-124">Создайте веб-службу с нуля.</span><span class="sxs-lookup"><span data-stu-id="b0e32-124">Create your web service from scratch.</span></span> <span data-ttu-id="b0e32-125">Вы можете добавить пакет SDK Bot Framework для своего языка или работать непосредственно с полезными данными JSON.</span><span class="sxs-lookup"><span data-stu-id="b0e32-125">You can choose to add the Bot Framework SDK for your language, or you can work directly with the JSON payloads.</span></span>

## <a name="register-your-web-service-with-the-bot-framework"></a><span data-ttu-id="b0e32-126">Регистрация веб-службы в Bot Framework</span><span class="sxs-lookup"><span data-stu-id="b0e32-126">Register your web service with the Bot Framework</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b0e32-127">При регистрации веб-службы обязательно присвойте параметру **Отображаемое имя** такое же имя, которое вы использовали для параметра **Краткое имя** в манифесте приложения.</span><span class="sxs-lookup"><span data-stu-id="b0e32-127">When registering your web service, be sure to set the **Display name** to the same name you used for your **Short name** in your app manifest.</span></span> <span data-ttu-id="b0e32-128">Если приложение распространяется путем прямой отправки или через каталог приложений организации, сообщения, отправленные в беседу ботом, будут использовать **отображаемое имя**, указанное при регистрации, а не **краткое имя** приложения.</span><span class="sxs-lookup"><span data-stu-id="b0e32-128">When your app is distributed by either direct uploading or through an organization's app catalog, messages sent to a conversation by your bot will use the registration's **Display name** rather than the app's **Short name**.</span></span>

<span data-ttu-id="b0e32-129">Регистрация веб-службы в Bot Framework обеспечивает безопасный канал связи между клиентом Teams и вашей веб-службой.</span><span class="sxs-lookup"><span data-stu-id="b0e32-129">Registering your web service with the Bot Framework provides a secure communication channel between the Teams client and your web service.</span></span> <span data-ttu-id="b0e32-130">Клиент Teams и веб-служба никогда не взаимодействуют напрямую.</span><span class="sxs-lookup"><span data-stu-id="b0e32-130">The Teams client and your web service never communicate directly.</span></span> <span data-ttu-id="b0e32-131">Вместо этого сообщения направляются через службу Bot Framework Service (Microsoft Teams использует отдельный экземпляр этой службы, совместимый со стандартами Office 365).</span><span class="sxs-lookup"><span data-stu-id="b0e32-131">Instead, messages are routed through the Bot Framework Service (Microsoft Teams uses a separate instance of this service that is compliant with Office 365 standards).</span></span>

<span data-ttu-id="b0e32-132">У вас есть два варианта регистрации веб-службы в Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="b0e32-132">You have two options when registering your web service with the Bot Framework.</span></span> <span data-ttu-id="b0e32-133">Чтобы зарегистрировать бота, не используя подписку на Azure, можно применить [App Studio](#using-app-studio) или [портал прежней версии](#in-the-legacy-portal).</span><span class="sxs-lookup"><span data-stu-id="b0e32-133">You can use either [App Studio](#using-app-studio) or the [legacy portal](#in-the-legacy-portal) to register your bot without using an Azure subscription.</span></span> <span data-ttu-id="b0e32-134">Кроме того, если у вас уже есть подписка на Azure (или вы не против ее создать), можно использовать [портал Azure](#with-an-azure-subscription) для регистрации вашей веб-службы.</span><span class="sxs-lookup"><span data-stu-id="b0e32-134">Or, if you already have an Azure subscription (or don't mind creating one), you can use [the Azure portal](#with-an-azure-subscription) to register your web service.</span></span>

### <a name="without-an-azure-subscription"></a><span data-ttu-id="b0e32-135">Без подписки на Azure</span><span class="sxs-lookup"><span data-stu-id="b0e32-135">Without an Azure subscription</span></span>

<span data-ttu-id="b0e32-136">Если вы не хотите регистрировать бота в Azure, вы **должны** использовать ссылку https://dev.botframework.com/bots/new или App Studio.</span><span class="sxs-lookup"><span data-stu-id="b0e32-136">If you do not wish to create your bot registration in Azure, you **must** use either this link - https://dev.botframework.com/bots/new, or App Studio.</span></span> <span data-ttu-id="b0e32-137">Если нажать кнопку *Создать бота* на портале Bot Framework, вы зарегистрируете бота в Microsoft Azure, и вам потребуется предоставить подписку на Azure.</span><span class="sxs-lookup"><span data-stu-id="b0e32-137">If you click on the *Create a bot* button in the Bot Framework portal, you will create your bot registration in Microsoft Azure, and will need to provide an Azure subscription.</span></span> <span data-ttu-id="b0e32-138">Для управления регистрацией или ее переноса в подписку на Azure после создания перейдите на сайт https://dev.botframework.com/bots.</span><span class="sxs-lookup"><span data-stu-id="b0e32-138">To manage your registration or migrate it to an Azure subscription after creation go to: https://dev.botframework.com/bots.</span></span>

<span data-ttu-id="b0e32-139">При изменении свойств существующей регистрации Bot Framework, не зарегистрированной в Azure, отображается столбец "Состояние миграции" и синяя кнопка "Миграция", ведущая на портал Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="b0e32-139">When you edit the properties of an existing Bot Framework registration not registered in Azure, you'll see A "Migration status" column and a blue "Migrate" button that will take you to the Microsoft Azure portal.</span></span> <span data-ttu-id="b0e32-140">Не нажимайте кнопку "Миграция", если это не требуется.</span><span class="sxs-lookup"><span data-stu-id="b0e32-140">Don't select the "Migrate" button unless that's what you want to do.</span></span> <span data-ttu-id="b0e32-141">Вместо этого выберите **имя** бота, и вы сможете изменить его свойства:</span><span class="sxs-lookup"><span data-stu-id="b0e32-141">Instead, select the **name** of the bot and you can edit its properties:</span></span>

   ![Изменение свойств бота](~/assets/images/bots/bf-migrate-bot-to-azure.png)

<span data-ttu-id="b0e32-143">Сценарии, **требующие** регистрации бота в Azure (путем его создания на портале Azure или с помощью миграции):</span><span class="sxs-lookup"><span data-stu-id="b0e32-143">Scenarios when you **must** have your bot registration in Azure (either by creating it in the Azure portal or via migration):</span></span>

* <span data-ttu-id="b0e32-144">Вы хотите использовать [OAuthPrompt](./authentication/auth-flow-bot.md) платформы Bot Framework для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b0e32-144">You want to use the Bot Framework's [OAuthPrompt](./authentication/auth-flow-bot.md) for authentication.</span></span>
* <span data-ttu-id="b0e32-145">Вы хотите включить дополнительные каналы, такие как веб-чат, прямая линия или Скайп.</span><span class="sxs-lookup"><span data-stu-id="b0e32-145">You want to enable additional channels like Web Chat, Direct Line, or Skype.</span></span>

#### <a name="using-app-studio"></a><span data-ttu-id="b0e32-146">Использование App Studio</span><span class="sxs-lookup"><span data-stu-id="b0e32-146">Using App Studio</span></span>

<span data-ttu-id="b0e32-147">*App Studio* — это приложение Teams, помогающее создавать приложения Teams, включая регистрацию вашей веб-службы в виде бота, создание манифеста приложения и пакета приложения, а также обновление параметров и настроек.</span><span class="sxs-lookup"><span data-stu-id="b0e32-147">*App Studio* is a Teams application that helps you build Teams apps, including registering your web service as a bot, creating an app manifest and your app package, and updating settings and configurations.</span></span> <span data-ttu-id="b0e32-148">Оно также содержит библиотеку элементов управления React и настраиваемые примеры для карточек.</span><span class="sxs-lookup"><span data-stu-id="b0e32-148">It also contains a React control library and configurable samples for cards.</span></span> <span data-ttu-id="b0e32-149">См. статью [Начало работы с Teams App Studio](../../concepts/build-and-test/app-studio-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b0e32-149">See [Getting started with Teams App Studio](../../concepts/build-and-test/app-studio-overview.md).</span></span>

<span data-ttu-id="b0e32-150">Помните, что если вы используете App Studio для регистрации веб-службы, вам потребуется перейти на сайт https://dev.botframework.com/bots для управления регистрацией.</span><span class="sxs-lookup"><span data-stu-id="b0e32-150">Remember, if you use App Studio to register your web service you'll need to go to https://dev.botframework.com/bots to manage your registration.</span></span>

#### <a name="in-the-legacy-portal"></a><span data-ttu-id="b0e32-151">На портале прежней версии</span><span class="sxs-lookup"><span data-stu-id="b0e32-151">In the legacy portal</span></span>

<span data-ttu-id="b0e32-152">Создайте регистрацию бота с помощью ссылки https://dev.botframework.com/bots/new.</span><span class="sxs-lookup"><span data-stu-id="b0e32-152">Create your bot registration using this link: https://dev.botframework.com/bots/new.</span></span> <span data-ttu-id="b0e32-153">**После создания бота обязательно добавьте Microsoft Teams в виде канала из списка основных каналов.**</span><span class="sxs-lookup"><span data-stu-id="b0e32-153">**Be sure to add Microsoft Teams as a channel from the featured channels list after creating your bot.**</span></span> <span data-ttu-id="b0e32-154">Вы можете повторно использовать любой сгенерированный вами идентификатор приложения Майкрософт, если вы уже создали пакет или манифест приложения.</span><span class="sxs-lookup"><span data-stu-id="b0e32-154">Feel free to re-use any Microsoft App ID you generated if you've already created your app package/manifest.</span></span>

   ![Страница регистрации в Bot Framework](~/assets/images/bots/bfregister.png)

### <a name="with-an-azure-subscription"></a><span data-ttu-id="b0e32-156">С помощью подписки на Azure</span><span class="sxs-lookup"><span data-stu-id="b0e32-156">With an Azure subscription</span></span>

<span data-ttu-id="b0e32-157">Вы также можете зарегистрировать свою веб-службу, создав ресурс регистрации каналов ботов на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="b0e32-157">You can also register your web service by creating a Bot Channels Registration resource in the Azure portal.</span></span>

[!INCLUDE [bot channels registration steps](~/includes/bots/azure-bot-channels-registration.md)]

<span data-ttu-id="b0e32-158">[Портал Bot Framework](https://dev.botframework.com) оптимизирован для регистрации ботов в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="b0e32-158">The [Bot Framework portal](https://dev.botframework.com) is optimized for registering bots in Microsoft Azure.</span></span> <span data-ttu-id="b0e32-159">Вот некоторые моменты, которые следует знать:</span><span class="sxs-lookup"><span data-stu-id="b0e32-159">Here are some things to know:</span></span>

* <span data-ttu-id="b0e32-160">Каналы Microsoft Teams для ботов, зарегистрированных в Azure, являются **бесплатными**.</span><span class="sxs-lookup"><span data-stu-id="b0e32-160">The Microsoft Teams channel for bots registered on Azure is **free**.</span></span> <span data-ttu-id="b0e32-161">Сообщения, отправленные по каналу Teams, НЕ будут учитываться в числе использованных сообщений для бота.</span><span class="sxs-lookup"><span data-stu-id="b0e32-161">Messages sent over the Teams channel will NOT count towards the consumed messages for the bot.</span></span>
* <span data-ttu-id="b0e32-162">Если вы зарегистрировали бота с помощью Microsoft Azure, код бота не требуется *размещать* в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="b0e32-162">If you register your bot using Microsoft Azure, your bot code doesn't need to be *hosted* on Microsoft Azure.</span></span>
* <span data-ttu-id="b0e32-163">Если вы зарегистрировали бота с помощью портала Microsoft Azure, у вас должна быть учетная запись Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="b0e32-163">If you do register a bot using Microsoft Azure portal, you must have a Microsoft Azure account.</span></span> <span data-ttu-id="b0e32-164">Вы можете [создать ее бесплатно](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="b0e32-164">You can [create one for free](https://azure.microsoft.com/free/).</span></span> <span data-ttu-id="b0e32-165">Чтобы подтвердить свою личность при создании учетной записи Azure, вам потребуется предоставить кредитную карту, но с нее не будет взиматься плата. Создание и использование ботов в Microsoft Teams всегда бесплатно.</span><span class="sxs-lookup"><span data-stu-id="b0e32-165">To verify your identity when you create an Azure account, you must provide a credit card, but it won't be charged; it's always free to create and use bots with Microsoft Teams.</span></span>

## <a name="create-your-app-manifest-and-package"></a><span data-ttu-id="b0e32-166">Создание манифеста и пакета приложения</span><span class="sxs-lookup"><span data-stu-id="b0e32-166">Create your app manifest and package</span></span>

<span data-ttu-id="b0e32-167">[Манифест приложения](~/resources/schema/manifest-schema.md) определяет метаданные для приложения, точки расширения, используемые приложением, и указатели на веб-службы, к которым подключаются эти точки расширения.</span><span class="sxs-lookup"><span data-stu-id="b0e32-167">Your [app manifest](~/resources/schema/manifest-schema.md) defines the metadata for your app, the extension points your app is using, and pointers to the web services those extension points connect to.</span></span> <span data-ttu-id="b0e32-168">Вы можете использовать App Studio для создания манифеста приложения или создать его вручную.</span><span class="sxs-lookup"><span data-stu-id="b0e32-168">You can either use App Studio to help you create your app manifest, or create it manually.</span></span>

### <a name="add-using-app-studio"></a><span data-ttu-id="b0e32-169">Добавление с помощью App Studio</span><span class="sxs-lookup"><span data-stu-id="b0e32-169">Add using App Studio</span></span>

1. <span data-ttu-id="b0e32-170">В клиенте Teams откройте App Studio из меню переполнения **...** на панели навигации слева.</span><span class="sxs-lookup"><span data-stu-id="b0e32-170">In the Teams client, open App Studio from the **...** overflow menu on the left navigation rail.</span></span> <span data-ttu-id="b0e32-171">Если приложение App Studio еще не установлено, это можно сделать, выполнив его поиск.</span><span class="sxs-lookup"><span data-stu-id="b0e32-171">If App Studio isn't already installed, you can do so by searching for it.</span></span>
2. <span data-ttu-id="b0e32-172">На вкладке **Редактор манифеста** нажмите кнопку **Создать приложение** (а если вы добавляете бота в существующее приложение, можно импортировать пакет приложения).</span><span class="sxs-lookup"><span data-stu-id="b0e32-172">On the **Manifest editor** tab select **Create a new app** (or if you're adding a bot to an existing app, you can import your app package)</span></span>
3. <span data-ttu-id="b0e32-173">Добавьте сведения о приложении (см. [определение схемы манифеста](~/resources/schema/manifest-schema.md) с полным описанием каждого поля).</span><span class="sxs-lookup"><span data-stu-id="b0e32-173">Add your app details (see [manifest schema definition](~/resources/schema/manifest-schema.md) for full descriptions of each field).</span></span>
4. <span data-ttu-id="b0e32-174">На вкладке **Боты** нажмите кнопку **Настройка**.</span><span class="sxs-lookup"><span data-stu-id="b0e32-174">On the **Bots** tab select the **Setup** button.</span></span>
5. <span data-ttu-id="b0e32-175">Вы можете создать новую регистрацию веб-службы (**Новый бот**) или, если вы уже зарегистрировали одну из них, выберите элемент **Существующий бот**.</span><span class="sxs-lookup"><span data-stu-id="b0e32-175">You can either create a new web service registration (**New bot**), or if you've already registered one, select **Existing bot**.</span></span>
6. <span data-ttu-id="b0e32-176">Выберите возможности и области, которые нужны для бота.</span><span class="sxs-lookup"><span data-stu-id="b0e32-176">Select the capabilities and scopes your bot will need.</span></span>
7. <span data-ttu-id="b0e32-177">При необходимости обновите адрес конечной точки бота, чтобы он указывал на вашего бота.</span><span class="sxs-lookup"><span data-stu-id="b0e32-177">If necessary, update your bot endpoint address to point to your bot.</span></span> <span data-ttu-id="b0e32-178">Он должен выглядеть примерно следующим образом: `https://someplace.com/api/messages`.</span><span class="sxs-lookup"><span data-stu-id="b0e32-178">It should look something like `https://someplace.com/api/messages`.</span></span>
8. <span data-ttu-id="b0e32-179">При необходимости добавьте [команды бота](~/bots/how-to/create-a-bot-commands-menu.md).</span><span class="sxs-lookup"><span data-stu-id="b0e32-179">Optionally, add [bot commands](~/bots/how-to/create-a-bot-commands-menu.md).</span></span>
9. <span data-ttu-id="b0e32-180">Кроме того, вы можете скачать готовый пакет приложения на вкладке **Тестирование и распространение**.</span><span class="sxs-lookup"><span data-stu-id="b0e32-180">Optionally, you can download your completed app package from the **Test and distribute** tab.</span></span>

### <a name="create-it-manually"></a><span data-ttu-id="b0e32-181">Создание вручную</span><span class="sxs-lookup"><span data-stu-id="b0e32-181">Create it manually</span></span>

<span data-ttu-id="b0e32-182">Как и в случае расширений для обмена сообщениями и вкладок, вам нужно обновить [манифест приложения](~/resources/schema/manifest-schema.md), чтобы определить своего бота.</span><span class="sxs-lookup"><span data-stu-id="b0e32-182">As with messaging extensions and tabs, you update the [app-manifest](~/resources/schema/manifest-schema.md) to define your bot.</span></span> <span data-ttu-id="b0e32-183">Добавьте новую структуру JSON верхнего уровня в манифест приложения с использованием свойства `bots`.</span><span class="sxs-lookup"><span data-stu-id="b0e32-183">Add new top-level JSON structure in your app manifest with the `bots` property.</span></span>

|<span data-ttu-id="b0e32-184">Имя</span><span class="sxs-lookup"><span data-stu-id="b0e32-184">Name</span></span>| <span data-ttu-id="b0e32-185">Тип</span><span class="sxs-lookup"><span data-stu-id="b0e32-185">Type</span></span>| <span data-ttu-id="b0e32-186">Максимальный размер</span><span class="sxs-lookup"><span data-stu-id="b0e32-186">Maximum size</span></span> | <span data-ttu-id="b0e32-187">Обязательный</span><span class="sxs-lookup"><span data-stu-id="b0e32-187">Required</span></span> | <span data-ttu-id="b0e32-188">Описание</span><span class="sxs-lookup"><span data-stu-id="b0e32-188">Description</span></span>|
|---|---|---|---|---|
|`botId`|<span data-ttu-id="b0e32-189">String</span><span class="sxs-lookup"><span data-stu-id="b0e32-189">String</span></span>|<span data-ttu-id="b0e32-190">64 символа</span><span class="sxs-lookup"><span data-stu-id="b0e32-190">64 characters</span></span>|<span data-ttu-id="b0e32-191">✔</span><span class="sxs-lookup"><span data-stu-id="b0e32-191">✔</span></span>|<span data-ttu-id="b0e32-192">Уникальный идентификатор приложения Майкрософт для бота, зарегистрированный в Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="b0e32-192">The unique Microsoft app ID for the bot as registered with the Bot Framework.</span></span> <span data-ttu-id="b0e32-193">Он может совпадать с общим идентификатором приложения.</span><span class="sxs-lookup"><span data-stu-id="b0e32-193">This may well be the same as the overall app ID.</span></span>|
|`needsChannelSelector`|<span data-ttu-id="b0e32-194">Логический</span><span class="sxs-lookup"><span data-stu-id="b0e32-194">Boolean</span></span>|||<span data-ttu-id="b0e32-195">Описывает, использует ли бот пользовательское указание для добавления бота в определенный канал.</span><span class="sxs-lookup"><span data-stu-id="b0e32-195">Describes whether or not the bot utilizes a user hint to add the bot to a specific channel.</span></span> <span data-ttu-id="b0e32-196">Значение по умолчанию: `false`.</span><span class="sxs-lookup"><span data-stu-id="b0e32-196">Default: `false`.</span></span>|
|`isNotificationOnly`|<span data-ttu-id="b0e32-197">Логический</span><span class="sxs-lookup"><span data-stu-id="b0e32-197">Boolean</span></span>|||<span data-ttu-id="b0e32-198">Указывает, является ли бот односторонним и только для уведомлений, в отличие от бота для беседы.</span><span class="sxs-lookup"><span data-stu-id="b0e32-198">Indicates whether a bot is a one-way, notification-only bot, as opposed to a conversational bot.</span></span> <span data-ttu-id="b0e32-199">Значение по умолчанию: `false`.</span><span class="sxs-lookup"><span data-stu-id="b0e32-199">Default: `false`.</span></span>|
|`supportsFiles`|<span data-ttu-id="b0e32-200">Логический</span><span class="sxs-lookup"><span data-stu-id="b0e32-200">Boolean</span></span>|||<span data-ttu-id="b0e32-201">Указывает, поддерживает ли бот возможность отправки и скачивания файлов в личном чате.</span><span class="sxs-lookup"><span data-stu-id="b0e32-201">Indicates whether the bot supports the ability to upload/download files in personal chat.</span></span> <span data-ttu-id="b0e32-202">Значение по умолчанию: `false`.</span><span class="sxs-lookup"><span data-stu-id="b0e32-202">Default: `false`.</span></span>|
|`scopes`|<span data-ttu-id="b0e32-203">Массив перечислений</span><span class="sxs-lookup"><span data-stu-id="b0e32-203">Array of enum</span></span>|<span data-ttu-id="b0e32-204">3</span><span class="sxs-lookup"><span data-stu-id="b0e32-204">3</span></span>|<span data-ttu-id="b0e32-205">✔</span><span class="sxs-lookup"><span data-stu-id="b0e32-205">✔</span></span>|<span data-ttu-id="b0e32-206">Указывает, предлагает ли бот функции в контексте канала в `team`, в групповом чате (`groupchat`) или функции, ограниченные только отдельным пользователем (`personal`).</span><span class="sxs-lookup"><span data-stu-id="b0e32-206">Specifies whether the bot offers an experience in the context of a channel in a `team`, in a group chat (`groupchat`), or an experience scoped to an individual user alone (`personal`).</span></span> <span data-ttu-id="b0e32-207">Эти параметры не являются исключающими.</span><span class="sxs-lookup"><span data-stu-id="b0e32-207">These options are non-exclusive.</span></span>|

<span data-ttu-id="b0e32-208">При необходимости можно определить один или несколько списков команд, которые ваш бот может рекомендовать для пользователей.</span><span class="sxs-lookup"><span data-stu-id="b0e32-208">Optionally, you can define one or more lists of commands that your bot can recommend to users.</span></span> <span data-ttu-id="b0e32-209">Объект является массивом (не более 2 элементов), и все элементы относятся к типу `object`.</span><span class="sxs-lookup"><span data-stu-id="b0e32-209">The object is an array (maximum of 2 elements) with all elements of type `object`.</span></span> <span data-ttu-id="b0e32-210">Для каждой области, поддерживаемой ботом, требуется определить отдельный список команд.</span><span class="sxs-lookup"><span data-stu-id="b0e32-210">You must define a separate command list for each scope that your bot supports.</span></span> <span data-ttu-id="b0e32-211">Дополнительные сведения *см.* в статье [Меню ботов](./create-a-bot-commands-menu.md).</span><span class="sxs-lookup"><span data-stu-id="b0e32-211">*See* [Bot menus](./create-a-bot-commands-menu.md), for more information.</span></span>

|<span data-ttu-id="b0e32-212">Имя</span><span class="sxs-lookup"><span data-stu-id="b0e32-212">Name</span></span>| <span data-ttu-id="b0e32-213">Тип</span><span class="sxs-lookup"><span data-stu-id="b0e32-213">Type</span></span>| <span data-ttu-id="b0e32-214">Максимальный размер</span><span class="sxs-lookup"><span data-stu-id="b0e32-214">Maximum size</span></span> | <span data-ttu-id="b0e32-215">Обязательный</span><span class="sxs-lookup"><span data-stu-id="b0e32-215">Required</span></span> | <span data-ttu-id="b0e32-216">Описание</span><span class="sxs-lookup"><span data-stu-id="b0e32-216">Description</span></span>|
|---|---|---|---|---|
|`items.scopes`|<span data-ttu-id="b0e32-217">массив перечислений</span><span class="sxs-lookup"><span data-stu-id="b0e32-217">array of enum</span></span>|<span data-ttu-id="b0e32-218">3</span><span class="sxs-lookup"><span data-stu-id="b0e32-218">3</span></span>|<span data-ttu-id="b0e32-219">✔</span><span class="sxs-lookup"><span data-stu-id="b0e32-219">✔</span></span>|<span data-ttu-id="b0e32-220">Указывает область, для которой действует список команд.</span><span class="sxs-lookup"><span data-stu-id="b0e32-220">Specifies the scope for which the command list is valid.</span></span> <span data-ttu-id="b0e32-221">Возможны значения `team`, `personal` и `groupchat`.</span><span class="sxs-lookup"><span data-stu-id="b0e32-221">Options are `team`, `personal`, and `groupchat`.</span></span>|
|`items.commands`|<span data-ttu-id="b0e32-222">массив объектов</span><span class="sxs-lookup"><span data-stu-id="b0e32-222">array of objects</span></span>|<span data-ttu-id="b0e32-223">10</span><span class="sxs-lookup"><span data-stu-id="b0e32-223">10</span></span>|<span data-ttu-id="b0e32-224">✔</span><span class="sxs-lookup"><span data-stu-id="b0e32-224">✔</span></span>|<span data-ttu-id="b0e32-225">Массив команд, поддерживаемых ботом:</span><span class="sxs-lookup"><span data-stu-id="b0e32-225">An array of commands the bot supports:</span></span><br><span data-ttu-id="b0e32-226">`title`: имя команды бота (строка, 32)</span><span class="sxs-lookup"><span data-stu-id="b0e32-226">`title`: the bot command name (string, 32)</span></span><br><span data-ttu-id="b0e32-227">`description`: простое описание или пример синтаксиса команды и ее аргумента (строка, 128)</span><span class="sxs-lookup"><span data-stu-id="b0e32-227">`description`: a simple description or example of the command syntax and its argument (string, 128)</span></span>|

#### <a name="simple-manifest-example"></a><span data-ttu-id="b0e32-228">Пример простого манифеста</span><span class="sxs-lookup"><span data-stu-id="b0e32-228">Simple manifest example</span></span>

<span data-ttu-id="b0e32-229">Пример ниже является простым объектом бота с двумя определенными списками команд.</span><span class="sxs-lookup"><span data-stu-id="b0e32-229">The example below is a simple bot object, with two command lists defined.</span></span> <span data-ttu-id="b0e32-230">Это не весь файл манифеста приложения, а только часть, относящаяся к расширениям для обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="b0e32-230">This is not the entire app manifest file, just the part specific to messaging extensions.</span></span>

```json
...
  "bots": [
    {
      "botId": "%MICROSOFT-APP-ID-REGISTERED-WITH-BOT-FRAMEWORK%",
      "needsChannelSelector": false,
      "isNotificationOnly": false,
      "scopes": [ "team", "personal", "groupchat" ],
      "supportsFiles": true,
      "commandLists": [
        {
          "scopes": [ "team", "groupchat" ],
          "commands": [
            {
              "title": "Command 1",
              "description": "Description of Command 1"
            },
            {
              "title": "Command N",
              "description": "Description of Command N"
            }
          ]
        },
        {
          "scopes": [ "personal", "groupchat" ],
          "commands": [
            {
              "title": "Personal command 1",
              "description": "Description of Personal command 1"
            },
            {
              "title": "Personal command N",
              "description": "Description of Personal command N"
            }
          ]
        }
      ]
    }
  ],
...
```

#### <a name="create-your-app-package-manually"></a><span data-ttu-id="b0e32-231">Создание пакета приложения вручную</span><span class="sxs-lookup"><span data-stu-id="b0e32-231">Create your app package manually</span></span>

<span data-ttu-id="b0e32-232">Чтобы создать пакет приложения, требуется добавить манифест приложения и (необязательно) значки приложения в ZIP-файл архива.</span><span class="sxs-lookup"><span data-stu-id="b0e32-232">To create an app package, you need to add your app manifest and (optionally) your app icons to a .zip archive file.</span></span> <span data-ttu-id="b0e32-233">Полные сведения см. в статье [Создание пакета приложения](~/concepts/build-and-test/apps-package.md).</span><span class="sxs-lookup"><span data-stu-id="b0e32-233">See [Create your app package](~/concepts/build-and-test/apps-package.md) for complete details.</span></span> <span data-ttu-id="b0e32-234">Убедитесь, что ZIP-архив содержит только необходимые файлы без дополнительной вложенной структуры папок.</span><span class="sxs-lookup"><span data-stu-id="b0e32-234">Make sure your .zip archive contains only the necessary files, and has no additional folder structure inside of it.</span></span>

## <a name="upload-your-package-to-microsoft-teams"></a><span data-ttu-id="b0e32-235">Отправка пакета в Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="b0e32-235">Upload your package to Microsoft Teams</span></span>

> [!NOTE]
> <span data-ttu-id="b0e32-236">Чтобы успешно загрузить бота, ваш администратор клиента должен [разрешить загрузку](/microsoftteams/manage-apps#manage-org-wide-app-settings) сторонних или пользовательских приложений в Teams.</span><span class="sxs-lookup"><span data-stu-id="b0e32-236">To successfully upload your bot, your tenant admin must first [allow uploading](/microsoftteams/manage-apps#manage-org-wide-app-settings) third-party or custom apps in Teams.</span></span>

<span data-ttu-id="b0e32-237">Если вы используете App Studio, можно установить приложение из вкладки **Тестирование и распространение** раздела **Редактор манифеста**.</span><span class="sxs-lookup"><span data-stu-id="b0e32-237">If you've been using App Studio, you can install your app from the **Test and distribute** tab of the **Manifest editor**.</span></span> <span data-ttu-id="b0e32-238">Или можно установить пакет приложения, открыв меню переполнения `...` на панели навигации слева, выбрав **Другие приложения** и щелкнув ссылку **Загрузить пользовательское приложение**.</span><span class="sxs-lookup"><span data-stu-id="b0e32-238">Alternatively, you can install your app package by clicking the `...` overflow menu from the left navigation rail, clicking **More apps**, then the **Upload a custom app** link.</span></span> <span data-ttu-id="b0e32-239">Чтобы внести дополнительные изменения перед отправкой, можно также импортировать манифест или пакет приложения в App Studio.</span><span class="sxs-lookup"><span data-stu-id="b0e32-239">You can also import an app manifest or app package into App Studio to make additional updates before uploading.</span></span>

## <a name="bots-in-teams-meetings"></a><span data-ttu-id="b0e32-240">Боты на собраниях Teams</span><span class="sxs-lookup"><span data-stu-id="b0e32-240">Bots in Teams meetings</span></span>

<span data-ttu-id="b0e32-241">В собраниях в Teams поддерживаются боты.</span><span class="sxs-lookup"><span data-stu-id="b0e32-241">Teams supports bot invocation during meetings.</span></span> <span data-ttu-id="b0e32-242">Когда бот получает сообщение вызова, он может определить пользователя и клиента по двум деталям: `userId` и `tenantId`.</span><span class="sxs-lookup"><span data-stu-id="b0e32-242">When your bot receives the invoke message, it can identify the user and tenant from `userId` and `tenantId`.</span></span> <span data-ttu-id="b0e32-243">`meetingId` может быть частью объекта `channelData`.</span><span class="sxs-lookup"><span data-stu-id="b0e32-243">The `meetingId` can be found as part of the `channelData` object.</span></span> <span data-ttu-id="b0e32-244">Вы можете использовать `userId` и `meetingId` для запроса к API `GetParticipant`, чтобы получить роли пользователей.</span><span class="sxs-lookup"><span data-stu-id="b0e32-244">Your bot can use the `userId` and `meetingId`  for the `GetParticipant` API request to retrieve user roles.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b0e32-245">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="b0e32-245">Next steps</span></span>

* [<span data-ttu-id="b0e32-246">Основы беседы для ботов</span><span class="sxs-lookup"><span data-stu-id="b0e32-246">Bot conversation basics</span></span>](./conversations/conversation-basics.md)
* [<span data-ttu-id="b0e32-247">Подписка на события беседы</span><span class="sxs-lookup"><span data-stu-id="b0e32-247">Subscribe to conversation events</span></span>](./conversations/subscribe-to-conversation-events.md)
