---
title: Боты вызовов и сетевых собраний
description: Узнайте, как приложения Microsoft Teams могут взаимодействовать с пользователями с помощью голосовых и видео с помощью API Microsoft Graph для звонков и собраний в Интернете.
keywords: вызов вызовов аудио видео IVR голосовых собраний в Интернете
ms.openlocfilehash: 0fcf420ba8d698404d00bb2cab3d61cab2245f40
ms.sourcegitcommit: 49d1ecda14042bf3f368b14c1971618fe979b914
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "51034644"
---
# <a name="calls-and-online-meetings-bots"></a><span data-ttu-id="cc374-104">Боты вызовов и сетевых собраний</span><span class="sxs-lookup"><span data-stu-id="cc374-104">Calls and online meetings bots</span></span>

<span data-ttu-id="cc374-105">С добавлением [API Microsoft Graph](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)для звонков и собраний в Интернете приложения Microsoft Teams теперь могут взаимодействовать с пользователями с помощью голосовой связи и видео.</span><span class="sxs-lookup"><span data-stu-id="cc374-105">With the addition of [Microsoft Graph APIs for calls and online meetings](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true), Microsoft Teams apps can now interact with users in rich ways using voice and video.</span></span> <span data-ttu-id="cc374-106">Эти API позволяют добавлять новые функции, такие как интерактивный голосовой ответ (IVR), управление вызовами и доступ к аудио- и/или видеопотокам в режиме реального времени для звонков и собраний, включая настольный компьютер и общий доступ к приложениям.</span><span class="sxs-lookup"><span data-stu-id="cc374-106">These APIs allow you to add new features such as interactive voice response (IVR), call control, and access to real-time audio and/or video streams for calls and meetings, including desktop and app sharing.</span></span>

<span data-ttu-id="cc374-107">Чтобы использовать эти API Microsoft Graph в приложении Microsoft Teams, создайте бот и укажите некоторые дополнительные сведения и разрешения, которые мы опишем в других местах, но сначала важно понять некоторые основные понятия, терминологию и условности:</span><span class="sxs-lookup"><span data-stu-id="cc374-107">To use these Microsoft Graph APIs in a Microsoft Teams app, you create a bot and specify some additional information and permissions which we'll describe elsewhere, but first, it's important to understand some core concepts, terminology, and conventions:</span></span>

* <span data-ttu-id="cc374-108">**Аудио- и видеозвонков.**</span><span class="sxs-lookup"><span data-stu-id="cc374-108">**Audio/video calls.**</span></span> <span data-ttu-id="cc374-109">Вызовы в Teams могут быть чисто звуковые или аудио- и видео.</span><span class="sxs-lookup"><span data-stu-id="cc374-109">Calls in Teams can be purely audio or audio+video.</span></span> <span data-ttu-id="cc374-110">Для краткости мы не говорим "аудио- и видеозвук" во всем мире; мы просто говорим "вызов".</span><span class="sxs-lookup"><span data-stu-id="cc374-110">For brevity's sake, we don't say "audio/video call" everywhere; we just say "call."</span></span>
* <span data-ttu-id="cc374-111">**Типы вызовов.**</span><span class="sxs-lookup"><span data-stu-id="cc374-111">**Call types.**</span></span> <span data-ttu-id="cc374-112">Вызовы одноранговых (между человеком и ботом) или многопартийные (бот и два или более человек в групповом вызове).</span><span class="sxs-lookup"><span data-stu-id="cc374-112">Calls are either peer-to-peer (between a person and your bot) or multiparty (your bot and two or more people in a group call).</span></span>
  <span data-ttu-id="cc374-113">![](~/assets/images/calls-and-meetings/call-types.png)CallingTypes:</span><span class="sxs-lookup"><span data-stu-id="cc374-113">![CallingTypes](~/assets/images/calls-and-meetings/call-types.png):</span></span>
  * <span data-ttu-id="cc374-114">Пользователь может инициировать одноранговой вызов с ботом или пригласить бота в существующий многопартийный вызов (хотя последний еще не включен в пользовательском интерфейсе Microsoft Teams).</span><span class="sxs-lookup"><span data-stu-id="cc374-114">A user may initiate a peer-to-peer call with your bot or invite your bot into an existing multiparty call (although the latter is not yet enabled in the Microsoft Teams UI).</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="cc374-115">Инициированные пользователем вызовы бота в настоящее время не поддерживаются на мобильной платформе Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="cc374-115">User initiated calls to a bot are currently not supported on Microsoft Teams mobile platform.</span></span> 
  
  * <span data-ttu-id="cc374-116">Разрешения Microsoft Graph не являются необходимыми для пользователя, чтобы инициировать одноранговой вызов с ботом, но дополнительные разрешения необходимы для вашего бота для участия в многопартийном вызове, или для бота, чтобы инициировать одноранговой вызов с пользователем.</span><span class="sxs-lookup"><span data-stu-id="cc374-116">Microsoft Graph permissions aren't necessary for a user to initiate a peer-to-peer call with your bot, but additional permissions are needed for your bot to participate in a multiparty call, or for your bot to initiate a peer-to-peer call with a user.</span></span>
  * <span data-ttu-id="cc374-117">Вызов может начинаться как одноранговой и перерастать в многопартийный.</span><span class="sxs-lookup"><span data-stu-id="cc374-117">A call may start as peer-to-peer and escalate to multiparty.</span></span> <span data-ttu-id="cc374-118">Ваш бот может инициировать эту эскалацию, приглашая других, при условии, что у вашего бота есть соответствующие разрешения.</span><span class="sxs-lookup"><span data-stu-id="cc374-118">Your bot can initiate this escalation by inviting others, provided your bot has the proper permissions.</span></span> <span data-ttu-id="cc374-119">Если у вашего бота нет разрешений на участие в групповых вызовах, а один участник добавляет другую сторону, бот отзовется от вызова.</span><span class="sxs-lookup"><span data-stu-id="cc374-119">If your bot doesn't have permissions to participate in group calls and one participant adds another party, your bot is dropped from the call.</span></span>
* <span data-ttu-id="cc374-120">**Сигнализация.**</span><span class="sxs-lookup"><span data-stu-id="cc374-120">**Signaling.**</span></span> <span data-ttu-id="cc374-121">Существует два типа сигналов : входящий вызов и вызов:</span><span class="sxs-lookup"><span data-stu-id="cc374-121">There are two types of signals — incoming call and in-call:</span></span>
  * <span data-ttu-id="cc374-122">Чтобы получить входящий вызов, необходимо указать конечную точку в настройках бота; эта конечная точка получает уведомление, когда поступает входящий вызов.</span><span class="sxs-lookup"><span data-stu-id="cc374-122">To receive an incoming call, you specify an endpoint in your bot settings; this endpoint receives a notification when an incoming call arrives.</span></span> <span data-ttu-id="cc374-123">Вы можете ответить на вызов, отклонить его или перенаправить его куда-то или кому-то другому.</span><span class="sxs-lookup"><span data-stu-id="cc374-123">You can answer the call, reject it, or redirect it to somewhere or someone else.</span></span>
  <span data-ttu-id="cc374-124">![Типы вызовов](~/assets/images/calls-and-meetings/call-handling.png)</span><span class="sxs-lookup"><span data-stu-id="cc374-124">![Call Types](~/assets/images/calls-and-meetings/call-handling.png)</span></span>
  * <span data-ttu-id="cc374-125">Когда бот находится в вызове, есть API для отключения и размывки, а также для запуска/остановки обмена видео- и настольным контентом с другими участниками.</span><span class="sxs-lookup"><span data-stu-id="cc374-125">When a bot is in a call, there are APIs for muting and unmuting itself and to start/stop sharing video/desktop content with the other participants.</span></span>
  * <span data-ttu-id="cc374-126">Бот также может получить доступ к списку участников, пригласить новых участников и отключить их.</span><span class="sxs-lookup"><span data-stu-id="cc374-126">The bot can also access the list of participants, invite new participants, and mute them.</span></span>
* <span data-ttu-id="cc374-127">**Звонки и собрания в Интернете.**</span><span class="sxs-lookup"><span data-stu-id="cc374-127">**Calls and online meetings.**</span></span> <span data-ttu-id="cc374-128">С точки зрения пользователя Teams существуют два типа онлайн-собраний: внеплановые и запланированные.</span><span class="sxs-lookup"><span data-stu-id="cc374-128">From a Teams user's perspective, there are two kinds of online meetings — ad hoc and scheduled.</span></span> <span data-ttu-id="cc374-129">Однако с точки зрения бота оба они одинаковы.</span><span class="sxs-lookup"><span data-stu-id="cc374-129">However, from a bot's perspective, both are the same.</span></span> <span data-ttu-id="cc374-130">Для бота онлайн-собрание — это всего лишь многопартийный вызов (набор участников) плюс "координаты собраний", которые можно назвать метаданными для собрания: , связанные с собранием, и т. `botId` `chatId` `joinUrl` `startTime` / `endTime` д.</span><span class="sxs-lookup"><span data-stu-id="cc374-130">To a bot, an online meeting is just a multiparty call (the set of participants) plus "meeting coordinates," which you can think of as the metadata for the meeting: `botId`, `chatId` associated with the meeting, `joinUrl`, `startTime`/`endTime`, and more.</span></span>
* <span data-ttu-id="cc374-131">**Мультимедиа в режиме реального времени.**</span><span class="sxs-lookup"><span data-stu-id="cc374-131">**Real-time media.**</span></span> <span data-ttu-id="cc374-132">Если бот участвует в вызове или собрании в Интернете, он должен иметь дело с аудио- и видеопотоками.</span><span class="sxs-lookup"><span data-stu-id="cc374-132">When a bot is participating in a call or online meeting, it must deal with audio and video streams.</span></span> <span data-ttu-id="cc374-133">Когда пользователи разговаривают по вызову, показывают себя на веб-камере или представляют свои экраны на собрании, бот "видит" это как аудио- и/или видеопотоки.</span><span class="sxs-lookup"><span data-stu-id="cc374-133">When users talk on a call, show themselves on a webcam, or present their screens in a meeting, a bot "sees" this as audio and/or video streams.</span></span> <span data-ttu-id="cc374-134">Если бот хочет что-то сказать или представить содержимое экрана, для этого требуется аудио- или видеопоток.</span><span class="sxs-lookup"><span data-stu-id="cc374-134">If a bot wants to say something or present screen content, that requires an audio or video stream.</span></span> <span data-ttu-id="cc374-135">Даже то, что так просто, как говорит бот, "нажмите 0, чтобы добраться до оператора" в сценарии IVR (интерактивный голосовой ответ) означает воспроизведение . Файл WAV.</span><span class="sxs-lookup"><span data-stu-id="cc374-135">Even something as simple as the bot saying, "press 0 to reach the operator" in an IVR (interactive voice response) scenario means playing a .WAV file.</span></span> <span data-ttu-id="cc374-136">В совокупности мы называем  это носителю или носителю в режиме реального времени _(когда_ речь идет о сценариях, в которых мультимедиа необходимо обрабатывать в режиме реального времени, а не для воспроизведения ранее записанных аудио/видео).</span><span class="sxs-lookup"><span data-stu-id="cc374-136">Collectively, we refer to this as _media_ or _real-time media_ (when referring to scenarios where media must be processed in real time, as opposed to playback of previously-recorded audio/video).</span></span> <span data-ttu-id="cc374-137">Исторически работа с потоками мультимедиа, особенно с потоками мультимедиа в режиме реального времени, была чрезвычайно сложной для разработчиков.</span><span class="sxs-lookup"><span data-stu-id="cc374-137">Historically, dealing with media streams, particularly real-time media streams, has been extremely complex for developers.</span></span> <span data-ttu-id="cc374-138">Корпорация Майкрософт  создала медиаплатформу в режиме реального времени для обработки этих случаев использования и разгрузки как можно большей части традиционной "тяжелой" обработки мультимедиа в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="cc374-138">Microsoft has created the _Real-time Media Platform_ to handle these use cases and to offload as much of the traditional "heavy lifting" of real-time media processing as possible.</span></span>  <span data-ttu-id="cc374-139">Когда бот отвечает на входящий звонок или присоединяется к новому или существующему звонку, он должен сообщить платформе мультимедиа в реальном времени, как будет обрабатываться мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="cc374-139">When the bot answers an incoming call, or joins a new or existing call, it needs to tell the Real-time Media Platform how media will be handled.</span></span> <span data-ttu-id="cc374-140">Если вы строите приложение IVR, вы можете разгрузить дорогостоящее аудиообработку в Корпорацию Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="cc374-140">If you're building an IVR application, you can offload the expensive audio processing to Microsoft.</span></span> <span data-ttu-id="cc374-141">Кроме того, если вашему боту требуется прямой доступ к медиапотокам, мы также поддерживаем этот сценарий.</span><span class="sxs-lookup"><span data-stu-id="cc374-141">Alternatively, if your bot requires direct access to media streams, we support that scenario too.</span></span> <span data-ttu-id="cc374-142">Существует два типа обработки мультимедиа:</span><span class="sxs-lookup"><span data-stu-id="cc374-142">There are the two types of media processing:</span></span>
  * <span data-ttu-id="cc374-143">**Средства массовой информации, на которые организована служба.**</span><span class="sxs-lookup"><span data-stu-id="cc374-143">**Service-hosted media.**</span></span> <span data-ttu-id="cc374-144">Основное внимание боты уделяют управлению рабочий процесс приложения (например, вызовы маршрутиза) и обработке аудиозаписи в Microsoft в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="cc374-144">Bots focus on managing application workflow (e.g., routing calls) and offload audio processing to the Microsoft Real-time Media Platform.</span></span> <span data-ttu-id="cc374-145">В средствах массовой информации, на которые есть служба, есть несколько вариантов реализации и реализации бота.</span><span class="sxs-lookup"><span data-stu-id="cc374-145">With service-hosted media, you have several options to implement and host your bot.</span></span> <span data-ttu-id="cc374-146">Медиа-бот, на который есть служба, может быть реализован в качестве службы без состояния, так как не обрабатывает носителю локально.</span><span class="sxs-lookup"><span data-stu-id="cc374-146">A service-hosted media bot can be implemented as a stateless service since it doesn't process media locally.</span></span> <span data-ttu-id="cc374-147">Медиа-боты, на которые есть службы, могут использовать API, например для воспроизведения аудиозайма, записи аудиозаписей или подписки на тона `PlayPrompt` `Record` DTMF (например, для зная, когда пользователь нажал 0, чтобы достичь `SubscribeToTone` оператора).</span><span class="sxs-lookup"><span data-stu-id="cc374-147">Service-hosted media bots can use APIs such as `PlayPrompt` for playing an audio clip, `Record` for recording audio clips, or `SubscribeToTone` for subscribing to DTMF tones (e.g., knowing when a user has pressed 0 to reach the operator).</span></span>
  * <span data-ttu-id="cc374-148">**Носители с хостингом приложений.**</span><span class="sxs-lookup"><span data-stu-id="cc374-148">**Application-hosted media.**</span></span> <span data-ttu-id="cc374-149">Чтобы бот получил прямой доступ к мультимедиа, ему требуется определенное разрешение Graph, но после его получения библиотека мультимедиа в режиме реального времени и [SDK](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder) Graph Calling помогают создавать насыщенные носитли в режиме реального времени, вызывая ботов. [](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)</span><span class="sxs-lookup"><span data-stu-id="cc374-149">For a bot to get direct access to the media, it needs a specific Graph permission, but once your bot has it, the [Real-time Media Library](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) and the [Graph Calling SDK](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder) helps you build rich, real-time media, calling bots.</span></span> <span data-ttu-id="cc374-150">Бот, на который есть приложение, должен быть организован в среде Windows, как описано [ниже.](./requirements-considerations-application-hosted-media-bots.md)</span><span class="sxs-lookup"><span data-stu-id="cc374-150">An Application-hosted bot must be hosted in a Windows environment, as described in more detail [here](./requirements-considerations-application-hosted-media-bots.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="cc374-151">Дальнейшее чтение</span><span class="sxs-lookup"><span data-stu-id="cc374-151">Further reading</span></span>

<span data-ttu-id="cc374-152">Дополнительные сведения о создании и проверке вызовов и сетевых ботов собраний:</span><span class="sxs-lookup"><span data-stu-id="cc374-152">Here's more information on how to create and test calls and online meetings bots:</span></span>

* [<span data-ttu-id="cc374-153">Ссылка на API graph</span><span class="sxs-lookup"><span data-stu-id="cc374-153">Graph API reference</span></span>](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)
* [<span data-ttu-id="cc374-154">Примеры приложений</span><span class="sxs-lookup"><span data-stu-id="cc374-154">Sample apps</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples)
* <span data-ttu-id="cc374-155">[Регистрация бота, который поддерживает вызовы и](./registering-calling-bot.md) собрания в Интернете, а также разрешения [Microsoft Graph для звонков и сетевых ботов собраний](./registering-calling-bot.md#add-microsoft-graph-permissions)</span><span class="sxs-lookup"><span data-stu-id="cc374-155">[Registering a bot that supports calls and online meetings](./registering-calling-bot.md) and [Microsoft Graph permissions for calls and online meetings bots](./registering-calling-bot.md#add-microsoft-graph-permissions)</span></span>
* [<span data-ttu-id="cc374-156">Разработка ботов вызовов и сетевых собраний на локальном компьютере</span><span class="sxs-lookup"><span data-stu-id="cc374-156">How to develop calling and online meeting bots on your local PC</span></span>](./debugging-local-testing-calling-meeting-bots.md)
* <span data-ttu-id="cc374-157">[Дополнительные сведения об обработке мультимедиа](./real-time-media-concepts.md)в режиме реального времени и о том, что необходимо для поддержки средств массовой информации с [хостингом приложений.](./requirements-considerations-application-hosted-media-bots.md)</span><span class="sxs-lookup"><span data-stu-id="cc374-157">[More information on real-time media processing](./real-time-media-concepts.md), and [what's needed to support application-hosted media](./requirements-considerations-application-hosted-media-bots.md)</span></span>
* [<span data-ttu-id="cc374-158">Техническая информация по обработке входящих уведомлений о вызове</span><span class="sxs-lookup"><span data-stu-id="cc374-158">Technical information on handling incoming call notifications</span></span>](./call-notifications.md)
