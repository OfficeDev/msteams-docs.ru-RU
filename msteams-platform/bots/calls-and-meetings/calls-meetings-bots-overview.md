---
title: Боты вызовов и сетевых собраний
description: Узнайте, как приложения Microsoft Teams могут взаимодействовать с пользователями с помощью голосовых и видео с помощью API Microsoft Graph для звонков и собраний в Интернете.
keywords: вызов вызовов аудио видео IVR голосовых собраний в Интернете
ms.openlocfilehash: 0fcf420ba8d698404d00bb2cab3d61cab2245f40
ms.sourcegitcommit: 49d1ecda14042bf3f368b14c1971618fe979b914
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "51034644"
---
# <a name="calls-and-online-meetings-bots"></a>Боты вызовов и сетевых собраний

С добавлением [API Microsoft Graph](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)для звонков и собраний в Интернете приложения Microsoft Teams теперь могут взаимодействовать с пользователями с помощью голосовой связи и видео. Эти API позволяют добавлять новые функции, такие как интерактивный голосовой ответ (IVR), управление вызовами и доступ к аудио- и/или видеопотокам в режиме реального времени для звонков и собраний, включая настольный компьютер и общий доступ к приложениям.

Чтобы использовать эти API Microsoft Graph в приложении Microsoft Teams, создайте бот и укажите некоторые дополнительные сведения и разрешения, которые мы опишем в других местах, но сначала важно понять некоторые основные понятия, терминологию и условности:

* **Аудио- и видеозвонков.** Вызовы в Teams могут быть чисто звуковые или аудио- и видео. Для краткости мы не говорим "аудио- и видеозвук" во всем мире; мы просто говорим "вызов".
* **Типы вызовов.** Вызовы одноранговых (между человеком и ботом) или многопартийные (бот и два или более человек в групповом вызове).
  ![](~/assets/images/calls-and-meetings/call-types.png)CallingTypes:
  * Пользователь может инициировать одноранговой вызов с ботом или пригласить бота в существующий многопартийный вызов (хотя последний еще не включен в пользовательском интерфейсе Microsoft Teams).
  
  > [!NOTE]
  > Инициированные пользователем вызовы бота в настоящее время не поддерживаются на мобильной платформе Microsoft Teams. 
  
  * Разрешения Microsoft Graph не являются необходимыми для пользователя, чтобы инициировать одноранговой вызов с ботом, но дополнительные разрешения необходимы для вашего бота для участия в многопартийном вызове, или для бота, чтобы инициировать одноранговой вызов с пользователем.
  * Вызов может начинаться как одноранговой и перерастать в многопартийный. Ваш бот может инициировать эту эскалацию, приглашая других, при условии, что у вашего бота есть соответствующие разрешения. Если у вашего бота нет разрешений на участие в групповых вызовах, а один участник добавляет другую сторону, бот отзовется от вызова.
* **Сигнализация.** Существует два типа сигналов : входящий вызов и вызов:
  * Чтобы получить входящий вызов, необходимо указать конечную точку в настройках бота; эта конечная точка получает уведомление, когда поступает входящий вызов. Вы можете ответить на вызов, отклонить его или перенаправить его куда-то или кому-то другому.
  ![Типы вызовов](~/assets/images/calls-and-meetings/call-handling.png)
  * Когда бот находится в вызове, есть API для отключения и размывки, а также для запуска/остановки обмена видео- и настольным контентом с другими участниками.
  * Бот также может получить доступ к списку участников, пригласить новых участников и отключить их.
* **Звонки и собрания в Интернете.** С точки зрения пользователя Teams существуют два типа онлайн-собраний: внеплановые и запланированные. Однако с точки зрения бота оба они одинаковы. Для бота онлайн-собрание — это всего лишь многопартийный вызов (набор участников) плюс "координаты собраний", которые можно назвать метаданными для собрания: , связанные с собранием, и т. `botId` `chatId` `joinUrl` `startTime` / `endTime` д.
* **Мультимедиа в режиме реального времени.** Если бот участвует в вызове или собрании в Интернете, он должен иметь дело с аудио- и видеопотоками. Когда пользователи разговаривают по вызову, показывают себя на веб-камере или представляют свои экраны на собрании, бот "видит" это как аудио- и/или видеопотоки. Если бот хочет что-то сказать или представить содержимое экрана, для этого требуется аудио- или видеопоток. Даже то, что так просто, как говорит бот, "нажмите 0, чтобы добраться до оператора" в сценарии IVR (интерактивный голосовой ответ) означает воспроизведение . Файл WAV. В совокупности мы называем  это носителю или носителю в режиме реального времени _(когда_ речь идет о сценариях, в которых мультимедиа необходимо обрабатывать в режиме реального времени, а не для воспроизведения ранее записанных аудио/видео). Исторически работа с потоками мультимедиа, особенно с потоками мультимедиа в режиме реального времени, была чрезвычайно сложной для разработчиков. Корпорация Майкрософт  создала медиаплатформу в режиме реального времени для обработки этих случаев использования и разгрузки как можно большей части традиционной "тяжелой" обработки мультимедиа в режиме реального времени.  Когда бот отвечает на входящий звонок или присоединяется к новому или существующему звонку, он должен сообщить платформе мультимедиа в реальном времени, как будет обрабатываться мультимедиа. Если вы строите приложение IVR, вы можете разгрузить дорогостоящее аудиообработку в Корпорацию Майкрософт. Кроме того, если вашему боту требуется прямой доступ к медиапотокам, мы также поддерживаем этот сценарий. Существует два типа обработки мультимедиа:
  * **Средства массовой информации, на которые организована служба.** Основное внимание боты уделяют управлению рабочий процесс приложения (например, вызовы маршрутиза) и обработке аудиозаписи в Microsoft в режиме реального времени. В средствах массовой информации, на которые есть служба, есть несколько вариантов реализации и реализации бота. Медиа-бот, на который есть служба, может быть реализован в качестве службы без состояния, так как не обрабатывает носителю локально. Медиа-боты, на которые есть службы, могут использовать API, например для воспроизведения аудиозайма, записи аудиозаписей или подписки на тона `PlayPrompt` `Record` DTMF (например, для зная, когда пользователь нажал 0, чтобы достичь `SubscribeToTone` оператора).
  * **Носители с хостингом приложений.** Чтобы бот получил прямой доступ к мультимедиа, ему требуется определенное разрешение Graph, но после его получения библиотека мультимедиа в режиме реального времени и [SDK](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder) Graph Calling помогают создавать насыщенные носитли в режиме реального времени, вызывая ботов. [](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) Бот, на который есть приложение, должен быть организован в среде Windows, как описано [ниже.](./requirements-considerations-application-hosted-media-bots.md)

## <a name="further-reading"></a>Дальнейшее чтение

Дополнительные сведения о создании и проверке вызовов и сетевых ботов собраний:

* [Ссылка на API graph](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)
* [Примеры приложений](https://github.com/microsoftgraph/microsoft-graph-comms-samples)
* [Регистрация бота, который поддерживает вызовы и](./registering-calling-bot.md) собрания в Интернете, а также разрешения [Microsoft Graph для звонков и сетевых ботов собраний](./registering-calling-bot.md#add-microsoft-graph-permissions)
* [Разработка ботов вызовов и сетевых собраний на локальном компьютере](./debugging-local-testing-calling-meeting-bots.md)
* [Дополнительные сведения об обработке мультимедиа](./real-time-media-concepts.md)в режиме реального времени и о том, что необходимо для поддержки средств массовой информации с [хостингом приложений.](./requirements-considerations-application-hosted-media-bots.md)
* [Техническая информация по обработке входящих уведомлений о вызове](./call-notifications.md)
