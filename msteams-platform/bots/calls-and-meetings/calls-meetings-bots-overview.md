---
title: Звонки и собрания по сети Боты
description: Узнайте, как приложения Microsoft Teams могут взаимодействовать с пользователями с помощью голосовых и видеоконференций с помощью API Microsoft Graph для звонков и собраний по сети.
keywords: звонки по голосовым видео IVR голосовых собраний
ms.openlocfilehash: a571562b9e68bc6b03419a3c0ebcca4cfa61b8b3
ms.sourcegitcommit: d61f14053fc695bc1956bf50e83956613c19ccca
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2020
ms.locfileid: "48452752"
---
# <a name="calls-and-online-meetings-bots"></a>Звонки и собрания по сети Боты

> [!NOTE]
> Поддержка вызовов и интерактивных собраний боты в настоящее время не поддерживается на платформе Microsoft Teams для мобильных устройств. 

С добавлением [API Microsoft Graph для звонков и собраний по сети](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)приложения Microsoft Teams теперь могут взаимодействовать с пользователями с помощью голосовых и видеоконференций. Эти API позволяют добавлять новые функции, такие как интерактивный голосовой отклик (IVR), контроль звонков и доступ к потокам аудио-и видеоданных в режиме реального времени для звонков и собраний, в том числе для общего доступа к рабочему столу и приложениям.

Чтобы использовать эти API Microsoft Graph в приложении Microsoft Teams, создайте Bot и укажите дополнительные сведения и разрешения, которые мы будем описывать в другом месте, но сначала важно понимать некоторые основные концепции, терминологию и соглашения:

* **Вызовы аудио-и видеосвязи.** Звонки в Teams могут быть чисто звуком, аудио и видео. Для краткости мы не говорим о функции "аудио и видео звонки", где угодно; Мы просто говорим "Call".
* **Типы вызовов.** Звонки могут быть одноранговой (между человеком и Bot) или несколькими участниками (абонентом-роботом и двумя или несколькими людьми в группе).
  ![Каллингтипес ](~/assets/images/calls-and-meetings/call-types.png) :
  * Пользователь может инициировать одноранговый звонок с помощью ленты или пригласить к существующему многочастым звонкам (хотя последний еще не включен в пользовательском интерфейсе Microsoft Teams).
  * Разрешения Microsoft Graph не требуются для того, чтобы пользователь инициировал одноранговый звонок с помощью почтового робота, но требуются дополнительные разрешения, необходимые для участия пользователя в многосторонних вызовах, или для запуска одноранговой связи с пользователем.
  * Вызов может начинаться как одноранговый и передан на многосторонние подключения. Ваш Bot может инициировать это распространение, приглашая других пользователей, если у вас есть соответствующие разрешения. Если у пользователя Bot нет разрешений на участие в вызовах групп и один участник добавляет еще одну вечеринку, ваш робот удаляется из вызова.
* **Передачи сигналов.** Существует два типа сигналов — входящий вызов и входящий звонок.
  * Чтобы получить входящий вызов, укажите конечную точку в параметрах Bot; Эта конечная точка получает уведомление при поступлении входящего вызова. Вы можете ответить на звонок, отклонить или перенаправить его кому-то или другому пользователю.
  ![Типы звонков](~/assets/images/calls-and-meetings/call-handling.png)
  * Когда Bot находится в вызове, существуют API для самозапуска и самозапуска, а также для запуска/прекращения совместного использования содержимого видео и рабочего стола с другими участниками.
  * С помощью ленты также можно получить доступ к списку участников, пригласить новых участников и отключить их.
* **Звонки и собрания по сети.** С точки зрения пользователя Teams существует два типа собраний по сети — прямое и запланированное. Однако с точки зрения ленты это не так. В качестве приглашения на собрание по сети используется только многочастый звонок (набор участников) плюс "координаты собрания", которые можно представить как метаданные собрания: `botId` , `chatId` связанные с собранием, `joinUrl` `startTime` / `endTime` и другие.
* **Мультимедиа в режиме реального времени.** Когда Bot участвует в вызове или собрании по сети, он должен работать с потоками аудио-и видеоданных. Когда пользователи говорят о вызове, продемонстрируйте себя на веб-камере или предвидите их экраны на собрании, поступающим в качестве аудио-и видеопотоков. Если Bot хочет сказать нечто или представить содержимое экрана, для которого требуется поток аудио-или видеозаписи. Даже что именно так просто, как говорят, "нажмите 0 для достижения оператора" в сценарии "IVR (интерактивный голосовой голосовый ответ") означает, что воспроизводится воспроизведение. WAV файл. В совокупности мы будем называть его мультимедиа _или_ _мультимедиа реального времени_ (при ссылке на сценарии, в которых необходимо обрабатывать мультимедиа в режиме реального времени, а не воспроизводить ранее записанные аудио-и видеозаписи). Исторически работа с потоками мультимедиа, в особенности потоками мультимедиа в реальном времени, чрезвычайно сложна для разработчиков. Корпорация Майкрософт создала _платформу мультимедиа реального времени_ для обработки этих вариантов использования и отгрузить как можно больше традиционных "тяжелых" тяжелых операций с мультимедиа в реальном времени.  Когда бот отвечает на входящий звонок или присоединяется к новому или существующему звонку, он должен сообщить платформе мультимедиа в реальном времени, как будет обрабатываться мультимедиа. Если вы создаете приложение IVR, вы можете отгрузить дорогостоящую обработку звука в корпорацию Майкрософт. Кроме того, если для ленты необходим прямой доступ к потокам мультимедиа, мы также поддерживаем этот сценарий. Существует два типа обработки мультимедиа:
  * **Носитель, размещенный в службе.** Боты сосредоточиться на управлении рабочим процессом приложений (например, вызовами по маршрутизации) и разгрузкой обработки звука на платформе мультимедиа Microsoft в режиме реального времени. С помощью носителей, размещаемых в службах, существует несколько вариантов реализации и размещения ленты. Размещенный в службе робот можно реализовать в качестве службы без отслеживания состояния, так как он не обрабатывает носители локально. Размещаемые в службах медиа-Боты могут использовать API `PlayPrompt` , например для воспроизведения аудиоклипа, `Record` для записи звуковых клипов или `SubscribeToTone` для подписки на сигналы DTMF (например, если пользователь нажал 0 для достижения оператора).
  * **Носители, размещаемые в приложении.** Для получения прямого доступа к мультимедиа с помощью Bot требуется определенное разрешение на доступ к графике, но если у вас есть устройство чтения, [Библиотека мультимедиа реального времени](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) и [пакет SDK Graph](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder) помогают создавать полнофункциональный мультимедиа реального времени, вызывая Боты. Элемент Bot, размещаемый в приложении, должен размещаться в среде Windows, как описано более [подробно.](./requirements-considerations-application-hosted-media-bots.md)

## <a name="further-reading"></a>Дополнительные материалы

Ниже приведены дополнительные сведения о создании и тестировании вызовов и онлайн-собраний Боты.

* [Справочник по API Graph](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)
* [Примеры приложений](https://github.com/microsoftgraph/microsoft-graph-comms-samples)
* [Регистрация Bot, поддерживающего звонки и собрания по сети](./registering-calling-bot.md) и [разрешения Microsoft Graph на звонки и собрания по сети Боты](./registering-calling-bot.md#add-microsoft-graph-permissions)
* [Как разрабатывать звонки на Боты и собраний по сети на локальном компьютере](./debugging-local-testing-calling-meeting-bots.md)
* [Дополнительные сведения об обработке мультимедиа в режиме реального времени](./real-time-media-concepts.md)и [о том, что необходимо для поддержки мультимедиа, размещаемого в приложении](./requirements-considerations-application-hosted-media-bots.md)
* [Технические сведения об обработке уведомлений о входящем звонке](./call-notifications.md)
