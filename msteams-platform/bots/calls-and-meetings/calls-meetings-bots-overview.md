---
title: Звонки и собрания по сети Боты
description: Узнайте, как приложения Microsoft Teams могут взаимодействовать с пользователями с помощью голосовых и видеоконференций с помощью API Microsoft Graph для звонков и собраний по сети.
keywords: звонки по голосовым видео IVR голосовых собраний
ms.openlocfilehash: fa31bc55221befab1ac1b6b77e116f3fc2e1a935
ms.sourcegitcommit: bfdcd122b6b4ffc52d92320d4741f870c07f0542
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/02/2020
ms.locfileid: "49552432"
---
# <a name="calls-and-online-meetings-bots"></a><span data-ttu-id="55c93-104">Звонки и собрания по сети Боты</span><span class="sxs-lookup"><span data-stu-id="55c93-104">Calls and online meetings bots</span></span>

> [!NOTE]
> <span data-ttu-id="55c93-105">Поддержка вызовов и интерактивных собраний боты в настоящее время не поддерживается на платформе Microsoft Teams для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="55c93-105">Support for calls and online meeting bots is currently not supported on the Microsoft Teams mobile platform.</span></span> 

<span data-ttu-id="55c93-106">С добавлением [API Microsoft Graph для звонков и собраний по сети](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)приложения Microsoft Teams теперь могут взаимодействовать с пользователями с помощью голосовых и видеоконференций.</span><span class="sxs-lookup"><span data-stu-id="55c93-106">With the addition of [Microsoft Graph APIs for calls and online meetings](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true), Microsoft Teams apps can now interact with users in rich ways using voice and video.</span></span> <span data-ttu-id="55c93-107">Эти API позволяют добавлять новые функции, такие как интерактивный голосовой отклик (IVR), контроль звонков и доступ к потокам аудио-и видеоданных в режиме реального времени для звонков и собраний, в том числе для общего доступа к рабочему столу и приложениям.</span><span class="sxs-lookup"><span data-stu-id="55c93-107">These APIs allow you to add new features such as interactive voice response (IVR), call control, and access to real-time audio and/or video streams for calls and meetings, including desktop and app sharing.</span></span>

<span data-ttu-id="55c93-108">Чтобы использовать эти API Microsoft Graph в приложении Microsoft Teams, создайте Bot и укажите дополнительные сведения и разрешения, которые мы будем описывать в другом месте, но сначала важно понимать некоторые основные концепции, терминологию и соглашения:</span><span class="sxs-lookup"><span data-stu-id="55c93-108">To use these Microsoft Graph APIs in a Microsoft Teams app, you create a bot and specify some additional information and permissions which we'll describe elsewhere, but first, it's important to understand some core concepts, terminology, and conventions:</span></span>

* <span data-ttu-id="55c93-109">**Вызовы аудио-и видеосвязи.**</span><span class="sxs-lookup"><span data-stu-id="55c93-109">**Audio/video calls.**</span></span> <span data-ttu-id="55c93-110">Звонки в Teams могут быть чисто звуком, аудио и видео.</span><span class="sxs-lookup"><span data-stu-id="55c93-110">Calls in Teams can be purely audio or audio+video.</span></span> <span data-ttu-id="55c93-111">Для краткости мы не говорим о функции "аудио и видео звонки", где угодно; Мы просто говорим "Call".</span><span class="sxs-lookup"><span data-stu-id="55c93-111">For brevity's sake, we don't say "audio/video call" everywhere; we just say "call."</span></span>
* <span data-ttu-id="55c93-112">**Типы вызовов.**</span><span class="sxs-lookup"><span data-stu-id="55c93-112">**Call types.**</span></span> <span data-ttu-id="55c93-113">Звонки могут быть одноранговой (между человеком и Bot) или несколькими участниками (абонентом-роботом и двумя или несколькими людьми в группе).</span><span class="sxs-lookup"><span data-stu-id="55c93-113">Calls are either peer-to-peer (between a person and your bot) or multiparty (your bot and two or more people in a group call).</span></span>
  <span data-ttu-id="55c93-114">![Каллингтипес ](~/assets/images/calls-and-meetings/call-types.png) :</span><span class="sxs-lookup"><span data-stu-id="55c93-114">![CallingTypes](~/assets/images/calls-and-meetings/call-types.png):</span></span>
  * <span data-ttu-id="55c93-115">Пользователь может инициировать одноранговый звонок с помощью ленты или пригласить к существующему многочастым звонкам (хотя последний еще не включен в пользовательском интерфейсе Microsoft Teams).</span><span class="sxs-lookup"><span data-stu-id="55c93-115">A user may initiate a peer-to-peer call with your bot or invite your bot into an existing multiparty call (although the latter is not yet enabled in the Microsoft Teams UI).</span></span>
  * <span data-ttu-id="55c93-116">Разрешения Microsoft Graph не требуются для того, чтобы пользователь инициировал одноранговый звонок с помощью почтового робота, но требуются дополнительные разрешения, необходимые для участия пользователя в многосторонних вызовах, или для запуска одноранговой связи с пользователем.</span><span class="sxs-lookup"><span data-stu-id="55c93-116">Microsoft Graph permissions aren't necessary for a user to initiate a peer-to-peer call with your bot, but additional permissions are needed for your bot to participate in a multiparty call, or for your bot to initiate a peer-to-peer call with a user.</span></span>
  * <span data-ttu-id="55c93-117">Вызов может начинаться как одноранговый и передан на многосторонние подключения.</span><span class="sxs-lookup"><span data-stu-id="55c93-117">A call may start as peer-to-peer and escalate to multiparty.</span></span> <span data-ttu-id="55c93-118">Ваш Bot может инициировать это распространение, приглашая других пользователей, если у вас есть соответствующие разрешения.</span><span class="sxs-lookup"><span data-stu-id="55c93-118">Your bot can initiate this escalation by inviting others, provided your bot has the proper permissions.</span></span> <span data-ttu-id="55c93-119">Если у пользователя Bot нет разрешений на участие в вызовах групп и один участник добавляет еще одну вечеринку, ваш робот удаляется из вызова.</span><span class="sxs-lookup"><span data-stu-id="55c93-119">If your bot doesn't have permissions to participate in group calls and one participant adds another party, your bot is dropped from the call.</span></span>
* <span data-ttu-id="55c93-120">**Передачи сигналов.**</span><span class="sxs-lookup"><span data-stu-id="55c93-120">**Signaling.**</span></span> <span data-ttu-id="55c93-121">Существует два типа сигналов — входящий вызов и входящий звонок.</span><span class="sxs-lookup"><span data-stu-id="55c93-121">There are two types of signals — incoming call and in-call:</span></span>
  * <span data-ttu-id="55c93-122">Чтобы получить входящий вызов, укажите конечную точку в параметрах Bot; Эта конечная точка получает уведомление при поступлении входящего вызова.</span><span class="sxs-lookup"><span data-stu-id="55c93-122">To receive an incoming call, you specify an endpoint in your bot settings; this endpoint receives a notification when an incoming call arrives.</span></span> <span data-ttu-id="55c93-123">Вы можете ответить на звонок, отклонить или перенаправить его кому-то или другому пользователю.</span><span class="sxs-lookup"><span data-stu-id="55c93-123">You can answer the call, reject it, or redirect it to somewhere or someone else.</span></span>
  <span data-ttu-id="55c93-124">![Типы звонков](~/assets/images/calls-and-meetings/call-handling.png)</span><span class="sxs-lookup"><span data-stu-id="55c93-124">![Call Types](~/assets/images/calls-and-meetings/call-handling.png)</span></span>
  * <span data-ttu-id="55c93-125">Когда Bot находится в вызове, существуют API для самозапуска и самозапуска, а также для запуска/прекращения совместного использования содержимого видео и рабочего стола с другими участниками.</span><span class="sxs-lookup"><span data-stu-id="55c93-125">When a bot is in a call, there are APIs for muting and unmuting itself and to start/stop sharing video/desktop content with the other participants.</span></span>
  * <span data-ttu-id="55c93-126">С помощью ленты также можно получить доступ к списку участников, пригласить новых участников и отключить их.</span><span class="sxs-lookup"><span data-stu-id="55c93-126">The bot can also access the list of participants, invite new participants, and mute them.</span></span>
* <span data-ttu-id="55c93-127">**Звонки и собрания по сети.**</span><span class="sxs-lookup"><span data-stu-id="55c93-127">**Calls and online meetings.**</span></span> <span data-ttu-id="55c93-128">С точки зрения пользователя Teams существует два типа собраний по сети — прямое и запланированное.</span><span class="sxs-lookup"><span data-stu-id="55c93-128">From a Teams user's perspective, there are two kinds of online meetings — ad hoc and scheduled.</span></span> <span data-ttu-id="55c93-129">Однако с точки зрения Bot они одинаковы.</span><span class="sxs-lookup"><span data-stu-id="55c93-129">However, from a bot's perspective, both are the same.</span></span> <span data-ttu-id="55c93-130">В качестве приглашения на собрание по сети используется только многочастый звонок (набор участников) плюс "координаты собрания", которые можно представить как метаданные собрания: `botId` , `chatId` связанные с собранием, `joinUrl` `startTime` / `endTime` и другие.</span><span class="sxs-lookup"><span data-stu-id="55c93-130">To a bot, an online meeting is just a multiparty call (the set of participants) plus "meeting coordinates," which you can think of as the metadata for the meeting: `botId`, `chatId` associated with the meeting, `joinUrl`, `startTime`/`endTime`, and more.</span></span>
* <span data-ttu-id="55c93-131">**Мультимедиа в режиме реального времени.**</span><span class="sxs-lookup"><span data-stu-id="55c93-131">**Real-time media.**</span></span> <span data-ttu-id="55c93-132">Когда Bot участвует в вызове или собрании по сети, он должен работать с потоками аудио-и видеоданных.</span><span class="sxs-lookup"><span data-stu-id="55c93-132">When a bot is participating in a call or online meeting, it must deal with audio and video streams.</span></span> <span data-ttu-id="55c93-133">Когда пользователи говорят о вызове, продемонстрируйте себя на веб-камере или предвидите их экраны на собрании, поступающим в качестве аудио-и видеопотоков.</span><span class="sxs-lookup"><span data-stu-id="55c93-133">When users talk on a call, show themselves on a webcam, or present their screens in a meeting, a bot "sees" this as audio and/or video streams.</span></span> <span data-ttu-id="55c93-134">Если Bot хочет сказать нечто или представить содержимое экрана, для которого требуется поток аудио-или видеозаписи.</span><span class="sxs-lookup"><span data-stu-id="55c93-134">If a bot wants to say something or present screen content, that requires an audio or video stream.</span></span> <span data-ttu-id="55c93-135">Даже что именно так просто, как говорят, "нажмите 0 для достижения оператора" в сценарии "IVR (интерактивный голосовой голосовый ответ") означает, что воспроизводится воспроизведение. WAV файл.</span><span class="sxs-lookup"><span data-stu-id="55c93-135">Even something as simple as the bot saying, "press 0 to reach the operator" in an IVR (interactive voice response) scenario means playing a .WAV file.</span></span> <span data-ttu-id="55c93-136">В совокупности мы будем называть его мультимедиа _или_ _мультимедиа реального времени_ (при ссылке на сценарии, в которых необходимо обрабатывать мультимедиа в режиме реального времени, а не воспроизводить ранее записанные аудио-и видеозаписи).</span><span class="sxs-lookup"><span data-stu-id="55c93-136">Collectively, we refer to this as _media_ or _real-time media_ (when referring to scenarios where media must be processed in real time, as opposed to playback of previously-recorded audio/video).</span></span> <span data-ttu-id="55c93-137">Исторически работа с потоками мультимедиа, в особенности потоками мультимедиа в реальном времени, чрезвычайно сложна для разработчиков.</span><span class="sxs-lookup"><span data-stu-id="55c93-137">Historically, dealing with media streams, particularly real-time media streams, has been extremely complex for developers.</span></span> <span data-ttu-id="55c93-138">Корпорация Майкрософт создала _платформу мультимедиа реального времени_ для обработки этих вариантов использования и отгрузить как можно больше традиционных "тяжелых" тяжелых операций с мультимедиа в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="55c93-138">Microsoft has created the _Real-time Media Platform_ to handle these use cases and to offload as much of the traditional "heavy lifting" of real-time media processing as possible.</span></span>  <span data-ttu-id="55c93-139">Когда бот отвечает на входящий звонок или присоединяется к новому или существующему звонку, он должен сообщить платформе мультимедиа в реальном времени, как будет обрабатываться мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="55c93-139">When the bot answers an incoming call, or joins a new or existing call, it needs to tell the Real-time Media Platform how media will be handled.</span></span> <span data-ttu-id="55c93-140">Если вы создаете приложение IVR, вы можете отгрузить дорогостоящую обработку звука в корпорацию Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="55c93-140">If you're building an IVR application, you can offload the expensive audio processing to Microsoft.</span></span> <span data-ttu-id="55c93-141">Кроме того, если для ленты необходим прямой доступ к потокам мультимедиа, мы также поддерживаем этот сценарий.</span><span class="sxs-lookup"><span data-stu-id="55c93-141">Alternatively, if your bot requires direct access to media streams, we support that scenario too.</span></span> <span data-ttu-id="55c93-142">Существует два типа обработки мультимедиа:</span><span class="sxs-lookup"><span data-stu-id="55c93-142">There are the two types of media processing:</span></span>
  * <span data-ttu-id="55c93-143">**Носитель, размещенный в службе.**</span><span class="sxs-lookup"><span data-stu-id="55c93-143">**Service-hosted media.**</span></span> <span data-ttu-id="55c93-144">Боты сосредоточиться на управлении рабочим процессом приложений (например, вызовами по маршрутизации) и разгрузкой обработки звука на платформе мультимедиа Microsoft в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="55c93-144">Bots focus on managing application workflow (e.g., routing calls) and offload audio processing to the Microsoft Real-time Media Platform.</span></span> <span data-ttu-id="55c93-145">С помощью носителей, размещаемых в службах, существует несколько вариантов реализации и размещения ленты.</span><span class="sxs-lookup"><span data-stu-id="55c93-145">With service-hosted media, you have several options to implement and host your bot.</span></span> <span data-ttu-id="55c93-146">Размещенный в службе робот можно реализовать в качестве службы без отслеживания состояния, так как он не обрабатывает носители локально.</span><span class="sxs-lookup"><span data-stu-id="55c93-146">A service-hosted media bot can be implemented as a stateless service since it doesn't process media locally.</span></span> <span data-ttu-id="55c93-147">Размещаемые в службах медиа-Боты могут использовать API `PlayPrompt` , например для воспроизведения аудиоклипа, `Record` для записи звуковых клипов или `SubscribeToTone` для подписки на сигналы DTMF (например, если пользователь нажал 0 для достижения оператора).</span><span class="sxs-lookup"><span data-stu-id="55c93-147">Service-hosted media bots can use APIs such as `PlayPrompt` for playing an audio clip, `Record` for recording audio clips, or `SubscribeToTone` for subscribing to DTMF tones (e.g., knowing when a user has pressed 0 to reach the operator).</span></span>
  * <span data-ttu-id="55c93-148">**Носители, размещаемые в приложении.**</span><span class="sxs-lookup"><span data-stu-id="55c93-148">**Application-hosted media.**</span></span> <span data-ttu-id="55c93-149">Для получения прямого доступа к мультимедиа с помощью Bot требуется определенное разрешение на доступ к графике, но если у вас есть устройство чтения, [Библиотека мультимедиа реального времени](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) и [пакет SDK Graph](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder) помогают создавать полнофункциональный мультимедиа реального времени, вызывая Боты.</span><span class="sxs-lookup"><span data-stu-id="55c93-149">For a bot to get direct access to the media, it needs a specific Graph permission, but once your bot has it, the [Real-time Media Library](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) and the [Graph Calling SDK](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder) helps you build rich, real-time media, calling bots.</span></span> <span data-ttu-id="55c93-150">Элемент Bot, размещаемый в приложении, должен размещаться в среде Windows, как описано более [подробно.](./requirements-considerations-application-hosted-media-bots.md)</span><span class="sxs-lookup"><span data-stu-id="55c93-150">An Application-hosted bot must be hosted in a Windows environment, as described in more detail [here](./requirements-considerations-application-hosted-media-bots.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="55c93-151">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="55c93-151">Further reading</span></span>

<span data-ttu-id="55c93-152">Ниже приведены дополнительные сведения о создании и тестировании вызовов и онлайн-собраний Боты.</span><span class="sxs-lookup"><span data-stu-id="55c93-152">Here's more information on how to create and test calls and online meetings bots:</span></span>

* [<span data-ttu-id="55c93-153">Справочник по API Graph</span><span class="sxs-lookup"><span data-stu-id="55c93-153">Graph API reference</span></span>](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)
* [<span data-ttu-id="55c93-154">Примеры приложений</span><span class="sxs-lookup"><span data-stu-id="55c93-154">Sample apps</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples)
* <span data-ttu-id="55c93-155">[Регистрация Bot, поддерживающего звонки и собрания по сети](./registering-calling-bot.md) и [разрешения Microsoft Graph на звонки и собрания по сети Боты](./registering-calling-bot.md#add-microsoft-graph-permissions)</span><span class="sxs-lookup"><span data-stu-id="55c93-155">[Registering a bot that supports calls and online meetings](./registering-calling-bot.md) and [Microsoft Graph permissions for calls and online meetings bots](./registering-calling-bot.md#add-microsoft-graph-permissions)</span></span>
* [<span data-ttu-id="55c93-156">Как разрабатывать звонки на Боты и собраний по сети на локальном компьютере</span><span class="sxs-lookup"><span data-stu-id="55c93-156">How to develop calling and online meeting bots on your local PC</span></span>](./debugging-local-testing-calling-meeting-bots.md)
* <span data-ttu-id="55c93-157">[Дополнительные сведения об обработке мультимедиа в режиме реального времени](./real-time-media-concepts.md)и [о том, что необходимо для поддержки мультимедиа, размещаемого в приложении](./requirements-considerations-application-hosted-media-bots.md)</span><span class="sxs-lookup"><span data-stu-id="55c93-157">[More information on real-time media processing](./real-time-media-concepts.md), and [what's needed to support application-hosted media](./requirements-considerations-application-hosted-media-bots.md)</span></span>
* [<span data-ttu-id="55c93-158">Технические сведения об обработке уведомлений о входящем звонке</span><span class="sxs-lookup"><span data-stu-id="55c93-158">Technical information on handling incoming call notifications</span></span>](./call-notifications.md)
