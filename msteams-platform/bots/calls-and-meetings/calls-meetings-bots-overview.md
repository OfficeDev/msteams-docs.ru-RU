---
title: Боты вызовов и сетевых собраний
description: Узнайте, как Microsoft Teams приложения могут взаимодействовать с пользователями с помощью голосовых и видео с помощью API microsoft Graph для звонков и собраний в Интернете, а также узнайте о потоках мультимедиа в режиме реального времени
ms.topic: conceptual
ms.localizationpriority: medium
keywords: вызов вызовов аудио видео IVR голосовых онлайн-собраний в режиме реального времени средства массовой информации бот
ms.openlocfilehash: 17464683c8a5f6aa515d67be721968d56d1d2fb7
ms.sourcegitcommit: af1d0a4041ce215e7863ac12c71b6f1fa3e3ba81
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2021
ms.locfileid: "60889148"
---
# <a name="calls-and-online-meetings-bots"></a>Боты вызовов и сетевых собраний

Боты могут взаимодействовать с Teams и собраниями с помощью голосового, видео- и видеосвязи в режиме реального времени. С [помощью Graph API](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)для звонков и собраний в Интернете Teams приложения теперь могут взаимодействовать с пользователями с помощью голосовых и видеоматериалов для повышения производительности. Эти API позволяют добавлять следующие новые функции:

* Интерактивный голосовой ответ (IVR).
* Управление вызовами.
* Доступ к аудио- и видеопотокам в режиме реального времени, включая настольные компьютеры и общий доступ к приложениям.

Чтобы использовать Graph API в приложении Teams, создайте бот и укажите некоторые дополнительные сведения и разрешения.

Кроме того, медиаплатформа в режиме реального времени позволяет ботам взаимодействовать с Teams и собраниями с помощью обмена голосом, видео и экранами в режиме реального времени. Бот, который участвует в аудио- или видеозвонков и собраниях в Интернете, является обычным Microsoft Teams с несколькими дополнительными функциями, используемыми для регистрации бота.

Манифест Teams с двумя дополнительными настройками и Graph разрешения для microsoft App ID вашего бота и согласие администратора клиента позволяют зарегистрировать `supportsCalling` `supportsVideo` бота. При регистрации бота вызовов и собраний для Teams упоминается URL-адрес Webhook, который является конечной точкой webhook для всех входящих вызовов для вашего бота. Для медиа-бота с хостингом приложения требуется Microsoft. Graph. Библиотека Communications.Calls.Media .NET для доступа к аудио- и видеосетям, а бот должен быть развернут на компьютере Windows Server или гостевой операционной системе сервера Windows Server в Azure. Боты на Teams поддерживают только определенный набор форматов мультимедиа для аудио- и видеоконтента.

Теперь необходимо понять некоторые основные понятия, терминологию и условности.

## <a name="terminologies"></a>Терминология

Следующие основные понятия, терминология и конвенции повеяют об использовании ботов вызовов и сетевых собраний:

* Звуковые или видеозво вызовы
* Типы звонков
* Сигналы
* Звонки и собрания по сети
* Мультимедиа в режиме реального времени

### <a name="audio-or-video-calls"></a>Звуковые или видеозво вызовы

Вызовы в Teams могут быть только аудио или аудио и видео. Вместо звукового или видеозвона используется термин "вызов".

### <a name="call-types"></a>Типы звонков

Вызовы являются одноранговой между человеком и ботом или многопартийными между ботом и двумя или несколькими людьми в групповом вызове.

![Типы вызовов](~/assets/images/calls-and-meetings/call-types.png)

Далее следующую

* Пользователь может инициировать одноранговой вызов с помощью бота или пригласить бота в существующий многопартийный вызов. Многопартийный вызов еще не включен в интерфейсе Teams пользователя.

    > [!NOTE]
    > Инициированные пользователем вызовы бота в настоящее время не поддерживаются на Microsoft Teams платформе.

* Graph для пользователя не требуется инициировать одноранговой вызов с помощью бота. Дополнительные разрешения необходимы для участия бота в многопартийном вызове или для инициирования однорангового звонка с пользователем.
* Вызов может запускаться как одноранговой и в конечном итоге стать многопартийным вызовом. Ваш бот может инициировать многопартийные вызовы, приглашая других, при условии, что у вашего бота есть соответствующие разрешения. Если у вашего бота нет разрешений на участие в групповых вызовах и если участник добавляет другого участника к вызову, ваш бот отпадет от вызова.

### <a name="signals"></a>Сигналы

Существует два типа сигналов: входящий вызов и вызов. Ниже представлены различные функции сигналов:

* Чтобы получить входящий вызов, введите конечную точку в настройках бота. Эта конечная точка получает уведомление при инициировании входящих вызовов. Вы можете ответить на вызов, отклонить его или перенаправить его другому человеку.

    ![Обработка вызовов](~/assets/images/calls-and-meetings/call-handling.png)

* Когда бот находится в вызове, есть API для отключения и размывки бота, а также для запуска или остановки обмена видео или контентом на рабочем столе с другими участниками.
* Бот также может получить доступ к списку участников, пригласить новых участников и отключить их.

### <a name="calls-and-online-meetings"></a>Звонки и собрания по сети

С точки Teams пользователя существуют два типа сетевых собраний, которые являются внеплановые и запланированные. С точки зрения бота, оба собрания в Интернете одинаковы. Для бота он-лайн собрание — это многопартийный вызов между набором участников и включает координаты собраний. Координаты собраний — это метаданные для собрания, в том числе , связанные с собранием, или `botId` `chatId` , и `joinUrl` `startTime` `endTime` т. д.

### <a name="real-time-media"></a>Мультимедиа в режиме реального времени

Если бот участвует в вызове или собрании в Интернете, он должен иметь дело с аудио- и видеопотоками. Когда пользователи разговаривают по вызову, показывают себя на веб-камере или представляют свои экраны на собрании боту, он отображается в качестве аудио- и видеопотоков. Если бот хочет сказать что-то простое, нажмите **0,** чтобы связаться с оператором в сценарии интерактивного голосового ответа (IVR), он должен играть . Файл WAV. В совокупности это называется носителю или носителю в режиме реального времени.

Средства массовой информации в режиме реального времени относятся к сценариям, в которых носители должны обрабатываться в режиме реального времени, в отличие от воспроизведения ранее записанных аудио или видео. Работа с потоками мультимедиа, особенно в режиме реального времени, является чрезвычайно сложной задачей. Корпорация Майкрософт создала медиаплатформу в режиме реального времени для обработки этих сценариев и разгрузки как можно большей части традиционной тяжелой обработки мультимедиа в режиме реального времени. Когда бот отвечает на входящий вызов или присоединяется к новому или существующему вызову, ему необходимо сообщить медиаплатформе в режиме реального времени, как обрабатывается мультимедиа. Если вы строите приложение IVR, вы можете разгрузить дорогостоящее аудиообработку в Корпорацию Майкрософт. Кроме того, если боту требуется прямой доступ к медиапотокам, этот сценарий также поддерживается. Существует два типа обработки мультимедиа:

* **Средства массовой** информации, принимающие службы. Боты фокусируется на управлении процессом работы приложений, например маршрутизацировать вызовы и разгружать аудиозапись в Microsoft Media Platform в режиме реального времени. В средствах массовой информации, на которые есть служба, есть несколько вариантов реализации и реализации бота. Бот для мультимедийного содержимого, размещенного в службе, можно реализовать в виде службы без отслеживания состояния, так как он не обрабатывает мультимедиа в локальном расположении. В средствах массовой информации, на которые есть служба, можно использовать следующие API:

    * `PlayPrompt` для воспроизведения звукового клипа.
    * `Record` для записи аудиозаписей.
    * `SubscribeToTone` для подписки на двутонные многочастотные (DTMF) тона.

    Например, знать, когда пользователь нажал **0,** чтобы добраться до оператора.

* **Носители,** на которые есть приложения. Для того, чтобы бот получил прямой доступ к мультимедиа, ему требуется определенное разрешение Graph. После получения разрешения у [](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)бота библиотека мультимедиа в режиме реального времени и вызов [Graph SDK](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder) помогают создавать богатые носитли в режиме реального времени и вызывать ботов. Бот, размещенный в приложении, должен располагаться в среде Windows. Дополнительные сведения см. [в дополнительных сведениях о средствах](./requirements-considerations-application-hosted-media-bots.md)массовой информации с хостингом приложений.

## <a name="code-sample"></a>Пример кода

| **Название примера** | **Описание** | **Microsoft Graph** |
|---------------|----------|--------|
| Graph связи | Graph связи для взаимодействия с платформой связи Майкрософт. | [View](https://github.com/microsoftgraph/microsoft-graph-comms-samples) |
| Бот вызовов и собраний | Пример приложения демонстартирует, как Бот может создавать вызовы, присоединяться к собранию и переносу вызова. | [View](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/bot-calling-meeting/csharp) |

## <a name="next-step"></a>Следующий этап

> [!div class="nextstepaction"]
> [Звонки и собрания в реальном времени](~/bots/calls-and-meetings/real-time-media-concepts.md)

## <a name="see-also"></a>См. также

- [Graph Ссылка на API](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)
- [Примеры приложений](https://github.com/microsoftgraph/microsoft-graph-comms-samples)
- [Регистрация бота, поддерживаюного вызовы и собрания в Интернете](./registering-calling-bot.md)
- [Graph разрешений для звонков и сетевых ботов собраний](./registering-calling-bot.md#add-graph-permissions)
- [Разработка ботов вызовов и онлайн-собраний на компьютере](./debugging-local-testing-calling-meeting-bots.md)
- [Требования и соображения к медийным ботам с хостингом приложений](./requirements-considerations-application-hosted-media-bots.md)
- [Техническая информация по обработке входящих уведомлений о вызове](./call-notifications.md)
