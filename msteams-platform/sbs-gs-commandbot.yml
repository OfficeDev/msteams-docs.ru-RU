### YamlMime:Tutorial
title: Создание командного бота с помощью JavaScript
metadata:
  title: Создание командного бота с помощью JavaScript
  description: В этом руководстве описано, как создать командный бот с помощью JavaScript, создав командный бот с помощью Набора средств Teams.
  audience: Developer
  level: Beginner
  ms.date: 05/05/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: toolkit/add-capability.md
  nextTutorialTitle: Вернуться к возможности "Добавить"
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: bfb44874b739097005dd45fe57d5124225495b55
  ms.sourcegitcommit: c1032ea4f48c4bbf5446798ff7d46d7e6e9f55d2
  ms.translationtype: MT
  ms.contentlocale: ru-RU
  ms.lasthandoff: 09/27/2022
  ms.locfileid: "68027202"
items:
- durationInMinutes: 1
  content: "Microsoft Teams позволяет автоматизировать повторяющиеся задачи с помощью командного бота. Он отвечает на простые команды, отправляемые в чатах с помощью адаптивных карточек. \n\nВ этом руководстве вы узнаете:\n\n- Создание командного бота с помощью Набора средств Teams.\n- Сведения о структуре каталогов приложения.\n\nЭто пошаговое руководство поможет вам создать командный бот с помощью Набора средств Teams. Вы увидите следующие выходные данные:\n\n  :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/final-output.png\" alt-text=\"окончательные выходные данные\":::\n"
- title: Предварительные требования
  durationInMinutes: 1
  content: "\nНиже приведен список средств, необходимых для создания и развертывания приложений.\n\n| &nbsp; | Установка | Для использования |\n| --- | --- | --- |\n| **Required** | &nbsp; | &nbsp; |\n| &nbsp; | [Visual Studio Code](https://code.visualstudio.com/download) | JavaScript или TypeScript, сборка сред. Используйте последнюю версию. |\n| &nbsp; | [Набор средств Teams](#install-the-teams-toolkit) | Расширение Microsoft Visual Studio Code, которое создает шаблон проекта для вашего приложения. Используйте версию 4.0.0.|\n| &nbsp; | [Node.js](https://nodejs.org/en/download/) | Серверной среды выполнения JavaScript. Используйте версию 14 или 16.|\n| &nbsp; | [Microsoft Teams](https://www.microsoft.com/microsoft-teams/download-app) | Microsoft Teams для совместной работы со всеми пользователями, с которыми вы работаете, с помощью приложений для чата, собраний, зовите и все в одном месте.|\n| &nbsp; | [Microsoft&nbsp; Edge](https://www.microsoft.com/edge) (рекомендуется) или [Google Chrome](https://www.google.com/chrome/) | Браузера со средствами разработчика. |\n| &nbsp; | [Учетная запись разработчика Microsoft 365](/microsoftteams/platform/concepts/build-and-test/prepare-your-o365-tenant) | Доступ к учетной записи Teams с соответствующими разрешениями на установку приложения. |\n\n> [!NOTE]\n> Это руководство тестируются в Teams Toolkit версий 4.0.0 и Nodejs версий 14 и 16. Действия, описанные в этом руководстве, могут работать с другими версиями, но не были протестированные.\n\n## <a name=\"prepare-development-environment\"></a>Подготовка среды разработки\n\nПосле установки необходимых средств настроите среду разработки.\n\n\n### <a name=\"install-the-teams-toolkit\"></a>Установка набора средств Teams\n\nНабор средств Teams помогает упростить процесс разработки с помощью средств для подготовки и развертывания облачных ресурсов для приложения, публикации в магазине Teams и т. д. \n \nНабор средств можно использовать с Visual Studio Code интерфейсом командной строки или интерфейсом командной строки`TeamsFx`.\n\n\n# <a name=\"visual-studio-code\"></a>[Visual Studio Code](#tab/vscode)\n\n1. Откройте Visual Studio Code и выберите **\"** Расширения\" (**CTRL+SHIFT+X** / **⌘⇧-X** или > **view**).\n1. В поле поиска введите **Набор средств Teams**.\n1. Выберите **\"Установить** \" рядом с набором средств Teams.\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/teams-toolkit.png\" alt-text=\"Иллюстрация установки расширения Teams Toolkit.\":::\n\n Значок Набора средств Teams появится на Visual Studio Code боковой панели после установки.\n\n :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/hw-teams-toolkit-sidebar-icon.png\" alt-text=\"На рисунке показан значок Набора средств Teams на Visual Studio Code боковой панели.\":::\n\nНабор средств Teams также можно найти в Visual Studio Code [Marketplace](https://marketplace.visualstudio.com/items?itemName=TeamsDevApp.ms-teams-vscode-extension).\n\n# <a name=\"command-line\"></a>[Командная строка](#tab/cli)\n\nЧтобы установить CLI TeamsFx, используйте диспетчер `npm` пакетов:\n\n``` bash\nnpm install -g @microsoft/teamsfx-cli\n```\n\nВ зависимости от конфигурации может `sudo` потребоваться установить интерфейс командной строки:\n\n``` bash\nsudo npm install -g --unsafe-perm @microsoft/teamsfx-cli\n```\n\nОна чаще используется в системах Linux и macOS.\n\nУбедитесь, что в path добавлен глобальный кэш npm. Этот шаг обычно выполняется как часть Node.js установщика.  \n\nС командой можно использовать интерфейс командной строки `teamsfx` . Убедитесь, что команда работает, выполнив команду `teamsfx -h`.\n\n> [!NOTE]\n> Перед запуском TeamsFx в терминалах PowerShell убедитесь, что включена политика **удаленного** подписанного выполнения для PowerShell.\n\n---\n\n## <a name=\"set-up-your-teams-development-tenant\"></a>Настройка клиента разработки Teams\n\nКлиент **—** это как пространство или контейнер, в котором вы беседируете, делитесь файлами и выполняете собрания для своей организации в Teams. Вы также можете загрузить неопубликованный файл и протестировать приложение.\n\n### <a name=\"check-for-sideloading-option\"></a>Проверка параметра загрузки неопубликованных приложений\n\nПосле создания приложения необходимо загрузить это приложение в Teams, не распространяя его. Это называется загрузкой неопубликованных приложений. Войдите в учетную запись Microsoft 365, чтобы просмотреть этот параметр.\n\n > [!NOTE]\n > Загрузка неопубликованных приложений необходима для предварительного просмотра и тестирования приложений в локальной среде Teams. Включите загрузку неопубликованных приложений для локального просмотра и тестирования приложения в Teams.\n\nУ вас уже есть клиент и у вас есть доступ администратора? Давайте посмотрим, действительно ли вы работаете!\n\nЧтобы проверить загрузку неопубликованных приложений в Teams, выполните следующее.\n\n 1. В клиенте Teams выберите **Store** .\n 1. Выберите **Управление приложениями**\n 1. Выберите **Опубликовать приложение**.\n 1. Найдите параметр для **отправки пользовательского приложения**. Если вы видите этот параметр, загрузка неопубликованных приложений включена.\n\n     :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/upload-custom-app.png\" alt-text=\"На рисунке показан параметр для отправки пользовательского приложения в Teams.\":::\n\n     > [!NOTE]\n     > Обратитесь к администратору Teams, если у вас нет возможности отправить пользовательское приложение.\n\n### <a name=\"create-a-free-teams-developer-tenant-optional\"></a>Создание бесплатного клиента разработчика Teams (необязательно)\n\nЕсли у вас нет учетной записи разработчика Teams, ее можно получить бесплатно. Присоединяйтесь к программе для разработчиков Microsoft 365!\n\n1. Перейдите в [программу для разработчиков Microsoft 365](https://developer.microsoft.com/microsoft-365/dev-program).\n1. Нажмите **кнопку \"Присоединиться сейчас** \" и следуйте инструкциям на экране.\n1. Выберите **\"Настроить подписку E5** \" на экране приветствия.\n1. Настройка учетной записи администратора. После завершения отобразится следующий экран.\n\n    :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/microsoft-365.png\" alt-text=\"Корпорация Майкрософт\":::\n\n1. Войдите в Teams с помощью новой учетной записи администратора. Теперь у вас должен быть параметр **\"Отправить пользовательское приложение** \".\n"
- title: Создание бота команды
  durationInMinutes: 1
  content: "**Создание командного бота с помощью Visual Studio Code**\n\n 1. Откройте Visual Studio Code.\n\n 1. Выберите значок Набор инструментов Teams:::image type=\"icon\" source=\"../msteams-platform/assets/images/teams-toolkit-v2/teams-toolkit-sidebar-icon.png\"::: на боковой панели Visual Studio Code.\n\n 1. Выберите **Создать приложение Teams**.\n\n     :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/create-new-teams-app.png\" alt-text=\"Расположение ссылки &quot;Создать проект&quot; на боковой панели набора средств Teams\":::.\n\n 1. Выберите **\"Создать новое приложение Teams** \", чтобы создать приложение с помощью Набора средств Teams.\n\n     :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-notification-bot/create-new-app.png\" alt-text=\"Мастер начинает создание нового проекта\":::\n\n 1. Убедитесь **, что бот Command** выбран в качестве возможности, которую вы хотите создать в приложении.\n\n     :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/select-bot.png\" alt-text=\"Выбор возможности приложения\":::\n\n 1. Выберите **JavaScript** в качестве языка.\n\n     :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/select-script.png\" alt-text=\"Снимок экрана: выбор языка.\":::\n \n 1. Выберите **папку по умолчанию,** чтобы сохранить корневую папку проекта в расположении по умолчанию.\n\n     :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/select-default-location.png\" alt-text=\"Выберите расположение по умолчанию для хранилища.\":::\n\n    Вы также можете изменить расположение по умолчанию, выполнив следующие действия.\n\n       1. Нажмите **кнопку \"Обзор\"**.\n\n          :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/select-browse.png\" alt-text=\"Выберите &quot;Обзор хранилища&quot;\":::\n\n       1. Выберите расположение для рабочей области проекта.\n       1. Выберите **\"Выбрать папку\"**.\n\n           :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/select-folder.png\" alt-text=\"Выберите папку.\":::\n \n 1. Введите подходящее имя для приложения, например commandbot в качестве имени приложения. \n 1. Выберите **ВВОД**.\n\n     :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/app-name.png\" alt-text=\"Имя приложения.\":::\n\n     > [!NOTE]\n     > Убедитесь, что в имени приложения используются только буквенно-цифровые символы.\n\n 1. По умолчанию проект открывается в новом окне в течение 10 секунд. Если вы хотите открыть его в текущем окне, выберите \" **Открыть\" в текущем окне**.\n\n     :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/new-window-notification.png\" alt-text=\"Уведомление о новом окне для формирования шаблонов.\":::\n\n     Приложение бота команды создается через несколько секунд.\n\n     :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/command-bot.png\" alt-text=\"Снимок экрана: созданное приложение.\":::\n\n 1. Выберите **значок \"Выполнить и отладка**:::image type=\"icon\" source=\"../msteams-platform/assets/images/teams-toolkit-v2/run-debug-icon.png\":::\" на Visual Studio Code боковой панели.\n\n 1. В **раскрывающемся списке выберите Debug(Edge)** или **Debug(Chrome** ).\n\n 1. Нажмите **кнопку \"Начать отладку** \".\n\n     :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/debug-app.png\" alt-text=\"Отладка приложения\":::\n\n 1. Нажмите **Добавить**.\n\n     :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/add-app.png\" alt-text=\"Добавление приложения\":::     \n\n 1. Выберите бот команды.\n \n 1. Выберите **ВВОД**.\n\n      :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-command-bot/hello-world-command.png\" alt-text=\"Добавление раскрывающегося списка &quot;Приложение&quot;\":::  \n\n    В адаптивной карточке вы получите следующий ответ команды:\n\n     :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/final-output.png\" alt-text=\"окончательные выходные данные\":::      \n\n ## <a name=\"take-tour-of-source-code\"></a>Обзор исходного кода\n\n Набор средств Teams предоставляет компоненты для создания приложения. После создания проекта можно просмотреть папки и файлы проекта в области **обозревателя** Visual Studio Code.\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/folder-structure-command-bot.png\" alt-text=\"вкладка &quot;Структура&quot;\":::\n\n Если вы решили использовать платформу пользовательского интерфейса, следующий пример кода шаблона предоставляет шаблон с React компонентов. Он содержит следующее содержимое:\n\n | Имя файла | Содержание |\n | --- | --- |\n | `bot/src/internal/initialize.js` | Создание глобального адаптера бота и инициализация с помощью Teams Framework |\n | `bot/src/index.js` | Код сервера для размещения приложения-бота и прослушивания /api/messages для обработки действий Teams с помощью Bot Framework |\n | `bot/src/helloworldCommandHandler.js` | Обработчик команд hello world для обработки команды helloworld и возврата адаптивной карточки в качестве ответа |\n | `bot/src/adaptiveCards/*.json` | JSON-файл адаптивной карточки, используемый в качестве ответа команды |\n"
- title: Развертывание первого приложения Teams
  durationInMinutes: 1
  content: "\nВы узнали, как создавать и запускать приложения Teams с возможностью командного бота. Последним шагом является развертывание приложения в Azure.\n\nДавайте развернем первое приложение с возможностью командного бота в Azure с помощью Набора средств Teams.\n\n## <a name=\"sign-in-to-your-azure-account\"></a>Вход в учетную запись Azure\n\nИспользуйте свою учетную запись для доступа к microsoft портал Azure и предоставления новых облачных ресурсов для поддержки приложения.\n\n1. Откройте Visual Studio Code.\n1. Откройте папку проекта, в которую вы создали приложение командного бота.\n1. Щелкните значок Набора средств  :::image type=\"icon\" source=\"../msteams-platform/assets/images/teams-toolkit-v2/teams-toolkit-sidebar-icon.png\"::: Teams на боковой панели.\n1. Выберите **\"Войти в Azure\"**.\n\n    > [!TIP]\n    > Если у вас установлено расширение учетной записи Azure и используется та же учетная запись, этот шаг можно пропустить.\n\n    Откроется веб-браузер по умолчанию, позволяющий войти в учетную запись.\n1. Войдите в учетную запись Azure, используя свои учетные данные.\n1. Закройте браузер при появлении запроса и вернитесь к Visual Studio Code.\n\n    В **разделе ACCOUNTS** на боковой панели две учетные записи отображаются отдельно. В нем также перечислены доступные для использования подписки Azure.\n    \n    > [!NOTE]\n    > Убедитесь, что у вас есть по крайней мере одна доступная подписка Azure.\n\n    Теперь вы готовы развернуть приложение в Azure!\n\n## <a name=\"deploy-your-app-to-azure\"></a>Развертывание приложения в Azure\n\n В **разделе DEPLOYMENT** можно подготовить необходимые облачные ресурсы, а код приложения будет скопирован в созданные облачные ресурсы.\n\n# <a name=\"visual-studio-code\"></a>[Visual Studio Code](#tab/vscode)\n\n1. Выберите значок Набор инструментов Teams:::image type=\"icon\" source=\"~/assets/images/teams-toolkit-v2/teams-toolkit-sidebar-icon.png\"::: на боковой панели Visual Studio Code.\n\n1. Выберите **\"Подготовка в облаке\"** в разделе **\"РАЗВЕРТЫВАНИЕ\"**.\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/provision-cloud.png\" alt-text=\"Снимок экрана: команды подготовки\":::\n\n1. Выберите существующую группу ресурсов или создайте новую. Дополнительные сведения см. в [разделе \"Создание группы ресурсов\"](/azure/azure-resource-manager/management/manage-resource-groups-portal#create-resource-groups).\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/subscription-cloud.png\" alt-text=\"Снимок экрана: ресурсы для подготовки\":::\n\n    > [!NOTE]\n    > Появится диалоговое окно с сообщением о том, что при запуске ресурсов в Azure могут возникнуть затраты.\n\n1. Выберите **\"Подготовка\"**.\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/provision-confirm1.png\" alt-text=\"Снимок экрана: диалоговое окно подготовки.\":::\n\n   Процесс подготовки создает ресурсы в облаке Azure. Ход выполнения можно отслеживать, отслеживая диалоги в правом нижнем углу. Через несколько минут вы увидите следующее уведомление:\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/deploy-provision-success1.png\" alt-text=\"Снимок экрана: диалоговое окно завершения подготовки.\":::\n\n     Вы можете просмотреть подготовленные ресурсы. В этом руководстве вам не нужно просматривать ресурсы.\n\n1. Выберите **\"Развернуть в облаке\"** в **разделе \"РАЗВЕРТЫВАНИЕ** \" после завершения подготовки.\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/deploy-cloud.png\" alt-text=\"Снимок экрана: место развертывания в облаке.\":::\n\n1. Нажмите **Развернуть**.\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/Deploy-confirm.png\" alt-text=\"Развертывание для подтверждения.\":::\n\n   Развертывание занимает некоторое время. Ход выполнения можно отслеживать в диалоговом окне в правом нижнем углу. Через несколько минут вы увидите следующее уведомление.\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/command-deploy-confirm.png\" alt-text=\"Развертывание подтвердите.\":::\n\n\n1. Откройте панель отладки (**CTRL+SHIFT+D** / **⌘⇧-D** или view **> Run**) из Visual Studio Code.\n1. В **раскрывающемся списке конфигурации запуска выберите launch Remote (Edge** ).\n1. Нажмите **кнопку \"Начать отладку** \".\n\n     :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/remote-debug.png\" alt-text=\"Удаленная отладка.\":::\n\n1. Нажмите **Добавить**.\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/app-cloud-output.png\" alt-text=\"Выходные данные облака приложения.\":::\n\n1. Выберите бот команды.\n1. Выберите **ВВОД**.  \n\n    :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/hello-world-cloud.png\" alt-text=\"Hello World command\":::\n\n    В адаптивной карточке вы получите следующий ответ команды:\n\n     :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/cloud-final-output.png\" alt-text=\"Окончательные выходные данные облака\":::\n\n# <a name=\"command-line\"></a>[Командная строка](#tab/cli)\n\nВ окне терминала:\n\n1. Выполните `teamsfx new` команду, чтобы создать новый проект.\n\n   ``` bash\n   teamsfx new\n   ```\n\n1. Запустите `teamsfx provision` , чтобы создать ресурс Azure.\n\n   ``` bash\n   teamsfx provision\n   ```\n\n1. Запустите `teamsfx deploy` , чтобы развернуть приложение.\n\n   ``` bash\n   teamsfx deploy\n   ```\n\n1. Запустите `teamsfx preview` , чтобы запустить приложение.\n\n   ``` bash\n   teamsfx preview\n   ```\n\n---\n"
- title: Полный запрос
  durationInMinutes: 1
  content: >
    У вас возникла такая проблема?


    :::image type="content" source="~/assets/images/sbs-command-bot/final-output.png" alt-text="Окончательные выходные данные облака":::
- content: Вы завершили работу с руководством по созданию приложения командного ответа.
