---
title: Запрос разрешений устройства для вкладки Microsoft Teams
description: Обновление манифеста приложения для запроса доступа к встроенным функциям, которые обычно требуют согласия пользователя
keywords: Разработка вкладок Teams
ms.openlocfilehash: 454466ff17ecf275f6ae6c7413df8e117335f3c8
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "41675169"
---
# <a name="request-device-permissions-for-your-microsoft-teams-tab"></a>Запрос разрешений устройства для вкладки Microsoft Teams

Вам может потребоваться расширить вкладки с помощью функций, требующих встроенных функций для доступа к устройствам, таких как:

* Видеокамер
* Специальный
* Расположение
* Уведомления

![Экран параметров разрешений для устройств](~/assets/images/tabs/device-permissions.png)

> [!IMPORTANT]
> Встроенные функции устройств в настоящее время не поддерживаются для вкладок на мобильных клиентах, однако скоро будет доступна полная поддержка. Чтобы подготовиться к этому изменению, следуйте [указаниям для вкладок на странице Mobile](~/tabs/design/tabs-mobile.md) при создании вкладок. В настоящее время персональные приложения (статические вкладки) доступны в [предварительной версии для разработчиков](~/resources/dev-preview/developer-preview-intro.md).
>
> Когда будет выпущена полная поддержка вкладок:
>
> * Все вкладки всегда будут доступны на мобильных устройствах
> * Вы `contentUrl` **будете загружены в клиенте Mobile Teams**.
> * Для вкладок каналов и групп пользователи по-прежнему могут открывать вкладку в отдельном браузере `websiteUrl`, но при этом `contentUrl` будут загружаться первыми.  

## <a name="device-permissions"></a>Разрешения для устройств

Доступ к разрешениям для устройств пользователя позволяет создавать более широкие возможности, например:

* Запись и совместное использование коротких видеороликов
* Запись коротких звуковых заметок и их сохранение для последующего использования
* Использование сведений о местонахождении пользователя для отображения релевантных сведений

Несмотря на то, что доступ к этим функциям имеют стандартные в большинстве современных веб-браузеров, необходимо разрешить командам знать, какие функции вы хотите использовать, обновив манифест приложения. Это позволит вам запросить разрешения так же, как и в браузере, а ваше приложение запущено на настольном клиенте Teams.

## <a name="properties"></a>Свойства

Обновите свое приложение `manifest.json` , добавив `devicePermissions` и указав, какие из пяти свойств вы хотите использовать в вашем приложении:

``` json
"devicePermissions": [
    "media",
    "geolocation",
    "notifications",
    "midi",
    "openExternal"
],
```

Каждое свойство позволит пользователю запросить согласие пользователя.

| Свойство      | Описание   |
| --- | --- |
| СМИ         | разрешение на использование камеры, микрофона и динамиков |
| географическое положение   | разрешение на возврат расположения пользователя      |
| уведомления | разрешение на отправку уведомлений пользователей      |
| MIDI          | разрешение на отправку и получение информации MIDI из цифрового музыкального инструмента   |
| опенекстернал  | разрешение на открытие ссылок во внешних приложениях  |

## <a name="checking-permissions-from-your-tab"></a>Проверка разрешений на вкладке

После добавления `devicePermissions` в манифест приложения вы можете проверить разрешения с помощью API-интерфейса HTML5, не вызывая запрос.

``` Javascript
// Different query options:
navigator.permissions.query({ name: 'camera' });
navigator.permissions.query({ name: 'microphone' });
navigator.permissions.query({ name: 'geolocation' });
navigator.permissions.query({ name: 'notifications' });
navigator.permissions.query({ name: 'midi', sysex: true });

// Example:
navigator.permissions.query({name:'geolocation'}).then(function(result) {
  if (result.state == 'granted') {
    // Access granted
  } else if (result.state == 'prompt') {
    // Access has not been granted
  }
});
```

## <a name="prompting-the-user"></a>Запрос пользователя

Чтобы показать запрос на получение согласия на доступ к разрешениям для устройств, необходимо использовать соответствующий API HTML5. Например, чтобы запросить у пользователя доступ к камере, которую нужно позвонить`getUserMedia`

```Javascript
navigator.mediaDevices.getUserMedia({ audio: true, video: true });
```

При вызове по географическому положению отображается запрос на разрешение`getCurrentPosition`

```Javascript
navigator.geolocation.getCurrentPosition(function (position) { /*... */ });
```

Уведомления будут запрашивать пользователя при вызове`requestPermission`

```Javascript
Notification.requestPermission(function(result) { /* ... */ });
```

![Запрос на доступ к устройствам с вкладками](~/assets/images/tabs/device-permissions-prompt.png)