---
title: Расширение приложения Teams с помощью настраиваемой вкладки
author: laujan
description: Руководство по созданию вкладки
keywords: вкладки Teams канал группы настраиваемого канала
ms.topic: conceptual
ms.author: lajanuar
ms.openlocfilehash: 0434aabc39900e8f8232ae307a5854b2eb3a756d
ms.sourcegitcommit: e8dfcb167274e996395b77d65999991a18f2051a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2020
ms.locfileid: "47819034"
---
# <a name="extend-your-teams-app-with-a-custom-tab"></a>Расширение приложения Teams с помощью настраиваемой вкладки

Настраиваемые вкладки позволяют обслуживать веб-контент, размещенный в канале, группе чата и личным пользователям. На высоком уровне необходимо выполнить следующие действия, чтобы создать вкладку:

1. Подготовить среду разработки.
1. Создайте свою страницу (-ы).
1. Размещение службы приложений.
1. Создайте пакет приложения и отправьте его в Microsoft Teams.

[!include[prepare environment](~/includes/prepare-environment.md)]

## <a name="create-your-pages"></a>Создание страниц

Если вы указываете вкладку в области личных или маркетинговых или групп, она будет состоять из одной или нескольких страниц HTML, размещаемых на вашем компьютере. Вкладки с личными областями состоят из одной страницы контента, а для вкладок с областью канала или группы потребуется страница конфигурации, которая задает URL-адрес страницы контента на основе входных данных пользователя во время установки.

Существует три типа вкладок. Подробные сведения о создании можно найти на соответствующей странице документации.

1. [Страница контента](~/tabs/how-to/create-tab-pages/content-page.md)— страница, отображаемая на вкладке.
1. Страница [конфигурации](~/tabs/how-to/create-tab-pages/configuration-page.md), на которой задается или обновляется URL-адрес страницы контента, и добавляется на вкладку канал/группа.
1. [Страница "Удаление](~/tabs/how-to/create-tab-pages/removal-page.md)" — необязательная страница, которая отображается при удалении вкладки канал/группа.

### <a name="tab-requirements"></a>Требования к вкладкам

Независимо от типа страницы, на вкладке необходимо соблюдать следующие требования:

* Необходимо разрешить отправку страниц в IFrame, используя заголовки HTTP-ответа X-Frame-Options и/или Content-Security-Security-Policy.
  * Задать заголовок: `Content-Security-Policy: frame-ancestors teams.microsoft.com *.teams.microsoft.com *.skype.com`        
  * Для совместимости с Internet Explorer 11 также следует задать `X-Content-Security-Policy` .    
  * Кроме того, можно задать заголовок `X-Frame-Options: ALLOW-FROM https://teams.microsoft.com/` . Этот заголовок является устаревшим, но по-прежнему учитывается большинством браузеров.
* Как правило, для защиты от применительно к розетке страницы входа не отображаются в элементах IFrame. Поэтому логика проверки подлинности должна использовать метод, отличный от Redirect (например, использовать проверку подлинности на основе маркеров или на основе файлов cookie).

> [!NOTE]
> Хром 80, запланированный на выпуск ранних 2020, содержит новые значения файлов cookie и по умолчанию накладывает политики файлов cookie. Рекомендуется задавать предполагаемый способ использования файлов cookie, а не полагаться на поведение браузера по умолчанию. *Просмотрите* [атрибут самесите cookie (обновление 2020)](../../resources/samesite-cookie-update.md).

* Браузеры соответствуют ограничению политики единого происхождения, которое запрещает веб-странице делать запросы другому домену, чем тот, который выдает веб-страницу. Однако может потребоваться переадресовать страницу конфигурации или содержимого в другой домен или поддомен. Логика навигации между доменами должна позволять клиенту Teams проверять происхождение в статическом списке Валиддомаинс в манифесте приложения при загрузке или взаимодействии с вкладкой.

* Чтобы обеспечить удобство работы, необходимо задать стиль вкладок на основе темы, структуры и намеренности клиента Teams. Как правило, вкладки работают в соответствии с конкретными нуждами, а на небольшом наборе задач или подмножестве данных, которые относятся к расположению канала вкладки.

* На странице содержимого добавьте ссылку на [пакет SDK клиента Microsoft Teams для JavaScript](/javascript/api/overview/msteams-client) с помощью тегов script. После загрузки страницы выполните вызов `microsoftTeams.initialize()` . Если этого не сделать, страница не будет отображаться.

## <a name="host-your-app-service"></a>Размещение службы приложений

Контент должен размещаться на общедоступном URL-адресе, доступном по протоколу HTTPS. Для тестирования можно использовать обратный прокси-сервер, например [ngrok](https://ngrok.com/), чтобы предоставить локальный порт URL-адресу, доступному из Интернета.

## <a name="create-your-app-package-with-app-studio"></a>Создание пакета приложений с помощью App Studio

Вы можете использовать приложение App Studio в клиенте Microsoft Teams, чтобы помочь создать манифест приложения. Если у вас нет приложения App Studio, установленного в Teams **, выберите** ![ Приложение Store в ](/microsoftteams/platform/assets/images/tab-images/storeApp.png) левом нижнем углу приложения Teams и найдите приложение App Studio. Найдя плитку, выберите ее и нажмите кнопку установить в диалоговом окне всплывающее окно.

1. Откройте клиент Microsoft Teams, используя [версию на основе Интернета](https://teams.microsoft.com) , вы сможете проверить интерфейсный код с помощью [средств разработчика](~/tabs/how-to/developer-tools.md)в браузере.
1. Откройте приложение App Studio и выберите вкладку **редактор манифестов** .
1. Выберите плитку **Создание нового приложения** .
1. Добавьте сведения о приложении (см. [Определение схемы манифеста](~/resources/schema/manifest-schema.md) для полного описания каждого поля).
1. В разделе возможности выберите **вкладки**.
    * Для вкладки Личные выберите *Добавить вкладку Личные* и нажмите кнопку **Добавить**. Откроется всплывающее диалоговое окно, в котором можно добавить сведения о вкладке.
    * Для вкладки канал/группа в разделе *вкладка группа* выберите **Добавить** и заполните поля сведения вкладки во всплывающем окне Вкладка команда. Проверка *возможности обновления конфигурации * Флажки группа и *Групповая беседа* отмечены и нажмите кнопку **сохранить**.
1. В разделе *домены и разрешения* *домены из поля вкладки* должны содержать URL-адрес узла или обратного прокси-сервера без префикса HTTPS.
1. На вкладке **завершения**  =>  **тестирования и распределения** можно **скачать** пакет приложения, **установить** пакет в команду или **Отправить** в магазин приложений Teams для утверждения. *Если используется обратный прокси-сервер, вы получите предупреждение в поле **Описание** справа. Предупреждение можно игнорировать при тестировании вкладки*.

## <a name="create-your-app-package-manually"></a>Создание пакета приложения вручную

Как и в случае с Боты и расширениями обмена сообщениями, вы обновляете [Манифест](~/resources/schema/manifest-schema.md) приложения, чтобы включить свойства вкладки. Эти свойства управляют областями, в которых доступна вкладка, используемые URL-адреса и другие свойства.

### <a name="personal-tabs"></a>Личные вкладки

Отображаемое содержимое личных вкладок одинаково для всех пользователей и настроено в `staticTabs` массиве. Вы можете объявить до 16 персональных вкладок в приложении.

|Имя| Тип| Максимальный размер | Обязательный | Описание|
|---|---|---|---|---|
|`entityId`|Строка|64 символа|✔|Уникальный идентификатор объекта, отображаемого на вкладке.|
|`name`|String|128 символов|✔|Отображаемое имя вкладки в интерфейсе канала.|
|`contentUrl`|String|2048 символов|✔|URL-адрес https://, указывающий на пользовательский интерфейс сущности, который будет отображаться в полотне Teams.|
|`websiteUrl`|String|2048 символов||URL-адрес https://, указывающий, когда пользователь попытается просмотреть его в браузере.|
|`scopes`|Массив перечислений|1 |✔|Статические вкладки поддерживают только `personal` область, что означает, что ее можно подготовить только в составе личного приложения.|

#### <a name="simple-personal-tab-manifest-example"></a>Пример манифеста простой личной вкладки

В приведенном ниже примере показан только `staticTabs` массив из манифеста приложения.

```json
...
"staticTabs": [
    {
      "entityId": "idForPage",
      "name": "Display name for tab",
      "contentUrl": "https:// yourURL.com/content ",
      "websiteUrl": "https://yourURL.com/website",
      "scopes": [ "personal" ]
    }
...
```

### <a name="channelgroup-tabs"></a>Вкладки каналов/групп

Вкладки каналов и групп добавляются в `configurableTabs` массив. Вы можете объявить только одну вкладку "канал/группа" в `configurableTabs` массиве.

|Имя| Тип| Максимальный размер | Обязательный | Описание|
|---|---|---|---|---|
|`configurationUrl`|String|2048 символов|✔|Https://URL-адрес страницы конфигурации.|
|`canUpdateConfiguration`|Boolean|||Значение, указывающее, может ли пользователь обновлять экземпляр конфигурации вкладки после создания. Умолчани `true`|
|`scopes`|Массив перечислений|1 |✔|Настраиваемые вкладки поддерживают только `team` `groupchat` области и области. |

#### <a name="simple-channelgroup-tab-manifest-example"></a>Пример манифеста простого канала/группы вкладок

В приведенном ниже примере показан только `configurableTabs` массив из манифеста приложения.

```json
...
"configurableTabs": [
    {
      "configurationUrl": "https://yourURL.com/configure",
      "canUpdateConfiguration": true,
      "scopes": [ "team", "groupchat" ]
    }
...
```

После того как вы закончите `manifest.json` пакет в ZIP-папке вместе с двумя необходимыми значками.

### <a name="upload-app-package-directly-to-a-team"></a>Отправка пакета приложений непосредственно команде

1. Откройте клиент Microsoft Teams. Если вы используете [версию на основе веб-сайта](https://teams.microsoft.com) , вы можете проверить интерфейсный код с помощью [средств разработчика](~/tabs/how-to/developer-tools.md)в браузере.
1. На панели *йоуртеамс* слева выберите `...` меню рядом с командой, которую вы используете для тестирования вкладки, и выберите пункт **Управление командой**.
1. В главной панели выберите **приложения** из панели вкладок и нажмите кнопку **Отправить пользовательское приложение** , расположенное в правом нижнем углу страницы.
1. Откройте каталог проекта, перейдите в папку **./паккаже** , выберите папку ZIP пакет приложения и нажмите кнопку **Открыть**. Вкладка будет загружена в Teams.

### <a name="view-your-tab-in-teams"></a>Просмотр вкладки в Teams

1. Просмотр личной вкладки:
    * В панели навигации, расположенной в левой части клиента Teams, выберите `...` меню и выберите приложение из списка.

1. Просмотрите вкладку ваш канал/Группа:
    * Вернитесь к команде, выберите канал, в котором необходимо отобразить вкладку, нажмите ➕ на панели вкладок и выберите вкладку в коллекции.
    * Следуйте инструкциям по добавлению вкладки. Обратите внимание, что для вкладки канал/группа существует настраиваемое диалоговое окно настройки. Нажмите кнопку **сохранить** , и вкладка будет добавлена на панель вкладок канала.

## <a name="learn-more"></a>Подробнее

* [Создание страницы контента для вкладки](~/tabs/how-to/create-tab-pages/content-page.md)
* [Создание страницы конфигурации для вкладки](~/tabs/how-to/create-tab-pages/configuration-page.md)
* [Обновление или удаление вкладки](~/tabs/how-to/create-tab-pages/removal-page.md)
