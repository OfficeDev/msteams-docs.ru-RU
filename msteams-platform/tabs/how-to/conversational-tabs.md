---
title: Создание вкладок бесед
author: surbhigupta
description: Научитесь создавать беседные беседы для вкладок канала, управлять беседами с помощью образцов кода
keywords: группы вкладок канал настраивается
ms.topic: conceptual
ms.author: lomeybur
ms.localizationpriority: none
ms.openlocfilehash: 63f6310faa4bec78f246857cbd7c1368acee8edf
ms.sourcegitcommit: af1d0a4041ce215e7863ac12c71b6f1fa3e3ba81
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2021
ms.locfileid: "60889365"
---
# <a name="create-conversational-tabs"></a>Создание вкладок бесед

Подсемейства беседы предоставляют способ разрешить пользователям беседы о подвласти на вкладке. Например, конкретная задача, возможность для пациента и продажи, а не обсуждение всей вкладки, также известной как сущность. Традиционный канал или настраиваемая вкладка позволяют пользователю беседу о вкладке, но для этого требуется более целенаправленный разговор. Может возникнуть требование к более целенаправленному диалогу, если для централизованного обсуждения слишком много контента, либо из-за того, что содержимое со временем изменилось, что делает беседу неактуальной для показанного контента. Подсознательную беседу обеспечивают гораздо более целенаправленный диалог для динамических вкладок.

Подсемейства беседы поддерживаются только в каналах. Их можно использовать с личной или статической вкладки для создания или продолжения бесед на вкладке, которая уже закреплена на канале. Статическая вкладка полезна, если необходимо предоставить пользователю одно расположение для просмотра и доступа к беседам, происходящим по нескольким каналам.

## <a name="prerequisites"></a>Предварительные требования

Чтобы поддерживать беседу, веб-приложение вкладки должно иметь возможность хранить сопоставление между ↔ беседами в базе данных серверов. При условии, но вы должны сохранить его и вернуть его в Teams для того, чтобы пользователи `conversationId` `conversationId` продолжили беседу.

## <a name="start-a-new-conversation"></a>Начало нового разговора

Чтобы начать новый разговор, используйте `openConversation()` функцию. Запуск и продолжение беседы обрабатываются этим методом. Входные данные в функцию изменяются в зависимости от того, какое действие вы хотите принять с точки зрения пользователя, это открывает панель беседы справа от экрана, чтобы инициировать беседу или продолжить беседу.

``` javascript
microsoftTeams.conversations.openConversation(openConversationRequest);
```

**openConversation** принимает следующие входные данные для начала беседы в канале:

* **subEntityId:** ID конкретной подурядки. Например, задача-123.
* **entityId:** ID экземпляра вкладки при его создания. ID имеет важное значение для ссылки на тот же экземпляр вкладки.
* **channelId:** канал, в котором находится экземпляр вкладки.
   > [!NOTE]
   > ChannelId **необязателен** для вкладок канала. Однако рекомендуется сохранить реализацию на канале и в статических вкладок одинаково.
* **название.** Заголовок, показанный пользователю в панели чата.

Большинство из этих значений также можно получить из `getContext` API.

```javascript
microsoftTeams.conversations.openConversation({“subEntityId”:”task-1”, “entityId”: “tabInstanceId-1”, “channelId”: ”19:baa6e71f65b948d189bf5c892baa8e5a@thread.skype”, “title”: "Task Title”});
```

На следующем изображении показана панель бесед:

![Беседные подуряды — начните беседу](~/assets/images/tabs/conversational-subentities/start-conversation.png)

Если пользователь начинает беседу, важно прослушать вызов этого события, чтобы получить и сохранить **conversationId:**

```javascript
microsoftTeams.conversations.onStartConversation = (conversationResponse) => {
    // console.log(conversationReponse.conversationId)
};
```

Объект `conversationResponse` содержит сведения, связанные с запущенным разговором. Рекомендуется сохранить все свойства этого объекта отклика для более позднего использования.

## <a name="continue-a-conversation"></a>Продолжение беседы

После начала беседы требуются последующие вызовы, которые также предоставляют те же входные данные, что и при запуске нового разговора, но также `openConversation()` **включаются в conversationId**. [](#start-a-new-conversation) Панель бесед открывается для пользователей с учетом соответствующего разговора. Пользователи могут видеть новые или входящие сообщения в режиме реального времени.

На следующем изображении показана панель беседы с соответствующей беседой:

![Беседные подуряды — продолжить беседу](~/assets/images/tabs/conversational-subentities/continue-conversation.png)

## <a name="enhance-a-conversation"></a>Повышение эффективности беседы

Важно, чтобы вкладка включала глубокие [ссылки на подуч.](~/concepts/build-and-test/deep-links.md) Например, пользователь, выбрав глубокую ссылку на шиклет вкладки из беседы на канале. Ожидаемое поведение — получение глубокой ссылки, открытие этой подустанки и открытие панели бесед для этого подуряда.

Чтобы поддерживать беседу с личной или статической вкладки, не нужно ничего менять в реализации. Мы поддерживаем только начало или продолжение бесед со вкладок канала, которые уже закреплены. Поддержка статических вкладок позволяет предоставить пользователям единое расположение для взаимодействия со всеми вашими подмостками. Важно сохранить , и когда вкладка изначально создается в канале, чтобы иметь правильные свойства при открытии представления беседы на статической `subEntityId` `entityId` `channelId` вкладке.

## <a name="close-a-conversation"></a>Закрыть беседу

Можно вручную закрыть представление беседы, позвонив в `closeConversation()` функцию.

```javascript
microsoftTeams.conversations.closeConversation();
```

Вы также можете прослушивать событие, когда пользователь закрывает представление беседы.

```javascript
microsoftTeams.conversations.onCloseConversation = (conversationResponse) => {
    // console.log(conversationResponse)
};
```

## <a name="code-sample"></a>Пример кода

| Название примера | Описание | C# |Node.js|
|-------------|-------------|------|----|
|Создание вкладки Conversational| Microsoft Teams пример приложения для демонстрации создания вкладки беседы. | [View](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/tab-conversations/csharp) |  [View](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/tab-conversations/nodejs) |

## <a name="next-step"></a>Следующий этап

> [!div class="nextstepaction"]
> [Изменения полей вкладок](~/resources/removing-tab-margins.md)

## <a name="see-also"></a>См. также

* [Teams вкладки](~/tabs/what-are-tabs.md)
* [Создание личной вкладки](~/tabs/how-to/create-personal-tab.md)
* [Создание вкладки канала или группы](~/tabs/how-to/create-channel-group-tab.md)
* [Вкладки на мобильных устройствах](~/tabs/design/tabs-mobile.md)
* [Создание вкладок с использованием адаптивных карточек](~/tabs/how-to/build-adaptive-card-tabs.md)
