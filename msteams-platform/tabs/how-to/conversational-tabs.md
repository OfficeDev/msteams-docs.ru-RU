---
title: Создание вкладок бесед
author: laujan
description: Создание беседного чата подгруппы для вкладок канала
keywords: группы вкладок канал настраивается
ms.topic: conceptual
ms.author: lomeybur
ms.openlocfilehash: 4171265a3ef4ad917661e258dd7305f82411c5ef
ms.sourcegitcommit: 118f7261d313feeac5b398fef56a44bd90104b2f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/31/2021
ms.locfileid: "52709654"
---
# <a name="create-conversational-tabs"></a>Создание вкладок бесед

Беседные под-сущности предоставляют пользователям возможность бесед о под-сущностям на вкладке, например о конкретных задачах, пациентах и возможности продаж, а не обсуждать всю вкладку, также известная как сущность. Традиционный канал или настраиваемая вкладка позволяют пользователю беседу о вкладке, но пользователю может потребоваться более целенаправленный разговор. Может возникнуть требование для более целенаправленного разговора, если слишком много контента, чтобы иметь централизованную дискуссию, или содержимое со временем изменилось, что делает беседу неактуальной для показанного контента. Беседные подуряды предоставляют гораздо более целенаправленный диалог для динамических вкладок.

Беседные подуряды поддерживаются только в каналах. Однако их можно использовать с личной или статической вкладки для  создания или продолжения бесед на вкладке, которая уже закреплена на канале. Статическая вкладка полезна, если вы хотите предоставить пользователю одно расположение для просмотра и доступа к беседам, происходящим по нескольким каналам.

## <a name="prerequisites"></a>Предварительные условия

Чтобы поддерживать беседные подуч. веб-приложение вкладки должно иметь возможность хранить сопоставление между ↔ беседами в базе данных backend. Мы предоставляем вам, но это будет ваша ответственность, чтобы сохранить это и вернуть его в Teams для того, чтобы пользователи `conversationId` `conversationId` продолжили разговор.

## <a name="start-a-new-conversation"></a>Начало нового разговора

Чтобы начать новый разговор, используйте `openConversation()` функцию. При запуске и продолжении беседы все обрабатываются этим методом, однако входы в функцию изменяются в зависимости от действий, которые необходимо принять. С точки зрения пользователей это открывает панель бесед справа от экрана, чтобы начать беседу или продолжить беседу.

``` javascript
microsoftTeams.conversations.openConversation(openConversationRequest);
```

**openConversation** принимает следующие входные данные для начала беседы в канале:

* **subEntityId.** Это ID конкретной подгруппы. Например, задача-123.
* **entityId.** Это ID экземпляра вкладки, когда он был создан. ID имеет важное значение для ссылки на тот же экземпляр вкладки.
* **channelId.** Это канал, в котором находится экземпляр вкладки.
   > [!NOTE]
   > ChannelId **необязателен** для вкладок канала. Однако рекомендуется сохранить реализацию по каналам и статическим вкладкам одинаково.
* **название.** Это название, которое отображается пользователю в панели чата.

Большинство из этих значений также можно получить из `getContext` API.

```javascript
microsoftTeams.conversations.openConversation({“subEntityId”:”task-1”, “entityId”: “tabInstanceId-1”, “channelId”: ”19:baa6e71f65b948d189bf5c892baa8e5a@thread.skype”, “title”: "Task Title”});
```

Это откроет панель беседы.

![Сущностями conversationl - Начните беседу](~/assets/images/tabs/conversational-subentities/start-conversation.png)

Если пользователь начинает беседу, важно прослушивать вызов этого события, чтобы получить и сохранить **conversationId:**

```javascript
microsoftTeams.conversations.onStartConversation = (conversationResponse) => {
    // console.log(conversationReponse.conversationId)
};
```

Объект содержит сведения, связанные с только что `conversationReponse` запущенным разговором. Мы рекомендуем сохранить все свойства этого объекта отклика для повторного использования позже.

## <a name="continue-a-conversation"></a>Продолжение беседы

После начала беседы последующие вызовы требуют, чтобы вы также предоставили те же входные данные, что и при запуске нового разговора вкладки канала, но также включают `openConversation()` **в себя conversationId** [](#Starting a new channel tab conversation). Панель бесед открывается для пользователя с учетом соответствующего разговора. Пользователи могут видеть новые или входящие сообщения в режиме реального времени.

![Сущностями sub Conversationl — продолжить беседу](~/assets/images/tabs/conversational-subentities/continue-conversation.png)

## <a name="enhance-a-conversation"></a>Повышение эффективности беседы

Наконец, важно, чтобы вкладка потребляла [глубокие ссылки на подгруппу.](~/concepts/build-and-test/deep-links.md) Например, пользователь щелкнув глубокий буклет вкладки из беседы канала. Ожидается, что вы получите глубокую ссылку, откройте эту подгруппу, а затем откроете панель бесед для этого конкретного подуряда.

Чтобы поддерживать беседующих суб-сущностям с личной или статической вкладки, вам не нужно ничего менять в своей реализации. Мы поддерживаем только начало или продолжение бесед со вкладок канала, которые уже закреплены. Поддержка статических вкладок позволяет предоставить пользователям единое расположение для взаимодействия со всеми подуч. Однако при открытии представления беседы на статической вкладке важно сохранить вкладку , и когда вкладка изначально создается в канале, чтобы иметь правильные `subEntityId` `entityId` `channelId` свойства.

## <a name="close-a-conversation"></a>Закрыть беседу

Можно вручную закрыть представление беседы, позвонив в `closeConversation()` функцию.

```javascript
microsoftTeams.conversations.closeConversation();
```

Вы также можете прослушивать событие, когда пользователь закрывает представление беседы.

```javascript
microsoftTeams.conversations.onCloseConversation = (conversationResponse) => {
    // console.log(conversationResponse)
};
```
