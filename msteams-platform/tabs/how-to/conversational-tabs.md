---
title: Создание вкладок бесед
author: surbhigupta
description: Создание беседного чата подгруппы для вкладок канала
keywords: группы вкладок канал настраивается
ms.topic: conceptual
ms.author: lomeybur
ms.openlocfilehash: dffd4eb468167561735dbc292a400416c9bb11af
ms.sourcegitcommit: 95e0c767ca0f2a51c4a7ca87700ce50b7b154b7c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/25/2021
ms.locfileid: "58529009"
---
# <a name="create-conversational-tabs"></a>Создание вкладок бесед

Беседные под-сущности предоставляют пользователям возможность бесед о под-сущностям на вкладке, например о конкретных задачах, пациентах и возможности продаж, а не обсуждать всю вкладку, также известная как сущность. Традиционный канал или настраиваемая вкладка позволяют пользователю беседу о вкладке, но для этого требуется более целенаправленный разговор. Может возникнуть требование для более целенаправленного разговора, если слишком много контента, чтобы иметь централизованное обсуждение, или из-за того, что содержимое со временем изменилось, что делает беседу неактуальной для показанного контента. Беседные подуряды предоставляют гораздо более целенаправленный диалог для динамических вкладок.

Беседные подуряды поддерживаются только в каналах. Их можно использовать с личной или статической вкладки для создания или продолжения бесед на вкладке, которая уже закреплена на канале. Статическая вкладка полезна, если необходимо предоставить пользователю одно расположение для просмотра и доступа к беседам, происходящим по нескольким каналам.

## <a name="prerequisites"></a>Предварительные требования

Чтобы поддерживать беседные подуч. веб-приложение вкладки должно иметь возможность хранить сопоставление между ↔ беседами в базе данных backend. При условии, но вы должны сохранить его и вернуть его в Teams для того, чтобы пользователи `conversationId` `conversationId` продолжили беседу.

## <a name="start-a-new-conversation"></a>Начало нового разговора

Чтобы начать новый разговор, используйте `openConversation()` функцию. Запуск и продолжение беседы обрабатываются этим методом. Входные данные в функцию изменяются в зависимости от действий, которые необходимо принять. С точки зрения пользователей это открывает панель бесед справа от экрана, чтобы начать беседу или продолжить беседу.

``` javascript
microsoftTeams.conversations.openConversation(openConversationRequest);
```

**openConversation** принимает следующие входные данные для начала беседы в канале:

* **subEntityId.** Это ID конкретной подгруппы. Например, задача-123.
* **entityId.** Это ID экземпляра вкладки, когда он был создан. ID имеет важное значение для ссылки на тот же экземпляр вкладки.
* **channelId.** Это канал, в котором находится экземпляр вкладки.
   > [!NOTE]
   > ChannelId **необязателен** для вкладок канала. Однако рекомендуется сохранить реализацию на канале и в статических вкладок одинаково.
* **название.** Это название, которое отображается пользователю в панели чата.

Большинство из этих значений также можно получить из `getContext` API.

```javascript
microsoftTeams.conversations.openConversation({“subEntityId”:”task-1”, “entityId”: “tabInstanceId-1”, “channelId”: ”19:baa6e71f65b948d189bf5c892baa8e5a@thread.skype”, “title”: "Task Title”});
```

На следующем изображении показана панель бесед:

![Беседные подуряды — начните беседу](~/assets/images/tabs/conversational-subentities/start-conversation.png)

Если пользователь начинает беседу, важно прослушивать вызов этого события, чтобы получить и сохранить **conversationId:**

```javascript
microsoftTeams.conversations.onStartConversation = (conversationResponse) => {
    // console.log(conversationReponse.conversationId)
};
```

Объект `conversationResponse` содержит сведения, связанные с запущенным разговором. Рекомендуется сохранить все свойства этого объекта отклика для более позднего использования.

## <a name="continue-a-conversation"></a>Продолжение беседы

После начала беседы последующие вызовы требуют, чтобы вы также предоставили те же входные данные, что и при запуске нового разговора, но также включали `openConversation()` **в себя conversationId** [](#start-a-new-conversation). Панель бесед открывается для пользователя с учетом соответствующего разговора. Пользователи могут видеть новые или входящие сообщения в режиме реального времени.

На следующем изображении показана панель беседы с соответствующей беседой:

![Беседные подуряды — продолжить беседу](~/assets/images/tabs/conversational-subentities/continue-conversation.png)

## <a name="enhance-a-conversation"></a>Повышение эффективности беседы

Важно, чтобы вкладка включала [глубокие ссылки на подгруппу.](~/concepts/build-and-test/deep-links.md) Например, пользователь, выбрав диплинк вкладки шиклета из беседы на канале. Ожидаемое поведение — получение deeplink, открытие этой подгруппы, а затем открытие панели беседы для этого подуряда.

Чтобы поддерживать беседующих суб-сущностям с личной или статической вкладки, вам не нужно ничего менять в реализации. Мы поддерживаем только начало или продолжение бесед со вкладок канала, которые уже закреплены. Поддержка статических вкладок позволяет предоставить пользователям единое расположение для взаимодействия со всеми подуч. Важно сохранить , и когда вкладка изначально создается в канале, чтобы иметь правильные свойства при открытии представления беседы на статической `subEntityId` `entityId` `channelId` вкладке.

## <a name="close-a-conversation"></a>Закрыть беседу

Можно вручную закрыть представление беседы, позвонив в `closeConversation()` функцию.

```javascript
microsoftTeams.conversations.closeConversation();
```

Вы также можете прослушивать событие, когда пользователь закрывает представление беседы.

```javascript
microsoftTeams.conversations.onCloseConversation = (conversationResponse) => {
    // console.log(conversationResponse)
};
```

## <a name="code-sample"></a>Пример кода

| Название примера | Описание | C# |Node.js|
|-------------|-------------|------|----|
|Создание вкладки Conversational| Microsoft Teams пример приложения для демонстрации создания вкладки беседы. | [View](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/tab-conversations/csharp) |  [Просмотр](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/tab-conversations/nodejs) |

## <a name="see-also"></a>Дополнительные ресурсы

* [Teams вкладки](~/tabs/what-are-tabs.md)
* [Создание личной вкладки](~/tabs/how-to/create-personal-tab.md)
* [Создание вкладки канала или группы](~/tabs/how-to/create-channel-group-tab.md)
* [Вкладки на мобильных устройствах](~/tabs/design/tabs-mobile.md)
* [Создание вкладок с использованием адаптивных карточек](~/tabs/how-to/build-adaptive-card-tabs.md)

## <a name="next-step"></a>Следующее действие

> [!div class="nextstepaction"]
> [Изменения полей вкладок](~/resources/removing-tab-margins.md)