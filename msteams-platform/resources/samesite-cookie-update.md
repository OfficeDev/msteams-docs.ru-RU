---
title: Microsoft Teams и атрибут cookie SameSite (обновление 2020 г.)
author: laujan
description: описывает атрибуты cookie SameSite
keywords: Атрибуты cookie samesite
ms.topic: reference
localization_priority: Normal
ms.author: lomeybur
ms.openlocfilehash: 5713c7aae0461e577627ae7296f0a58a25ba062f
ms.sourcegitcommit: 825abed2f8784d2bab7407ba7a4455ae17bbd28f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2021
ms.locfileid: "52020438"
---
# <a name="microsoft-teams-and-the-samesite-cookie-attribute-2020-update"></a><span data-ttu-id="dfef6-104">Microsoft Teams и атрибут cookie SameSite (обновление 2020 г.)</span><span class="sxs-lookup"><span data-stu-id="dfef6-104">Microsoft Teams and the SameSite cookie attribute (2020 update)</span></span>

## <a name="cookies-in-brief"></a><span data-ttu-id="dfef6-105">Cookies in brief</span><span class="sxs-lookup"><span data-stu-id="dfef6-105">Cookies in brief</span></span>

 <span data-ttu-id="dfef6-106">Cookies — это текстовые строки, отправленные с веб-сайтов и хранимые на компьютере в веб-браузере.</span><span class="sxs-lookup"><span data-stu-id="dfef6-106">Cookies are text strings, sent from websites, and stored on a computer by the web browser.</span></span> <span data-ttu-id="dfef6-107">Обычно они используются для проверки подлинности и персонализации, например для отзыва сведений о состоянии, сохранения параметров пользователей, записи просмотра и отображения соответствующих объявлений.</span><span class="sxs-lookup"><span data-stu-id="dfef6-107">They're typically used for authentication and personalization, e.g., recalling stateful information, preserving user settings, recording browsing activity, and displaying relevant ads.</span></span> <span data-ttu-id="dfef6-108">Файлы cookie всегда связаны с определенным доменом и могут быть установлены различными сторонами.</span><span class="sxs-lookup"><span data-stu-id="dfef6-108">Cookies are always linked to a particular domain and can be installed by various parties.</span></span> <span data-ttu-id="dfef6-109">Они классифицируются следующим образом:</span><span class="sxs-lookup"><span data-stu-id="dfef6-109">They are categorized as follows:</span></span>

 |<span data-ttu-id="dfef6-110">Cookie</span><span class="sxs-lookup"><span data-stu-id="dfef6-110">Cookie</span></span>|<span data-ttu-id="dfef6-111">Область</span><span class="sxs-lookup"><span data-stu-id="dfef6-111">Scope</span></span>|
 | ------ | ------ |
 |<span data-ttu-id="dfef6-112">**Первопартийное cookie**</span><span class="sxs-lookup"><span data-stu-id="dfef6-112">**First-party cookie**</span></span>|<span data-ttu-id="dfef6-113">Самостоятельные файлы cookie создаются веб-сайтами, которые посещает пользователь, и используется для сохранения данных, таких как элементы корзины, учетные данные входа (например, cookie-файлы проверки подлинности) и другие аналитики.</span><span class="sxs-lookup"><span data-stu-id="dfef6-113">A first-party cookie is created by websites that a user visits and is used to save data such as shopping cart items, login credentials (e.g., authentication cookies), and other analytics.</span></span>|
 |<span data-ttu-id="dfef6-114">**Второе стороне cookie**</span><span class="sxs-lookup"><span data-stu-id="dfef6-114">**Second-party cookie**</span></span>|<span data-ttu-id="dfef6-115">Второпартийное cookie—это технически то же самое, что и первопартийное cookie.</span><span class="sxs-lookup"><span data-stu-id="dfef6-115">A second-party cookies is technically the same as a first-party  cookie.</span></span> <span data-ttu-id="dfef6-116">Разница в том, что данные делятся со второй стороной через соглашение о партнерстве с данными (например, аналитика [Microsoft Teams и отчетность).](/microsoftteams/teams-analytics-and-reports/teams-reporting-reference)</span><span class="sxs-lookup"><span data-stu-id="dfef6-116">The difference is that data is shared with a second party via a data partnership agreement (e.g., [Microsoft Teams analytics and reporting](/microsoftteams/teams-analytics-and-reports/teams-reporting-reference)).</span></span> |
 |<span data-ttu-id="dfef6-117">**Сторонние файлы cookie**</span><span class="sxs-lookup"><span data-stu-id="dfef6-117">**Third-party cookie**</span></span>|<span data-ttu-id="dfef6-118">Сторонний файл cookie устанавливается доменом, помимо домена, который явно посещал пользователь, и используется в основном для отслеживания (например, кнопок "Нравится"), службы и чатов в прямом эфире.</span><span class="sxs-lookup"><span data-stu-id="dfef6-118">A third-party cookie is installed by a domain other than the one the user explicitly visited and is mainly used for tracking (e.g. "Like" buttons), ad serving, and live chats.</span></span>|

### <a name="cookies-and-http-requests"></a><span data-ttu-id="dfef6-119">Запросы cookie и HTTP</span><span class="sxs-lookup"><span data-stu-id="dfef6-119">Cookies and HTTP requests</span></span>

<span data-ttu-id="dfef6-120">Перед введением ограничений SameSite, когда файлы cookie хранились в браузере, они были присоединены к каждому веб-запросу *HTTP* и отправлены на сервер Set-Cookie http response header.</span><span class="sxs-lookup"><span data-stu-id="dfef6-120">Before the introduction of SameSite restrictions, when cookies were stored on the browser, they were attached to *every* HTTP web request and sent to the server by the Set-Cookie HTTP response header.</span></span> <span data-ttu-id="dfef6-121">Предсказуемо, что эта производительность может ввести уязвимости безопасности, такие как атаки на подделку запросов на меж сайте (CSRF).</span><span class="sxs-lookup"><span data-stu-id="dfef6-121">Predictably, that performance had the potential to introduce security vulnerabilities such as Cross-Site Request Forgery (CSRF) attacks.</span></span> <span data-ttu-id="dfef6-122">*См.* [файлы cookie HTTP.](https://developer.mozilla.org/docs/Web/HTTP/Cookies)</span><span class="sxs-lookup"><span data-stu-id="dfef6-122">*See* [HTTP cookies](https://developer.mozilla.org/docs/Web/HTTP/Cookies).</span></span> <span data-ttu-id="dfef6-123">Компонент SameSite смягчил это воздействие с помощью его реализации и управления в загоне SetCookie.</span><span class="sxs-lookup"><span data-stu-id="dfef6-123">The SameSite component mitigated that exposure through its implementation and management in the SetCookie header.</span></span>

### <a name="samesite-attribute-initial-release"></a><span data-ttu-id="dfef6-124">Атрибут SameSite: начальный выпуск</span><span class="sxs-lookup"><span data-stu-id="dfef6-124">SameSite attribute: initial release</span></span>

<span data-ttu-id="dfef6-125">Версия 51 Google Chrome представила спецификацию SetCookie SameSite как *необязательный* атрибут.</span><span class="sxs-lookup"><span data-stu-id="dfef6-125">Google Chrome version 51 introduced the SetCookie SameSite specification as an *optional* attribute.</span></span> <span data-ttu-id="dfef6-126">Начиная со сборки 17672, Windows 10 представила поддержку cookie SameSite для [браузера Microsoft Edge.](https://blogs.windows.com/msedgedev/2018/05/17/samesite-cookies-microsoft-edge-internet-explorer/)</span><span class="sxs-lookup"><span data-stu-id="dfef6-126">Starting with Build 17672, Windows 10 introduced SameSite cookie support for the [Microsoft Edge browser](https://blogs.windows.com/msedgedev/2018/05/17/samesite-cookies-microsoft-edge-internet-explorer/).</span></span>

<span data-ttu-id="dfef6-127">Разработчики могут отказаться от добавления атрибута cookie SameSite в заготвку SetCookie или добавить его с одним из двух параметров, *Lax* и *Strict.*</span><span class="sxs-lookup"><span data-stu-id="dfef6-127">Developers could opt out of adding the SameSite cookie attribute to the SetCookie header or they could add it with one of two settings, *Lax* and *Strict*.</span></span> <span data-ttu-id="dfef6-128">Невыполнение атрибута SameSite считалось состоянием по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="dfef6-128">An unimplemented SameSite attribute was considered the default state.</span></span>

## <a name="samesite-cookie-attribute-2020-release"></a><span data-ttu-id="dfef6-129">Атрибут cookie SameSite: выпуск 2020</span><span class="sxs-lookup"><span data-stu-id="dfef6-129">SameSite cookie attribute: 2020 release</span></span>

<span data-ttu-id="dfef6-130">Chrome 80, запланированный на выпуск в феврале 2020 г., вводит новые значения cookie и накладывает политики cookie по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="dfef6-130">Chrome 80, scheduled for release in February 2020, introduces new cookie values and imposes cookie policies by default.</span></span> <span data-ttu-id="dfef6-131">Три значения можно передать в обновленный атрибут SameSite: *Strict,* *Lax* или *None.*</span><span class="sxs-lookup"><span data-stu-id="dfef6-131">Three values can be passed into the updated SameSite attribute: *Strict*, *Lax*, or *None*.</span></span> <span data-ttu-id="dfef6-132">Файлы cookie, не указывав атрибут SameSite, будут по умолчанию `SameSite=Lax` .</span><span class="sxs-lookup"><span data-stu-id="dfef6-132">Cookies that don't specify the SameSite attribute will default to `SameSite=Lax`.</span></span>

|<span data-ttu-id="dfef6-133">Setting</span><span class="sxs-lookup"><span data-stu-id="dfef6-133">Setting</span></span> | <span data-ttu-id="dfef6-134">Правоприменители</span><span class="sxs-lookup"><span data-stu-id="dfef6-134">Enforcement</span></span> | <span data-ttu-id="dfef6-135">Значение</span><span class="sxs-lookup"><span data-stu-id="dfef6-135">Value</span></span> |<span data-ttu-id="dfef6-136">Спецификация атрибута</span><span class="sxs-lookup"><span data-stu-id="dfef6-136">Attribute Specification</span></span> |
| -------- | ----------- | --------|--------|
| <span data-ttu-id="dfef6-137">**Лакс**</span><span class="sxs-lookup"><span data-stu-id="dfef6-137">**Lax**</span></span>  | <span data-ttu-id="dfef6-138">Файлы cookie будут отправлены автоматически только в *контексте* первой стороны и с запросами HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="dfef6-138">Cookies will be sent automatically only in a *first-party* context and with HTTP GET requests.</span></span> <span data-ttu-id="dfef6-139">Файлы cookie SameSite будут отказано в межсайтовом подзапросах, таких как вызовы для загрузки изображений или iframes, но будут отправлены при переходе пользователя на URL-адрес с внешнего сайта, например, по ссылке.</span><span class="sxs-lookup"><span data-stu-id="dfef6-139">SameSite cookies will be withheld on cross-site sub-requests, such as calls to load images or iframes, but will be sent when a user navigates to the URL from an external site, e.g., by following a link.</span></span>| <span data-ttu-id="dfef6-140">**Default**</span><span class="sxs-lookup"><span data-stu-id="dfef6-140">**Default**</span></span> |`Set-Cookie: key=value; SameSite=Lax`|
| <span data-ttu-id="dfef6-141">**Strict**</span><span class="sxs-lookup"><span data-stu-id="dfef6-141">**Strict**</span></span> |<span data-ttu-id="dfef6-142">Браузер отправляет файлы cookie только для запросов контекста первой стороны (запросы, возникающие с сайта, замещая файл cookie).</span><span class="sxs-lookup"><span data-stu-id="dfef6-142">The browser will only send cookies for first-party context requests (requests originating from the site that set the cookie).</span></span> <span data-ttu-id="dfef6-143">Если запрос исходил из другого URL-адреса, чем текущего расположения, ни одно из файлов cookie, помеченных атрибутом, не `Strict` будет отправлено.</span><span class="sxs-lookup"><span data-stu-id="dfef6-143">If the request originated from a different URL than that of the current location, none of the cookies tagged with the `Strict` attribute will be sent.</span></span>| <span data-ttu-id="dfef6-144">Необязательна</span><span class="sxs-lookup"><span data-stu-id="dfef6-144">Optional</span></span> |`Set-Cookie: key=value; SameSite=Strict`|
| <span data-ttu-id="dfef6-145">**Нет**</span><span class="sxs-lookup"><span data-stu-id="dfef6-145">**None**</span></span> | <span data-ttu-id="dfef6-146">Файлы cookie будут отправлены как в первом, так и в межпромысных запросах; однако значение должно быть явно за установлено, и все запросы браузера должны следовать **`None`** **протоколу HTTPS** и включать атрибут, для которого требуется **`Secure`** зашифрованное подключение.</span><span class="sxs-lookup"><span data-stu-id="dfef6-146">Cookies will be sent in both first-party context and cross-origin requests; however, the value must be explicitly set to **`None`** and all browser requests **must follow the HTTPS protocol** and include the **`Secure`** attribute which requires an encrypted connection.</span></span> <span data-ttu-id="dfef6-147">Файлы cookie, которые не соблюдают это требование, будут **отклонены.**</span><span class="sxs-lookup"><span data-stu-id="dfef6-147">Cookies that don't adhere to that requirement will be **rejected**.</span></span> <br/><span data-ttu-id="dfef6-148">**Оба атрибута требуются вместе.**</span><span class="sxs-lookup"><span data-stu-id="dfef6-148">**Both attributes are required together**.</span></span> <span data-ttu-id="dfef6-149">Если только указано без или если протокол HTTPS не используется, сторонное **`None`** **`Secure`**  cookie будет отклонено.</span><span class="sxs-lookup"><span data-stu-id="dfef6-149">If just **`None`** is specified without **`Secure`**  or if the HTTPS protocol is not used, the third-party cookie will be rejected.</span></span>| <span data-ttu-id="dfef6-150">Необязательный, но если установлено, протокол HTTPS необходим.</span><span class="sxs-lookup"><span data-stu-id="dfef6-150">Optional, but, if set, the HTTPS protocol is required.</span></span> |`Set-Cookie: key=value; SameSite=None; Secure` |

## <a name="handling-incompatible-clients"></a><span data-ttu-id="dfef6-151">Обработка несовместимых клиентов</span><span class="sxs-lookup"><span data-stu-id="dfef6-151">Handling incompatible clients</span></span>

> [!IMPORTANT]
> <span data-ttu-id="dfef6-152">В `SameSite=None`  настоящее время не поддерживается [**клиентом или**](/aspnet/core/security/samesite?view=aspnetcore-3.1#test-with-electron&preserve-view=true) более старыми версиями Chrome или Safari.</span><span class="sxs-lookup"><span data-stu-id="dfef6-152">Currently, `SameSite=None`  is not supported by the [**Teams desktop client**](/aspnet/core/security/samesite?view=aspnetcore-3.1#test-with-electron&preserve-view=true) or older versions of Chrome or Safari.</span></span> <span data-ttu-id="dfef6-153">**См.** [известные несовместимые клиенты]( https://www.chromium.org/updates/same-site/incompatible-clients).</span><span class="sxs-lookup"><span data-stu-id="dfef6-153">**See** [Known Incompatible Clients]( https://www.chromium.org/updates/same-site/incompatible-clients).</span></span>
><span data-ttu-id="dfef6-154">Однако существует два **обходных решения:**</span><span class="sxs-lookup"><span data-stu-id="dfef6-154">However, there are two **workaround solutions**:</span></span>
>
>1. <span data-ttu-id="dfef6-155">Проверьте пользователя-агента, чтобы предоставить правильное свойство SameSite.</span><span class="sxs-lookup"><span data-stu-id="dfef6-155">Check the user-agent in order to provide the correct SameSite property.</span></span> <span data-ttu-id="dfef6-156">Вы можете реализовать проверку пользователя и агента в [**C#**](https://devblogs.microsoft.com/aspnet/upcoming-samesite-cookie-changes-in-asp-net-and-asp-net-core/) [**иNode.js.**](https://web.dev/samesite-cookie-recipes/)</span><span class="sxs-lookup"><span data-stu-id="dfef6-156">You can implement the user-agent check in [**C#**](https://devblogs.microsoft.com/aspnet/upcoming-samesite-cookie-changes-in-asp-net-and-asp-net-core/) and [**Node.js**](https://web.dev/samesite-cookie-recipes/).</span></span>
>2. <span data-ttu-id="dfef6-157">Установите атрибуты cookie с помощью новых и старых моделей.</span><span class="sxs-lookup"><span data-stu-id="dfef6-157">Set your cookie attributes using both the new and old models.</span></span> <span data-ttu-id="dfef6-158">*См.* [в обращении с несовместимыми клиентами](https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients)</span><span class="sxs-lookup"><span data-stu-id="dfef6-158">*See* [Handling incompatible clients](https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients)</span></span><br><br>
><span data-ttu-id="dfef6-159">**Если приложение работает в клиенте на рабочем столе Teams и вы задайте атрибут SameSite, ваше приложение будет работать `SameSite=None` не так, как ожидалось.**</span><span class="sxs-lookup"><span data-stu-id="dfef6-159">**If your app is running in the Teams desktop client, and you set the SameSite attribute to `SameSite=None` , your app will not work as expected.**</span></span>

<span data-ttu-id="dfef6-160">Использование любого подхода гарантирует, что ваше приложение будет работать правильно, когда клиент настольных компьютеров Teams будет обновлен до совместимой версии `SameSite=None`   Chromium.</span><span class="sxs-lookup"><span data-stu-id="dfef6-160">Using either approach will ensure that your application continues to work properly when the Teams desktop client is upgraded to a `SameSite=None`   compatible version of  Chromium.</span></span>

## <a name="teams-implications-and-adjustments"></a><span data-ttu-id="dfef6-161">Последствия и корректировки команд</span><span class="sxs-lookup"><span data-stu-id="dfef6-161">Teams implications and adjustments</span></span>

>[!WARNING]
><span data-ttu-id="dfef6-162">**Приложения, работающие в настольном клиенте Teams, несовместимы с атрибутом, и они `SameSite=None`  будут работать не так, как ожидалось.**</span><span class="sxs-lookup"><span data-stu-id="dfef6-162">**Applications running in the Teams desktop client are incompatible with the `SameSite=None`  attribute, and  they will not work as expected.**</span></span> <span data-ttu-id="dfef6-163">См. **выше решения обходных** решений.</span><span class="sxs-lookup"><span data-stu-id="dfef6-163">Please see the **workaround solutions**, above.</span></span>

1. <span data-ttu-id="dfef6-164">Встройте соответствующий параметр SameSite для файлов cookie и проверьте, продолжают ли приложения и расширения работать в Teams.</span><span class="sxs-lookup"><span data-stu-id="dfef6-164">Enable the relevant SameSite setting for your cookies and validate that your apps and extensions continue to work in Teams.</span></span>
1. <span data-ttu-id="dfef6-165">Если ваши приложения или расширения сбой, сделать необходимые исправления до выпуска Chrome 80.</span><span class="sxs-lookup"><span data-stu-id="dfef6-165">If your apps or extensions fail, make the necessary fixes prior to the Chrome 80 release.</span></span>
1. <span data-ttu-id="dfef6-166">Внутренние партнеры Майкрософт могут присоединиться к следующей группе, если им потребуется больше информации или помощь в этом вопросе: <https://teams.microsoft.com/l/team/19%3A08b594cd465e4c0491fb751e823802e2%40thread.skype/conversations?groupId=4d6d04cd-dbf0-43c8-a2ff-f80dd38be034&tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47> .</span><span class="sxs-lookup"><span data-stu-id="dfef6-166">Microsoft internal partners can join the following team if they need more information or help with this issue: <https://teams.microsoft.com/l/team/19%3A08b594cd465e4c0491fb751e823802e2%40thread.skype/conversations?groupId=4d6d04cd-dbf0-43c8-a2ff-f80dd38be034&tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47>.</span></span>

> [!NOTE]
> <span data-ttu-id="dfef6-167">Для наилучшей практики рекомендуется всегда устанавливать атрибуты SameSite, чтобы они отражали предназначенное использование файлов cookie, не полагаясь на поведение браузера по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="dfef6-167">For best practice, it's recommended that you always set SameSite attributes to reflect the intended use for your cookies — don't rely on default browser behavior.</span></span> <span data-ttu-id="dfef6-168">*См.* [статью Developers: Get Ready for New SameSite=None; Безопасные параметры cookie](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html).</span><span class="sxs-lookup"><span data-stu-id="dfef6-168">*See* [Developers: Get Ready for New SameSite=None; Secure Cookie Settings](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html).</span></span>

### <a name="tabs-task-modules-and-message-extensions"></a><span data-ttu-id="dfef6-169">Вкладки, модули задач и расширения сообщений</span><span class="sxs-lookup"><span data-stu-id="dfef6-169">Tabs, task modules, and message extensions</span></span>

* <span data-ttu-id="dfef6-170">Вкладки Teams используются для встраивки контента, просматриваемого в контексте верхнего `<iframes>` или первого уровня.</span><span class="sxs-lookup"><span data-stu-id="dfef6-170">Teams tabs use `<iframes>` to embed content that is viewed in a top-level or first-party context.</span></span>
* <span data-ttu-id="dfef6-171">Модули задач позволяют создавать модальные всплывающие окна в приложении Teams.</span><span class="sxs-lookup"><span data-stu-id="dfef6-171">Task modules allow you to create modal popup experiences in your Teams application.</span></span> <span data-ttu-id="dfef6-172">Как и вкладка, внутри текущей страницы открывается модальный окне.</span><span class="sxs-lookup"><span data-stu-id="dfef6-172">Similar to a tab, a modal window opens inside the current page.</span></span>
* <span data-ttu-id="dfef6-173">Расширения сообщений позволяют вставлять обогащенный контент в сообщение чата из внешних ресурсов.</span><span class="sxs-lookup"><span data-stu-id="dfef6-173">Message extensions allow you to insert enriched content into chat message from external resources.</span></span>

<span data-ttu-id="dfef6-174">Все файлы cookie, используемые встроенным контентом, будут считаться сторонними при отобралении сайта в `<iframe>` .</span><span class="sxs-lookup"><span data-stu-id="dfef6-174">Any cookies used by embedded content will be considered third-party when the site is displayed in an `<iframe>`.</span></span> <span data-ttu-id="dfef6-175">Кроме того, если удаленные ресурсы на странице зависят от файлов cookie, отосланных с запросом (например, тегами, внешними шрифтами и персонализированным контентом), необходимо убедиться, что они помечены для использования на разных `<img>` веб-узлах или будут иметь место. `<script>` `SameSite=None; Secure`</span><span class="sxs-lookup"><span data-stu-id="dfef6-175">In addition, if any remote resources on a page rely on cookies being sent with a request (e.g., `<img>` and `<script>` tags, external fonts, and personalized content) you'll need to ensure those are marked for cross-site usage — `SameSite=None; Secure` — or ensure that a fallback is in place.</span></span>

### <a name="authentication"></a><span data-ttu-id="dfef6-176">Проверка подлинности</span><span class="sxs-lookup"><span data-stu-id="dfef6-176">Authentication</span></span>

* <span data-ttu-id="dfef6-177">Если требуется проверка подлинности для встроенных страниц контента на вкладке, необходимо использовать поток проверки подлинности на основе веб-данных.</span><span class="sxs-lookup"><span data-stu-id="dfef6-177">If you require authentication for embedded content pages in tabs, you'll need to use the web-based authentication flow.</span></span>
* <span data-ttu-id="dfef6-178">Поток проверки подлинности на веб-основе также может использоваться для страницы конфигурации, модуля задач или расширения обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="dfef6-178">A web-based authentication flow can also be used for a configuration page, task module, or messaging extension.</span></span>
* <span data-ttu-id="dfef6-179">Вы можете использовать поток проверки подлинности на веб-основе для беседуемого бота, необходимого для использования модуля задач.</span><span class="sxs-lookup"><span data-stu-id="dfef6-179">You can use  a web-based authentication flow for a conversational bot you'll need to use a task module.</span></span>

<span data-ttu-id="dfef6-180">В соответствии с обновленными ограничениями SameSite браузер не будет добавлять cookie на уже заверяемом веб-сайте, если ссылка происходит из внешнего сайта.</span><span class="sxs-lookup"><span data-stu-id="dfef6-180">Pursuant to the updated SameSite restrictions, a browser will not add a cookie to an already authenticated web site if the link derives from an external site.</span></span> <span data-ttu-id="dfef6-181">Необходимо убедиться в том, что файлы cookie проверки подлинности помечены для использования на разных веб-узлах или будут иметь место для `SameSite=None; Secure` отката.</span><span class="sxs-lookup"><span data-stu-id="dfef6-181">You'll need to ensure your authentication cookies are marked for cross-site usage — `SameSite=None; Secure` — or ensure that a fallback is in place.</span></span>

### <a name="android-system-webview"></a><span data-ttu-id="dfef6-182">Android System WebView</span><span class="sxs-lookup"><span data-stu-id="dfef6-182">Android System WebView</span></span>

<span data-ttu-id="dfef6-183">Android WebView — это системный компонент Chrome, который позволяет приложениям Android отображать веб-контент.</span><span class="sxs-lookup"><span data-stu-id="dfef6-183">Android WebView is a Chrome system component that allows Android apps to display web content.</span></span> <span data-ttu-id="dfef6-184">Хотя новые ограничения станут по умолчанию, начиная с Chrome 80, они не будут немедленно применяться в WebViews.</span><span class="sxs-lookup"><span data-stu-id="dfef6-184">While the new restrictions will become the default, starting with Chrome 80, they will not be immediately enforced on WebViews.</span></span> <span data-ttu-id="dfef6-185">Они будут применяться в будущем.</span><span class="sxs-lookup"><span data-stu-id="dfef6-185">They will be applied in the future.</span></span> <span data-ttu-id="dfef6-186">Чтобы подготовиться, Android позволяет родным приложениям устанавливать файлы cookie непосредственно через [API CookeManager:](https://developer.android.com/reference/android/webkit/CookieManager)</span><span class="sxs-lookup"><span data-stu-id="dfef6-186">To prepare, Android allows native apps to set cookies directly via the [CookeManager API](https://developer.android.com/reference/android/webkit/CookieManager):</span></span>

* <span data-ttu-id="dfef6-187">Для файлов cookie, которые необходимы только в контексте первой стороны, их следует объявить как `SameSite=Lax` `SameSite=Strict` соответствующие или соответствующие.</span><span class="sxs-lookup"><span data-stu-id="dfef6-187">For cookies that are only needed in a first-party context, you should declare them as `SameSite=Lax` or `SameSite=Strict`, as appropriate.</span></span>
* <span data-ttu-id="dfef6-188">Для файлов cookie, необходимых в стороном контексте, необходимо убедиться, что они объявлены `SameSite=None; Secure` как .</span><span class="sxs-lookup"><span data-stu-id="dfef6-188">For cookies needed in a third-party context, you should ensure that they are declared as `SameSite=None; Secure`.</span></span>

## <a name="learn-more"></a><span data-ttu-id="dfef6-189">Подробнее</span><span class="sxs-lookup"><span data-stu-id="dfef6-189">Learn more</span></span>

[<span data-ttu-id="dfef6-190">Примеры SameSite</span><span class="sxs-lookup"><span data-stu-id="dfef6-190">SameSite examples</span></span>](https://github.com/GoogleChromeLabs/samesite-examples)

[<span data-ttu-id="dfef6-191">Рецепты cookie SameSite</span><span class="sxs-lookup"><span data-stu-id="dfef6-191">SameSite cookie recipes</span></span>](https://web.dev/samesite-cookie-recipes/)

[<span data-ttu-id="dfef6-192">Известные несовместимые клиенты</span><span class="sxs-lookup"><span data-stu-id="dfef6-192">Known Incompatible Clients</span></span>]( https://www.chromium.org/updates/same-site/incompatible-clients)

[<span data-ttu-id="dfef6-193">Разработчики: готовьтесь к new SameSite=None; Безопасные параметры cookie</span><span class="sxs-lookup"><span data-stu-id="dfef6-193">Developers: Get Ready for New SameSite=None; Secure Cookie Settings</span></span>](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html)

<span data-ttu-id="dfef6-194">**Влияние OpenId Connect**</span><span class="sxs-lookup"><span data-stu-id="dfef6-194">**OpenId Connect impact**</span></span><br>
[<span data-ttu-id="dfef6-195">Предстоящие изменения cookie SameSite в ASP.NET и ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="dfef6-195">Upcoming SameSite Cookie Changes in ASP.NET and ASP.NET Core</span></span>](https://devblogs.microsoft.com/aspnet/upcoming-samesite-cookie-changes-in-asp-net-and-asp-net-core/)
