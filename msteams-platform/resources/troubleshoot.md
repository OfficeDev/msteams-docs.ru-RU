---
title: Устранение неполадок в приложении
description: Устранение неполадок или ошибок при создании приложений для Microsoft Teams
keywords: устранение неполадок в разработке команд приложений
localization_priority: Normal
ms.topic: troubleshooting
ms.date: 07/09/2018
ms.openlocfilehash: ce45a75869e8b6694cd84c10f8fac1f9bd55bad4
ms.sourcegitcommit: 825abed2f8784d2bab7407ba7a4455ae17bbd28f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2021
ms.locfileid: "52020431"
---
# <a name="troubleshoot-your-microsoft-teams-app"></a><span data-ttu-id="80a2b-104">Устранение неполадок в приложении Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="80a2b-104">Troubleshoot your Microsoft Teams app</span></span>

## <a name="troubleshooting-tabs"></a><span data-ttu-id="80a2b-105">Вкладки устранения неполадок</span><span class="sxs-lookup"><span data-stu-id="80a2b-105">Troubleshooting tabs</span></span>

### <a name="accessing-the-devtools"></a><span data-ttu-id="80a2b-106">Доступ к DevTools</span><span class="sxs-lookup"><span data-stu-id="80a2b-106">Accessing the DevTools</span></span>

<span data-ttu-id="80a2b-107">Вы можете открыть [DevTools](~/tabs/how-to/developer-tools.md) в клиенте Teams для аналогичного опыта, как нажатие F12 (на Windows) или Command-Option-I (на MacOS) в браузере.</span><span class="sxs-lookup"><span data-stu-id="80a2b-107">You can open [DevTools in the Teams client](~/tabs/how-to/developer-tools.md) for a similar experience as pressing F12 (on Windows) or Command-Option-I (on MacOS) in a browser.</span></span>

### <a name="blank-tab-screen"></a><span data-ttu-id="80a2b-108">Пустой экран вкладки</span><span class="sxs-lookup"><span data-stu-id="80a2b-108">Blank tab screen</span></span>

<span data-ttu-id="80a2b-109">Если вы не видите контент в представлении вкладки, это может быть:</span><span class="sxs-lookup"><span data-stu-id="80a2b-109">If you are not seeing your content in the tab view, it could be:</span></span>

* <span data-ttu-id="80a2b-110">содержимое не может отображаться в `<iframe>` .</span><span class="sxs-lookup"><span data-stu-id="80a2b-110">your content cannot be displayed in an `<iframe>`.</span></span>
* <span data-ttu-id="80a2b-111">домен контента не находится в [списке validDomains](~/resources/schema/manifest-schema.md#validdomains) в манифесте.</span><span class="sxs-lookup"><span data-stu-id="80a2b-111">the content domain is not in the [validDomains](~/resources/schema/manifest-schema.md#validdomains) list in the manifest.</span></span>

### <a name="the-save-button-isnt-enabled-on-the-settings-dialog"></a><span data-ttu-id="80a2b-112">Кнопка Сохранить не включена в диалоговом окантове параметров</span><span class="sxs-lookup"><span data-stu-id="80a2b-112">The Save button isn't enabled on the settings dialog</span></span>

<span data-ttu-id="80a2b-113">Не забудьте позвонить, если пользователь вошел или выбрал все необходимые данные на странице параметры, чтобы включить `microsoftTeams.settings.setValidityState(true)` кнопку сохранить.</span><span class="sxs-lookup"><span data-stu-id="80a2b-113">Be sure to call `microsoftTeams.settings.setValidityState(true)` once the user has input or selected all required data on your settings page to enable the save button.</span></span>

### <a name="after-selecting-the-save-button-the-tab-settings-cannot-be-saved"></a><span data-ttu-id="80a2b-114">После выбора кнопки Сохранить параметры вкладки не удается сохранить.</span><span class="sxs-lookup"><span data-stu-id="80a2b-114">After selecting the Save button, the tab settings cannot be saved</span></span>

<span data-ttu-id="80a2b-115">При добавлении вкладки, если вы нажмете кнопки сохранить, но вам будет представлено сообщение об ошибке, указывающее, что параметры не могут быть сохранены, проблема может быть одной из двух классов проблем:</span><span class="sxs-lookup"><span data-stu-id="80a2b-115">When adding a tab, if you click the save buttons but are presented with an error message indicating the settings cannot be saved, the problem could be one of two classes of issues:</span></span>

* <span data-ttu-id="80a2b-116">Сообщение о сохранения успеха так и не было получено.</span><span class="sxs-lookup"><span data-stu-id="80a2b-116">The save success message was never received.</span></span> <span data-ttu-id="80a2b-117">Если обработник сохранения был зарегистрирован с помощью, необходимо `microsoftTeams.settings.registerOnSaveHandler(handler)` вызвать `saveEvent.notifySuccess()` вызов.</span><span class="sxs-lookup"><span data-stu-id="80a2b-117">If a save handler was registered using `microsoftTeams.settings.registerOnSaveHandler(handler)`, the callback must call `saveEvent.notifySuccess()`.</span></span> <span data-ttu-id="80a2b-118">Если вызов не вызывается в течение 30 секунд или вместо этого вызывается, эта ошибка `saveEvent.notifyFailure(reason)` будет показана.</span><span class="sxs-lookup"><span data-stu-id="80a2b-118">If the callback doesn't call this within 30 seconds or calls `saveEvent.notifyFailure(reason)` instead, this error will be shown.</span></span>

* <span data-ttu-id="80a2b-119">Если обработник сохранения не зарегистрирован, вызов автоматически делается сразу после выбора кнопки `saveEvent.notifySuccess()` сохранить.</span><span class="sxs-lookup"><span data-stu-id="80a2b-119">If no save handler was registered, the `saveEvent.notifySuccess()` call is automatically made immediately upon the user selecting the save button.</span></span>

* <span data-ttu-id="80a2b-120">Предоставленные параметры были недействительными.</span><span class="sxs-lookup"><span data-stu-id="80a2b-120">The provided settings were invalid.</span></span> <span data-ttu-id="80a2b-121">Другая причина, по которой параметры не могут быть сохранены, состоит в том, если вызов предоставил объект недействительных параметров или вызов не был выполнен `microsoftTeams.setSettings(settings)` вообще.</span><span class="sxs-lookup"><span data-stu-id="80a2b-121">The other reason the settings may not be saved is if the call to `microsoftTeams.setSettings(settings)` provided an invalid settings object, or the call wasn't made at all.</span></span> <span data-ttu-id="80a2b-122">См. в следующем разделе Общие проблемы с объектом параметров.</span><span class="sxs-lookup"><span data-stu-id="80a2b-122">See the next section, Common problems with the settings object.</span></span>

### <a name="common-problems-with-the-settings-object"></a><span data-ttu-id="80a2b-123">Общие проблемы с объектом параметров</span><span class="sxs-lookup"><span data-stu-id="80a2b-123">Common problems with the settings object</span></span>

* <span data-ttu-id="80a2b-124">`settings.entityId` отсутствует.</span><span class="sxs-lookup"><span data-stu-id="80a2b-124">`settings.entityId` is missing.</span></span> <span data-ttu-id="80a2b-125">Это поле является обязательным.</span><span class="sxs-lookup"><span data-stu-id="80a2b-125">This field is required.</span></span>
* <span data-ttu-id="80a2b-126">`settings.contentUrl` отсутствует.</span><span class="sxs-lookup"><span data-stu-id="80a2b-126">`settings.contentUrl` is missing.</span></span> <span data-ttu-id="80a2b-127">Это поле является обязательным.</span><span class="sxs-lookup"><span data-stu-id="80a2b-127">This field is required.</span></span>
* <span data-ttu-id="80a2b-128">`settings.contentUrl` или `settings.removeUrl` необязательный или `settings.websiteUrl` предоставляется, но не является допустимым.</span><span class="sxs-lookup"><span data-stu-id="80a2b-128">`settings.contentUrl` or the optional `settings.removeUrl`, or `settings.websiteUrl` are provided but not valid.</span></span> <span data-ttu-id="80a2b-129">URL-адреса должны использовать HTTPS, а также должны быть тем же доменом, что и страница параметров, или указаны в списке `validDomains` манифеста.</span><span class="sxs-lookup"><span data-stu-id="80a2b-129">The URLs must use HTTPS and also must either be the same domain as the settings page or specified in the manifest's `validDomains` list.</span></span>

### <a name="cant-authenticate-the-user-or-display-your-auth-provider-in-your-tab"></a><span data-ttu-id="80a2b-130">Не может проверить подлинность пользователя или отобразить поставщика auth на вкладке</span><span class="sxs-lookup"><span data-stu-id="80a2b-130">Can't authenticate the user or display your auth provider in your tab</span></span>

<span data-ttu-id="80a2b-131">Если вы не делаете бесшумную проверку подлинности, необходимо следовать процессу проверки подлинности, предоставляемому клиентом [Microsoft Teams JavaScript SDK.](/javascript/api/overview/msteams-client.md)</span><span class="sxs-lookup"><span data-stu-id="80a2b-131">Unless you are doing silent authentication, you must follow the authentication process provided by the [Microsoft Teams JavaScript client SDK](/javascript/api/overview/msteams-client.md).</span></span>

> [!NOTE]
><span data-ttu-id="80a2b-132">Мы требуем, чтобы весь поток проверки подлинности начался и заканчивается в домене, который должен быть указан в `validDomains` объекте в манифесте.</span><span class="sxs-lookup"><span data-stu-id="80a2b-132">We require all authentication flow to start and end on your domain, which must be listed in the `validDomains` object in your manifest.</span></span>

<span data-ttu-id="80a2b-133">Дополнительные сведения о проверке подлинности см. в дополнительных сведениях о [проверке подлинности пользователя.](~/concepts/authentication/authentication.md)</span><span class="sxs-lookup"><span data-stu-id="80a2b-133">For more information about authentication, please see [Authenticate a user](~/concepts/authentication/authentication.md).</span></span>

### <a name="static-tabs-not-showing-up"></a><span data-ttu-id="80a2b-134">Не отображаются статические вкладки</span><span class="sxs-lookup"><span data-stu-id="80a2b-134">Static tabs not showing up</span></span>

<span data-ttu-id="80a2b-135">Существует известная проблема, когда обновление существующего приложения-бота с помощью новой или обновленной статической вкладки не будет показывать изменение вкладки при доступе к приложению из личного чата.</span><span class="sxs-lookup"><span data-stu-id="80a2b-135">There is a known issue where updating an existing bot app with a new or updated static tab will not show that tab change when accessing the app from a personal chat conversation.</span></span>  <span data-ttu-id="80a2b-136">Чтобы увидеть изменение, необходимо протестировать новый пользователь или тестовый экземпляр или получить доступ к боту из флайка Apps.</span><span class="sxs-lookup"><span data-stu-id="80a2b-136">To see the change, you should test on a new user or test instance, or access the bot from the Apps flyout.</span></span>

## <a name="troubleshooting-bots"></a><span data-ttu-id="80a2b-137">Устранение неполадок ботов</span><span class="sxs-lookup"><span data-stu-id="80a2b-137">Troubleshooting bots</span></span>

### <a name="cant-add-my-bot"></a><span data-ttu-id="80a2b-138">Не могу добавить бот</span><span class="sxs-lookup"><span data-stu-id="80a2b-138">Can't add my bot</span></span>

<span data-ttu-id="80a2b-139">Приложения должны быть включены администратором клиента Office 365, чтобы они загружались конечными пользователями.</span><span class="sxs-lookup"><span data-stu-id="80a2b-139">Apps must be enabled by the Office 365 tenant admin for them to be loaded by end users.</span></span> <span data-ttu-id="80a2b-140">Обратите внимание, что в некоторых случаях у клиента Office 365 может быть несколько skUs, связанных с ним, и для работы ботов в любом случае они должны быть включены во всех skUs.</span><span class="sxs-lookup"><span data-stu-id="80a2b-140">Note that in some cases, the Office 365 tenant might have multiple SKUs associated with it, and for bots to work in any, they must be enabled in all SKUs.</span></span> <span data-ttu-id="80a2b-141">Дополнительные [сведения см. в "Подготовка клиента Office 365".](~/concepts/build-and-test/prepare-your-o365-tenant.md)</span><span class="sxs-lookup"><span data-stu-id="80a2b-141">See [Prepare your Office 365 tenant](~/concepts/build-and-test/prepare-your-o365-tenant.md) for more information.</span></span>

### <a name="cant-add-bot-as-a-member-of-a-team"></a><span data-ttu-id="80a2b-142">Не может добавить бота в качестве члена команды</span><span class="sxs-lookup"><span data-stu-id="80a2b-142">Can't add bot as a member of a team</span></span>

<span data-ttu-id="80a2b-143">Сначала боты должны быть загружены в команду, прежде чем они будут доступны в любом канале этой группы.</span><span class="sxs-lookup"><span data-stu-id="80a2b-143">Bots must first be upload into a team before it is accessible within any channel of that team.</span></span> <span data-ttu-id="80a2b-144">Дополнительные [сведения об](~/concepts/deploy-and-publish/apps-upload.md) этом процессе можно получить в группе.</span><span class="sxs-lookup"><span data-stu-id="80a2b-144">Please review [Uploading your app in a team](~/concepts/deploy-and-publish/apps-upload.md) for more information on this process.</span></span>

### <a name="my-bot-doesnt-get-my-message-in-a-channel"></a><span data-ttu-id="80a2b-145">Мой бот не получит мое сообщение в канале</span><span class="sxs-lookup"><span data-stu-id="80a2b-145">My bot doesn't get my message in a channel</span></span>

<span data-ttu-id="80a2b-146">Боты в каналах получают сообщения только при явном @mentioned, даже если вы отвечаете на предыдущее сообщение бота.</span><span class="sxs-lookup"><span data-stu-id="80a2b-146">Bots in channels receive messages only when they are explicitly @mentioned, even if you are replying to a previous bot message.</span></span> <span data-ttu-id="80a2b-147">Единственным исключением, в котором имя бота в сообщении может не быть, является получение ботом действия в результате отправленного изначально `imBack` cardAction.</span><span class="sxs-lookup"><span data-stu-id="80a2b-147">The only exception where you might not see the bot name in a message is if the bot receives an `imBack` action as a result of a CardAction that it originally sent.</span></span>

### <a name="my-bot-doesnt-understand-my-commands-when-in-a-channel"></a><span data-ttu-id="80a2b-148">Мой бот не понимает мои команды, когда в канале</span><span class="sxs-lookup"><span data-stu-id="80a2b-148">My bot doesn't understand my commands when in a channel</span></span>

<span data-ttu-id="80a2b-149">Так как боты в каналах получают сообщения только при @mentioned, все сообщения, которые ваш бот получает в канале, включают @mention в текстовом поле.</span><span class="sxs-lookup"><span data-stu-id="80a2b-149">Because bots in channels only receive messages when they are @mentioned, all messages that your bot receives in a channel include that @mention in the text field.</span></span> <span data-ttu-id="80a2b-150">Перед передачей в логику размыкания лучше всего отобрать само имя бота из всех входящих текстовых сообщений.</span><span class="sxs-lookup"><span data-stu-id="80a2b-150">It is a best practice to strip the bot name itself out of all incoming text messages before passing along to your parsing logic.</span></span> <span data-ttu-id="80a2b-151">Просмотрите [упоминания](../bots/how-to/conversations/channel-and-group-conversations.md#work-with-mentions) о том, как обращаться с этим случаем.</span><span class="sxs-lookup"><span data-stu-id="80a2b-151">Review [mentions](../bots/how-to/conversations/channel-and-group-conversations.md#work-with-mentions) for tips on how to handle this case.</span></span>

## <a name="issues-with-packaging-and-uploading"></a><span data-ttu-id="80a2b-152">Проблемы с упаковкой и загрузкой</span><span class="sxs-lookup"><span data-stu-id="80a2b-152">Issues with packaging and uploading</span></span>

### <a name="error-while-reading-manifestjson"></a><span data-ttu-id="80a2b-153">Ошибка при чтении manifest.js</span><span class="sxs-lookup"><span data-stu-id="80a2b-153">Error while reading manifest.json</span></span>

<span data-ttu-id="80a2b-154">Большинство ошибок манифеста дают подсказку о том, какое конкретное поле отсутствует или является недействительным.</span><span class="sxs-lookup"><span data-stu-id="80a2b-154">Most  manifest errors will provide a hint at what specific field is missing or invalid.</span></span> <span data-ttu-id="80a2b-155">Однако если файл JSON не может быть прочитан как JSON вообще, используется это общее сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="80a2b-155">However, if the JSON file cannot be read as JSON at all, this generic error message is used.</span></span>

<span data-ttu-id="80a2b-156">Распространенные причины ошибок чтения манифеста:</span><span class="sxs-lookup"><span data-stu-id="80a2b-156">Common reasons for manifest read errors:</span></span>

* <span data-ttu-id="80a2b-157">Недействительный JSON.</span><span class="sxs-lookup"><span data-stu-id="80a2b-157">Invalid JSON.</span></span> <span data-ttu-id="80a2b-158">Используйте такой IDE, как [Visual Studio код](https://code.visualstudio.com) [или Visual Studio,](https://www.visualstudio.com/vs/) который автоматически проверяет синтаксис JSON.</span><span class="sxs-lookup"><span data-stu-id="80a2b-158">Use an IDE such as [Visual Studio Code](https://code.visualstudio.com) or [Visual Studio](https://www.visualstudio.com/vs/) that automatically validates the JSON syntax.</span></span>
* <span data-ttu-id="80a2b-159">Проблемы с кодией.</span><span class="sxs-lookup"><span data-stu-id="80a2b-159">Encoding issues.</span></span> <span data-ttu-id="80a2b-160">Используйте UTF-8 дляmanifest.js *файла.*</span><span class="sxs-lookup"><span data-stu-id="80a2b-160">Use UTF-8 for the *manifest.json* file.</span></span> <span data-ttu-id="80a2b-161">Другие коды, в частности с boM, могут быть недоступны для чтения.</span><span class="sxs-lookup"><span data-stu-id="80a2b-161">Other encodings, specifically with the BOM, may not be readable.</span></span>
* <span data-ttu-id="80a2b-162">Malformed .zip package.</span><span class="sxs-lookup"><span data-stu-id="80a2b-162">Malformed .zip package.</span></span> <span data-ttu-id="80a2b-163">Файл *manifest.js* должен быть на верхнем уровне файла .zip.</span><span class="sxs-lookup"><span data-stu-id="80a2b-163">The *manifest.json* file must be at the top level of the .zip file.</span></span> <span data-ttu-id="80a2b-164">Обратите внимание, что сжатие файлов Mac по умолчанию можетmanifest.jsв подтексто, которое не будет должным образом загружено в Microsoft Teams. </span><span class="sxs-lookup"><span data-stu-id="80a2b-164">Note that default Mac file compression might place the *manifest.json* in a subdirectory, which will not properly load in Microsoft Teams.</span></span>

### <a name="another-extension-with-same-id-exists"></a><span data-ttu-id="80a2b-165">Существует еще одно расширение с тем же ИД</span><span class="sxs-lookup"><span data-stu-id="80a2b-165">Another extension with same ID exists</span></span>

<span data-ttu-id="80a2b-166">При попытке повторной загрузки обновленного пакета с тем же ИД выберите значок **Replace** в конце строки таблицы вкладки, а не кнопку **Upload.**</span><span class="sxs-lookup"><span data-stu-id="80a2b-166">If you're attempting to re-upload an updated package with the same ID, choose the **Replace** icon at the end of the tab's table row rather than the **Upload** button.</span></span>

<span data-ttu-id="80a2b-167">Если обновленный пакет не загружается повторно, убедитесь, что ID является уникальным.</span><span class="sxs-lookup"><span data-stu-id="80a2b-167">If you're not re-uploading an updated package, ensure that the ID is unique.</span></span>
