---
title: Устранение неполадок в приложении
description: Устранение неполадок или ошибок при создании приложений для Microsoft Teams
keywords: Устранение неполадок разработки приложений teams
localization_priority: Normal
ms.topic: troubleshooting
ms.date: 07/09/2018
ms.openlocfilehash: 0b3f4f7b3a38b6e61b4fbc7e58c5ed5897ed427e
ms.sourcegitcommit: edfe85e312c73e34aa795922c4b7eb0647528d48
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/30/2022
ms.locfileid: "68243474"
---
# <a name="troubleshoot-your-microsoft-teams-app"></a>Устранение неполадок приложения Microsoft Teams

## <a name="troubleshooting-tabs"></a>Вкладки для устранения неполадок

### <a name="accessing-the-devtools"></a>Доступ к средствам разработки

Вы можете открыть [DevTools в клиенте Teams](~/tabs/how-to/developer-tools.md) для того же интерфейса, что и нажатие клавиши F12 (в Windows) или Command-Option-I (в MacOS) в браузере.

### <a name="blank-tab-screen"></a>Пустой экран вкладки

Если содержимое не отображается в представлении вкладки, это может быть:

* содержимое не может отображаться в `<iframe>`
* Домен контента отсутствует в списке [validDomains](~/resources/schema/manifest-schema.md#validdomains) в манифесте.

> [!NOTE]
> Пустая вкладка появляется, когда заданный URL-адрес вкладки перенаправляется на экран входа. Страницы входа не отображаются в iFrame как защита от щелчка. Логика проверки подлинности должна использовать метод, отличный от перенаправления.

### <a name="the-save-button-isnt-enabled-on-the-settings-dialog"></a>Кнопка "Сохранить" не включена в диалоговом окне параметров

Не забудьте позвонить, `microsoftTeams.settings.setValidityState(true)` когда пользователь включит кнопку сохранения или выберет все необходимые данные на странице параметров.

### <a name="the-tab-settings-cant-be-saved-on-selecting-save"></a>Невозможно сохранить параметры вкладки при выборе команды "Сохранить".

При добавлении вкладки, если  вы нажмите кнопку "Сохранить", но получите сообщение об ошибке, указывающее, что параметры не могут быть сохранены, проблема может быть одним из двух классов проблем:

* **Сообщение об успешном сохранении не было получено**: если обработчик `microsoftTeams.settings.registerOnSaveHandler(handler)`сохранения был зарегистрирован с помощью, обратный вызов должен быть вызван `saveEvent.notifySuccess()`.

  * Если обратный вызов не вызывается `saveEvent.notifySuccess()` в течение 30 `saveEvent.notifyFailure(reason)` секунд или вместо этого вызывается, отображается эта ошибка.
  * Если обработчик сохранения не зарегистрирован, `saveEvent.notifySuccess()` вызов выполняется автоматически, когда пользователь нажмет кнопку **"Сохранить"**.

* **Указанные параметры** были недопустимы. `microsoftTeams.setSettings(settings)` Другая причина, по которой параметры могут не быть сохранены, заключается в том, что вызов предоставлен объекта недопустимых параметров или вызов не был выполнен. См. следующий раздел "Распространенные проблемы с объектом параметров".

### <a name="common-problems-with-the-settings-object"></a>Распространенные проблемы с объектом settings

* `settings.entityId` отсутствует. Это поле является обязательным.
* `settings.contentUrl` отсутствует. Это поле является обязательным.
* `settings.contentUrl` или необязательный `settings.removeUrl`, или `settings.websiteUrl` указаны, но не являются допустимыми. URL-адреса должны использовать ПРОТОКОЛ HTTPS, а также домен, совпадающий со страницей параметров, или указан в списке манифеста `validDomains` .

### <a name="cant-authenticate-the-user-or-display-your-auth-provider-in-your-tab"></a>Не удается выполнить проверку подлинности пользователя или отобразить поставщика проверки подлинности на вкладке

Если вы не выполняете автоматическую проверку подлинности, необходимо выполнить процедуру проверки подлинности, предоставляемую клиентским [пакетом SDK JavaScript для Microsoft Teams](/javascript/api/overview/msteams-client).

> [!NOTE]
> Мы требуем, чтобы весь поток проверки подлинности начался и был в вашем домене, который должен быть указан в `validDomains` объекте в манифесте.

Дополнительные сведения о проверке подлинности см. в разделе ["Проверка подлинности пользователя"](~/concepts/authentication/authentication.md).

### <a name="static-tabs-not-showing-up"></a>Статические вкладки не отображаются

Существует известная проблема, из-за которой обновление существующего приложения-бота с помощью новой или обновленной статической вкладки не отображает это изменение вкладки при доступе к приложению из личной беседы в чате.  Чтобы увидеть это изменение, необходимо протестировать нового пользователя или тестовый экземпляр или получить доступ к боту из всплывающего меню "Приложения".

## <a name="troubleshooting-bots"></a>Устранение неполадок ботов

### <a name="cant-add-my-bot"></a>Не удается добавить бота

Приложения должны быть включены администратором Office 365 клиента, чтобы они загружались конечными пользователями. В некоторых случаях клиент Office 365 может иметь несколько номеров SKU, и для работы ботов в любом из них они должны быть включены во всех номерах SKU. Дополнительные сведения см. в разделе ["Подготовка Office 365 клиента"](~/concepts/build-and-test/prepare-your-o365-tenant.md).

### <a name="cant-add-bot-as-a-member-of-a-team"></a>Не удается добавить бота в команду

Сначала боты должны быть отправлены в команду, прежде чем они будут доступны в любом канале этой команды. Дополнительные сведения об этом процессе см. в [статье "Отправка приложения в команду"](~/concepts/deploy-and-publish/apps-upload.md).

### <a name="my-bot-doesnt-get-my-message-in-a-channel"></a>Мой бот не получает мое сообщение в канале

Боты в каналах получают сообщения только при явном @mentioned, даже если вы отвечаете на предыдущее сообщение бота. Единственным исключением, когда `imBack` имя бота может не отображаться в сообщении, является получение ботом действия в результате отправки объекта CardAction.

### <a name="my-bot-doesnt-understand-my-commands-when-in-a-channel"></a>Мой бот не понимает мои команды в канале

Так как боты в каналах получают сообщения только при @mentioned, все сообщения, получаемые ботом в канале, включают @mention в текстовое поле. Рекомендуется удалить имя бота из всех входящих текстовых сообщений перед передачей в логику анализа. [Ознакомьтесь с упоминаниями](../bots/how-to/conversations/channel-and-group-conversations.md#work-with-mentions), чтобы получить советы по обработке этого случая.

## <a name="issues-with-packaging-and-uploading"></a>Проблемы с упаковкой и отправкой

### <a name="error-while-reading-manifestjson"></a>Ошибка при чтении manifest.json

Большинство ошибок манифеста будут содержать указание на то, какое конкретное поле отсутствует или является недопустимым. Однако если JSON-файл не может быть прочитано как JSON, используется это универсальное сообщение об ошибке.

Распространенные причины ошибок чтения манифеста:

* Недопустимый JSON. Используйте интегрированную среду разработки, [например Visual Studio Code](https://code.visualstudio.com) [Visual Studio](https://www.visualstudio.com/vs/), которая автоматически проверяет синтаксис JSON.
* Проблемы кодирования. Используйте UTF-8 для *файла manifest.json* . Другие кодировки, в частности с метки порядка байтов, могут быть недоступны для чтения.
* Неправильно сформированный .zip пакета. Файл *manifest.json* должен находиться на верхнем уровне .zip файла. Обратите внимание, что сжатие файлов Mac по умолчанию может поместить *файл manifest.json* в подкаталог, который не будет правильно загружаться в Microsoft Teams.

### <a name="another-extension-with-same-id-exists"></a>Существует еще одно расширение с таким же идентификатором

Если вы пытаетесь снова отправить обновленный пакет с тем же идентификатором, щелкните значок "Заменить" в конце строки таблицы вкладки, а не кнопку **"Отправить**".

Если вы не отправляете обновленный пакет повторно, убедитесь, что идентификатор уникален.
