---
title: Тестирование и отладка бота
description: Описание тестирования ботов в Microsoft Teams
keywords: Тестирование ботов teams
ms.topic: how-to
ms.localizationpriority: medium
ms.date: 03/20/2019
ms.openlocfilehash: df403343aab60ebd802b4da0e871649ded8b8a7e
ms.sourcegitcommit: 0117c4e750a388a37cc189bba8fc0deafc3fd230
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2022
ms.locfileid: "65103434"
---
# <a name="test-and-debug-your-microsoft-teams-bot"></a>Тестирование и отладка Microsoft Teams бота

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

При тестировании бота необходимо учитывать контексты, в которых должен выполняться бот, а также любые функциональные возможности, которые вы могли добавить в бот, для которых требуются данные, относящиеся к Microsoft Teams. Убедитесь, что метод, выбранный для тестирования бота, соответствует его функциональным возможностям.

## <a name="test-by-uploading-to-teams"></a>Тестирование путем отправки в Teams

Самый полный способ протестировать бот — создать пакет приложения и отправить его в Teams. Это единственный метод проверки всех функциональных возможностей, доступных боту во всех областях.

Существует два способа отправки приложения. Вы можете использовать [App Studio или](~/concepts/build-and-test/app-studio-overview.md) вручную создать пакет [приложения и](~/concepts/build-and-test/apps-package.md) [отправить приложение](~/concepts/deploy-and-publish/apps-upload.md). Если необходимо изменить манифест и повторно загрузить приложение, перед отправкой измененного пакета приложения [](#deleting-a-bot-from-teams) удалите бот.

## <a name="debug-your-bot-locally"></a>Локальная отладка бота

Если вы размещаете бот локально во время разработки, для тестирования бота необходимо использовать службу туннелирования, например [ngrok](https://ngrok.com/) . Скачав и установив ngrok, выполните приведенную ниже команду, чтобы запустить службу туннелирования. Возможно, вам потребуется добавить ngrok в путь.

```bash
ngrok http <port> -host-header=localhost:<port>
```

Используйте конечную точку HTTPS, предоставленную ngrok в манифесте приложения. Если закрыть окно командной строки и перезапустить его, вы получите новый URL-адрес, и вам потребуется обновить адрес конечной точки бота, чтобы использовать его.

## <a name="testing-your-bot-without-uploading-to-teams"></a>Тестирование бота без отправки в Teams

Иногда необходимо протестировать бот, не устанавливая его в качестве приложения в Teams. Мы предоставляем два метода тестирования. Тестирование бота без его установки в качестве приложения может оказаться полезным, чтобы убедиться, что бот доступен и отвечает, однако он не позволит протестировать полный набор Microsoft Teams функций, которые вы, возможно, добавили в бот. Если вам нужно полностью протестировать бот, следуйте инструкциям по [тестированию, передав его](#test-by-uploading-to-teams).

### <a name="use-the-bot-emulator"></a>Использование бота Emulator

Это Bot Framework Emulator, которое позволяет разработчикам ботов тестировать и отлаживать боты локально или удаленно. С помощью эмулятора можно общаться с ботом и проверять сообщения, отправляемые и получаемые ботом. Это может быть полезно для проверки доступности бота и реагирования на него, однако эмулятор не позволит протестировать функциональные возможности, относящиеся к Teams, которые вы добавили в бот, и не будет точно визуализировать, как они отображаются в Teams. Если вам нужно протестировать одно из этих компонентов, не рекомендуется отправлять [бота](#test-by-uploading-to-teams).

Полные инструкции по Bot Framework Emulator можно найти [здесь](/azure/bot-service/bot-service-debug-emulator?view=azure-bot-service-4.0&preserve-view=true).

### <a name="talk-to-your-bot-directly-by-id"></a>Общение с ботом напрямую по идентификатору

>[!Important]
>Беседа с ботом по идентификатору предназначена только для тестирования.

Вы также можете инициировать беседу с ботом, используя его идентификатор. Ниже приведены два метода для этого. Когда бот был добавлен с помощью одного из этих методов, он не будет адресоваемым в беседах каналов, и вы не сможете воспользоваться другими возможностями приложения Microsoft Teams, такими как вкладки или расширения сообщений.

1. На странице [панели мониторинга бота](https://dev.botframework.com/bots) в разделе **"Каналы**" нажмите кнопку **"Добавить Microsoft Teams"**. Microsoft Teams запустится с помощью личного чата с ботом.
2. Напрямую ссылаться на идентификатор приложения бота из Microsoft Teams:
   * На странице [панели мониторинга бота](https://dev.botframework.com/bots) в разделе " **Сведения**" скопируйте идентификатор приложения **Майкрософт** для бота.
  
     ![Получение appID для бота](~/assets/images/bots_appid_botframework.png)
  
   * В Microsoft Teams области чата щелкните значок  "**Добавить чат**". Для **параметра To:** вставьте идентификатор приложения Майкрософт бота.
  
     ![Отправка AppID для бота](~/assets/images/bots_uploading.png)

     Идентификатор приложения должен разрешать имя бота.

   * Выберите бота и отправьте сообщение, чтобы инициировать беседу.
   * Кроме того, можно вставить идентификатор приложения бота в поле поиска в левом верхнем углу Microsoft Teams. На странице результатов поиска перейдите на вкладку "Люди", чтобы увидеть бота и начать беседу с ним.

Бот получит событие так `conversationUpdate` же, как боты, добавленные в команду, но без сведений о команде в объекте `channelData` .

## <a name="blocking-a-bot-in-personal-chat"></a>Блокировка бота в личном чате

Обратите внимание, что пользователи могут запретить боту отправлять личные сообщения чата. Они могут переключить его, щелкнув бота правой кнопкой мыши в канале чата и выбрав "Блокировать **беседу бота"**. Это означает, что боты продолжат отправлять сообщения, но пользователь не получит эти сообщения.

![Блокировка бота](~/assets/images/bots/botdisable.png)

## <a name="removing-a-bot-from-a-team"></a>Удаление бота из команды

Пользователи могут удалить бота, щелкнив значок корзины в списке ботов в представлении команд. Обратите внимание, что бот удаляется только из использования этой команды, отдельные пользователи могут взаимодействовать в личном контексте.

Боты в личном контексте не могут быть отключены или удалены пользователем, за счет полного удаления бота из Teams.

## <a name="disabling-a-bot-in-teams"></a>Отключение бота в Teams

Чтобы остановить получение сообщений ботом, перейдите на панель мониторинга бота и измените Microsoft Teams канале. Снимите **флажок "Включить Microsoft Teams**". Это предотвращает взаимодействие пользователей с ботом, но оно по-прежнему будет обнаруживаемым и пользователи могут добавлять его в команды.

## <a name="deleting-a-bot-from-teams"></a>Удаление бота из Teams

Чтобы полностью удалить бот из Teams, перейдите на панель мониторинга бота и измените Microsoft Teams канале. Нажмите **кнопку "** Удалить" внизу. Это не позволяет пользователям обнаруживать, добавлять и взаимодействовать с ботом. Обратите внимание, что это не приводит к удалению бота из экземпляров Teams других пользователей, хотя он также перестанет работать для них.

## <a name="removing-your-bot-from-appsource"></a>Удаление бота из AppSource

Если вы хотите удалить бот из приложения Teams в AppSource (ранее Office Store), необходимо удалить бот из манифеста приложения и повторно отправить приложение для проверки. Дополнительные сведения см. в статье [о публикации Microsoft Teams в AppSource](~/concepts/deploy-and-publish/apps-publish.md).
