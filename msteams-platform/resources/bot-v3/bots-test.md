---
title: Тест и отладить ваш бот
description: Описывает, как тестировать ботов в Microsoft Teams
keywords: команды ботов тестирования
ms.topic: how-to
localization_priority: Normal
ms.date: 03/20/2019
ms.openlocfilehash: 269b0680e45d764cf4cb0269c40d3d202145edb8
ms.sourcegitcommit: 51e4a1464ea58c254ad6bd0317aca03ebf6bf1f6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2021
ms.locfileid: "52566462"
---
# <a name="test-and-debug-your-microsoft-teams-bot"></a>Тест и отладить ваш Microsoft Teams бот

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

При тестировании бота необходимо учитывать как контекст (ы), в котором вы хотите, чтобы ваш бот запускали, так и любую функциональность, которую вы, возможно, добавили в свой бот, который требует данных, специфичных для Microsoft Teams. Убедитесь, что метод, который вы выбрали для тестирования бота, соответствует его функциональности.

## <a name="test-by-uploading-to-teams"></a>Тест, загрузив в Teams

Наиболее полный способ проверить бота , создав пакет приложений и загрузив его в Teams. Это единственный способ проверить полную функциональность, доступную для вашего бота, во всех сферах.

Существует два способа загрузки приложения. Вы можете использовать [App Studio,](~/concepts/build-and-test/app-studio-overview.md) чтобы помочь вам, или вы можете [вручную создать пакет приложений](~/concepts/build-and-test/apps-package.md) [и загрузить приложение.](~/concepts/deploy-and-publish/apps-upload.md) Если вам нужно изменить манифест и пере загрузили приложение, вы должны [удалить бота перед](#deleting-a-bot-from-teams) загрузкой измененного пакета приложений.

## <a name="debug-your-bot-locally"></a>Отладить бота локально

Если вы принимаете бота локально во время разработки, вам нужно будет использовать туннельную службу, [такую как ngrok,](https://ngrok.com/) чтобы протестировать своего бота. После загрузки и установки ngrok запустите нижеустановленную команду для запуска службы туннелирования. Возможно, вам придется добавить ngrok на ваш путь.

```bash
ngrok http <port> -host-header=localhost:<port>
```

Используйте конечную точку https, предоставленную ngrok в манифесте приложения. Если вы закроете окно команды и перезапустите, вы получите новый URL-адрес, и вам нужно будет обновить адрес конечной точки бота, чтобы использовать его также.

## <a name="testing-your-bot-without-uploading-to-teams"></a>Тестирование бота без загрузки в Teams

Иногда может потребоваться протестировать бота, не установив его в качестве приложения в Teams. Мы предоставляем два метода для этого ниже. Тестирование бота без установки его в качестве приложения может быть полезно для обеспечения вашего бота доступна и реагировать, однако это не позволит вам проверить всю широту Microsoft Teams функциональности вы, возможно, добавили к вашему боту. Если вам нужно полностью протестировать бота, пожалуйста, следуйте инструкциям для [тестирования, загрузив](#test-by-uploading-to-teams).

### <a name="use-the-bot-emulator"></a>Используйте эмулятор Bot

The Bot Framework Emulator настольное приложение, которое позволяет разработчикам ботов тестировать и отладить своих ботов, как локально, так и удаленно. Используя эмулятор, вы можете общаться с ботом и проверять сообщения, которые ваш бот отправляет и получает. Это может быть полезно для проверки того, что ваш бот доступен и отвечает, однако эмулятор не позволит вам проверить какие-либо Teams-специфические функции, которые вы добавили к вашему боту, и не будет ответы от вашего бота будет точное визуальное представление о том, как они будут оказываться в Teams. Если вам нужно проверить любой из этих вещей, то лучше [загрузить ваш бот](#test-by-uploading-to-teams).

Полные инструкции по Bot Framework Emulator можно найти [здесь](/azure/bot-service/bot-service-debug-emulator?view=azure-bot-service-4.0&preserve-view=true).

### <a name="talk-to-your-bot-directly-by-id"></a>Поговорите со своим ботом непосредственно id

>[!Important]
>Общение с ботом от Id предназначено только для целей тестирования.

Вы также можете начать разговор с ботом, используя его Id. Ниже приведены два метода для этого. Когда бот был добавлен с помощью одного из этих методов, он не будет адресным в разговорах канала, и вы не можете воспользоваться другими возможностями приложения Microsoft Teams, такими как вкладки или расширения обмена сообщениями.

1. На странице [Bot Dashboard для](https://dev.botframework.com/bots) вашего бота, под **каналами,** **выберите Добавить Microsoft Teams**. Microsoft Teams начнется с личного чата с вашим ботом.
2. Прямая ссылка на идентификатор приложения вашего бота из Microsoft Teams:
   * На странице [Bot Dashboard для](https://dev.botframework.com/bots) вашего бота, под подробной **информацией,** скопируйте идентификатор **приложения Майкрософт** для вашего бота.
  
     ![Получение AppID для бота](~/assets/images/bots_appid_botframework.png)
  
   * Из Microsoft Teams, на **панели чата,** выберите **значок чата** Add. **Для:**, вставьте идентификатор приложения Microsoft App вашего бота.
  
     ![Загрузка AppID для бота](~/assets/images/bots_uploading.png)

     Идентификатор приложения должен решиться на имя бота.

   * Выберите бота и отправьте сообщение, чтобы начать разговор.
   * Кроме того, вы можете вставить идентификатор приложения вашего бота в поле поиска в левом верхнем Microsoft Teams. На странице результатов поиска перейдите на вкладку «Люди», чтобы увидеть своего бота и начать общаться с ним.

Ваш бот будет получать событие `conversationUpdate` так же, как боты добавлены в команду, но без информации команды в `channelData` объекте.

## <a name="blocking-a-bot-in-personal-chat"></a>Блокировка бота в личном чате

Обратите внимание, что пользователи могут заблокировать вашего бота от отправки личных сообщений чата. Они могут переключить это, нажав на ваш бот в чате канала и выбирая **блок бот разговор.** Это означает, что ваши боты будут продолжать отправлять сообщения, но пользователь не будет получать эти сообщения.

![Блокировка бота](~/assets/images/bots/botdisable.png)

## <a name="removing-a-bot-from-a-team"></a>Удаление бота из команды

Пользователи могут удалить бота, выбрав значок мусорных баков в списке ботов в представлении команд. Обратите внимание, что это только удаляет бота из использования этой команды; отдельные пользователи по-прежнему смогут взаимодействовать в личном контексте.

Боты в личном контексте не могут быть отключены или удалены пользователем, затмевая полного удаления бота из Teams.

## <a name="disabling-a-bot-in-teams"></a>Отключение бота в Teams

Чтобы остановить получение сообщений бота, перейдите на панель мониторинга Bot и отредактировать Microsoft Teams канал. **Очистите включить на Microsoft Teams варианте.** Это не позволяет пользователям взаимодействовать с ботом, но он все равно будет обнаружить, и пользователи все равно смогут добавить его в команды.

## <a name="deleting-a-bot-from-teams"></a>Удаление бота из Teams

Чтобы полностью удалить бота из Teams, перейдите на панель мониторинга Bot и отредактировать Microsoft Teams канал. Выберите **кнопку** Удаления внизу. Это не позволяет пользователям открывать, добавлять или взаимодействовать с вашим ботом. Обратите внимание, что это не удаляет бота из сша других пользователей Teams экземпляров, хотя он перестанет функционировать и для них.

## <a name="removing-your-bot-from-appsource"></a>Удаление бота из AppSource

Если вы хотите удалить бота из приложения Teams в AppSource (ранее Office Store), вы должны удалить бота из манифеста приложения и повторно представить приложение для проверки. Для получения дополнительной информации [см Microsoft Teams.](~/concepts/deploy-and-publish/apps-publish.md)
