---
title: Тестирование и отладка ленты
description: Описание тестирования боты в Microsoft Teams
keywords: Тестирование Боты Teams
ms.date: 03/20/2019
ms.openlocfilehash: bb376b1c122b367c9fe74357751459f053d3d44b
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "41675469"
---
# <a name="test-and-debug-your-microsoft-teams-bot"></a>Тестирование и отладка ленты Microsoft Teams

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

При тестировании программы Bot необходимо принимать во внимание как те контексты, в которых должен работать Bot, так и любые функциональные возможности, которые могут быть добавлены в систему робота, требующие данных, относящихся к Microsoft Teams. Убедитесь, что метод, выбранный для проверки поправки ленты, соответствует функциональным возможностям.

## <a name="test-by-uploading-to-teams"></a>Тестирование при отправке в Teams

Наиболее полный способ тестирования программы Bot заключается в создании пакета приложения и его отправке в Teams. Это единственный способ протестировать все функции, доступные в интерфейсе Bot, во всех областях.

Существует два метода отправки приложения. Вы можете использовать [Приложение App Studio](~/concepts/build-and-test/app-studio-overview.md) , чтобы помочь вам, или вручную [создать пакет приложения](~/concepts/build-and-test/apps-package.md) и [отправить приложение](~/concepts/deploy-and-publish/apps-upload.md). Если требуется изменить манифест и повторно отправить приложение, необходимо [Удалить Bot](#deleting-a-bot-from-teams) перед отправкой измененного пакета приложений.

## <a name="debug-your-bot-locally"></a>Отладка ленты на локальном компьютере

Если вы размещаете Bot на локальном этапе разработки, вам потребуется использовать службу туннелирования, такую как [ngrok](https://ngrok.com/) , чтобы протестировать ваш робот. После загрузки и установки ngrok выполните приведенную ниже команду, чтобы запустить службу туннелирования (возможно, потребуется добавить ngrok в ваш путь).

```bash
ngrok http <port> -host-header=localhost:<port>
```

Используйте конечную точку HTTPS, предоставленную ngrok, в манифесте приложения. Если вы закроете командное окно и перезапуститее, вы получите новый URL-адрес, и вам потребуется обновить адрес конечной точки ленты, чтобы использовать ее.

## <a name="testing-your-bot-without-uploading-to-teams"></a>Тестирование ленты без отправки в Teams

Иногда может потребоваться тестирование программы Bot, не устанавливая ее как приложение в Teams. Мы предоставляем два способа, описанных ниже. Тестирование программы-робота без ее установки в качестве приложения может пригодиться для обеспечения доступности и ответа ленты, но не позволит вам протестировать все функции Microsoft Teams, которые могут быть добавлены в систему. Если вам нужно полностью протестировать робот, следуйте инструкциям по [тестированию, выполнив отправку](#test-by-uploading-to-teams).

### <a name="use-the-bot-emulator"></a>Использование эмулятора ленты

Эмулятор ленты Bot является классом для настольных ПК, который позволяет разработчикам-роботам тестировать и отлаживать свои Боты, как локально, так и удаленно. С помощью эмулятора можно общаться с программой Bot и проверять сообщения, отправляемые и получаемые с помощью ленты. Это может быть полезно для проверки доступности ленты и реагирования на них, но эмулятор не позволит вам протестировать все функции, которые вы добавили в интерфейс пользователя, а также не отправит ответ от робота к точному визуальному представлению того, как они будут отображаться в Teams. Если вам нужно протестировать любую из этих возможностей, лучше всего [загрузить робот](#test-by-uploading-to-teams).

Полные инструкции на эмуляторе Bot Framework можно найти [здесь](/azure/bot-service/bot-service-debug-emulator?view=azure-bot-service-4.0).

### <a name="talk-to-your-bot-directly-by-id"></a>Обращение к Bot непосредственно по идентификатору

>[!Important]
>Обращение к Bot по идентификатору предназначено только для целей тестирования.

Кроме того, вы можете начать беседу с роботом с помощью идентификатора. Ниже приведены два способа. При добавлении ленты с помощью одного из этих методов он не будет поддерживаться в беседах канала, и вы не сможете использовать другие возможности приложений Microsoft Teams, такие как вкладки или расширения обмена сообщениями.

1. На странице [панели мониторинга Bot](https://dev.botframework.com/bots) для ленты в разделе **каналы**выберите команду **Добавить в Microsoft Teams**. Microsoft Teams запустится с помощью персонального чата с помощью программы Bot.
2. Непосредственное обращение к ИДЕНТИФИКАТОРу приложения Bot в Microsoft teams:
   * На странице [панели мониторинга Bot](https://dev.botframework.com/bots) для ленты в разделе **Details (сведения**) скопируйте **идентификатор приложения Microsoft** для ленты.
  
     ![Извлечение AppID для Bot](~/assets/images/bots_appid_botframework.png)
  
   * В области **чата** в Microsoft Teams выберите значок **Добавить чат** . **В папке кому:** вставьте идентификатор приложения для Bot.
  
     ![Извлечение AppID для Bot](~/assets/images/bots_uploading.png)

     Идентификатор приложения должен разрешаться в имя пользователя Bot.

   * Выберите робота и отправьте сообщение, чтобы начать беседу.
   * Кроме того, вы можете вставить идентификатор приложения Bot в поле поиска в левом верхнем углу в Microsoft Teams. На странице результатов поиска перейдите на вкладку люди, чтобы увидеть свой робот и начать разговор с ним.

Ваш робот получит `conversationUpdate` событие, как боты, добавленный в команду, но без сведений о группе в `channelData` объекте.

## <a name="blocking-a-bot-in-personal-chat"></a>Блокировка ленты в личном чате

Обратите внимание, что пользователи могут блокировать отправку сообщений личного чата с ленты. Это можно сделать, щелкнув правой кнопкой мыши элемент Bot в канале чата и выбрав пункт **блокировать приразговор к началу ленты**. Это означает, что ваш Боты будет продолжать отправлять сообщения, но пользователь не будет получать эти сообщения.

![Блокировка Bot](~/assets/images/bots/botdisable.png)

## <a name="removing-a-bot-from-a-team"></a>Удаление ленты из команды

Пользователи могут удалить робота, выбрав значок корзины в списке боты в представлении Teams. Обратите внимание, что это только удаляет Bot из использования в этой команде; отдельные пользователи все еще смогут работать в личном контексте.

Боты в личном контексте не может быть отключено или удалено пользователем. не удается полностью удалить Bot из Teams.

## <a name="disabling-a-bot-in-teams"></a>Отключение Bot в Teams

Чтобы остановить получение сообщений от начала работы, перейдите на панель мониторинга Bot и измените канал Microsoft Teams. Снимите флажок **включить в Microsoft Teams** . Это не позволяет пользователям взаимодействовать с Bot, но по-прежнему будет доступно для обнаружения и пользователи смогут добавить его в Teams.

## <a name="deleting-a-bot-from-teams"></a>Удаление ленты из Teams

Чтобы полностью удалить Bot из Teams, перейдите на панель управления Bot и измените канал Microsoft Teams. Нажмите кнопку **Удалить** в нижней части страницы. Это не позволяет пользователям обнаруживать, добавлять или взаимодействовать с роботом. Обратите внимание, что это не приводит к удалению ленты из экземпляров Teams других пользователей, хотя она перестанет работать и для них.

## <a name="removing-your-bot-from-appsource"></a>Удаление ленты из AppSource

Если вы хотите удалить Bot из приложения Teams в AppSource (прежнее название Office Store), необходимо удалить Bot из манифеста приложения и повторно послать приложение для проверки. Более подробную информацию [вы найдете в статье публикация приложения Microsoft Teams в AppSource](~/concepts/deploy-and-publish/apps-publish.md) .
