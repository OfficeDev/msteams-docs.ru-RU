---
title: Тест и отладить ваш бот
description: Описывает, как тестировать ботов в Microsoft Teams
keywords: команды ботов тестирования
ms.topic: how-to
localization_priority: Normal
ms.date: 03/20/2019
ms.openlocfilehash: 269b0680e45d764cf4cb0269c40d3d202145edb8
ms.sourcegitcommit: 51e4a1464ea58c254ad6bd0317aca03ebf6bf1f6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2021
ms.locfileid: "52566462"
---
# <a name="test-and-debug-your-microsoft-teams-bot"></a><span data-ttu-id="7f1c3-104">Тест и отладить ваш Microsoft Teams бот</span><span class="sxs-lookup"><span data-stu-id="7f1c3-104">Test and debug your Microsoft Teams bot</span></span>

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

<span data-ttu-id="7f1c3-105">При тестировании бота необходимо учитывать как контекст (ы), в котором вы хотите, чтобы ваш бот запускали, так и любую функциональность, которую вы, возможно, добавили в свой бот, который требует данных, специфичных для Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-105">When testing your bot you need to take into consideration both the context(s) you want your bot to run in, as well as any functionality you may have added to your bot that requires data specific to Microsoft Teams.</span></span> <span data-ttu-id="7f1c3-106">Убедитесь, что метод, который вы выбрали для тестирования бота, соответствует его функциональности.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-106">Make sure that the method you chose to test your bot aligns with its functionality.</span></span>

## <a name="test-by-uploading-to-teams"></a><span data-ttu-id="7f1c3-107">Тест, загрузив в Teams</span><span class="sxs-lookup"><span data-stu-id="7f1c3-107">Test by uploading to Teams</span></span>

<span data-ttu-id="7f1c3-108">Наиболее полный способ проверить бота , создав пакет приложений и загрузив его в Teams.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-108">The most comprehensive way to test your bot is by creating an app package and uploading it to Teams.</span></span> <span data-ttu-id="7f1c3-109">Это единственный способ проверить полную функциональность, доступную для вашего бота, во всех сферах.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-109">This is the only method to test the full functionality available to your bot, across all scopes.</span></span>

<span data-ttu-id="7f1c3-110">Существует два способа загрузки приложения.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-110">There are two methods for uploading your app.</span></span> <span data-ttu-id="7f1c3-111">Вы можете использовать [App Studio,](~/concepts/build-and-test/app-studio-overview.md) чтобы помочь вам, или вы можете [вручную создать пакет приложений](~/concepts/build-and-test/apps-package.md) [и загрузить приложение.](~/concepts/deploy-and-publish/apps-upload.md)</span><span class="sxs-lookup"><span data-stu-id="7f1c3-111">You can either use [App Studio](~/concepts/build-and-test/app-studio-overview.md) to help you, or you can manually [create an app package](~/concepts/build-and-test/apps-package.md) and [upload your app](~/concepts/deploy-and-publish/apps-upload.md).</span></span> <span data-ttu-id="7f1c3-112">Если вам нужно изменить манифест и пере загрузили приложение, вы должны [удалить бота перед](#deleting-a-bot-from-teams) загрузкой измененного пакета приложений.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-112">If you need to alter your manifest and re-upload your app, you should [delete your bot](#deleting-a-bot-from-teams) before uploading your altered app package.</span></span>

## <a name="debug-your-bot-locally"></a><span data-ttu-id="7f1c3-113">Отладить бота локально</span><span class="sxs-lookup"><span data-stu-id="7f1c3-113">Debug your bot locally</span></span>

<span data-ttu-id="7f1c3-114">Если вы принимаете бота локально во время разработки, вам нужно будет использовать туннельную службу, [такую как ngrok,](https://ngrok.com/) чтобы протестировать своего бота.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-114">If you are hosting your bot locally during development you'll need to use a tunneling service like [ngrok](https://ngrok.com/) in order to test your bot.</span></span> <span data-ttu-id="7f1c3-115">После загрузки и установки ngrok запустите нижеустановленную команду для запуска службы туннелирования.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-115">Once you've downloaded and installed ngrok, run the below command to start the tunneling service.</span></span> <span data-ttu-id="7f1c3-116">Возможно, вам придется добавить ngrok на ваш путь.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-116">You may need to add ngrok to your path.</span></span>

```bash
ngrok http <port> -host-header=localhost:<port>
```

<span data-ttu-id="7f1c3-117">Используйте конечную точку https, предоставленную ngrok в манифесте приложения.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-117">Use the https endpoint provided by ngrok in your app manifest.</span></span> <span data-ttu-id="7f1c3-118">Если вы закроете окно команды и перезапустите, вы получите новый URL-адрес, и вам нужно будет обновить адрес конечной точки бота, чтобы использовать его также.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-118">If you close your command window and restart you'll get a new URL, and you'll need to update your bot endpoint address to use that one as well.</span></span>

## <a name="testing-your-bot-without-uploading-to-teams"></a><span data-ttu-id="7f1c3-119">Тестирование бота без загрузки в Teams</span><span class="sxs-lookup"><span data-stu-id="7f1c3-119">Testing your bot without uploading to Teams</span></span>

<span data-ttu-id="7f1c3-120">Иногда может потребоваться протестировать бота, не установив его в качестве приложения в Teams.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-120">Occasionally it may be necessary to test your bot without installing it as an app in Teams.</span></span> <span data-ttu-id="7f1c3-121">Мы предоставляем два метода для этого ниже.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-121">We provide two methods for doing so below.</span></span> <span data-ttu-id="7f1c3-122">Тестирование бота без установки его в качестве приложения может быть полезно для обеспечения вашего бота доступна и реагировать, однако это не позволит вам проверить всю широту Microsoft Teams функциональности вы, возможно, добавили к вашему боту.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-122">Testing your bot without installing it as an app can be useful to ensure your bot is available and responding, however it will not allow you to test the full breadth of Microsoft Teams functionality you may have added to your bot.</span></span> <span data-ttu-id="7f1c3-123">Если вам нужно полностью протестировать бота, пожалуйста, следуйте инструкциям для [тестирования, загрузив](#test-by-uploading-to-teams).</span><span class="sxs-lookup"><span data-stu-id="7f1c3-123">If you need to fully test your bot, please follow the instructions for [testing by uploading](#test-by-uploading-to-teams).</span></span>

### <a name="use-the-bot-emulator"></a><span data-ttu-id="7f1c3-124">Используйте эмулятор Bot</span><span class="sxs-lookup"><span data-stu-id="7f1c3-124">Use the Bot Emulator</span></span>

<span data-ttu-id="7f1c3-125">The Bot Framework Emulator настольное приложение, которое позволяет разработчикам ботов тестировать и отладить своих ботов, как локально, так и удаленно.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-125">The Bot Framework Emulator is a desktop application that allows bot developers to test and debug their bots, either locally or remotely.</span></span> <span data-ttu-id="7f1c3-126">Используя эмулятор, вы можете общаться с ботом и проверять сообщения, которые ваш бот отправляет и получает.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-126">Using the emulator, you can chat with your bot and inspect the messages that your bot sends and receives.</span></span> <span data-ttu-id="7f1c3-127">Это может быть полезно для проверки того, что ваш бот доступен и отвечает, однако эмулятор не позволит вам проверить какие-либо Teams-специфические функции, которые вы добавили к вашему боту, и не будет ответы от вашего бота будет точное визуальное представление о том, как они будут оказываться в Teams.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-127">This can be useful for verifying that your bot is available and responding, however the emulator will not allow you to test any Teams-specific functionality you've added to your bot, nor will responses from your bot be an accurate visual representation of how they will be rendered in Teams.</span></span> <span data-ttu-id="7f1c3-128">Если вам нужно проверить любой из этих вещей, то лучше [загрузить ваш бот](#test-by-uploading-to-teams).</span><span class="sxs-lookup"><span data-stu-id="7f1c3-128">If you need to test either of those things it is best to [upload your bot](#test-by-uploading-to-teams).</span></span>

<span data-ttu-id="7f1c3-129">Полные инструкции по Bot Framework Emulator можно найти [здесь](/azure/bot-service/bot-service-debug-emulator?view=azure-bot-service-4.0&preserve-view=true).</span><span class="sxs-lookup"><span data-stu-id="7f1c3-129">Complete instructions on the Bot Framework Emulator can be found [here](/azure/bot-service/bot-service-debug-emulator?view=azure-bot-service-4.0&preserve-view=true).</span></span>

### <a name="talk-to-your-bot-directly-by-id"></a><span data-ttu-id="7f1c3-130">Поговорите со своим ботом непосредственно id</span><span class="sxs-lookup"><span data-stu-id="7f1c3-130">Talk to your bot directly by Id</span></span>

>[!Important]
><span data-ttu-id="7f1c3-131">Общение с ботом от Id предназначено только для целей тестирования.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-131">Talking to your bot by Id is intended for testing purposes only.</span></span>

<span data-ttu-id="7f1c3-132">Вы также можете начать разговор с ботом, используя его Id. Ниже приведены два метода для этого.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-132">You can also initiate a conversation with your bot by using its Id. Two methods for doing so are given below.</span></span> <span data-ttu-id="7f1c3-133">Когда бот был добавлен с помощью одного из этих методов, он не будет адресным в разговорах канала, и вы не можете воспользоваться другими возможностями приложения Microsoft Teams, такими как вкладки или расширения обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-133">When a bot has been added through one of these methods it will not be addressable in channel conversations, and you cannot take advantage of other Microsoft Teams app capabilities like tabs or messaging extensions.</span></span>

1. <span data-ttu-id="7f1c3-134">На странице [Bot Dashboard для](https://dev.botframework.com/bots) вашего бота, под **каналами,** **выберите Добавить Microsoft Teams**.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-134">On the [Bot Dashboard](https://dev.botframework.com/bots) page for your bot, under **Channels**, select **Add to Microsoft Teams**.</span></span> <span data-ttu-id="7f1c3-135">Microsoft Teams начнется с личного чата с вашим ботом.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-135">Microsoft Teams will launch with a personal chat with your bot.</span></span>
2. <span data-ttu-id="7f1c3-136">Прямая ссылка на идентификатор приложения вашего бота из Microsoft Teams:</span><span class="sxs-lookup"><span data-stu-id="7f1c3-136">Directly reference your bot's app ID from within Microsoft Teams:</span></span>
   * <span data-ttu-id="7f1c3-137">На странице [Bot Dashboard для](https://dev.botframework.com/bots) вашего бота, под подробной **информацией,** скопируйте идентификатор **приложения Майкрософт** для вашего бота.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-137">On the [Bot Dashboard](https://dev.botframework.com/bots) page for your bot, under **Details**, copy the **Microsoft App ID** for your bot.</span></span>
  
     ![Получение AppID для бота](~/assets/images/bots_appid_botframework.png)
  
   * <span data-ttu-id="7f1c3-139">Из Microsoft Teams, на **панели чата,** выберите **значок чата** Add.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-139">From within Microsoft Teams, on the **Chat** pane, select the **Add chat** icon.</span></span> <span data-ttu-id="7f1c3-140">**Для:**, вставьте идентификатор приложения Microsoft App вашего бота.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-140">For **To:**, paste your bot's Microsoft App ID.</span></span>
  
     ![Загрузка AppID для бота](~/assets/images/bots_uploading.png)

     <span data-ttu-id="7f1c3-142">Идентификатор приложения должен решиться на имя бота.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-142">The app ID should resolve to your bot name.</span></span>

   * <span data-ttu-id="7f1c3-143">Выберите бота и отправьте сообщение, чтобы начать разговор.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-143">Select your bot and send a message to initiate a conversation.</span></span>
   * <span data-ttu-id="7f1c3-144">Кроме того, вы можете вставить идентификатор приложения вашего бота в поле поиска в левом верхнем Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-144">Alternatively, you can paste your bot's app ID in the search box in the top left in Microsoft Teams.</span></span> <span data-ttu-id="7f1c3-145">На странице результатов поиска перейдите на вкладку «Люди», чтобы увидеть своего бота и начать общаться с ним.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-145">In the search results page, navigate to the People tab to see your bot and to start chatting with it.</span></span>

<span data-ttu-id="7f1c3-146">Ваш бот будет получать событие `conversationUpdate` так же, как боты добавлены в команду, но без информации команды в `channelData` объекте.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-146">Your bot will receive the `conversationUpdate` event just like bots added to a team, but without the team information in the `channelData` object.</span></span>

## <a name="blocking-a-bot-in-personal-chat"></a><span data-ttu-id="7f1c3-147">Блокировка бота в личном чате</span><span class="sxs-lookup"><span data-stu-id="7f1c3-147">Blocking a bot in personal chat</span></span>

<span data-ttu-id="7f1c3-148">Обратите внимание, что пользователи могут заблокировать вашего бота от отправки личных сообщений чата.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-148">Note that users can choose to block your bot from sending personal chat messages.</span></span> <span data-ttu-id="7f1c3-149">Они могут переключить это, нажав на ваш бот в чате канала и выбирая **блок бот разговор.**</span><span class="sxs-lookup"><span data-stu-id="7f1c3-149">They may toggle this by right-clicking your bot in the chat channel and choosing **Block bot conversation**.</span></span> <span data-ttu-id="7f1c3-150">Это означает, что ваши боты будут продолжать отправлять сообщения, но пользователь не будет получать эти сообщения.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-150">This means your bots will continue to send messages but the user will not receive those messages.</span></span>

![Блокировка бота](~/assets/images/bots/botdisable.png)

## <a name="removing-a-bot-from-a-team"></a><span data-ttu-id="7f1c3-152">Удаление бота из команды</span><span class="sxs-lookup"><span data-stu-id="7f1c3-152">Removing a bot from a team</span></span>

<span data-ttu-id="7f1c3-153">Пользователи могут удалить бота, выбрав значок мусорных баков в списке ботов в представлении команд.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-153">Users can delete the bot by choosing the trash-can icon on the bots list in their teams view.</span></span> <span data-ttu-id="7f1c3-154">Обратите внимание, что это только удаляет бота из использования этой команды; отдельные пользователи по-прежнему смогут взаимодействовать в личном контексте.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-154">Note that this only removes the bot from that team's use; individual users will still be able to interact in personal context.</span></span>

<span data-ttu-id="7f1c3-155">Боты в личном контексте не могут быть отключены или удалены пользователем, затмевая полного удаления бота из Teams.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-155">Bots in personal context cannot be disabled or removed by a user, short of completely removing the bot from Teams.</span></span>

## <a name="disabling-a-bot-in-teams"></a><span data-ttu-id="7f1c3-156">Отключение бота в Teams</span><span class="sxs-lookup"><span data-stu-id="7f1c3-156">Disabling a bot in Teams</span></span>

<span data-ttu-id="7f1c3-157">Чтобы остановить получение сообщений бота, перейдите на панель мониторинга Bot и отредактировать Microsoft Teams канал.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-157">To stop your bot receiving messages, go to your Bot Dashboard and edit the Microsoft Teams channel.</span></span> <span data-ttu-id="7f1c3-158">**Очистите включить на Microsoft Teams варианте.**</span><span class="sxs-lookup"><span data-stu-id="7f1c3-158">Clear the **Enable on Microsoft Teams** option.</span></span> <span data-ttu-id="7f1c3-159">Это не позволяет пользователям взаимодействовать с ботом, но он все равно будет обнаружить, и пользователи все равно смогут добавить его в команды.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-159">This prevents users from interacting with the bot, but it will still be discoverable and users will still be able to add it to teams.</span></span>

## <a name="deleting-a-bot-from-teams"></a><span data-ttu-id="7f1c3-160">Удаление бота из Teams</span><span class="sxs-lookup"><span data-stu-id="7f1c3-160">Deleting a bot from Teams</span></span>

<span data-ttu-id="7f1c3-161">Чтобы полностью удалить бота из Teams, перейдите на панель мониторинга Bot и отредактировать Microsoft Teams канал.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-161">To remove your bot completely from Teams, go to your Bot Dashboard and edit the Microsoft Teams channel.</span></span> <span data-ttu-id="7f1c3-162">Выберите **кнопку** Удаления внизу.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-162">Choose the **Delete** button at the bottom.</span></span> <span data-ttu-id="7f1c3-163">Это не позволяет пользователям открывать, добавлять или взаимодействовать с вашим ботом.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-163">This prevents users from discovering, adding, or interacting with your bot.</span></span> <span data-ttu-id="7f1c3-164">Обратите внимание, что это не удаляет бота из сша других пользователей Teams экземпляров, хотя он перестанет функционировать и для них.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-164">Note that this does not remove the bot from other users' Teams instances, although it will cease functioning for them as well.</span></span>

## <a name="removing-your-bot-from-appsource"></a><span data-ttu-id="7f1c3-165">Удаление бота из AppSource</span><span class="sxs-lookup"><span data-stu-id="7f1c3-165">Removing your bot from AppSource</span></span>

<span data-ttu-id="7f1c3-166">Если вы хотите удалить бота из приложения Teams в AppSource (ранее Office Store), вы должны удалить бота из манифеста приложения и повторно представить приложение для проверки.</span><span class="sxs-lookup"><span data-stu-id="7f1c3-166">If you want to remove your bot from your Teams app in AppSource (previously Office Store), you must remove the bot from your app manifest and resubmit your app for validation.</span></span> <span data-ttu-id="7f1c3-167">Для получения дополнительной информации [см Microsoft Teams.](~/concepts/deploy-and-publish/apps-publish.md)</span><span class="sxs-lookup"><span data-stu-id="7f1c3-167">For more information, see [Publish your Microsoft Teams app to AppSource](~/concepts/deploy-and-publish/apps-publish.md).</span></span>
