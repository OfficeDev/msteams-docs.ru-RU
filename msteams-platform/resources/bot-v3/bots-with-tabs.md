---
title: Объединение ботов с вкладками
description: Описывает совместное использование вкладок и ботов
keywords: teams bots tabs development
ms.topic: conceptual
ms.localizationpriority: medium
ms.date: 03/15/2018
ms.openlocfilehash: 3053dbca3b1e91683564eb902d8b142fd4a30ddb
ms.sourcegitcommit: fc9f906ea1316028d85b41959980b81f2c23ef2f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2021
ms.locfileid: "59157463"
---
# <a name="combine-bots-with-tabs"></a>Объединение ботов с вкладками

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

Боты и вкладки хорошо работают вместе и часто объединяются в единую службу. В этом разделе описываются лучшие практики и общие шаблоны для совместного использования вкладок и ботов.

## <a name="associating-user-identities-across-bot-and-tab"></a>Associating user identities across bot and tab

Например: Предположим, что приложение вкладки использует собственную систему ID для защиты контента. Предположим, у вас также есть бот, который может взаимодействовать с пользователем. Как правило, необходимо показывать содержимое на вкладке, определенной пользователю просмотра. Проблема заключается в том, что пользовательский ИД в вашей системе, скорее всего, отличается от Microsoft Teams пользователя. Итак, как связать эти две идентичности?
В общем, рекомендуется подписать пользователя с ботом с помощью той же системы удостоверений, которая используется для проверки подлинности контента вкладок. Это можно реализовать с помощью действия входа, которое, как правило, входит в систему пользователя с помощью потока OAuth.

Этот поток лучше всего работает, если поставщик удостоверений реализует протокол OAuth 2.0. Затем вы можете связать Teams пользователя с учетными данными пользователя из собственной службы удостоверений.

   ![Связывание удостоверений](~/assets/images/bots/associating_contexts.png)

## <a name="constructing-deep-links-to-tabs-in-messages-from-your-bot"></a>Создание глубоких ссылок на вкладки в сообщениях от бота

Вы можете использовать вкладки, чтобы показать больше контента, чем может поместиться внутри карты, или предоставить способ выполнения сложных задач заполнения форм с помощью холста вкладки. Например, рассмотрите возможность навигации пользователя на вкладку, когда он щелкнет карточку от бота. Для этого необходимо кодировать сообщение бота, чтобы включить URL-адрес глубокой ссылки либо с помощью разметки, либо в качестве цели действия openUrl. [](~/concepts/build-and-test/deep-links.md)

Глубокие ссылки полагаются на объектId, который является непрозрачной величиной, которая связывается с уникальной сущностью в вашей системе. При создания вкладки в идеале сохраняется некоторое простое состояние, например флаг на задней части, указывающий, что вкладка создана в канале. При построении сообщения бот может нацелить объектId, связанный с этой вкладке.

> [!NOTE]
> в личных чатах, так как вкладки являются "статичными" и устанавливаются с приложением, всегда можно предположить их существование и таким образом создать глубокие ссылки соответственно.

## <a name="sending-notifications-for-tab-updates"></a>Отправка уведомлений для обновлений вкладок

Часто необходимо уведомлять конечный пользователь всякий раз, когда на вкладке происходит обновление или действие пользователя. Пример сценария — назначение задачи или билета члену команды, а затем уведомление об этом члене группы.

Существует два способа достижения этого сценария:

1. Если вы хотите уведомить весь канал, ваш бот может асинхронно отправлять сообщение на канал. Бот не может активно создавать беседу вкладки, если она не была создана с помощью вкладки.

2. Если вы хотите уведомить только получателя или заинтересованные стороны, связанные с действием, ваш бот может отправить пользователю личное сообщение чата. Сначала необходимо проверить, существует ли личный разговор между ботом и пользователем. Если нет, вы можете `CreateConversation` позвонить, чтобы инициировать личный чат.

В обоих случаях используйте уведомления о событиях с умом и никогда не спамить пользователя ненужными обновлениями.
