---
title: Объединение ботов с вкладками
description: В этой статье описывается, как использовать вкладки и боты вместе.
keywords: Разработка вкладок ботов teams
ms.topic: conceptual
ms.localizationpriority: medium
ms.date: 03/15/2018
ms.openlocfilehash: 9ec2c37417d6c16edf4ead521dea91655ba11165
ms.sourcegitcommit: 5070746e736edb4ae77cd3efcb2ab8bb2e5819a0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/16/2022
ms.locfileid: "66123733"
---
# <a name="combine-bots-with-tabs"></a>Объединение ботов с вкладками

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

Боты и вкладки работают вместе и часто объединяются в одну серверную службу. В этом разделе описываются рекомендации и общие шаблоны для совместного использования вкладок и ботов.

## <a name="associating-user-identities-across-bot-and-tab"></a>Связывание удостоверений пользователей между ботом и вкладкой

Например: предположим, что приложение вкладок использует собственную систему идентификаторов для защиты содержимого. Предположим, у вас также есть бот, который может взаимодействовать с пользователем. Как правило, необходимо отображать содержимое на вкладке, предназначенной для просматриваемого пользователя. Проблема заключается в том, что идентификатор пользователя в системе, скорее всего, отличается от Microsoft Teams пользователя. Как связать эти два удостоверения?
Как правило, рекомендуется выполнить вход пользователя с помощью бота, используя ту же систему удостоверений, которая используется для проверки подлинности для содержимого вкладки. Его можно реализовать с помощью действия входа, которое обычно регистрирует пользователя с помощью потока OAuth.

Этот поток лучше всего работает, если поставщик удостоверений реализует протокол OAuth 2.0. Затем можно связать Teams пользователя с учетными данными пользователя из собственной службы удостоверений.

   ![Связывание удостоверений](~/assets/images/bots/associating_contexts.png)

## <a name="constructing-deep-links-to-tabs-in-messages-from-your-bot"></a>Создание прямых ссылок на вкладки в сообщениях от бота

Вы хотите использовать вкладки для отображения большего содержимого, чем может поместиться внутри карточки, или предоставить способ выполнения сложных задач заполнения формы с помощью холста вкладок. Например, рассмотрите возможность перехода пользователя на вкладку, когда он щелкает карточку от бота. Для этого необходимо закодировать сообщение бота, чтобы [включить URL-адрес](~/concepts/build-and-test/deep-links.md) глубокой ссылки с помощью разметки или в качестве цели действия openUrl.

Глубокие ссылки зависят от entityId, которое является непрозрачным значением, которое сопоставляется с уникальной сущностью в системе. При создании вкладки в идеале сохраняется некоторое простое состояние, например флаг на серверной части, указывающий, что вкладка создана в канале. Когда бот создает сообщение, он может быть нацелен на идентификатор сущности, связанный с этой вкладкой.

> [!NOTE]
> в личных чатах, так как вкладки являются "статическими" и устанавливаются вместе с приложением, вы всегда можете предполагать их существование и таким образом создавать глубокие связи соответствующим образом.

## <a name="sending-notifications-for-tab-updates"></a>Отправка уведомлений об обновлениях вкладок

Часто требуется уведомлять конечного пользователя при каждом обновлении или действии пользователя на вкладке. В качестве примера сценария можно назначить задачу или билет члену команды, а затем уведомить его.

Существует два способа добиться этого сценария:

1. Если вы хотите уведомить весь канал, бот может асинхронно опубликовать сообщение в канале. Бот не может заранее создать беседу табуляции, если она не была создана с помощью вкладки.

2. Если вы хотите уведомить только получателя или заинтересованных лиц, участвующих в действии, бот может отправить пользователю личное сообщение чата. Сначала необходимо проверить, существует ли личная беседа между ботом и пользователем. В противном случае вы можете позвонить, `CreateConversation` чтобы инициировать личный чат.

В обоих случаях уведомления о событиях следует использовать разумно и никогда не отправлять пользователю ненужные обновления.
