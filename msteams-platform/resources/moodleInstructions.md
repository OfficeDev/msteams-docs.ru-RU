---
title: Установка Moodle LMS
description: Как установить и настроить приложение интеграции Moodle для Microsoft Teams
keywords: Teams Плагины интеграции приложений Moodle
ms.topic: how-to
localization_priority: Normal
ms.author: lajanuar
author: laujan
ms.openlocfilehash: d7fddad80ca08fd4ca8dee352cdcbc46e8e97dcd
ms.sourcegitcommit: 51e4a1464ea58c254ad6bd0317aca03ebf6bf1f6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2021
ms.locfileid: "52566721"
---
# <a name="install-moodle-lms"></a>Установка Moodle LMS

В этой статье вы узнаете, как установить Moodle LMS.

> [!NOTE]
> Чтобы помочь ИТ-администраторам легко настроить Moodle и Teams интеграцию, с открытым исходным кодом Microsoft 365 Moodle Plugins обновляется для следующих:
>
> * Автоматическая регистрация сервера Moodle с помощью [Azure Active Directory (Azure AD).](https://azure.microsoft.com/services/active-directory/)
>
> * Развертывание бота Moodle Assistant в Azure одним щелчком мыши.
>
> * Автоматическое обеспечение команд и автоматическая синхронизация зачислений команд для всех или выбора курсов Moodle.
>
> * Автоматическая установка вкладки Moodle и помощника бота Moodle в каждую синхронизированную команду.
>
> Чтобы узнать больше о функциональности этой интеграции, с [Microsoft Teams м.](https://education.microsoft.com/resource/3dffb3a8)

## <a name="prerequisites"></a>Предварительные требования

Ниже приведены предпосылки для установки Moodle:

* Учетные данные администратора Moodle.

* Учетные данные администратора Azure AD.

* Подписка Azure, где можно создавать новые ресурсы.

## <a name="1-install-the-microsoft-365-moodle-plugins"></a>1. Установите Microsoft 365 Moodle Plugins

Интеграция Moodle в Microsoft Teams работает на открытом Microsoft 365 [комплекте плагинов Moodle.](https://github.com/Microsoft/o365-moodle)

### <a name="requisite-applications-and-plugins"></a>Необходимые приложения и плагины

Убедитесь в том, чтобы установить и скачать следующее, прежде чем приступить к Microsoft 365 установки плагинов Moodle:

1. Убедитесь в установке [текущей стабильной версии Moodle](https://download.moodle.org/releases/latest/).

1. Загрузите и сохраните плагины Moodle [OpenID Подключение](https://moodle.org/plugins/auth_oidc) и [Microsoft 365 интеграции](https://moodle.org/plugins/local_o365) на локальном компьютере.

    > [!NOTE]
    > Для интеграции Подключение Microsoft 365 openID и Teams интеграции.
    >
    > Кроме того, [Microsoft 365 Teams theme](https://moodle.org/plugins/theme_boost_o365teams) плагины настоятельно рекомендуется.

### <a name="microsoft-365-moodle-plugins"></a>Microsoft 365 Плагины Moodle

1. Войтите на сервер Moodle в качестве администратора и выберите **администрирование** [сайта из Параметры, расположенного](https://docs.moodle.org/22/en/Settings_block) в левой навигационной панели.

1. Выберите **вкладку Plugins,** а затем **выберите Установить плагины**.

1. Из **плагинов Install из раздела файла qIP** **выберите файл.**

1. Выберите **Upload файл с** левой навигационной панели, просмотрите файл, который вы скачали, и **выберите Upload этом файле.**

1. Выберите **администрирование** сайта с левой навигационной панели, чтобы вернуться к панели мониторинга администратора. Прокрутите вниз к **локальным плагинам** и выберите **Microsoft 365 интеграции.**

    > [!IMPORTANT]
    >
    > * Держите ваш Microsoft 365 Moodle Plugins страницу конфигурации открытым в отдельной вкладке браузера, как вам нужно вернуться к этому набору страниц на протяжении всего процесса.  
    >
    > * Если у вас нет существующего сайта Moodle, перейдите в [Репо Moodle на Azure](https://github.com/azure/moodle) и быстро разверните экземпляр Moodle и настройите его под свои потребности.

## <a name="2-configure-the-connection-between-the-microsoft-365-plugins-and-azure-active-directory-azure-ad"></a>2. Настройте соединение между Microsoft 365 и Azure Active Directory (Azure AD)

Необходимо настроить соединение между Microsoft 365 и Azure AD.

### <a name="requisites"></a>вооружение

Зарегистрируйте Moodle в качестве приложения в Azure AD, используя скрипт PowerShell. Скрипт Powershell предусматривает следующее:

* Новое приложение Azure AD для Microsoft 365, которое используется службой Microsoft 365 Moodle Plugins.
* Приложение для вашего Microsoft 365, настроить необходимые URL-адреса ответов и разрешения для готового приложения, и возвращает `AppID` и `Key` .

Используйте `AppID` сгенерированную `Key` и в Microsoft 365 страницу настройки Moodle Plugins для настройки вашего сайта сервера Moodle с помощью Azure AD.

> [!IMPORTANT]
>
> * Скрипт PowerShell не обновляется с последними элементами конфигурации, поэтому вы должны завершить конфигурацию вручную, следуя шагам, изложенным в страницах Moodle [3.8.0.4 и 3.9.1](https://docs.moodle.org/39/en/Office365#3.8.0.4_and_3.9.1_release) [и 3.8.0.5 и 3.9.2.](https://docs.moodle.org/39/en/Office365#3.8.0.5_and_3.9.2_release)
>
> * Для получения дополнительной информации о регистрации экземпляра Moodle вручную, [см.](https://docs.moodle.org/34/en/Office365#Register_your_Moodle_instance_as_an_Application)

### <a name="the-moodle-tab-for-microsoft-teams-information-flow"></a>Вкладка Moodle для Microsoft Teams потока

<img width="530px" src="../assets/images/MoodleTabInformationFlow.png" alt="Moodle tab for Microsoft Teams information flow" />

1. Со страницы плагинов Microsoft 365 интеграции выберите вкладку **Setup.**

1. Выберите **кнопку «Скачать powerShell Script»** и сохраните ее в качестве папки с почтовым индексом на локальном компьютере.

1. Подготовь скрипт PowerShell из файла ЗИП следующим образом: 

    1. Скачать и извлечь `Moodle-AzureAD-Powershell.zip` файл.
    1. Откройте извлеченную папку.
    1. Нажмите правой `Moodle-AzureAD-Script.ps1` кнопкой мыши на файл и **выберите Свойства**.
    1. Под общей **вкладкой** окна Свойства выберите флажок `Unblock` рядом с **атрибутом безопасности,** расположенным в нижней части окна.
    1. Нажмите **ОК**.
    1. Скопируйте путь каталога к извлеченной папке.

1. Вы запустите PowerShell в качестве администратора:

    1. Выберите «Начать».
    1. Тип PowerShell.
    1. Нажмите правой кнопкой **Windows PowerShell**.
    1. Выберите **Run в качестве администратора**.

1. Перейдите в неразметимый каталог, `cd .../.../Moodle-AzureAD-Powershell` `.../...` введя, где находится путь к каталогу.

1. Выполнить скрипт PowerShell:

    1. Введите `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser` .
    1. Введите `./Moodle-AzureAD-Script.ps1` .
    1. Вопишитесь на Microsoft 365 учетную запись администратора во всплывающем окне.
    1. Введите название приложения Azure AD, например, плагинов Moodle или Moodle.
    1. Введите URL-адрес сервера Moodle.
    1. Копировать **идентификатор приложения `AppID` () и** ключ приложения **`Key` () порожденный** скриптом и сохранить их.

1. Далее вы должны `AppID` добавить и в Microsoft 365 `Key` Moodle Plugins. Вернитесь на страницу администрирования плагинов, администрация сайта > плагины > Microsoft 365 интеграции.

1. На **вкладке Настройка** добавить и `AppID` вы `Key` скопировали ранее, а затем выбрать **сохранить изменения**. После обновления страницы можно увидеть новый раздел **Выберите метод подключения.**

1. В **методе «Выбрать соединение»** выберите флажок с пометкой **«По умолчанию»,** а затем снова **выберите изменения «Сохранить».**

1. После обновления страницы вы можете увидеть еще один новый раздел Администратор **согласие & дополнительной информации**.
    1. Выберите **ссылку «Предоставить** согласие администратора», введите Microsoft 365 учетных данных Глобального администратора, **а** затем примите разрешение на предоставление разрешений.
    1. Рядом с полем **Арендатор Azure AD** выберите **кнопку Обнаружения.**
    1. Рядом с **OneDrive для бизнеса URL,** выберите **кнопку Обнаружения.**
    1. После заполнения полей снова выберите **кнопку сохранения** изменений.

1. Выберите **кнопку** Обновления для проверки установки, а затем выберите **сохранить изменения.**

1. Синхронизация пользователей между сервером Moodle и Azure AD. Для начала сделайте следующее:

    > [!NOTE]
    > В зависимости от среды, вы можете выбрать различные варианты на этом этапе.

1. Синхронизация пользователей между сервером Moodle и Azure AD. В зависимости от среды, вы можете выбрать различные варианты на этом этапе. Для начала сделайте следующее:
    1. Переключитесь **на вкладку Параметры синхронизации.**

    1. В разделе **Синхронизация пользователей с разделом Azure AD** выберите флажки, применимые к вашей среде. Вы должны выбрать следующее:  

        ✔ создать учетные записи в Moodle для пользователей в Azure AD.

        ✔ все учетные записи в Moodle для пользователей в Azure AD.

    1. В разделе **Ограничение создания пользователей** можно настроить фильтр для ограничения пользователей Azure AD, синхронизированных с Moodle.
    1. Раздел **Отображение поля** пользователя позволяет настроить Azure AD для отображения поля профиля пользователя Moodle.
    1. В **разделе Teams Sync** можно выбрать автоматически создавать группы, такие как команды для некоторых или всех существующих курсов Moodle.

13. Для [проверки заданий cron](https://docs.moodle.org/310/en/Cron) и запуска их вручную для первого запуска выберите **ссылку на страницу управления запланированными** **задачами в разделе Sync с разделом Azure AD.** Это ведет вас на страницу **запланированных** задач.

    1. Прокрутите вниз и найдите **пользователей Sync с помощью задания Azure AD** и выберите **Run now.**
    1. Если вы выберете для создания групп на основе существующих курсов, вы также можете **запустить группы пользователей Создать в Microsoft 365** работе.

    > [!NOTE]
    >
    > Moodle [Cron работает в](https://docs.moodle.org/310/en/Cron) соответствии с графиком задач. Расписание по умолчанию один раз в день. Тем не менее, cron должен работать чаще, чтобы держать все в синхронизации.

1. Вернитесь на страницу администрирования **плагинов, администрация сайта > плагины > Microsoft 365 интеграции** и **выберите Teams Параметры страницу.**

1. На **Teams Параметры** настройке необходимых настроек для интеграции Teams приложения.

    1. Для включения **OpenID Подключение,** выберите **ссылку «Управлять аутентификацией»** и выберите **значок глаза на линии OpenId Подключение,** если она вытеха.
    1. Для включения встраивания кадров выберите **ссылку http Security,** а затем выберите флажок рядом **с встраиванием кадра.**
    1. Для включения веб-сервисов, позволяющих использовать функции Moodle API, выберите **ссылку Расширенные функции,** а затем убедитесь, что флажок **рядом с веб-службами Enable** выбран.
    1. Для включения внешних служб для Microsoft 365, выберите **ссылку Внешних** служб, а затем:  

        ✔ **выберите редактировать** **строку Microsoft 365-сервисов Moodle.**

        ✔ выберите флажок рядом с **Enabled,** а затем выберите **Сохранить изменения**

    1. Отредактировать ваши подлинные разрешения пользователей, чтобы позволить им создавать токены веб-службы.

        ✔ выберите редактирование **роли Аутентифицированная ссылка** пользователя.

        ✔ Прокрутите вниз и найдите **возможность токена Create a web service** и выберите **флажок Allow.**

## <a name="3-deploy-the-moodle-assistant-bot-to-azure"></a>3. Развертывание помощника Бота Moodle в Azure

Бесплатный помощник Мудл бот для Microsoft Teams помогает учителям и студентам ответить на вопросы о своих курсах, заданиях, классах и другой информации в Moodle. Бот также отправляет уведомления Moodle студентам и преподавателям в течение Teams. Бот является проектом с открытым исходным кодом, поддерживаемым корпорацией Майкрософт, и доступен [на GitHub](https://github.com/microsoft/Moodle-Teams-Bot).

> [!NOTE]
>
> * Развертывание ресурсов в подписке Azure. Все ресурсы были настроены с использованием **свободного** уровня. В зависимости от использования бота, возможно, придется масштабировать эти ресурсы.
>
> * Чтобы использовать вкладку Moodle без бота, перейти к [4](#4-deploy-your-microsoft-teams-app).

### <a name="moodle-bot-information-flow"></a>Поток информации о боте Moodle

<img width="530px" src="../assets/images/MoodleBotInformationFlow.png" alt="Moodle bot for Microsoft Teams information flow" />

Чтобы установить бота, необходимо зарегистрировать его на платформе [Microsoft Identity Platform.](https://identity.microsoft.com/Landing) Это позволяет вашему боту проверить подлинность конечных точек Майкрософт. 

**Регистрация бота**

1. Перейдите на страницу администрирования плагинов, а затем **выберите Plugins**. В **Microsoft 365 интеграции** выберите **Teams Параметры вкладку.**

1. Выберите **ссылку на Портал регистрации приложений** Майкрософт и вопишитесь на идентификатор Майкрософт.

1. Введите имя для приложения, например MoodleBot, и выберите **кнопку «Создать».**

1. **Скопируйте идентификатор приложения** и вставьте его в поле **идентификации приложений** Bot **на странице Параметры** команды.

1. Выберите **кнопку «Создать новый** пароль». Скопируйте сгенерированный пароль и вставьте **его в поле Bot Application Password** на странице **Параметры** команды.

1. Прокрутите в нижней части формы и выберите **Сохранить изменения**.

После создания идентификатора приложения и пароля разверните бота в Azure:

> [!div class="checklist"]
> * Выберите **Развертывание в Azure** и заполномоть форму необходимой информацией, такой как идентификатор приложения Bot, пароль приложения Bot и секрет Moodle на **Teams Параметры** странице. Информация Azure находится на странице **Настройки.** 
> * После заполнения формы выберите флажок, чтобы согласовать условия.
> * Выберите **Покупка**. Все ресурсы Azure развернуты на свободном уровне.

После завершения развертывания ресурсов в Azure необходимо настроить плагины Microsoft 365 Moodle с конечной точкой обмена сообщениями. Вы должны получить конечную точку от вашего бота в Azure:

1. Войдите на [портал Azure](https://portal.azure.com).

1. В левом стекле выберите группы **ресурсов и** выберите группу ресурсов, которую вы использовали или создали, развертывая бота.

1. Выберите **ресурс WebApp Bot** из списка ресурсов группы.

1. Копировать **конечную точку обмена** сообщениями из **раздела** Обзор.

1. В Moodle откройте **страницу команды Параметры** вашего веб-Microsoft 365 Moodle Plugins.

1. В поле **Bot Endpoint вставьте** URL-адрес, который вы только что скопировали, и измените *слово сообщения* *на webhook*. URL-адрес должен отображаться следующим образом: `https://botname.azurewebsites.net/api/webhook`

1. Выберите **Сохранить Изменения**.

1. После сохранения изменений вернитесь во **вкладку Team Параметры,** выберите **кнопку файла Download manifest** и сохраните пакет манифестов приложения на компьютере для дальнейшего использования.

## <a name="4-deploy-your-microsoft-teams-app"></a>4. Развертывание Microsoft Teams приложения

После развертывания бота в Azure и настройки для можно поговорить с сервером Moodle, необходимо развернуть Microsoft Teams приложение. Для этого необходимо загрузить файл манифеста приложения, который вы скачали с Microsoft 365 Moodle Plugins Team Параметры на предыдущем этапе.

Перед установкой приложения необходимо обеспечить возможность включения внешних приложений и загрузки приложений. Для получения дополнительной информации с [Microsoft 365 м.](../concepts/build-and-test/prepare-your-o365-tenant.md) 

**Развертывание приложения** 

1. Открытый **Microsoft Teams**. 

1. Выберите **значок** Приложения в левом нижнем левом районе навигационного бара.

1. Выберите **Upload ссылку на пользовательское** приложение из списка опций.

   > [!NOTE]
   > Если вы вошли в систему в качестве глобального администратора, вы должны иметь возможность загрузить приложение в каталог приложений вашей организации, в противном случае вы можете загрузить приложение только для команды, в которой вы находитесь.

4. Выберите `manifest.zip` пакет, который вы скачали ранее, и выберите **Сохранить**. Если вы еще не скачали пакет манифестов приложения, вы можете **скачать Параметры** вкладке страницы конфигурации плагинов в Moodle.

Теперь, когда приложение установлено, вы можете добавить вкладку к любому каналу, к который у вас есть доступ. Для этого перейдите на канал, выберите **символ плюс** (➕) и выберите приложение из списка. Следуйте подсказкам, чтобы закончить добавление вкладки курса Moodle к каналу.

## <a name="5-allow-automatic-creation-of-moodle-tabs-in-microsoft-teams"></a>5. Разрешить автоматическое создание вкладок Moodle в Microsoft Teams

Хотя вкладки Moodle создаются вручную в Microsoft Teams, вы можете решить создать их автоматически, когда команды создаются из синхронизации курса. Для этого необходимо настроить идентификатор загруженного приложения Microsoft Teams Moodle.

**Автоматическое создание вкладок Moodle**

1. Откройте Microsoft Teams.

1. Выберите значок Apps из нижнего левого региона навигационного бара.

1. Найдите загруженное приложение **Moodle** > выберите значок **опций** > выберите **ссылку на копию.**

1. В текстовом редакторе вставьте скопированный контент. Он должен содержать URL-адрес, такой как ht&#8203;tps://teams.microsoft.com/l/app/00112233-4455-6677-8899-aabbccddeeff. Копировать последнюю часть URL, `00112233-4455-6677-8899-aabbccddeeff` например, , который является идентификатором Microsoft Teams приложения.

1. В Moodle откройте **вкладку приложения Teams Moodle** со страницы конфигурации Microsoft 365 Moodle Plugins.

1. Вставьте идентификатор приложения Microsoft Teams поле идентификатора приложения Moodle и сохраните изменения.

Когда курс Moodle синхронизируется, Microsoft Teams автоматически устанавливает приложение Moodle в команде, создает вкладку Moodle в общем канале Teams и настраивает ее, чтобы содержать страницу курса для курса Moodle, с которой он синхронизируется. Теперь вы можете начать работать с курсами Moodle непосредственно с Microsoft Teams.

> [!NOTE]
> Чтобы поделиться с нами любыми запросами на функции или отзывами, посетите нашу [страницу Голос пользователя.](https://microsoftteams.uservoice.com/forums/916759-moodle)

## <a name="see-also"></a>См. также

- [Интеграция веб-приложений](~/samples/integrate-web-apps-overview.md)
- [Мудл](https://moodle.org/)
- [Документация Moodle](https://docs.moodle.org/34/en/Installing_plugins).

