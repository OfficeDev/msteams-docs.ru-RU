---
title: Выбор людей в адаптивных карточках
description: Использование элемента управления "Выбор людей" в адаптивных карточках
localization_priority: Normal
keywords: Средство выбора адаптивных карточек
ms.topic: reference
author: Rajeshwari-v
ms.author: surbhigupta
ms.openlocfilehash: 8a78be74d8142600ccc08093744491a19900e60b
ms.sourcegitcommit: 3bfd0d2c4d83f306023adb45c8a3f829f7150b1d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2022
ms.locfileid: "65073432"
---
# <a name="people-picker-in-adaptive-cards"></a>Выбор людей в адаптивных карточках

>[!NOTE]
> В настоящее время средство выбора людей в адаптивных карточках [](../../resources/dev-preview/developer-preview-intro.md#public-developer-preview-for-microsoft-teams) доступно в общедоступной предварительной версии разработчика только для мобильных устройств и общедоступной версии (GA) для настольных компьютеров.

Средство выбора людей помогает пользователям искать и выбирать пользователей в адаптивной карточке. Вы можете добавить средство выбора людей в качестве элемента управления вводом в адаптивную карточку, которая работает в чатах, каналах, модулях задач и вкладах. Средство выбора людей поддерживает следующие функции:

* Выполняет поиск одного или нескольких пользователей.
* Выбирает одного или нескольких пользователей.
* Переназначение одному или нескольким пользователям.
* Предварительно заполняет имена выбранных пользователей.

## <a name="popular-scenarios"></a>Популярные сценарии

В следующей таблице приведены популярные сценарии выбора людей в адаптивных карточках и соответствующие действия.

|Сценарии|Actions|
|----------|-------------------------|
|Сценарии на основе утверждения| Чтобы запросить, назначить и переназначить утверждение предполагаемому пользователю в соответствии с требованиями.|
|Управление инцидентами| Для отслеживания инцидентов и уведомления, назначения и переназначения предполагаемому пользователю для немедленных действий.|
|Управление проектами| Назначение билетов или ошибок определенным пользователям.|
|Поиск пользователя| Поиск пользователей в организации.|

# <a name="desktop"></a>[Компьютер](#tab/desktop)

Веб-клиент и настольный клиент поддерживают средство выбора людей в адаптивной карточке. При поиске в Интернете средство выбора людей включает встроенный ввод текста.

### <a name="reassignment-scenario-example"></a>Пример сценария переназначения

Пользователь А (Робер) получает запрос на задачу в канале и понимает неправильного получателя. Пользователь А переназначает задачу, которая отправляет сведения обратно боту.

Чтобы переназначить любую задачу:

1. Выберите **"Переназначить"** , где поле выбора людей предварительно заполнено именем, чтобы переназначить задачу предполагаемому пользователю.
1. Удалите неправильное имя пользователя.
1. Выберите предполагаемых пользователей в соответствии с сценарием образа, пользователя B (Mona) и пользователя C (Robin) для задачи.
1. Выберите **"Назначить"**. После назначения сведения отправляются боту.
   Бот обновляет адаптивную карточку и уведомляет предполагаемых пользователей.

На следующем рисунке показан сценарий переназначения.

![Средство выбора людей на рабочем столе](../../assets/images/cards/desktoppp.gif)

# <a name="mobile"></a>[Мобильные устройства](#tab/mobile)

> [!NOTE]
> В настоящее время эта функция доступна только в [общедоступной предварительной версии](../../resources/dev-preview/developer-preview-intro.md#public-developer-preview-for-microsoft-teams) разработчика.

Мобильные клиенты Android и iOS поддерживают средство выбора людей в адаптивных карточках. Вы можете использовать средство выбора людей на мобильных устройствах для поиска и выбора пользователя, чтобы улучшить взаимодействие с пользователем. Интерфейс поиска аналогичен любому другому пользовательскому интерфейсу выбора на мобильных устройствах.

### <a name="reassignment-scenario-example"></a>Пример сценария переназначения

Пользователь А (Робер) получает запрос на задачу в канале и понимает неправильного получателя. Пользователь А переназначает задачу, которая отправляет сведения обратно боту.

Чтобы переназначить любую задачу:

1. Выберите **"Переназначить"** , где поле выбора людей предварительно заполнено именем, чтобы переназначить задачу предполагаемому пользователю.
1. Удалите неправильное имя пользователя.
1. Выберите предполагаемых пользователей в соответствии с сценарием образа, пользователя B (Mona) и пользователя C (Robin) для задачи.
1. Нажмите кнопку **Готово**.
1. Выберите **"Назначить"**. После назначения сведения отправляются боту.
   Бот обновляет адаптивную карточку и уведомляет предполагаемых пользователей.

На следующем рисунке показан сценарий переназначения.

![Средство выбора людей на мобильных устройствах](../../assets/images/cards/mobilepp.gif)

---

## <a name="implement-people-picker"></a>Реализация средства выбора людей

Средство выбора людей реализовано как расширение элемента [управления Input.ChoiceSet](https://adaptivecards.io/explorer/Input.ChoiceSet.html) . Элемент управления входными данными включает следующие параметры:

* Раскрывающийся список, например развернутый фрагмент.
* Переключатель, например один выделенный элемент.
* Флажки, например несколько выбранных элементов.  

> [!NOTE]
> Элемент `Input.ChoiceSet` управления основан на свойствах `style` и свойствах `isMultiSelect` .  

### <a name="update-schema"></a>Обновление схемы

Следующие свойства являются дополнениями к `Input.ChoiceSet` схеме, чтобы включить функцию выбора людей на карточке:  

#### <a name="inputchoiceset-control"></a>Элемент управления Input.ChoiceSet

|Свойство |Тип |Обязательный |Описание |
|----|----|----|----|
|**choices.data** |**Data.Query** |Нет |Включает динамическое автоматическое завершение для различных типов пользователей, извлекая результаты из указанного набора данных. |

#### <a name="dataquery"></a>Data.Query

|Свойство |Тип |Обязательный |Описание|
|--|--|--|--|
|**Набора данных** |String |Да |Тип данных, которые должны извлекаться динамически.|

#### <a name="dataset"></a>Набора данных

В следующей таблице приведены предопределенные значения в виде набора **данных** для средства выбора людей:

|Набора данных|Область поиска
|--|--|
|**graph.microsoft.com/users** |Поиск всех участников в организации.|
|**graph.microsoft.com/users?scope=currentContext** |Выполните поиск внутри участников текущего диалога, например чата или канала, в который отправляется определенная карточка.|

### <a name="example"></a>Пример

Ниже приведен пример кода для создания средства выбора людей с помощью поиска в организации.

```json
{
 "type": "AdaptiveCard",
 "body": [
  {
   "type": "TextBlock",
   "size": "Medium",
   "weight": "Bolder",
   "text": "People Picker with Org search enabled"
  },
  {
   "type": "Input.ChoiceSet",
   "choices": [],
   "choices.data": {
    "type": "Data.Query",
    "dataset": "graph.microsoft.com/users"
   },
   "id": "people-picker",
   "isMultiSelect": true
  }
 ],
 "actions": [
  {
   "type": "Action.Submit",
   "title": "Submit"
  }
 ],
 "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
 "version": "1.2"
}
```  

На следующем рисунке показано средство выбора людей в адаптивных карточках с поиском организации:

:::image type="content" source="../../assets/images/Cards/peoplepicker-org-search.png" alt-text="Поиск в организации средства выбора людей":::

Чтобы включить поиск в списке участников беседы, используйте соответствующий набор данных, определенный в таблице [набора](#dataset) данных. `isMultiSelect` Свойство  используется для включения выбора нескольких пользователей в элементе управления. По умолчанию задано значение false, и этот параметр позволяет выбрать только одного пользователя.

### <a name="data-submission"></a>Отправка данных

Вы можете использовать или `Action.Submit` отправить `Action.Execute` выбранные данные в бот. Полезные `invoke` данные, полученные в боте, — это список Microsoft Azure Active Directory (Azure AD) или идентификаторов, указанных в статическом списке.
В средстве выбора людей, когда пользователь выбран в элементе управления, `Azure AD ID` пользователем является значение, отправленное обратно. Строка `Azure AD ID` и уникально идентифицирует пользователя в каталоге.

Формат значения, отправленного боту, зависит от значения `isMultiSelect` свойства:

|value of `isMultiSelect`|Формат|
|--|--|
|false _(один выбор)_|<selected_Azure_AD_ID>|
|true _(множественный выбор)_|<selected_Azure_AD_ID_1>,<selected_Azure_AD_ID_2>,<selected_Azure_AD_ID_3>|  

С помощью `Azure AD ID`средства выбора людей предварительно выбирает соответствующего пользователя.

## <a name="preselection-of-user"></a>Предварительное удаление пользователя

Средство выбора людей поддерживает предварительное выбор пользователя в элементе управления при создании и отправке адаптивной карточки. `Input.ChoiceSet` поддерживает свойство `value` , которое используется для предварительного выбора пользователя. Формат этого свойства совпадает `value` с форматом отправленного значения при [отправке данных](#data-submission).  
В следующем списке приведены сведения для предварительного выбора пользователей.

* Для одного пользователя в элементе управления укажите `Azure AD ID` пользователя в качестве `value`.
* Для нескольких пользователей, таких `isMultiSelect` как is `true`, укажите строку с разделителями-запятыми `Azure AD ID`.  

В следующем примере описывается предварительное удаление одного пользователя:

```json
{
 "type": "AdaptiveCard",
 "body": [
  {
   "type": "TextBlock",
   "size": "Medium",
   "weight": "Bolder",
   "text": "People Picker with Org search enabled"
  },
  {
   "type": "Input.ChoiceSet",
   "choices": [],
   "choices.data": {
    "type": "Data.Query",
    "dataset": "graph.microsoft.com/users"
   },
   "id": "people-picker",
   "value": "<Azure AD ID 1>"
  }
 ],
 "actions": [
  {
   "type": "Action.Submit",
   "title": "Submit"
  }
 ],
 "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
 "version": "1.2"
}
```  

В следующем примере описывается предварительное удаление нескольких пользователей:

```json
{
 "type": "AdaptiveCard",
 "body": [
  {
   "type": "TextBlock",
   "size": "Medium",
   "weight": "Bolder",
   "text": "People Picker with Org search enabled"
  },
  {
   "type": "Input.ChoiceSet",
   "choices": [],
   "choices.data": {
    "type": "Data.Query",
    "dataset": "graph.microsoft.com/users"
   },
   "id": "people-picker",
   "isMultiSelect": true,
   "value": "<Azure AD ID 1>,<Azure AD ID 2>,<Azure AD ID 3>"
  }
 ],
 "actions": [
  {
   "type": "Action.Submit",
   "title": "Submit"
  }
 ],
 "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
 "version": "1.2"
}
```

## <a name="static-choices"></a>Статические варианты

Статические варианты поддерживают сценарии, в которых пользовательские профили должны быть вставлены в предопределенные наборы данных. `Input.ChoiceSet` поддерживает статическое `choices` указание в JSON. Статический выбор используется для создания вариантов, из которых пользователь может выбрать.

> [!NOTE]
> Статические `choices` данные используются с динамическими наборами данных.

Выбор состоит из и `title` `value`. При использовании вместе с средством выбора людей `title` `value` эти варианты преобразуются в профили пользователей с именем и идентификатором. Эти пользовательские профили также являются частью результатов поиска, если поисковый запрос соответствует заданному `title`.
В следующем примере описываются статические варианты:

```json
{
 "type": "AdaptiveCard",
 "body": [
  {
   "type": "TextBlock",
   "size": "Medium",
   "weight": "Bolder",
   "text": "People Picker with Org search enabled"
  },
  {
   "type": "Input.ChoiceSet",
   "choices": [
    {
     "title": "Custom Profile 1",
     "value": "Profile1"
    },
    {
     "title": "Custom Profile 2",
     "value": "Profile2"
    }
   ],
   "choices.data": {
    "type": "Data.Query",
    "dataset": "graph.microsoft.com/users"
   },
   "id": "people-picker",
   "isMultiSelect": true
  }
 ],
 "actions": [
  {
   "type": "Action.Submit",
   "title": "Submit"
  }
 ],
 "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
 "version": "1.2"
}
```

На следующем рисунке показано средство выбора людей в адаптивных карточках со статическими вариантами в поиске организации:

:::image type="content" source="../../assets/images/Cards/peoplepicker-static-choice.png" alt-text="people-picker-static-choice":::

Средство выбора людей можно реализовать для эффективного управления задачами в разных сценариях.  

## <a name="code-sample"></a>Пример кода

| Имя образца           | Описание | C#    | Node.js   |
|:---------------------|:--------------|:---------|:--------|
|Элемент управления "Выбор людей" в адаптивных карточках| В этом примере показано, как использовать элемент управления "Выбор людей" в адаптивных карточках.|[View](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/bot-people-picker-adaptive-card/csharp)|[Просмотр](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/bot-people-picker-adaptive-card/nodejs) |

## <a name="see-also"></a>Дополнительные ресурсы

[Справочник по карточкам](cards-reference.md)
