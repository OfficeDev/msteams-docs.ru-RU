---
title: Определение команд поиска расширения обмена сообщениями
author: clearab
description: Определение команд поиска расширения обмена сообщениями для приложений Microsoft Teams.
ms.topic: conceptual
ms.author: anclear
ms.openlocfilehash: 18bac3049fec8fead168c12f2832bfbbb72cf609
ms.sourcegitcommit: 5cb3453e918bec1173899e7591b48a48113cf8f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "50449271"
---
# <a name="define-messaging-extension-search-commands"></a>Определение команд поиска расширения обмена сообщениями

[!include[v4-to-v3-SDK-pointer](~/includes/v4-to-v3-pointer-me.md)]

Команды поиска расширения обмена сообщениями позволяют пользователям искать внешние системы и вставлять результаты этого поиска в сообщение в виде карточки.

> [!NOTE]
> Ограничение размера карты результатов — 28 КБ. Карта не отправляется, если ее размер превышает 28 КБ. 

## <a name="choose-messaging-extension-invoke-locations"></a>Выбор расположения ссылок на расширение обмена сообщениями

Первое, что вам нужно решить, это откуда можно вызвать команду поиска (или, в частности, *вызвать).* Команда поиска может вызываться из одного или обоих следующих местоположений:

* Кнопки в нижней части области составить сообщение
* По @mentioning в командном окне

При вызове из области составить сообщение у пользователя будет возможность отправки результатов в беседу. При вызове из командного окна пользователь может взаимодействовать с результативной картой или копировать ее для использования в другом месте.

## <a name="add-the-command-to-your-app-manifest"></a>Добавление команды в манифест приложения

Теперь, когда вы решили, как пользователи будут взаимодействовать с командой поиска, пришло время добавить ее в манифест приложения. Для этого вы добавите новый объект на верхний уровень `composeExtension` манифеста приложения JSON. Это можно сделать либо с помощью App Studio, либо вручную.

### <a name="create-a-command-using-app-studio"></a>Создание команды с помощью App Studio

Обязательным условием для создания команды поиска является то, что необходимо уже создать расширение обмена сообщениями. Сведения о создании расширения обмена сообщениями см. в сообщении о создании расширения [обмена сообщениями.](~/messaging-extensions/how-to/create-messaging-extension.md)

**Создание команды поиска**

1. В клиенте Microsoft Teams откройте **App Studio** и выберите вкладку **Редактор Манифеста.**
1. Если вы уже создали пакет приложений в **App Studio,** выберите его из списка. Если вы не создали пакет приложений, импортировать существующий пакет.
1. После импорта пакета приложений выберите расширения **обмена** сообщениями в **статье Capabilities.**
1. Выберите **Добавить** в разделе **Команда** на странице расширения обмена сообщениями.
1. Выберите **Разрешить пользователям запрашивать у службы сведения и вставить их в сообщение.**
1. Добавление **командного и** **заголовок**.
1. Выберите расположение, в котором должна быть вызвана команда поиска. Выбор сообщения **в** настоящее время не изменяет поведение команды поиска.
1. Добавьте параметр поиска и выберите **Сохранить**.
 
### <a name="manually-create-a-command"></a>Вручную создайте команду

Чтобы вручную добавить команду поиска расширения обмена сообщениями в манифест приложения, необходимо добавить в массив объектов следующие `composeExtension.commands` параметры.

| Имя свойства | Назначение | Обязательный? | Минимальная версия манифеста |
|---|---|---|---|
| `id` | Уникальный ID, который вы назначаете этой команде. Запрос пользователя будет включать этот ID. | Да | 1.0 |
| `title` | Имя команды. Это значение отображается в пользовательском интерфейсе. | Да | 1.0 |
| `description` | Справка текста, указывающее, что делает эта команда. Это значение отображается в пользовательском интерфейсе. | Да | 1.0 |
| `type` | Необходимое значение — `query`. | Нет | 1.4 |
|`initialRun` | Если заданной **для true,** указывает, что эта команда должна быть выполнена, как только пользователь выберет эту команду в пользовательском интерфейсе. | Нет | 1.0 |
| `context` | Необязательный массив значений, определяя контекст, в котором доступно действие поиска. Возможные значения `message` , `compose` или `commandBox` . Значение по умолчанию: `["compose", "commandBox"]`. | Нет | 1.5 |

Кроме того, необходимо добавить сведения о параметре поиска, который определит текст, видимый пользователю в клиенте Teams.

| Имя свойства | Назначение | Обязательный? | Минимальная версия манифеста |
|---|---|---|---|
| `parameters` | Статический список параметров для команды. | Нет | 1.0 |
| `parameter.name` | Имя параметра. Это отправляется в службу в запросе пользователя. | Да | 1.0 |
| `parameter.description` | Описывает цели этого параметра или пример значения, которое должно быть предоставлено. Это значение отображается в пользовательском интерфейсе. | Да | 1.0 |
| `parameter.title` | Краткое удобное название параметра или метка. | Да | 1.0 |
| `parameter.inputType` | Задай тип необходимого ввода. Возможные `text` значения: `textarea` , , , , `number` `date` `time` `toggle` . По умолчанию установлено значение `text` | Нет | 1.4 |

#### <a name="app-manifest-example"></a>Пример манифеста приложения

Ниже приведен пример `composeExtensions` объекта, определяющий команду поиска. Это не пример полного манифеста, для полной схемы манифеста приложения см. схему манифеста [приложения.](~/resources/schema/manifest-schema.md)

```json
{
...
  "composeExtensions": [
    {
      "botId": "57a3c29f-1fc5-4d97-a142-35bb662b7b23",
      "canUpdateConfiguration": true,
      "commands": [{
          "id": "searchCmd",
          "description": "Search Bing for information on the web",
          "title": "Search",
          "initialRun": true,
          "parameters": [{
            "name": "searchKeyword",
            "description": "Enter your search keywords",
            "title": "Keywords"
          }]
        }
      ]
    }
  ],
...
}
```

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы добавили команду поиска, вам потребуется обрабатывать [запрос поиска.](~/messaging-extensions/how-to/search-commands/respond-to-search.md)

[!include[messaging-extension-learn-more](~/includes/messaging-extensions/learn-more.md)]
