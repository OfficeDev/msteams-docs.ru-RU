---
title: Определение команд поиска для расширения обмена сообщениями
author: clearab
description: Определение команд поиска для расширения системы обмена сообщениями для приложений Microsoft Teams.
ms.topic: conceptual
ms.author: anclear
ms.openlocfilehash: b6837fb8a131d8ce3e2bbd0c51c2861dbffda2bc
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "41675477"
---
# <a name="define-messaging-extension-search-commands"></a>Определение команд поиска для расширения обмена сообщениями

[!include[v4-to-v3-SDK-pointer](~/includes/v4-to-v3-pointer-me.md)]

Команды поиска для расширения системы обмена сообщениями позволяют пользователям искать внешние системы и вставлять результаты поиска в сообщения в виде карточки.

## <a name="choose-messaging-extension-invoke-locations"></a>Выбор расположений вызова расширения обмена сообщениями

Первое, что необходимо принять, — из чего можно запустить команду поиска (точнее, *вызвать*ее). Команда поиска может быть вызвана из одного или обоих следующих расположений:

* Кнопки в нижней части области "Создание сообщения"
* По @mentioning в поле команды

При вызове из области "Создание сообщения" пользователь может отправлять результаты в беседу. При вызове из поля команд пользователь может взаимодействовать с полученной картой или копировать его для использования в другом месте.

## <a name="add-the-command-to-your-app-manifest"></a>Добавление команды в манифест приложения

Теперь, когда вы решили, как пользователи будут взаимодействовать с командой поиска, следует добавить его в манифест приложения. Чтобы сделать это, добавьте новый `composeExtension` объект на верхний уровень манифеста приложения JSON. Это можно сделать с помощью App Studio или вручную.

### <a name="create-a-command-using-app-studio"></a>Создание команды с помощью App Studio

В следующих действиях предполагается, что вы уже [создали расширение системы обмена сообщениями](~/messaging-extensions/how-to/create-messaging-extension.md).

1. В клиенте Microsoft Teams откройте **app Studio** и выберите вкладку **редактор манифестов** .
2. Если вы уже создали пакет приложения в App Studio, выберите его из списка. В противном случае вы можете импортировать существующий пакет приложения.
3. Нажмите кнопку **Add (добавить** ) в разделе Command (Добавить).
4. Выберите **Разрешить пользователям запрашивать у службы сведения и вставлять их в сообщение**.
5. Добавьте **идентификатор команды** и **название**.
6. Выберите, откуда вы хотите запустить команду поиска. В настоящее время выбор **сообщения** не изменяет поведение команды поиска.
7. Добавьте параметр поиска.
8. Щелкните Сохранить.

### <a name="manually-create-a-command"></a>Создание команды вручную

Чтобы вручную добавить команду поиска расширения обмена сообщениями в манифест приложения, необходимо добавить к `composeExtension.commands` массиву объектов следующие параметры.

| Имя свойства | Назначение | Обязательный? | Минимальная версия манифеста |
|---|---|---|---|
| `id` | Уникальный идентификатор, назначенный этой команде. Запрос пользователя будет включать этот идентификатор. | Да | 1.0 |
| `title` | Имя команды. Это значение отображается в пользовательском интерфейсе. | Да | 1.0 |
| `description` | Текст справки, указывающий, что делает эта команда. Это значение отображается в пользовательском интерфейсе. | Да | 1.0 |
| `type` | Необходимое значение — `query`. | Нет | 1.4 |
|`initialRun` | Если задано значение **true**, то эта команда должна выполняться сразу после того, как пользователь выберет эту команду в пользовательском интерфейсе. | Нет | 1.0 |
| `context` | Необязательный массив значений, определяющий контекст, в котором действие поиска доступно. Возможные значения: `message`, `compose`, или `commandBox`. Значение по умолчанию: `["compose", "commandBox"]`. | Нет | 1.5 |

Кроме того, необходимо добавить сведения о параметре Search, который будет определять текст, видимый для пользователя в клиенте Teams.

| Имя свойства | Назначение | Обязательный? | Минимальная версия манифеста |
|---|---|---|---|
| `parameters` | Статический список параметров для команды. | Нет | 1.0 |
| `parameter.name` | Имя параметра. Он отправляется службе по запросу пользователя. | Да | 1.0 |
| `parameter.description` | Описывает назначение этого параметра или пример значения, которое следует предоставить. Это значение отображается в пользовательском интерфейсе. | Да | 1.0 |
| `parameter.title` | Краткий заголовком или меткой с понятным пользователем параметром. | Да | 1.0 |
| `parameter.inputType` | Укажите требуемый тип ввода. Возможные значения: `text`, `textarea`, `number`, `date`, `time`, `toggle`. Значение по умолчанию:`text` | Нет | 1.4 |

#### <a name="app-manifest-example"></a>Пример манифеста приложения

Ниже приведен пример `composeExtensions` объекта, определяющего команду поиска. Это не пример полного манифеста для полной схемы манифеста приложения: [схема манифеста приложения](~/resources/schema/manifest-schema.md).

```json
{
...
  "composeExtensions": [
    {
      "botId": "57a3c29f-1fc5-4d97-a142-35bb662b7b23",
      "canUpdateConfiguration": true,
      "commands": [{
          "id": "searchCmd",
          "description": "Search Bing for information on the web",
          "title": "Search",
          "initialRun": true,
          "parameters": [{
            "name": "searchKeyword",
            "description": "Enter your search keywords",
            "title": "Keywords"
          }]
        }
      ]
    }
  ],
...
}
```

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы добавили команду поиска, вам потребуется [обработать запрос поиска](~/messaging-extensions/how-to/search-commands/respond-to-search.md).

[!include[messaging-extension-learn-more](~/includes/messaging-extensions/learn-more.md)]