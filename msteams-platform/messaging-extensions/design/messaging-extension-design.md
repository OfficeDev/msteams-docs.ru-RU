---
title: Проектирование расширения обмена сообщениями
description: Узнайте, как разработать Teams обмена сообщениями и получить Microsoft Teams пользовательского интерфейса.
keywords: команды проектируют руководящие принципы ссылки расширения обмена сообщениями советы наилучшей практике
author: heath-hamilton
localization_priority: Normal
ms.author: qinch
ms.topic: conceptual
ms.openlocfilehash: ed1f0f2eb2ce8d429a8a780bd2c4c4eb421d6d54
ms.sourcegitcommit: 51e4a1464ea58c254ad6bd0317aca03ebf6bf1f6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2021
ms.locfileid: "52566217"
---
# <a name="designing-your-microsoft-teams-messaging-extension"></a>Проектирование Microsoft Teams обмена сообщениями

Расширения сообщений являются ярлыками для вставки содержимого приложения или действия на сообщении без навигации от разговора.
Чтобы направлять дизайн приложения, следующая информация описывает и иллюстрирует, как люди могут добавлять, использовать и управлять расширениями обмена сообщениями в Teams.

## <a name="microsoft-teams-ui-kit"></a>Комплект разработчика для пользовательского интерфейса Microsoft Teams

В наборе пользовательского интерфейса можно найти всеобъемлющие рекомендации по проектированию расширения обмена сообщениями, включая элементы, Microsoft Teams которые можно захватить и изменить по мере необходимости.

> [!div class="nextstepaction"]
> [Получить комплект разработчика для пользовательского интерфейса Microsoft Teams (Figma)](https://www.figma.com/community/file/916836509871353159)

## <a name="add-a-messaging-extension"></a>Добавление расширения обмена сообщениями

Вы можете добавить расширение обмена сообщениями в следующих Teams контекстов:

* Взять в магазине Teams (AppSource)
* В канале, чат, или встреча (до, во время и после) возле составить окно. Стоит отметить, что если вы добавите расширение обмена сообщениями в одном из этих мест, только вы можете использовать его в этом контексте.

В следующем примере показано, как вы добавляете расширение обмена сообщениями в канале:

:::image type="content" source="../../assets/images/messaging-extension/add-in-channel.png" alt-text="Пример показывает, как добавить расширение обмена сообщениями рядом с окном compose в канале." border="false":::

## <a name="set-up-a-messaging-extension"></a>Настройка расширения обмена сообщениями

Аутентификация не является обязательной, но если ваше приложение является чем-то вроде инструмента отслеживания билетов, вам может понадобиться, чтобы люди войсовы были в том, чтобы использовать расширение обмена сообщениями.

Для согласованности Teams приложениях нельзя настроить экран ва-во. Если вы используете один знак проверки подлинности (SSO), пользователи вписываются автоматически.

:::image type="content" source="../../assets/images/messaging-extension/set-up.png" alt-text="Пример показывает экран настройки расширения обмена сообщениями с кнопкой ввеся." border="false":::

## <a name="types-of-messaging-extensions"></a>Типы расширений обмена сообщениями

Расширения сообщений могут иметь команды поиска, команды действий или и то, и другое. Ваши команды зависят от функций приложения и от того, как они вписываются в Teams случаев использования.

### <a name="search-commands"></a>Команды поиска

С помощью команд поиска люди могут использовать расширение обмена сообщениями для быстрого поиска внешнего содержимого и вставки в сообщение. Команды поиска обычно доступны в поле для составления. Например, можно начать или добавить к обсуждению, поделившись частью контента, не выходя из Teams.

:::image type="content" source="../../assets/images/messaging-extension/search-command-type.png" alt-text="Пример показывает расширение обмена сообщениями на основе поиска, запущенного из окна compose." border="false":::

#### <a name="compose-box-layout-options"></a>Составить параметры макета коробки

У вас есть несколько вариантов отображения результатов поиска расширения обмена сообщениями, включая [список и просмотры сетки.](../../messaging-extensions/how-to/search-commands/respond-to-search.md#respond-to-user-requests)

:::image type="content" source="../../assets/images/messaging-extension/search-result-layout.png" alt-text="Иллюстрации, показывающие параметры макета для результатов поиска расширения обмена сообщениями." border="false":::

### <a name="action-commands"></a>Команды действий

Команды действий позволяют людям инициировать действия и обрабатывать запросы во внешних службах в Teams. Например, если приложение отслеживает заказы, пользователь может создать новый порядок, используя содержимое сообщения коллеги прямо в чате.

Расширения обмена сообщениями на основе действий часто требуют от пользователей завершения формы или какой-либо другой конфигурации в моде. Вы можете создать эти опыты с [модулями задач.](../../task-modules-and-cards/task-modules/design-teams-task-modules.md)

## <a name="open-a-messaging-extension"></a>Открыть расширение обмена сообщениями

Составной ящик и сообщения или сообщения являются основными контекстами, в которых люди используют расширения обмена сообщениями.

### <a name="from-the-compose-box"></a>Из коробки для сочинения

После добавления пользователи могут открыть расширение обмена сообщениями, выбрав значок приложения ниже коробки compose. В этом примере расширение имеет команды поиска и действия:

:::image type="content" source="../../assets/images/messaging-extension/open-from-compose-box.png" alt-text="Пример показывает, как открыть расширение обмена сообщениями из окна compose." border="false":::

### <a name="from-a-chat-message-or-channel-post"></a>Из сообщения чата или сообщения канала

После добавления пользователи могут выбрать **значок More** :::image type="icon" source="../../assets/icons/teams-client-more.png"::: в сообщении чата или сообщении канала, чтобы найти команды действий вашего расширения. Ваше расширение может быть перечислено в соответствии с **более действиями,** основанными на использовании.

> [!NOTE]
> Поддержка дополнительных действий из сообщения чата или сообщения канала недоступна на Microsoft Teams платформе. 

#### <a name="chat-message"></a>Сообщение чата

:::image type="content" source="../../assets/images/messaging-extension/open-from-chat-message.png" alt-text="Пример показывает, как открыть расширение обмена сообщениями из сообщения чата." border="false":::

#### <a name="channel-post"></a>Почта канала

:::image type="content" source="../../assets/images/messaging-extension/open-from-channel-post.png" alt-text="Пример показывает, как открыть расширение обмена сообщениями с поста канала." border="false":::

## <a name="use-a-messaging-extension"></a>Использование расширения обмена сообщениями

Следующие сценарии показывают основные способы использования расширения обмена сообщениями.

### <a name="insert-content-into-a-message"></a>Вставьте содержимое в сообщение

**1. Выберите расширение обмена сообщениями.** Пользователи могут искать содержимое, которое они хотят поделиться из окна compose.

:::image type="content" source="../../assets/images/messaging-extension/insert-content-search.png" alt-text="Пример показывает пользователя, ищуго содержимое для вставки из окна compose." border="false":::

**2. Вставьте содержимое**. После опубликования другие могут ответить или выбрать содержимое, чтобы увидеть больше информации в вашем приложении.

:::image type="content" source="../../assets/images/messaging-extension/insert-content-posted.png" alt-text="Пример показывает пользователя, размещая содержимое в разговоре с каналом." border="false":::

### <a name="take-action-on-a-message"></a>Принять меры по сообщению

**1. Выберите расширение обмена сообщениями.** Ваше приложение может включать одну или несколько команд действий.

:::image type="content" source="../../assets/images/messaging-extension/select-action-command.png" alt-text="На примере показан пользователь, выбираюющий команду действий расширения обмена сообщениями." border="false":::

**2. Завершите действие**. Ваше приложение может получать и обрабатывать любой контент или данные, отправленные действиями сообщения. Это позволяет пользователям оставаться в разговоре и, на следующем примере, не беспокоиться о вводе информации непосредственно в вашем приложении.

:::image type="content" source="../../assets/images/messaging-extension/complete-action-command.png" alt-text="Пример того, как принять меры по сообщению." border="false":::

### <a name="preview-links"></a>Предварительные ссылки

Расширения обмена сообщениями также позволяют вставлять богатые ссылки из распознаемого URL-адреса в сообщение (эта возможность [называется разворачивание ссылки](../../messaging-extensions/how-to/link-unfurling.md).)

**1. Вставьте признанную ссылку** в поле для составления.

:::image type="content" source="../../assets/images/messaging-extension/paste-preview-link.png" alt-text="Пример показывает, как пользователь вставки ссылку в поле компоста." border="false":::

**2. Вставьте содержимое**. Если ваше приложение распознает URL-адрес в поле compose, оно отображает ссылку как карту, которая обеспечивает богатый контентом предварительный просмотр веб-контента. (См. [Руководящие принципы по разработке адаптивных](../../task-modules-and-cards/cards/design-effective-cards.md) карт для получения дополнительной информации.)

:::image type="content" source="../../assets/images/messaging-extension/insert-preview-link.png" alt-text="Пример показывает, как URL-адрес, так как он распознается вашим приложением, включает в себя некоторые богатые содержание в поле compose." border="false":::

## <a name="manage-a-messaging-extension"></a>Управление расширением обмена сообщениями

При правильном нажатии на значок пользователи могут закрепить, удалить или настроить расширение обмена сообщениями.

## <a name="anatomy"></a>Анатомия

### <a name="messaging-extension-in-the-compose-box"></a>Расширение сообщений в поле для составления

Следующим примером является расширение обмена сообщениями, открытое из окна compose.

:::image type="content" source="../../assets/images/messaging-extension/anatomy-compose.png" alt-text="Иллюстрация, показывающая анатомию пользовательского интерфейса расширения обмена сообщениями в поле compose." border="false":::

|Счетчик|Описание|
|----------|-----------|
|1|**Логотип приложения**: Цвет значка логотипа приложения.|
|2|**Название приложения**: Полное название приложения.|
|3|**Значок меню команды action (необязательно)**: Открывает список команд действий для расширения обмена сообщениями (если вы укажете их).
|4 |**Окно поиска**: Позволяет пользователям находить содержимое приложения, которое они хотят вставить.|
|5 |**Меню вкладок (необязательно)**: Предоставляет несколько категорий контента.|
|6 |**Меню команд действий (необязательно)**: Отображает список команд действий (если вы укажете их).|
|7 |**Содержимое приложения**: В первую очередь для отображения результатов поиска. Пример здесь использует макет списка (сетка макет является еще одним вариантом).|
|8 |**Логотип приложения**: Контур значок логотипа приложения.|

### <a name="messaging-extension-management-menu"></a>Меню управления расширением сообщений

:::image type="content" source="../../assets/images/messaging-extension/anatomy-management-menu.png" alt-text="Иллюстрация, показывающая анатомию пользовательского интерфейса меню управления расширением обмена сообщениями." border="false":::

|Счетчик|Описание|
|----------|-----------|
|1|**Unpin**: Доступно, если пользователь прикрепил ваше приложение.|
|2|**Удалить**: Удаляет расширение обмена сообщениями из канала, чата или собрания.|

## <a name="best-practices"></a>Рекомендации

Используйте эти рекомендации для создания качественного приложения.

### <a name="setup-and-general-usage"></a>Настройка и общее использование

:::row:::
   :::column span="":::
:::image type="content" source="../../assets/images/messaging-extension/setup-do.png" alt-text="Пример по настройке и общему использованию." border="false":::

#### <a name="do-integrate-with-single-sign-on"></a>У: Интеграция с одним знаком на

SSO упрощает, быстрее и обеспечивает безопасность процесса вовсяться. Кроме того, если пользователь уже в подписался на ваше личное приложение, он не должен также войти в систему снова, чтобы получить доступ к расширению обмена сообщениями.

   :::column-end:::
   :::column span="":::
:::image type="content" source="../../assets/images/messaging-extension/setup-dont.png" alt-text="Пример интеграции с одним знаком." border="false":::

#### <a name="dont-take-users-away-from-the-conversation"></a>Не: Увечьте пользователей от разговора

Расширения сообщений являются ярлыками, которые должны уменьшить переключение контекста. Ваше расширение не должно, например, направлять пользователей на веб-страницу за пределами Teams.

   :::column-end:::
:::row-end:::

#### <a name="do-highlight-your-messaging-extension"></a>У: Выделите расширение обмена сообщениями

Расширения обмена сообщениями не всегда легко найти. Включите скриншоты того, как использовать его на странице деталей приложения. Если ваше приложение также включает в себя бота, вы можете включить документацию по расширению обмена сообщениями в приветственный тур бота.

### <a name="templating"></a>Темплятирование

:::row:::
   :::column span="":::
:::image type="content" source="../../assets/images/messaging-extension/templating-do.png" alt-text="Пример по шаблонам." border="false":::

#### <a name="do-let-teams-handle-some-of-the-design-work-if-possible"></a>У: Давайте Teams некоторые из проектных работ, если это возможно

Если это имеет смысл для ваших случаев использования, подумайте о создании расширения обмена сообщениями на основе поиска. Teams делает эти типы расширений встроенной темой и доступностью.

   :::column-end:::
   :::column span="":::
:::image type="content" source="../../assets/images/messaging-extension/templating-dont.png" alt-text="Пример по обработке проектных работ." border="false":::

#### <a name="dont-embed-your-entire-app-in-a-task-module"></a>Не встраивайте все приложение в модуль задач

Если расширение обмена сообщениями требует команд действий, держите модуль задачи простым и отображайте только компоненты, необходимые для завершения действия.

   :::column-end:::
:::row-end:::

### <a name="theming"></a>Темы

:::row:::
   :::column span="":::
:::image type="content" source="../../assets/images/messaging-extension/theming-do.png" alt-text="Пример по их метью." border="false":::

#### <a name="do-take-advantage-of-teams-color-tokens"></a>Do: Воспользуйтесь Teams цветных жетонов

Каждая Teams имеет свою цветовую гамму. Для автоматического обработки изменений темы <a href="https://fluentsite.z22.web.core.windows.net/0.51.3/colors#color-scheme" target="_blank">используйте цветовые жетоны (Fluent UI)</a> в своем дизайне.

   :::column-end:::
   :::column span="":::
:::image type="content" source="../../assets/images/messaging-extension/theming-dont.png" alt-text="Пример цветовых жетонов." border="false":::

#### <a name="dont-hard-code-color-values"></a>Не: Значения цвета жесткого кода

Если вы не используете Teams, ваши проекты будут менее масштабируемыми и потребуется больше времени для управления.

   :::column-end:::
:::row-end:::

### <a name="actions"></a>Действия

:::row:::
   :::column span="":::
:::image type="content" source="../../assets/images/messaging-extension/action-commands-do.png" alt-text="Пример действий." border="false":::

#### <a name="do-include-action-commands-that-make-sense-in-context"></a>У: Включите команды действий, которые имеют смысл в контексте

Действия сообщения должны относиться к тому, на что смотрит пользователь. Например, предоставьте пользователям ярлык для создания проблемы или рабочего элемента с помощью текста в чьей-то должности.

   :::column-end:::
   :::column span="":::
:::image type="content" source="../../assets/images/messaging-extension/action-commands-dont.png" alt-text="Пример команд действий." border="false":::

#### <a name="dont-include-actions-commands-that-arent-contextual"></a>Не: Включите команды действий, которые не являются контекстуальными

Действия сообщения для просмотра **панели мониторинга, вероятно,** кажутся отключенными от большинства разговоров.

   :::column-end:::
:::row-end:::

### <a name="searches"></a>Поиск

#### <a name="do-show-search-results-while-typing"></a>У: Показать результаты поиска при вводе

Предоставьте предлагаемые результаты поиска во время ввеха пользователей. Они могут найти содержимое, которое им нужно быстрее с минимальным количеством символов.

#### <a name="dont-require-users-to-submit-a-query"></a>Не: Требовать от пользователей отправки запроса

Вы можете заставить пользователей нажать клавишу или выбрать кнопку для отправки запросов в ваше приложение. Хотя служба служб приложений может быть проще, люди могут быть смущены тем, что они не видят результатов поиска в режиме реального времени при их типе.

#### <a name="do-consider-zero-term-queries"></a>У: Рассмотрим нулевой срок запросов

Например, прежде чем пользователь написыт что-либо в поле поиска, отобразить то, что он в последний раз просматривается в приложении. Вполне возможно, что они хотят, чтобы вставить этот контент в их разговор.
