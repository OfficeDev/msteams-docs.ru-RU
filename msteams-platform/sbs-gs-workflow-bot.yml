### YamlMime:Tutorial
title: Создание бота рабочего процесса Teams
metadata:
  title: Создание бота рабочего процесса Teams
  description: В этом модуле обучения вы узнаете, как создать бот рабочего процесса в Microsoft Teams с помощью функции обработчика действий адаптивной карточки.
  audience: Developer
  level: Beginner
  ms.date: 28/09/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: toolkit/add-capability.md
  nextTutorialTitle: Добавление возможностей в приложения Teams
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: 39ffa9600836fe58f243140c8a5379006df339eb
  ms.sourcegitcommit: 6926cf5eee55d5047c11ca13afc7f6f23e270396
  ms.translationtype: MT
  ms.contentlocale: ru-RU
  ms.lasthandoff: 10/27/2022
  ms.locfileid: "68741008"
items:
- durationInMinutes: 1
  content: >
    Бот рабочего процесса позволяет пользователям взаимодействовать с адаптивной карточкой, включенной функцией обработчика действий адаптивной карточки в приложении бота рабочего процесса. При реагировании на активированное действие Адаптивная карточка завершается последовательный рабочий процесс.

    При получении адаптивной карточки она предоставляет одну или несколько кнопок в карточке для ввода данных. Вы также можете вызвать API, а затем отправить другую адаптивную карточку в беседе в ответ на действие карточки.

    В этом руководстве вы узнаете:
      * Создание бота рабочего процесса с помощью набора средств Teams.
      * Сведения о структуре каталогов приложения.
      * Настройте установку бота с помощью ответа адаптивной карточки.

    Вы увидите следующие выходные данные:


    :::image type="content" source="./assets/images/sbs-workflow-bot/sbs-workflow-bot-final-output.png" alt-text="Выходные данные бота рабочего процесса.":::
- title: Предварительные требования
  durationInMinutes: 1
  content: "Ниже приведен список средств, необходимых для создания и развертывания приложений.\n\n| &nbsp; | Установка | Для использования |\n| --- | --- | --- |\n| **Required** | &nbsp; | &nbsp; |\n| &nbsp; | [Visual Studio Code](https://code.visualstudio.com/download) | JavaScript или TypeScript— среды сборки. Используйте последнюю версию. |\n| &nbsp; | [Набор средств Teams](#install-the-teams-toolkit) | Расширение Microsoft Visual Studio Code, которое создает шаблон проекта для вашего приложения. Используйте версию 4.0.0.|\n| &nbsp; | [Node.js](https://nodejs.org/en/download/) | Серверной среды выполнения JavaScript. Используйте версию 14 или 16.|\n| &nbsp; | [Microsoft Teams](https://www.microsoft.com/microsoft-teams/download-app) | Microsoft Teams для совместной работы со всеми, с кем вы работаете, с помощью приложений для чата, собраний, звонков и всех в одном месте.|\n| &nbsp; | [Microsoft&nbsp; Edge](https://www.microsoft.com/edge) (рекомендуется) или [Google Chrome](https://www.google.com/chrome/) | Браузера со средствами разработчика. |\n| &nbsp; | [Учетная запись разработчика Microsoft 365](/microsoftteams/platform/concepts/build-and-test/prepare-your-o365-tenant) | Доступ к учетной записи Teams с соответствующими разрешениями для установки приложения. |\n> [!NOTE]\n> Руководство протестировано в Teams Toolkit версии 4.0.0 и Nodejs версии 14 и 16. Действия, описанные в этом руководстве, могут работать с другими версиями, но не были протестированы.\n\n## <a name=\"prepare-development-environment\"></a>Подготовка среды разработки\nПосле установки необходимых средств настройте среду разработки.\n\n### <a name=\"install-the-teams-toolkit\"></a>Установка набора средств Teams\nНабор средств Teams помогает упростить процесс разработки с помощью инструментов для подготовки и развертывания облачных ресурсов для приложения, публикации в магазине Teams и многого другого. \n\nНабор средств можно использовать с Visual Studio Code или CLI (интерфейс командной строки) с именем `TeamsFx`.\n\n# <a name=\"visual-studio-code\"></a>[Visual Studio Code](#tab/vscode)\n\n1. Откройте Visual Studio Code и выберите **Расширения** (**CTRL+SHIFT+X️** / **⇧-X** или **Просмотреть расширения >**).\n1. В поле поиска введите **Набор средств Teams**.\n1. Выберите **Установить** рядом с набором средств Teams.\n   :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/teams-toolkit.png\" alt-text=\"На рисунке показана установка расширения Teams Toolkit.\":::\n\nНа рисунке набора средств Teams :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/hw-teams-toolkit-sidebar-icon.png\" alt-text=\"отображается значок набора средств Teams в Visual Studio Code боковой панели.\"::: после установки отображается на боковой панели Visual Studio Code.\n    \nНабор средств Teams также можно найти в [Visual Studio Code Marketplace](https://marketplace.visualstudio.com/items?itemName=TeamsDevApp.ms-teams-vscode-extension).\n\n# <a name=\"command-line\"></a>[Командная строка](#tab/cli)\nЧтобы установить Интерфейс командной строки TeamsFx, используйте `npm` диспетчер пакетов:\n``` bash\nnpm install -g @microsoft/teamsfx-cli\n```\nВ зависимости от конфигурации может потребоваться использовать `sudo` для установки интерфейса командной строки:\n``` bash\nsudo npm install -g --unsafe-perm @microsoft/teamsfx-cli\n```\nЭто чаще встречается в системах Linux и macOS.\nУбедитесь, что вы добавили глобальный кэш npm в PATH. Этот шаг обычно выполняется в рамках установщика Node.js.  \nС командой можно использовать cli `teamsfx` . Убедитесь, что команда работает, выполнив команду `teamsfx -h`.\n\n> [!NOTE]\n> Перед запуском TeamsFx в терминалах PowerShell убедитесь, что вы включили политику **удаленного подписанного** выполнения для PowerShell.\n\n## <a name=\"set-up-your-teams-development-tenant\"></a>Настройка клиента разработки Teams\n**Клиент** похож на пространство или контейнер, где вы общаетесь, обмениваются файлами и выполняете собрания для своей организации в Teams. Вы также можете загрузить и протестировать приложение неопубликованным приложением.\n### <a name=\"check-for-sideloading-option\"></a>Проверка параметра загрузки неопубликованных приложений\nПосле создания приложения необходимо загрузить это приложение в Teams, не распространяя его. Это называется загрузкой неопубликованных приложений. Войдите в учетную запись Microsoft 365, чтобы просмотреть этот параметр.\n> [!NOTE]\n> Загрузка неопубликованных приложений необходима для предварительного просмотра и тестирования приложений в локальной среде Teams. Включите загрузку неопубликованных приложений для предварительного просмотра и тестирования приложения в Teams локально.\n\nУ вас уже есть клиент и есть ли у вас доступ администратора? Давайте проверим, действительно ли вы делаете!\nЧтобы проверить загрузку неопубликованных приложений в Teams, выполните приведенные далее действия.\n1. В клиенте Teams выберите **Store** .\n1. Выберите **Управление приложениями**\n1. Выберите **Опубликовать приложение**.\n1. Найдите параметр **Отправить пользовательское приложение**. Если параметр отображается, загрузка неопубликованных приложений включена.\n    :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/upload-custom-app.png\" alt-text=\"На рисунке показан параметр для отправки пользовательского приложения в Teams.\":::\n    > [!NOTE]\n    > Если у вас нет возможности отправить пользовательское приложение, обратитесь к администратору Teams.\n### <a name=\"create-a-free-teams-developer-tenant-optional\"></a>Создание бесплатного клиента разработчика Teams (необязательно)\nЕсли у вас нет учетной записи разработчика Teams, ее можно получить бесплатно. Присоединяйтесь к программе для разработчиков Microsoft 365!\n1. Перейдите в [программу для разработчиков Microsoft 365](https://developer.microsoft.com/microsoft-365/dev-program).\n1. Выберите **Присоединиться** и следуйте инструкциям на экране.\n1. Выберите **Настройка подписки E5** на экране приветствия.\n1. Настройка учетной записи администратора. После завершения отобразится следующий экран.\n   :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/microsoft-365.png\" alt-text=\"Корпорация Майкрософт\":::\n1. Войдите в Teams с помощью новой учетной записи администратора. Теперь у вас должен быть параметр **Отправить пользовательское приложение** .\n"
- title: Создание бота рабочего процесса
  durationInMinutes: 5
  content: "Чтобы создать бот рабочего процесса с помощью Visual Studio Code, выполните следующие действия.\n1. Откройте Visual Studio Code.\n1. Щелкните значок **Набора средств** :::image type=\"icon\" source=\"../msteams-platform/assets/images/teams-toolkit-v2/teams-toolkit-sidebar-icon.png\"::: Teams на боковой панели Visual Studio Code.\n1. Выберите **Создать приложение Teams** .\n  \n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-create.png\" alt-text=\"создайте приложение Teams на боковой панели.\":::\n\n1. Выберите **Пункт Создать приложение Teams** , чтобы создать приложение с помощью набора средств Teams.\n\n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-teams-app.png\" alt-text=\" Выберите параметр Создать новое приложение Teams.\":::\n\n1. В разделе **Приложения Teams на основе сценариев** выберите **Бот рабочего процесса** в качестве возможности, которую вы хотите создать в приложении.\n\n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-capabilities-workflow.png\" alt-text=\" выберите параметр Рабочий поток бота для возможностей\" lightbox=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-capabilities-workflow.png\":::\n\n1. Выберите **TypeScript** в качестве языка программирования.\n\n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-program-lang.png\" alt-text=\" Сценарий типа параметра select для языка программирования\":::\n\n1. Выберите **Папка по умолчанию** , чтобы сохранить корневую папку проекта в расположении по умолчанию.\n  \n    > [!NOTE]\n    > Вы также можете изменить расположение по умолчанию, выбрав **Обзор...**\n    \n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-workspace-folder.png\" alt-text=\" Выберите, чтобы добавить папку рабочей области\":::\n   \n1. Введите подходящее имя для приложения, например бот рабочего процесса в качестве имени приложения.\n    > [!NOTE]\n    > Убедитесь, что в имени приложения используются только буквенно-цифровые символы.\n    \n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-app-name.png\" alt-text=\"Введите имя приложения\":::\n\n1. Выберите **ВВОД**.\n    \n1. Бот рабочего процесса будет создан через несколько секунд, и вы увидите шаблон.\n    \n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-scaffolding1.png\" alt-text=\"приложение создается с шаблонами, отображаемыми на боковой панели\":::\n\n1. Выберите значок **Запуск и отладка** :::image type=\"icon\" source=\"../msteams-platform/assets/images/teams-toolkit-v2/run-debug-icon.png\"::: на боковой панели Visual Studio Code.\n\n1. Выберите **Отладка (Edge)** или **Отладка (Chrome)** в раскрывающемся списке.\n\n   :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-local-debug1.png\" alt-text=\"приложение создается с шаблонами, отображаемыми на боковой панели\":::    \n\n1. Выберите **Начать отладку**.\n\n1. Нажмите **Добавить**.\n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-add-app.png\" alt-text=\"Выберите добавить, чтобы добавить приложение бота рабочего процесса\":::\n### <a name=\"take-tour-of-source-code\"></a>Обзор исходного кода\nНабор средств Teams предоставляет компоненты для создания приложения. После создания проекта можно просмотреть папки и файлы проекта в области обозревателя Visual Studio Code для JavaScript/TypeScript. \n\n:::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-scaffolding2.png\" alt-text=\"Выберите добавить, чтобы добавить приложение бота рабочего процесса\":::\n\n\nСозданный бот — это обычный проект TeamsFx, содержащий следующие папки:\n\n| Folder | Контентная |\n|   ---  |   ---   |\n|`.fx`   | Параметры уровня проекта, конфигурации и сведения о среде.|\n|`.vscode`| Visual Studio Code файлы для локальной отладки |\n|`bot`   | Исходный код приложения Teams бота рабочего процесса.|\n|`templates`| Шаблоны для манифеста приложения Teams и для подготовки ресурсов Azure.|\n\nОсновная реализация бота Teams находится в папке `bot/` . Следующие файлы в `bot/` папке предоставляют бизнес-логику для бота рабочего процесса.\nЭти файлы можно обновить в соответствии с требованиями бизнес-логики. Реализация по умолчанию предоставляет отправную точку для начала работы:\n\n| Folder | Контентная |\n|   ---  |   ---   |\n|`src/index.js(ts)` | Точка входа приложения и `restify` обработчики для бота рабочего процесса.|\n|`src/adaptiveCards/helloworldCommand.json` | Созданная адаптивная карточка, которая отправляется в Teams. |\n|`src/commands/helloworldCommandHandler.js(ts)` | Отвечает на сообщение команды.|\n|`src/cardActions/doStuffActionHandler.js(ts)` | Отвечает на действие карточки `doStuff` .|\n|`src/cardModels.js(ts)` | Модель данных адаптивной карточки по умолчанию.|\n\nВ следующем файле реализуется основной бот рабочего процесса в Bot Framework. Обычно вам не нужно настраивать этот файл:\n\n| Файл или папка | Контентная |\n|   ---  |   ---   |\n| `src/internal/initialize.js(ts)`| Инициализация приложений и обработка сообщений ботом.|\n\nСледующие файлы являются файлами, связанными с проектом. Обычно настраивать эти файлы не требуется:\n\n| Файл или папка | Контентная |\n|   ---  |   ---   |\n| `.gitignore` | Файл игнорирования Git|\n| `package.json` | Файл пакета NPM|\n"
- title: Взаимодействие с ботом рабочего процесса
  durationInMinutes: 2
  content: "Вы можете взаимодействовать с ботом в Teams, отправив команду helloWorld. После запуска этого шаблона вы получите ответ, а затем выберите **бот рабочего процесса** и **ввод**.\n :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-action-response.png\" alt-text=\"Выберите добавить, чтобы добавить приложение бота рабочего процесса\":::\n\nВы получите следующий ответ команды в адаптивной карточке: :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-debug-output1.png\" alt-text=\"выберите добавить, чтобы добавить приложение бота рабочего процесса\":::.\n\nЗатем можно нажать кнопку **DoStuff**, чтобы вызвать действие, которое отвечает следующей обновленной адаптивной карточкой: :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-debug-output2.png\" alt-text=\"выберите добавить, чтобы добавить приложение бота рабочего процесса\":::.\n   \n"
- title: Выполнение задачи
  durationInMinutes: 1
  content: >
    Ты придумала что-то вроде этого?


    :::image type="content" source="./assets/images/sbs-workflow-bot/sbs-workflow-bot-debug-output2.png" alt-text="Выберите добавить, чтобы добавить приложение бота рабочего процесса":::
- content: Вы завершили учебник, чтобы приступить к работе с ботом рабочего процесса для Microsoft Teams.
